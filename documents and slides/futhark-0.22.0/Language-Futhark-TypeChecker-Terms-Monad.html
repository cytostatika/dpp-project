<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Language.Futhark.TypeChecker.Terms.Monad</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">futhark-0.22.0: An optimising compiler for a functional, array-oriented language.</span><ul class="links" id="page-menu"><li><a href="src/Language.Futhark.TypeChecker.Terms.Monad.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Language.Futhark.TypeChecker.Terms.Monad</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Primitive checking</a></li><li><a href="#g:2">Sizes</a></li><li><a href="#g:3">Control flow</a></li><li><a href="#g:4">Consumption and uniqueness</a></li><li><a href="#g:5">Errors</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Facilities for type-checking terms.  Factored out of
 <a href="Language-Futhark-TypeChecker-Terms.html">Language.Futhark.TypeChecker.Terms</a> to prevent the module from
 being gigantic.</p><p>Incidentally also a nice place to put Haddock comments to make the
 internal API of the type checker easier to browse.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:TermTypeM">TermTypeM</a> a</li><li class="src short"><a href="#v:runTermTypeM">runTermTypeM</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeM" title="Language.Futhark.TypeChecker.Monad">TypeM</a> (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a>)</li><li class="src short"><a href="#v:liftTypeM">liftTypeM</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeM" title="Language.Futhark.TypeChecker.Monad">TypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:ValBinding">ValBinding</a><ul class="subs"><li>= <a href="#v:BoundV">BoundV</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Locality" title="Language.Futhark.TypeChecker.Terms.Monad">Locality</a> [<a href="Language-Futhark.html#t:TypeParam" title="Language.Futhark">TypeParam</a>] <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></li><li>| <a href="#v:OverloadedF">OverloadedF</a> [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] [Maybe <a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] (Maybe <a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>)</li><li>| <a href="#v:EqualityF">EqualityF</a></li><li>| <a href="#v:WasConsumed">WasConsumed</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Locality">Locality</a><ul class="subs"><li>= <a href="#v:Local">Local</a></li><li>| <a href="#v:Global">Global</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:SizeSource">SizeSource</a><ul class="subs"><li>= <a href="#v:SourceArg">SourceArg</a> FName (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</li><li>| <a href="#v:SourceBound">SourceBound</a> (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</li><li>| <a href="#v:SourceSlice">SourceSlice</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) (Maybe (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) (Maybe (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) (Maybe (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>))</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:NameReason">NameReason</a> = <a href="#v:NameAppRes">NameAppRes</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:InferredType">InferredType</a><ul class="subs"><li>= <a href="#v:NoneInferred">NoneInferred</a></li><li>| <a href="#v:Ascribed">Ascribed</a> <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Checking">Checking</a><ul class="subs"><li>= <a href="#v:CheckingApply">CheckingApply</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:CheckingReturn">CheckingReturn</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:CheckingAscription">CheckingAscription</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:CheckingLetGeneralise">CheckingLetGeneralise</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a></li><li>| <a href="#v:CheckingParams">CheckingParams</a> (Maybe <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a>)</li><li>| <a href="#v:CheckingPat">CheckingPat</a> <a href="Language-Futhark-Prop.html#t:UncheckedPat" title="Language.Futhark.Prop">UncheckedPat</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:InferredType" title="Language.Futhark.TypeChecker.Terms.Monad">InferredType</a></li><li>| <a href="#v:CheckingLoopBody">CheckingLoopBody</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:CheckingLoopInitial">CheckingLoopInitial</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:CheckingRecordUpdate">CheckingRecordUpdate</a> [<a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a>] <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:CheckingRequired">CheckingRequired</a> [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>] <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:CheckingBranches">CheckingBranches</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li></ul></li><li class="src short"><a href="#v:withEnv">withEnv</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> -&gt; <a href="Language-Futhark-Semantic.html#t:Env" title="Language.Futhark.Semantic">Env</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a></li><li class="src short"><a href="#v:localScope">localScope</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a>) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:TermEnv">TermEnv</a> = <a href="#v:TermEnv">TermEnv</a> {<ul class="subs"><li><a href="#v:termScope">termScope</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a></li><li><a href="#v:termChecking">termChecking</a> :: Maybe <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a></li><li><a href="#v:termLevel">termLevel</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TermScope">TermScope</a> = <a href="#v:TermScope">TermScope</a> {<ul class="subs"><li><a href="#v:scopeVtable">scopeVtable</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:ValBinding" title="Language.Futhark.TypeChecker.Terms.Monad">ValBinding</a></li><li><a href="#v:scopeTypeTable">scopeTypeTable</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-Semantic.html#t:TypeBinding" title="Language.Futhark.Semantic">TypeBinding</a></li><li><a href="#v:scopeModTable">scopeModTable</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-Semantic.html#t:Mod" title="Language.Futhark.Semantic">Mod</a></li><li><a href="#v:scopeNameMap">scopeNameMap</a> :: <a href="Language-Futhark-Semantic.html#t:NameMap" title="Language.Futhark.Semantic">NameMap</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:TermTypeState">TermTypeState</a> = <a href="#v:TermTypeState">TermTypeState</a> {<ul class="subs"><li><a href="#v:stateConstraints">stateConstraints</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a></li><li><a href="#v:stateCounter">stateCounter</a> :: !Int</li><li><a href="#v:stateDimTable">stateDimTable</a> :: Map <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li><a href="#v:stateNames">stateNames</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:NameReason" title="Language.Futhark.TypeChecker.Terms.Monad">NameReason</a></li><li><a href="#v:stateOccs">stateOccs</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a></li></ul>}</li><li class="src short"><a href="#v:onFailure">onFailure</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:extSize">extSize</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, Maybe <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</li><li class="src short"><a href="#v:expType">expType</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></li><li class="src short"><a href="#v:expTypeFully">expTypeFully</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></li><li class="src short"><a href="#v:constrain">constrain</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</li><li class="src short"><a href="#v:newArrayType">newArrayType</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>, <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>)</li><li class="src short"><a href="#v:allDimsFreshInType">allDimsFreshInType</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als, Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>))</li><li class="src short"><a href="#v:updateTypes">updateTypes</a> :: <a href="Language-Futhark-Traversals.html#t:ASTMappable" title="Language.Futhark.Traversals">ASTMappable</a> e =&gt; e -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> e</li><li class="src short"><a href="#v:unifies">unifies</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a></li><li class="src short"><a href="#v:require">require</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a></li><li class="src short"><a href="#v:checkTypeExpNonrigid">checkTypeExpNonrigid</a> :: <a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>])</li><li class="src short"><a href="#v:checkTypeExpRigid">checkTypeExpRigid</a> :: <a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>])</li><li class="src short"><a href="#v:isInt64">isInt64</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; Maybe <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a></li><li class="src short"><a href="#v:maybeDimFromExp">maybeDimFromExp</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</li><li class="src short"><a href="#v:dimFromExp">dimFromExp</a> :: (<a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a>) -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, Maybe <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</li><li class="src short"><a href="#v:dimFromArg">dimFromArg</a> :: Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, Maybe <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</li><li class="src short"><a href="#v:noSizeEscape">noSizeEscape</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:collectOccurrences">collectOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a>)</li><li class="src short"><a href="#v:tapOccurrences">tapOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a>)</li><li class="src short"><a href="#v:alternative">alternative</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (a, b)</li><li class="src short"><a href="#v:sequentially">sequentially</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; (a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b</li><li class="src short"><a href="#v:incLevel">incLevel</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Names">Names</a> = Set <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Occurrence">Occurrence</a> = <a href="#v:Occurrence">Occurrence</a> {<ul class="subs"><li><a href="#v:observed">observed</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a></li><li><a href="#v:consumed">consumed</a> :: Maybe <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a></li><li><a href="#v:location">location</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Occurrences">Occurrences</a> = [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a>]</li><li class="src short"><a href="#v:onlySelfAliasing">onlySelfAliasing</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:noUnique">noUnique</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:removeSeminullOccurrences">removeSeminullOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:occur">occur</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</li><li class="src short"><a href="#v:observe">observe</a> :: <a href="Language-Futhark.html#t:Ident" title="Language.Futhark">Ident</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</li><li class="src short"><a href="#v:consume">consume</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</li><li class="src short"><a href="#v:consuming">consuming</a> :: <a href="Language-Futhark.html#t:Ident" title="Language.Futhark">Ident</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:observation">observation</a> :: <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a></li><li class="src short"><a href="#v:consumption">consumption</a> :: <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a></li><li class="src short"><a href="#v:checkIfConsumable">checkIfConsumable</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</li><li class="src short"><a href="#v:seqOccurrences">seqOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a></li><li class="src short"><a href="#v:checkOccurrences">checkOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</li><li class="src short"><a href="#v:allConsumed">allConsumed</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a></li><li class="src short"><a href="#v:useAfterConsume">useAfterConsume</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:unusedSize">unusedSize</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:MonadTypeChecker" title="Language.Futhark.TypeChecker.Monad">MonadTypeChecker</a> m =&gt; <a href="Language-Futhark-Syntax.html#t:SizeBinder" title="Language.Futhark.Syntax">SizeBinder</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; m a</li><li class="src short"><a href="#v:notConsumable">notConsumable</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:MonadTypeChecker" title="Language.Futhark.TypeChecker.Monad">MonadTypeChecker</a> m =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; m b</li><li class="src short"><a href="#v:unexpectedType">unexpectedType</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:MonadTypeChecker" title="Language.Futhark.TypeChecker.Monad">MonadTypeChecker</a> m =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>] -&gt; m a</li><li class="src short"><a href="#v:uniqueReturnAliased">uniqueReturnAliased</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:returnAliased">returnAliased</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</li><li class="src short"><a href="#v:badLetWithValue">badLetWithValue</a> :: (<a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> arr, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> src) =&gt; arr -&gt; src -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</li><li class="src short"><a href="#v:anyConsumption">anyConsumption</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; Maybe <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a></li><li class="src short"><a href="#v:allOccurring">allOccurring</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TermTypeM" class="def">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#TermTypeM" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></p><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TermTypeM">Instances</h4><details id="i:TermTypeM" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:Monad:1"></span> <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-457" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:Monad:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; (a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:Functor:2"></span> <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Functor" title="Control.Monad.Compat">Functor</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-458" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:Applicative:3"></span> Applicative <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-459" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:Applicative:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (a -&gt; b) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b</p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> c</p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b</p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:MonadTypeChecker:4"></span> <a href="Language-Futhark-TypeChecker-Monad.html#t:MonadTypeChecker" title="Language.Futhark.TypeChecker.Monad">MonadTypeChecker</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-604" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:MonadTypeChecker:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:warn">warn</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Monad.html#warn" class="link">Source</a> <a href="#v:warn" class="selflink">#</a></p><p class="src"><a href="#v:newName">newName</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Language.Futhark.TypeChecker.Monad.html#newName" class="link">Source</a> <a href="#v:newName" class="selflink">#</a></p><p class="src"><a href="#v:newID">newID</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Language.Futhark.TypeChecker.Monad.html#newID" class="link">Source</a> <a href="#v:newID" class="selflink">#</a></p><p class="src"><a href="#v:newTypeName">newTypeName</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Language.Futhark.TypeChecker.Monad.html#newTypeName" class="link">Source</a> <a href="#v:newTypeName" class="selflink">#</a></p><p class="src"><a href="#v:bindNameMap">bindNameMap</a> :: <a href="Language-Futhark-Semantic.html#t:NameMap" title="Language.Futhark.Semantic">NameMap</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Monad.html#bindNameMap" class="link">Source</a> <a href="#v:bindNameMap" class="selflink">#</a></p><p class="src"><a href="#v:bindVal">bindVal</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Language-Futhark-Semantic.html#t:BoundV" title="Language.Futhark.Semantic">BoundV</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Monad.html#bindVal" class="link">Source</a> <a href="#v:bindVal" class="selflink">#</a></p><p class="src"><a href="#v:checkQualName">checkQualName</a> :: <a href="Language-Futhark-Semantic.html#t:Namespace" title="Language.Futhark.Semantic">Namespace</a> -&gt; <a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) <a href="src/Language.Futhark.TypeChecker.Monad.html#checkQualName" class="link">Source</a> <a href="#v:checkQualName" class="selflink">#</a></p><p class="src"><a href="#v:lookupType">lookupType</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, [<a href="Language-Futhark.html#t:TypeParam" title="Language.Futhark">TypeParam</a>], <a href="Language-Futhark-Syntax.html#t:StructRetType" title="Language.Futhark.Syntax">StructRetType</a>, <a href="Language-Futhark-Syntax.html#t:Liftedness" title="Language.Futhark.Syntax">Liftedness</a>) <a href="src/Language.Futhark.TypeChecker.Monad.html#lookupType" class="link">Source</a> <a href="#v:lookupType" class="selflink">#</a></p><p class="src"><a href="#v:lookupMod">lookupMod</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Language-Futhark-Semantic.html#t:Mod" title="Language.Futhark.Semantic">Mod</a>) <a href="src/Language.Futhark.TypeChecker.Monad.html#lookupMod" class="link">Source</a> <a href="#v:lookupMod" class="selflink">#</a></p><p class="src"><a href="#v:lookupVar">lookupVar</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a>) <a href="src/Language.Futhark.TypeChecker.Monad.html#lookupVar" class="link">Source</a> <a href="#v:lookupVar" class="selflink">#</a></p><p class="src"><a href="#v:checkNamedDim">checkNamedDim</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) <a href="src/Language.Futhark.TypeChecker.Monad.html#checkNamedDim" class="link">Source</a> <a href="#v:checkNamedDim" class="selflink">#</a></p><p class="src"><a href="#v:typeError">typeError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Monad.html#typeError" class="link">Source</a> <a href="#v:typeError" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:MonadUnify:5"></span> <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-479" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:MonadUnify:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getConstraints">getConstraints</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#getConstraints" class="link">Source</a> <a href="#v:getConstraints" class="selflink">#</a></p><p class="src"><a href="#v:putConstraints">putConstraints</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Unify.html#putConstraints" class="link">Source</a> <a href="#v:putConstraints" class="selflink">#</a></p><p class="src"><a href="#v:modifyConstraints">modifyConstraints</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a>) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Unify.html#modifyConstraints" class="link">Source</a> <a href="#v:modifyConstraints" class="selflink">#</a></p><p class="src"><a href="#v:newTypeVar">newTypeVar</a> :: <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> als =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim als) <a href="src/Language.Futhark.TypeChecker.Unify.html#newTypeVar" class="link">Source</a> <a href="#v:newTypeVar" class="selflink">#</a></p><p class="src"><a href="#v:newDimVar">newDimVar</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#newDimVar" class="link">Source</a> <a href="#v:newDimVar" class="selflink">#</a></p><p class="src"><a href="#v:curLevel">curLevel</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#curLevel" class="link">Source</a> <a href="#v:curLevel" class="selflink">#</a></p><p class="src"><a href="#v:matchError">matchError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Unify.html#matchError" class="link">Source</a> <a href="#v:matchError" class="selflink">#</a></p><p class="src"><a href="#v:unifyError">unifyError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Unify.html#unifyError" class="link">Source</a> <a href="#v:unifyError" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:MonadError:6"></span> MonadError <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeError" title="Language.Futhark.TypeChecker.Monad">TypeError</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-462" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:MonadError:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwError">throwError</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeError" title="Language.Futhark.TypeChecker.Monad">TypeError</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="#v:throwError" class="selflink">#</a></p><p class="src"><a href="#v:catchError">catchError</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; (<a href="Language-Futhark-TypeChecker-Monad.html#t:TypeError" title="Language.Futhark.TypeChecker.Monad">TypeError</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:MonadReader:7"></span> MonadReader <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-460" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:MonadReader:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ask">ask</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a></p><p class="src"><a href="#v:local">local</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a>) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p><p class="src"><a href="#v:reader">reader</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> -&gt; a) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeM:MonadState:8"></span> MonadState <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-461" class="link">Source</a> <a href="#t:TermTypeM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeM:MonadState:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:get">get</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a></p><p class="src"><a href="#v:put">put</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</p><p class="src"><a href="#v:state">state</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a> -&gt; (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a>)) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:runTermTypeM" class="def">runTermTypeM</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeM" title="Language.Futhark.TypeChecker.Monad">TypeM</a> (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#runTermTypeM" class="link">Source</a> <a href="#v:runTermTypeM" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:liftTypeM" class="def">liftTypeM</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeM" title="Language.Futhark.TypeChecker.Monad">TypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#liftTypeM" class="link">Source</a> <a href="#v:liftTypeM" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ValBinding" class="def">ValBinding</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#ValBinding" class="link">Source</a> <a href="#t:ValBinding" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:BoundV" class="def">BoundV</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Locality" title="Language.Futhark.TypeChecker.Terms.Monad">Locality</a> [<a href="Language-Futhark.html#t:TypeParam" title="Language.Futhark">TypeParam</a>] <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></td><td class="doc"><p>Aliases in parameters indicate the lexical
 closure.</p></td></tr><tr><td class="src"><a id="v:OverloadedF" class="def">OverloadedF</a> [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] [Maybe <a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] (Maybe <a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:EqualityF" class="def">EqualityF</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:WasConsumed" class="def">WasConsumed</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ValBinding">Instances</h4><details id="i:ValBinding" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValBinding:Show:1"></span> Show <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:ValBinding" title="Language.Futhark.TypeChecker.Terms.Monad">ValBinding</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-224" class="link">Source</a> <a href="#t:ValBinding" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValBinding:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:ValBinding" title="Language.Futhark.TypeChecker.Terms.Monad">ValBinding</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:ValBinding" title="Language.Futhark.TypeChecker.Terms.Monad">ValBinding</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:ValBinding" title="Language.Futhark.TypeChecker.Terms.Monad">ValBinding</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Locality" class="def">Locality</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#Locality" class="link">Source</a> <a href="#t:Locality" class="selflink">#</a></p><div class="doc"><p>Whether something is a global or a local variable.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Local" class="def">Local</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Global" class="def">Global</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Locality">Instances</h4><details id="i:Locality" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Locality:Show:1"></span> Show <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Locality" title="Language.Futhark.TypeChecker.Terms.Monad">Locality</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-215" class="link">Source</a> <a href="#t:Locality" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Locality:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Locality" title="Language.Futhark.TypeChecker.Terms.Monad">Locality</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Locality" title="Language.Futhark.TypeChecker.Terms.Monad">Locality</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Locality" title="Language.Futhark.TypeChecker.Terms.Monad">Locality</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SizeSource" class="def">SizeSource</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#SizeSource" class="link">Source</a> <a href="#t:SizeSource" class="selflink">#</a></p><div class="doc"><p>What was the source of some existential size?  This is used for
 using the same existential variable if the same source is
 encountered in multiple locations.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SourceArg" class="def">SourceArg</a> FName (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SourceBound" class="def">SourceBound</a> (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SourceSlice" class="def">SourceSlice</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) (Maybe (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) (Maybe (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) (Maybe (<a href="Language-Futhark-Syntax.html#t:ExpBase" title="Language.Futhark.Syntax">ExpBase</a> <a href="Language-Futhark-Syntax.html#t:NoInfo" title="Language.Futhark.Syntax">NoInfo</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:SizeSource">Instances</h4><details id="i:SizeSource" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SizeSource:Eq:1"></span> Eq <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-423" class="link">Source</a> <a href="#t:SizeSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SizeSource:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SizeSource:Ord:2"></span> Ord <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-423" class="link">Source</a> <a href="#t:SizeSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SizeSource:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; Ordering</p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; Bool</p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; Bool</p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; Bool</p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; Bool</p><p class="src"><a href="#v:max">max</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:SizeSource:Show:3"></span> Show <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-423" class="link">Source</a> <a href="#t:SizeSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:SizeSource:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NameReason" class="def">NameReason</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#NameReason" class="link">Source</a> <a href="#t:NameReason" class="selflink">#</a></p><div class="doc"><p>A description of where an artificial compiler-generated
 intermediate name came from.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NameAppRes" class="def">NameAppRes</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></td><td class="doc"><p>Name is the result of a function application.</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:InferredType" class="def">InferredType</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#InferredType" class="link">Source</a> <a href="#t:InferredType" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NoneInferred" class="def">NoneInferred</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Ascribed" class="def">Ascribed</a> <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Checking" class="def">Checking</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#Checking" class="link">Source</a> <a href="#t:Checking" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CheckingApply" class="def">CheckingApply</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingReturn" class="def">CheckingReturn</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingAscription" class="def">CheckingAscription</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingLetGeneralise" class="def">CheckingLetGeneralise</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingParams" class="def">CheckingParams</a> (Maybe <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingPat" class="def">CheckingPat</a> <a href="Language-Futhark-Prop.html#t:UncheckedPat" title="Language.Futhark.Prop">UncheckedPat</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:InferredType" title="Language.Futhark.TypeChecker.Terms.Monad">InferredType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingLoopBody" class="def">CheckingLoopBody</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingLoopInitial" class="def">CheckingLoopInitial</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingRecordUpdate" class="def">CheckingRecordUpdate</a> [<a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a>] <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingRequired" class="def">CheckingRequired</a> [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>] <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CheckingBranches" class="def">CheckingBranches</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Checking">Instances</h4><details id="i:Checking" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Checking:Pretty:1"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-302" class="link">Source</a> <a href="#t:Checking" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Checking:Pretty:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:withEnv" class="def">withEnv</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> -&gt; <a href="Language-Futhark-Semantic.html#t:Env" title="Language.Futhark.Semantic">Env</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#withEnv" class="link">Source</a> <a href="#v:withEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:localScope" class="def">localScope</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a>) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#localScope" class="link">Source</a> <a href="#v:localScope" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TermEnv" class="def">TermEnv</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#TermEnv" class="link">Source</a> <a href="#t:TermEnv" class="selflink">#</a></p><div class="doc"><p>Type checking happens with access to this environment.  The
 <code><a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a></code> will be extended during type-checking as bindings come into
 scope.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TermEnv" class="def">TermEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:termScope" class="def">termScope</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:termChecking" class="def">termChecking</a> :: Maybe <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:termLevel" class="def">termLevel</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TermEnv">Instances</h4><details id="i:TermEnv" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermEnv:MonadReader:1"></span> MonadReader <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-460" class="link">Source</a> <a href="#t:TermEnv" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermEnv:MonadReader:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ask">ask</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a></p><p class="src"><a href="#v:local">local</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a>) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p><p class="src"><a href="#v:reader">reader</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermEnv" title="Language.Futhark.TypeChecker.Terms.Monad">TermEnv</a> -&gt; a) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TermScope" class="def">TermScope</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#TermScope" class="link">Source</a> <a href="#t:TermScope" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TermScope" class="def">TermScope</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:scopeVtable" class="def">scopeVtable</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:ValBinding" title="Language.Futhark.TypeChecker.Terms.Monad">ValBinding</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:scopeTypeTable" class="def">scopeTypeTable</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-Semantic.html#t:TypeBinding" title="Language.Futhark.Semantic">TypeBinding</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:scopeModTable" class="def">scopeModTable</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-Semantic.html#t:Mod" title="Language.Futhark.Semantic">Mod</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:scopeNameMap" class="def">scopeNameMap</a> :: <a href="Language-Futhark-Semantic.html#t:NameMap" title="Language.Futhark.Semantic">NameMap</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TermScope">Instances</h4><details id="i:TermScope" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermScope:Show:1"></span> Show <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-378" class="link">Source</a> <a href="#t:TermScope" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermScope:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermScope:Semigroup:2"></span> <a href="../base-compat-0.11.2/Data-Semigroup-Compat.html#t:Semigroup" title="Data.Semigroup.Compat">Semigroup</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-380" class="link">Source</a> <a href="#t:TermScope" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermScope:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-compat-0.11.2/Data-List-NonEmpty-Compat.html#t:NonEmpty" title="Data.List.NonEmpty.Compat">NonEmpty</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: Integral b =&gt; b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermScope" title="Language.Futhark.TypeChecker.Terms.Monad">TermScope</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TermTypeState" class="def">TermTypeState</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#TermTypeState" class="link">Source</a> <a href="#t:TermTypeState" class="selflink">#</a></p><div class="doc"><p>The state is a set of constraints and a counter for generating
 type names.  This is distinct from the usual counter we use for
 generating unique names, as these will be user-visible.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:TermTypeState" class="def">TermTypeState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:stateConstraints" class="def">stateConstraints</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:stateCounter" class="def">stateCounter</a> :: !Int</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:stateDimTable" class="def">stateDimTable</a> :: Map <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></dfn><div class="doc"><p>Mapping function arguments encountered to
 the sizes they ended up generating (when
 they could not be substituted directly).
 This happens for function arguments that are
 not constants or names.</p></div></li><li><dfn class="src"><a id="v:stateNames" class="def">stateNames</a> :: Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:NameReason" title="Language.Futhark.TypeChecker.Terms.Monad">NameReason</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:stateOccs" class="def">stateOccs</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TermTypeState">Instances</h4><details id="i:TermTypeState" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TermTypeState:MonadState:1"></span> MonadState <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-461" class="link">Source</a> <a href="#t:TermTypeState" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TermTypeState:MonadState:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:get">get</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a></p><p class="src"><a href="#v:put">put</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> ()</p><p class="src"><a href="#v:state">state</a> :: (<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a> -&gt; (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeState" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeState</a>)) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:onFailure" class="def">onFailure</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Checking" title="Language.Futhark.TypeChecker.Terms.Monad">Checking</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#onFailure" class="link">Source</a> <a href="#v:onFailure" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extSize" class="def">extSize</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, Maybe <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#extSize" class="link">Source</a> <a href="#v:extSize" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:expType" class="def">expType</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#expType" class="link">Source</a> <a href="#v:expType" class="selflink">#</a></p><div class="doc"><p>Get the type of an expression, with top level type variables
 substituted.  Never call <code><a href="Language-Futhark-Prop.html#v:typeOf" title="Language.Futhark.Prop">typeOf</a></code> directly (except in a few
 carefully inspected locations)!</p></div></div><div class="top"><p class="src"><a id="v:expTypeFully" class="def">expTypeFully</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#expTypeFully" class="link">Source</a> <a href="#v:expTypeFully" class="selflink">#</a></p><div class="doc"><p>Get the type of an expression, with all type variables
 substituted.  Slower than <code><a href="Language-Futhark-TypeChecker-Terms-Monad.html#v:expType" title="Language.Futhark.TypeChecker.Terms.Monad">expType</a></code>, but sometimes necessary.
 Never call <code><a href="Language-Futhark-Prop.html#v:typeOf" title="Language.Futhark.Prop">typeOf</a></code> directly (except in a few carefully inspected
 locations)!</p></div></div><div class="top"><p class="src"><a id="v:constrain" class="def">constrain</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#constrain" class="link">Source</a> <a href="#v:constrain" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newArrayType" class="def">newArrayType</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>, <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#newArrayType" class="link">Source</a> <a href="#v:newArrayType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:allDimsFreshInType" class="def">allDimsFreshInType</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als, Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#allDimsFreshInType" class="link">Source</a> <a href="#v:allDimsFreshInType" class="selflink">#</a></p><div class="doc"><p>Replace *all* dimensions with distinct fresh size variables.</p></div></div><div class="top"><p class="src"><a id="v:updateTypes" class="def">updateTypes</a> :: <a href="Language-Futhark-Traversals.html#t:ASTMappable" title="Language.Futhark.Traversals">ASTMappable</a> e =&gt; e -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> e <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#updateTypes" class="link">Source</a> <a href="#v:updateTypes" class="selflink">#</a></p><div class="doc"><p>Replace all type variables with their concrete types.</p></div></div><a href="#g:1" id="g:1"><h1>Primitive checking</h1></a><div class="top"><p class="src"><a id="v:unifies" class="def">unifies</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#unifies" class="link">Source</a> <a href="#v:unifies" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:require" class="def">require</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#require" class="link">Source</a> <a href="#v:require" class="selflink">#</a></p><div class="doc"><p><code>require ts e</code> causes a <code><a href="Language-Futhark-TypeChecker-Monad.html#t:TypeError" title="Language.Futhark.TypeChecker.Monad">TypeError</a></code> if <code>expType e</code> is not one of
 the types in <code>ts</code>.  Otherwise, simply returns <code>e</code>.</p></div></div><div class="top"><p class="src"><a id="v:checkTypeExpNonrigid" class="def">checkTypeExpNonrigid</a> :: <a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>]) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#checkTypeExpNonrigid" class="link">Source</a> <a href="#v:checkTypeExpNonrigid" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkTypeExpRigid" class="def">checkTypeExpRigid</a> :: <a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeExp" title="Language.Futhark.Syntax">TypeExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>]) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#checkTypeExpRigid" class="link">Source</a> <a href="#v:checkTypeExpRigid" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Sizes</h1></a><div class="top"><p class="src"><a id="v:isInt64" class="def">isInt64</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; Maybe <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#isInt64" class="link">Source</a> <a href="#v:isInt64" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:maybeDimFromExp" class="def">maybeDimFromExp</a> :: <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#maybeDimFromExp" class="link">Source</a> <a href="#v:maybeDimFromExp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dimFromExp" class="def">dimFromExp</a> :: (<a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:SizeSource" title="Language.Futhark.TypeChecker.Terms.Monad">SizeSource</a>) -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, Maybe <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#dimFromExp" class="link">Source</a> <a href="#v:dimFromExp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dimFromArg" class="def">dimFromArg</a> :: Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) -&gt; <a href="Language-Futhark.html#t:Exp" title="Language.Futhark">Exp</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, Maybe <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#dimFromArg" class="link">Source</a> <a href="#v:dimFromArg" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:noSizeEscape" class="def">noSizeEscape</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#noSizeEscape" class="link">Source</a> <a href="#v:noSizeEscape" class="selflink">#</a></p><div class="doc"><p>Any argument sizes created with <code><a href="Language-Futhark-TypeChecker-Terms-Monad.html#v:extSize" title="Language.Futhark.TypeChecker.Terms.Monad">extSize</a></code> inside the given action
 will be removed once the action finishes.  This is to ensure that
 just because e.g. <code>n+1</code> appears as a size in one branch of a
 conditional, that doesn't mean it's also available in the other
 branch.</p></div></div><a href="#g:3" id="g:3"><h1>Control flow</h1></a><div class="top"><p class="src"><a id="v:collectOccurrences" class="def">collectOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#collectOccurrences" class="link">Source</a> <a href="#v:collectOccurrences" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:tapOccurrences" class="def">tapOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (a, <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a>) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#tapOccurrences" class="link">Source</a> <a href="#v:tapOccurrences" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:alternative" class="def">alternative</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (a, b) <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#alternative" class="link">Source</a> <a href="#v:alternative" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sequentially" class="def">sequentially</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; (a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> b <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#sequentially" class="link">Source</a> <a href="#v:sequentially" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:incLevel" class="def">incLevel</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#incLevel" class="link">Source</a> <a href="#v:incLevel" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h1>Consumption and uniqueness</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Names" class="def">Names</a> = Set <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#Names" class="link">Source</a> <a href="#t:Names" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Occurrence" class="def">Occurrence</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#Occurrence" class="link">Source</a> <a href="#t:Occurrence" class="selflink">#</a></p><div class="doc"><p>The consumption set is a Maybe so we can distinguish whether a
 consumption took place, but the variable went out of scope since,
 or no consumption at all took place.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Occurrence" class="def">Occurrence</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:observed" class="def">observed</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:consumed" class="def">consumed</a> :: Maybe <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:location" class="def">location</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Occurrence">Instances</h4><details id="i:Occurrence" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Occurrence:Eq:1"></span> Eq <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-126" class="link">Source</a> <a href="#t:Occurrence" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Occurrence:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Occurrence:Show:2"></span> Show <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-126" class="link">Source</a> <a href="#t:Occurrence" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Occurrence:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Occurrence:Located:3"></span> <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-128" class="link">Source</a> <a href="#t:Occurrence" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Occurrence:Located:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:locOf">locOf</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> -&gt; <a href="Language-Futhark-Core.html#t:Loc" title="Language.Futhark.Core">Loc</a> <a href="#v:locOf" class="selflink">#</a></p><p class="src"><a href="#v:locOfList">locOfList</a> :: [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a>] -&gt; <a href="Language-Futhark-Core.html#t:Loc" title="Language.Futhark.Core">Loc</a> <a href="#v:locOfList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Occurrences" class="def">Occurrences</a> = [<a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a>] <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#Occurrences" class="link">Source</a> <a href="#t:Occurrences" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:onlySelfAliasing" class="def">onlySelfAliasing</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#onlySelfAliasing" class="link">Source</a> <a href="#v:onlySelfAliasing" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:noUnique" class="def">noUnique</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#noUnique" class="link">Source</a> <a href="#v:noUnique" class="selflink">#</a></p><div class="doc"><p>Enter a context where nothing outside can be consumed (i.e. the
 body of a function definition).</p></div></div><div class="top"><p class="src"><a id="v:removeSeminullOccurrences" class="def">removeSeminullOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#removeSeminullOccurrences" class="link">Source</a> <a href="#v:removeSeminullOccurrences" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:occur" class="def">occur</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#occur" class="link">Source</a> <a href="#v:occur" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:observe" class="def">observe</a> :: <a href="Language-Futhark.html#t:Ident" title="Language.Futhark">Ident</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#observe" class="link">Source</a> <a href="#v:observe" class="selflink">#</a></p><div class="doc"><p>Proclaim that we have made read-only use of the given variable.</p></div></div><div class="top"><p class="src"><a id="v:consume" class="def">consume</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#consume" class="link">Source</a> <a href="#v:consume" class="selflink">#</a></p><div class="doc"><p>Proclaim that we have written to the given variable.</p></div></div><div class="top"><p class="src"><a id="v:consuming" class="def">consuming</a> :: <a href="Language-Futhark.html#t:Ident" title="Language.Futhark">Ident</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#consuming" class="link">Source</a> <a href="#v:consuming" class="selflink">#</a></p><div class="doc"><p>Proclaim that we have written to the given variable, and mark
 accesses to it and all of its aliases as invalid inside the given
 computation.</p></div></div><div class="top"><p class="src"><a id="v:observation" class="def">observation</a> :: <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#observation" class="link">Source</a> <a href="#v:observation" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:consumption" class="def">consumption</a> :: <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#consumption" class="link">Source</a> <a href="#v:consumption" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkIfConsumable" class="def">checkIfConsumable</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:Aliasing" title="Language.Futhark.Syntax">Aliasing</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#checkIfConsumable" class="link">Source</a> <a href="#v:checkIfConsumable" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:seqOccurrences" class="def">seqOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#seqOccurrences" class="link">Source</a> <a href="#v:seqOccurrences" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:checkOccurrences" class="def">checkOccurrences</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#checkOccurrences" class="link">Source</a> <a href="#v:checkOccurrences" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:allConsumed" class="def">allConsumed</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#allConsumed" class="link">Source</a> <a href="#v:allConsumed" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h1>Errors</h1></a><div class="top"><p class="src"><a id="v:useAfterConsume" class="def">useAfterConsume</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#useAfterConsume" class="link">Source</a> <a href="#v:useAfterConsume" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unusedSize" class="def">unusedSize</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:MonadTypeChecker" title="Language.Futhark.TypeChecker.Monad">MonadTypeChecker</a> m =&gt; <a href="Language-Futhark-Syntax.html#t:SizeBinder" title="Language.Futhark.Syntax">SizeBinder</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; m a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#unusedSize" class="link">Source</a> <a href="#v:unusedSize" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:notConsumable" class="def">notConsumable</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:MonadTypeChecker" title="Language.Futhark.TypeChecker.Monad">MonadTypeChecker</a> m =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; m b <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#notConsumable" class="link">Source</a> <a href="#v:notConsumable" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:unexpectedType" class="def">unexpectedType</a> :: <a href="Language-Futhark-TypeChecker-Monad.html#t:MonadTypeChecker" title="Language.Futhark.TypeChecker.Monad">MonadTypeChecker</a> m =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>] -&gt; m a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#unexpectedType" class="link">Source</a> <a href="#v:unexpectedType" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:uniqueReturnAliased" class="def">uniqueReturnAliased</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#uniqueReturnAliased" class="link">Source</a> <a href="#v:uniqueReturnAliased" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:returnAliased" class="def">returnAliased</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#returnAliased" class="link">Source</a> <a href="#v:returnAliased" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:badLetWithValue" class="def">badLetWithValue</a> :: (<a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> arr, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> src) =&gt; arr -&gt; src -&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#badLetWithValue" class="link">Source</a> <a href="#v:badLetWithValue" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:anyConsumption" class="def">anyConsumption</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; Maybe <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrence" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrence</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#anyConsumption" class="link">Source</a> <a href="#v:anyConsumption" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:allOccurring" class="def">allOccurring</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Occurrences" title="Language.Futhark.TypeChecker.Terms.Monad">Occurrences</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:Names" title="Language.Futhark.TypeChecker.Terms.Monad">Names</a> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#allOccurring" class="link">Source</a> <a href="#v:allOccurring" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>