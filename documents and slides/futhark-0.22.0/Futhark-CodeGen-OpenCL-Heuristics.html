<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Futhark.CodeGen.OpenCL.Heuristics</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">futhark-0.22.0: An optimising compiler for a functional, array-oriented language.</span><ul class="links" id="page-menu"><li><a href="src/Futhark.CodeGen.OpenCL.Heuristics.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Futhark.CodeGen.OpenCL.Heuristics</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Some OpenCL platforms have a SIMD<em>warp</em>wavefront-based execution
 model that execute groups of threads in lockstep, permitting us to
 perform cross-thread synchronisation within each such group without
 the use of barriers.  Unfortunately, there seems to be no reliable
 way to query these sizes at runtime.  Instead, we use builtin
 tables to figure out which size we should use for a specific
 platform and device.  If nothing matches here, the wave size should
 be set to one.</p><p>We also use this to select reasonable default group sizes and group
 counts.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:SizeHeuristic">SizeHeuristic</a> = <a href="#v:SizeHeuristic">SizeHeuristic</a> {<ul class="subs"><li><a href="#v:platformName">platformName</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></li><li><a href="#v:deviceType">deviceType</a> :: <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceType" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceType</a></li><li><a href="#v:heuristicSize">heuristicSize</a> :: <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:WhichSize" title="Futhark.CodeGen.OpenCL.Heuristics">WhichSize</a></li><li><a href="#v:heuristicValue">heuristicValue</a> :: <a href="Futhark-Analysis-PrimExp.html#t:TPrimExp" title="Futhark.Analysis.PrimExp">TPrimExp</a> <a href="Futhark-IR-Primitive.html#t:Int32" title="Futhark.IR.Primitive">Int32</a> <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceInfo" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceInfo</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:DeviceType">DeviceType</a><ul class="subs"><li>= <a href="#v:DeviceCPU">DeviceCPU</a></li><li>| <a href="#v:DeviceGPU">DeviceGPU</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:WhichSize">WhichSize</a><ul class="subs"><li>= <a href="#v:LockstepWidth">LockstepWidth</a></li><li>| <a href="#v:NumGroups">NumGroups</a></li><li>| <a href="#v:GroupSize">GroupSize</a></li><li>| <a href="#v:TileSize">TileSize</a></li><li>| <a href="#v:RegTileSize">RegTileSize</a></li><li>| <a href="#v:Threshold">Threshold</a></li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:DeviceInfo">DeviceInfo</a> = <a href="#v:DeviceInfo">DeviceInfo</a> <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></li><li class="src short"><a href="#v:sizeHeuristicsTable">sizeHeuristicsTable</a> :: [<a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:SizeHeuristic" title="Futhark.CodeGen.OpenCL.Heuristics">SizeHeuristic</a>]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SizeHeuristic" class="def">SizeHeuristic</a> <a href="src/Futhark.CodeGen.OpenCL.Heuristics.html#SizeHeuristic" class="link">Source</a> <a href="#t:SizeHeuristic" class="selflink">#</a></p><div class="doc"><p>A heuristic for setting the default value for something.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SizeHeuristic" class="def">SizeHeuristic</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:platformName" class="def">platformName</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:deviceType" class="def">deviceType</a> :: <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceType" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceType</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:heuristicSize" class="def">heuristicSize</a> :: <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:WhichSize" title="Futhark.CodeGen.OpenCL.Heuristics">WhichSize</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:heuristicValue" class="def">heuristicValue</a> :: <a href="Futhark-Analysis-PrimExp.html#t:TPrimExp" title="Futhark.Analysis.PrimExp">TPrimExp</a> <a href="Futhark-IR-Primitive.html#t:Int32" title="Futhark.IR.Primitive">Int32</a> <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceInfo" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceInfo</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DeviceType" class="def">DeviceType</a> <a href="src/Futhark.CodeGen.OpenCL.Heuristics.html#DeviceType" class="link">Source</a> <a href="#t:DeviceType" class="selflink">#</a></p><div class="doc"><p>The type of OpenCL device that this heuristic applies to.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DeviceCPU" class="def">DeviceCPU</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DeviceGPU" class="def">DeviceGPU</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:WhichSize" class="def">WhichSize</a> <a href="src/Futhark.CodeGen.OpenCL.Heuristics.html#WhichSize" class="link">Source</a> <a href="#t:WhichSize" class="selflink">#</a></p><div class="doc"><p>A size that can be assigned a default.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LockstepWidth" class="def">LockstepWidth</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NumGroups" class="def">NumGroups</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:GroupSize" class="def">GroupSize</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:TileSize" class="def">TileSize</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:RegTileSize" class="def">RegTileSize</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Threshold" class="def">Threshold</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:DeviceInfo" class="def">DeviceInfo</a> <a href="src/Futhark.CodeGen.OpenCL.Heuristics.html#DeviceInfo" class="link">Source</a> <a href="#t:DeviceInfo" class="selflink">#</a></p><div class="doc"><p>The value supplies by a heuristic can depend on some device
 information.  This will be translated into a call to
 <code>clGetDeviceInfo()</code>. Make sure to only request info that can be
 casted to a scalar type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DeviceInfo" class="def">DeviceInfo</a> <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DeviceInfo">Instances</h4><details id="i:DeviceInfo" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DeviceInfo:Pretty:1"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceInfo" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceInfo</a></span> <a href="src/Futhark.CodeGen.OpenCL.Heuristics.html#line-33" class="link">Source</a> <a href="#t:DeviceInfo" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DeviceInfo:Pretty:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-OpenCL-Heuristics.html">Futhark.CodeGen.OpenCL.Heuristics</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceInfo" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceInfo</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceInfo" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceInfo</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:DeviceInfo" title="Futhark.CodeGen.OpenCL.Heuristics">DeviceInfo</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:sizeHeuristicsTable" class="def">sizeHeuristicsTable</a> :: [<a href="Futhark-CodeGen-OpenCL-Heuristics.html#t:SizeHeuristic" title="Futhark.CodeGen.OpenCL.Heuristics">SizeHeuristic</a>] <a href="src/Futhark.CodeGen.OpenCL.Heuristics.html#sizeHeuristicsTable" class="link">Source</a> <a href="#v:sizeHeuristicsTable" class="selflink">#</a></p><div class="doc"><p>All of our heuristics.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>