<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Futhark.Optimise.BlkRegTiling</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">futhark-0.22.0: An optimising compiler for a functional, array-oriented language.</span><ul class="links" id="page-menu"><li><a href="src/Futhark.Optimise.BlkRegTiling.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Futhark.Optimise.BlkRegTiling</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Perform a restricted form of block+register tiling corresponding to
   the following pattern:
     * a redomap is quasi-perfectly nested inside a kernel with at
       least two parallel dimension (the perfectly nested restriction
       is relaxed a bit to allow for SGEMM);
     * all streamed arrays of redomap are one dimensional;
     * all streamed arrays are variant to exacly one of the two
       innermost parallel dimensions, and conversely for each of
       the two innermost parallel dimensions, there is at least
       one streamed array variant to it;
     * the stream's result is a tuple of scalar values, which are
       also the &quot;thread-in-space&quot; return of the kernel.
     * We have further restrictions that in principle can be relaxed:
          the redomap has exactly two array input
          the redomap produces one scalar result
          the kernel produces one scalar result</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:mmBlkRegTiling">mmBlkRegTiling</a> :: <a href="Futhark-Optimise-TileLoops-Shared.html#t:Env" title="Futhark.Optimise.TileLoops.Shared">Env</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a> -&gt; <a href="Futhark-Optimise-TileLoops-Shared.html#t:TileM" title="Futhark.Optimise.TileLoops.Shared">TileM</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>, <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>))</li><li class="src short"><a href="#v:doRegTiling3D">doRegTiling3D</a> :: <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a> -&gt; <a href="Futhark-Optimise-TileLoops-Shared.html#t:TileM" title="Futhark.Optimise.TileLoops.Shared">TileM</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>, <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>))</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:mmBlkRegTiling" class="def">mmBlkRegTiling</a> :: <a href="Futhark-Optimise-TileLoops-Shared.html#t:Env" title="Futhark.Optimise.TileLoops.Shared">Env</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a> -&gt; <a href="Futhark-Optimise-TileLoops-Shared.html#t:TileM" title="Futhark.Optimise.TileLoops.Shared">TileM</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>, <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>)) <a href="src/Futhark.Optimise.BlkRegTiling.html#mmBlkRegTiling" class="link">Source</a> <a href="#v:mmBlkRegTiling" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:doRegTiling3D" class="def">doRegTiling3D</a> :: <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a> -&gt; <a href="Futhark-Optimise-TileLoops-Shared.html#t:TileM" title="Futhark.Optimise.TileLoops.Shared">TileM</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>, <a href="Futhark-IR-Syntax.html#t:Stm" title="Futhark.IR.Syntax">Stm</a> <a href="Futhark-IR-GPU.html#t:GPU" title="Futhark.IR.GPU">GPU</a>)) <a href="src/Futhark.Optimise.BlkRegTiling.html#doRegTiling3D" class="link">Source</a> <a href="#v:doRegTiling3D" class="selflink">#</a></p><div class="doc"><p>Expects a kernel statement as argument.
   CONDITIONS for 3D tiling optimization to fire are:
     1. a) The kernel body can be broken into
              scalar-code-1 ++ [Redomap stmt] ++ scalar-code-2.
        b) The kernels has a per-thread result, and obviously
              the result is variant to the 3rd dimension
              (counted from innermost to outermost)
     2. For the Redomap:
          a) the streamed arrays are one dimensional
          b) each of the array arguments of Redomap are variant
              to exactly one of the three innermost-parallel dimension
              of the kernel. This condition can be relaxed by interchanging
              kernel dimensions whenever possible.
     3. For scalar-code-1:
          a) each of the statements is a slice that produces one of the
             streamed arrays</p><p>mmBlkRegTiling :: Stm GPU -&gt; TileM (Maybe (Stms GPU, Stm GPU))
 mmBlkRegTiling (Let pat aux (Op (SegOp (SegMap SegThread{} seg_space ts old_kbody))))</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>