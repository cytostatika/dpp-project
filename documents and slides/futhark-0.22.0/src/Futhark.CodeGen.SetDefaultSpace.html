<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | Change 'DefaultSpace' in a program to some other memory space.</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- This is needed because the GPU backends use 'DefaultSpace' to refer</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- to GPU memory for most of the pipeline, but final code generation</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- assumes that 'DefaultSpace' is CPU memory.</span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Futhark.CodeGen.SetDefaultSpace</span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setDefaultSpace"><span class="hs-identifier">setDefaultSpace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setDefaultCodeSpace"><span class="hs-identifier">setDefaultCodeSpace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">where</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html"><span class="hs-identifier">Futhark.CodeGen.ImpCode</span></a></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-comment">-- | Set all uses of 'DefaultSpace' in the given definitions to another</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- memory space.</span><span>
</span><span id="line-15"></span><span id="local-6989586621684470544"><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setDefaultSpace"><span class="hs-identifier hs-type">setDefaultSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Definitions"><span class="hs-identifier hs-type">Definitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470544"><span class="hs-identifier hs-type">op</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Definitions"><span class="hs-identifier hs-type">Definitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470544"><span class="hs-identifier hs-type">op</span></a></span></span><span>
</span><span id="line-16"></span><span id="setDefaultSpace"><span class="annot"><span class="annottext">setDefaultSpace :: forall op. Space -&gt; Definitions op -&gt; Definitions op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setDefaultSpace"><span class="hs-identifier hs-var hs-var">setDefaultSpace</span></a></span></span><span> </span><span id="local-6989586621684470496"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470496"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Definitions"><span class="hs-identifier hs-type">Definitions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Constants"><span class="hs-identifier hs-type">Constants</span></a></span><span> </span><span id="local-6989586621684470493"><span class="annot"><span class="annottext">[Param]
</span><a href="#local-6989586621684470493"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621684470492"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470492"><span class="hs-identifier hs-var">consts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Functions"><span class="hs-identifier hs-type">Functions</span></a></span><span> </span><span id="local-6989586621684470490"><span class="annot"><span class="annottext">[(Name, Function op)]
</span><a href="#local-6989586621684470490"><span class="hs-identifier hs-var">fundecs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><span class="annottext">Constants op -&gt; Functions op -&gt; Definitions op
forall a. Constants a -&gt; Functions a -&gt; Definitions a
</span><a href="Futhark.CodeGen.ImpCode.html#Definitions"><span class="hs-identifier hs-var">Definitions</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Param] -&gt; Code op -&gt; Constants op
forall a. [Param] -&gt; Code a -&gt; Constants a
</span><a href="Futhark.CodeGen.ImpCode.html#Constants"><span class="hs-identifier hs-var">Constants</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Param -&gt; Param) -&gt; [Param] -&gt; [Param]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Param -&gt; Param
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setParamSpace"><span class="hs-identifier hs-var">setParamSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470496"><span class="hs-identifier hs-var">space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Param]
</span><a href="#local-6989586621684470493"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470496"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470492"><span class="hs-identifier hs-var">consts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[(Name, Function op)] -&gt; Functions op
forall a. [(Name, Function a)] -&gt; Functions a
</span><a href="Futhark.CodeGen.ImpCode.html#Functions"><span class="hs-identifier hs-var">Functions</span></a></span><span>
</span><span id="line-20"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684470487"><span class="hs-identifier hs-var">fname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Space -&gt; Function op -&gt; Function op
forall op. Space -&gt; Function op -&gt; Function op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setFunctionSpace"><span class="hs-identifier hs-var">setFunctionSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470496"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Function op
</span><a href="#local-6989586621684470485"><span class="hs-identifier hs-var">func</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684470487"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684470487"><span class="hs-identifier hs-var">fname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684470485"><span class="annot"><span class="annottext">Function op
</span><a href="#local-6989586621684470485"><span class="hs-identifier hs-var">func</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Name, Function op)]
</span><a href="#local-6989586621684470490"><span class="hs-identifier hs-var">fundecs</span></a></span><span>
</span><span id="line-22"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-comment">-- | Like 'setDefaultSpace', but for 'Code'.</span><span>
</span><span id="line-26"></span><span id="local-6989586621684470484"><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setDefaultCodeSpace"><span class="hs-identifier hs-type">setDefaultCodeSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Code"><span class="hs-identifier hs-type">Code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470484"><span class="hs-identifier hs-type">op</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Code"><span class="hs-identifier hs-type">Code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470484"><span class="hs-identifier hs-type">op</span></a></span></span><span>
</span><span id="line-27"></span><span id="setDefaultCodeSpace"><span class="annot"><span class="annottext">setDefaultCodeSpace :: forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setDefaultCodeSpace"><span class="hs-identifier hs-var hs-var">setDefaultCodeSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span id="local-6989586621684470529"><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setFunctionSpace"><span class="hs-identifier hs-type">setFunctionSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470529"><span class="hs-identifier hs-type">op</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470529"><span class="hs-identifier hs-type">op</span></a></span></span><span>
</span><span id="line-30"></span><span id="setFunctionSpace"><span class="annot"><span class="annottext">setFunctionSpace :: forall op. Space -&gt; Function op -&gt; Function op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setFunctionSpace"><span class="hs-identifier hs-var hs-var">setFunctionSpace</span></a></span></span><span> </span><span id="local-6989586621684470481"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470481"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span> </span><span id="local-6989586621684470479"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621684470479"><span class="hs-identifier hs-var">entry</span></a></span></span><span> </span><span id="local-6989586621684470478"><span class="annot"><span class="annottext">[Param]
</span><a href="#local-6989586621684470478"><span class="hs-identifier hs-var">outputs</span></a></span></span><span> </span><span id="local-6989586621684470477"><span class="annot"><span class="annottext">[Param]
</span><a href="#local-6989586621684470477"><span class="hs-identifier hs-var">inputs</span></a></span></span><span> </span><span id="local-6989586621684470476"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470476"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684470475"><span class="annot"><span class="annottext">[ExternalValue]
</span><a href="#local-6989586621684470475"><span class="hs-identifier hs-var">results</span></a></span></span><span> </span><span id="local-6989586621684470474"><span class="annot"><span class="annottext">[(Name, ExternalValue)]
</span><a href="#local-6989586621684470474"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><span class="annottext">Maybe Name
-&gt; [Param]
-&gt; [Param]
-&gt; Code op
-&gt; [ExternalValue]
-&gt; [(Name, ExternalValue)]
-&gt; FunctionT op
forall a.
Maybe Name
-&gt; [Param]
-&gt; [Param]
-&gt; Code a
-&gt; [ExternalValue]
-&gt; [(Name, ExternalValue)]
-&gt; FunctionT a
</span><a href="Futhark.CodeGen.ImpCode.html#Function"><span class="hs-identifier hs-var">Function</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621684470479"><span class="hs-identifier hs-var">entry</span></a></span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Param -&gt; Param) -&gt; [Param] -&gt; [Param]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Param -&gt; Param
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setParamSpace"><span class="hs-identifier hs-var">setParamSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470481"><span class="hs-identifier hs-var">space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Param]
</span><a href="#local-6989586621684470478"><span class="hs-identifier hs-var">outputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Param -&gt; Param) -&gt; [Param] -&gt; [Param]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Param -&gt; Param
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setParamSpace"><span class="hs-identifier hs-var">setParamSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470481"><span class="hs-identifier hs-var">space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Param]
</span><a href="#local-6989586621684470477"><span class="hs-identifier hs-var">inputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470481"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470476"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExternalValue -&gt; ExternalValue)
-&gt; [ExternalValue] -&gt; [ExternalValue]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; ExternalValue -&gt; ExternalValue
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setExtValueSpace"><span class="hs-identifier hs-var">setExtValueSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470481"><span class="hs-identifier hs-var">space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ExternalValue]
</span><a href="#local-6989586621684470475"><span class="hs-identifier hs-var">results</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Name, ExternalValue) -&gt; (Name, ExternalValue))
-&gt; [(Name, ExternalValue)] -&gt; [(Name, ExternalValue)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExternalValue -&gt; ExternalValue)
-&gt; (Name, ExternalValue) -&gt; (Name, ExternalValue)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((ExternalValue -&gt; ExternalValue)
 -&gt; (Name, ExternalValue) -&gt; (Name, ExternalValue))
-&gt; (ExternalValue -&gt; ExternalValue)
-&gt; (Name, ExternalValue)
-&gt; (Name, ExternalValue)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; ExternalValue -&gt; ExternalValue
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setExtValueSpace"><span class="hs-identifier hs-var">setExtValueSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470481"><span class="hs-identifier hs-var">space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, ExternalValue)]
</span><a href="#local-6989586621684470474"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setParamSpace"><span class="hs-identifier hs-type">setParamSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Param"><span class="hs-identifier hs-type">Param</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Param"><span class="hs-identifier hs-type">Param</span></a></span><span>
</span><span id="line-40"></span><span id="setParamSpace"><span class="annot"><span class="annottext">setParamSpace :: Space -&gt; Param -&gt; Param
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setParamSpace"><span class="hs-identifier hs-var hs-var">setParamSpace</span></a></span></span><span> </span><span id="local-6989586621684470472"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470472"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#MemParam"><span class="hs-identifier hs-type">MemParam</span></a></span><span> </span><span id="local-6989586621684470470"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470470"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="Futhark.IR.Syntax.Core.html#DefaultSpace"><span class="hs-identifier hs-var">DefaultSpace</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Space -&gt; Param
</span><a href="Futhark.CodeGen.ImpCode.html#MemParam"><span class="hs-identifier hs-var">MemParam</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470470"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470472"><span class="hs-identifier hs-var">space</span></a></span><span>
</span><span id="line-42"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setParamSpace"><span class="hs-identifier hs-var">setParamSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684470468"><span class="annot"><span class="annottext">Param
</span><a href="#local-6989586621684470468"><span class="hs-identifier hs-var">param</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><span class="annottext">Param
</span><a href="#local-6989586621684470468"><span class="hs-identifier hs-var">param</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setExtValueSpace"><span class="hs-identifier hs-type">setExtValueSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#ExternalValue"><span class="hs-identifier hs-type">ExternalValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#ExternalValue"><span class="hs-identifier hs-type">ExternalValue</span></a></span><span>
</span><span id="line-46"></span><span id="setExtValueSpace"><span class="annot"><span class="annottext">setExtValueSpace :: Space -&gt; ExternalValue -&gt; ExternalValue
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setExtValueSpace"><span class="hs-identifier hs-var hs-var">setExtValueSpace</span></a></span></span><span> </span><span id="local-6989586621684470467"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470467"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#OpaqueValue"><span class="hs-identifier hs-type">OpaqueValue</span></a></span><span> </span><span id="local-6989586621684470465"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684470465"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684470464"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684470464"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621684470463"><span class="annot"><span class="annottext">[ValueDesc]
</span><a href="#local-6989586621684470463"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="annottext">Uniqueness -&gt; String -&gt; [ValueDesc] -&gt; ExternalValue
</span><a href="Futhark.CodeGen.ImpCode.html#OpaqueValue"><span class="hs-identifier hs-var">OpaqueValue</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684470465"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684470464"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">([ValueDesc] -&gt; ExternalValue) -&gt; [ValueDesc] -&gt; ExternalValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ValueDesc -&gt; ValueDesc) -&gt; [ValueDesc] -&gt; [ValueDesc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; ValueDesc -&gt; ValueDesc
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setValueSpace"><span class="hs-identifier hs-var">setValueSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470467"><span class="hs-identifier hs-var">space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ValueDesc]
</span><a href="#local-6989586621684470463"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-48"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setExtValueSpace"><span class="hs-identifier hs-var">setExtValueSpace</span></a></span><span> </span><span id="local-6989586621684470461"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470461"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#TransparentValue"><span class="hs-identifier hs-type">TransparentValue</span></a></span><span> </span><span id="local-6989586621684470459"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684470459"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684470458"><span class="annot"><span class="annottext">ValueDesc
</span><a href="#local-6989586621684470458"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><span class="annottext">Uniqueness -&gt; ValueDesc -&gt; ExternalValue
</span><a href="Futhark.CodeGen.ImpCode.html#TransparentValue"><span class="hs-identifier hs-var">TransparentValue</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684470459"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">(ValueDesc -&gt; ExternalValue) -&gt; ValueDesc -&gt; ExternalValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; ValueDesc -&gt; ValueDesc
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setValueSpace"><span class="hs-identifier hs-var">setValueSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470461"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">ValueDesc
</span><a href="#local-6989586621684470458"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setValueSpace"><span class="hs-identifier hs-type">setValueSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#ValueDesc"><span class="hs-identifier hs-type">ValueDesc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#ValueDesc"><span class="hs-identifier hs-type">ValueDesc</span></a></span><span>
</span><span id="line-52"></span><span id="setValueSpace"><span class="annot"><span class="annottext">setValueSpace :: Space -&gt; ValueDesc -&gt; ValueDesc
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setValueSpace"><span class="hs-identifier hs-var hs-var">setValueSpace</span></a></span></span><span> </span><span id="local-6989586621684470457"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470457"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#ArrayValue"><span class="hs-identifier hs-type">ArrayValue</span></a></span><span> </span><span id="local-6989586621684470455"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470455"><span class="hs-identifier hs-var">mem</span></a></span></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684470454"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470454"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span id="local-6989586621684470453"><span class="annot"><span class="annottext">Signedness
</span><a href="#local-6989586621684470453"><span class="hs-identifier hs-var">ept</span></a></span></span><span> </span><span id="local-6989586621684470452"><span class="annot"><span class="annottext">[DimSize]
</span><a href="#local-6989586621684470452"><span class="hs-identifier hs-var">shape</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Space -&gt; PrimType -&gt; Signedness -&gt; [DimSize] -&gt; ValueDesc
</span><a href="Futhark.CodeGen.ImpCode.html#ArrayValue"><span class="hs-identifier hs-var">ArrayValue</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470455"><span class="hs-identifier hs-var">mem</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470457"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470454"><span class="hs-identifier hs-var">bt</span></a></span><span> </span><span class="annot"><span class="annottext">Signedness
</span><a href="#local-6989586621684470453"><span class="hs-identifier hs-var">ept</span></a></span><span> </span><span class="annot"><span class="annottext">[DimSize]
</span><a href="#local-6989586621684470452"><span class="hs-identifier hs-var">shape</span></a></span><span>
</span><span id="line-54"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setValueSpace"><span class="hs-identifier hs-var">setValueSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#ScalarValue"><span class="hs-identifier hs-type">ScalarValue</span></a></span><span> </span><span id="local-6989586621684470450"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470450"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span id="local-6989586621684470449"><span class="annot"><span class="annottext">Signedness
</span><a href="#local-6989586621684470449"><span class="hs-identifier hs-var">ept</span></a></span></span><span> </span><span id="local-6989586621684470448"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470448"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><span class="annottext">PrimType -&gt; Signedness -&gt; VName -&gt; ValueDesc
</span><a href="Futhark.CodeGen.ImpCode.html#ScalarValue"><span class="hs-identifier hs-var">ScalarValue</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470450"><span class="hs-identifier hs-var">bt</span></a></span><span> </span><span class="annot"><span class="annottext">Signedness
</span><a href="#local-6989586621684470449"><span class="hs-identifier hs-var">ept</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470448"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span id="local-6989586621684470531"><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-type">setCodeSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Code"><span class="hs-identifier hs-type">Code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470531"><span class="hs-identifier hs-type">op</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Code"><span class="hs-identifier hs-type">Code</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684470531"><span class="hs-identifier hs-type">op</span></a></span></span><span>
</span><span id="line-58"></span><span id="setCodeSpace"><span class="annot"><span class="annottext">setCodeSpace :: forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var hs-var">setCodeSpace</span></a></span></span><span> </span><span id="local-6989586621684470447"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470447"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Allocate"><span class="hs-identifier hs-type">Allocate</span></a></span><span> </span><span id="local-6989586621684470445"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470445"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684470444"><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470444"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684470443"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470443"><span class="hs-identifier hs-var">old_space</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Count Bytes (TExp Int64) -&gt; Space -&gt; Code op
forall a. VName -&gt; Count Bytes (TExp Int64) -&gt; Space -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Allocate"><span class="hs-identifier hs-var">Allocate</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470445"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470444"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(Space -&gt; Code op) -&gt; Space -&gt; Code op
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470447"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470443"><span class="hs-identifier hs-var">old_space</span></a></span><span>
</span><span id="line-60"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470441"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470441"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Free"><span class="hs-identifier hs-type">Free</span></a></span><span> </span><span id="local-6989586621684470439"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470439"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684470438"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470438"><span class="hs-identifier hs-var">old_space</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Space -&gt; Code op
forall a. VName -&gt; Space -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Free"><span class="hs-identifier hs-var">Free</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470439"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">(Space -&gt; Code op) -&gt; Space -&gt; Code op
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470441"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470438"><span class="hs-identifier hs-var">old_space</span></a></span><span>
</span><span id="line-62"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470437"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470437"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#DeclareMem"><span class="hs-identifier hs-type">DeclareMem</span></a></span><span> </span><span id="local-6989586621684470435"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470435"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684470434"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470434"><span class="hs-identifier hs-var">old_space</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Space -&gt; Code op
forall a. VName -&gt; Space -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#DeclareMem"><span class="hs-identifier hs-var">DeclareMem</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470435"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Space -&gt; Code op) -&gt; Space -&gt; Code op
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470437"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470434"><span class="hs-identifier hs-var">old_space</span></a></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470433"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470433"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#DeclareArray"><span class="hs-identifier hs-type">DeclareArray</span></a></span><span> </span><span id="local-6989586621684470431"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470431"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684470430"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470430"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684470429"><span class="annot"><span class="annottext">ArrayContents
</span><a href="#local-6989586621684470429"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Space -&gt; PrimType -&gt; ArrayContents -&gt; Code op
forall a. VName -&gt; Space -&gt; PrimType -&gt; ArrayContents -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#DeclareArray"><span class="hs-identifier hs-var">DeclareArray</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470431"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470433"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470430"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">ArrayContents
</span><a href="#local-6989586621684470429"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-66"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470428"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470428"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Copy"><span class="hs-identifier hs-type">Copy</span></a></span><span> </span><span id="local-6989586621684470426"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470426"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span id="local-6989586621684470425"><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470425"><span class="hs-identifier hs-var">dest_offset</span></a></span></span><span> </span><span id="local-6989586621684470424"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470424"><span class="hs-identifier hs-var">dest_space</span></a></span></span><span> </span><span id="local-6989586621684470423"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470423"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684470422"><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470422"><span class="hs-identifier hs-var">src_offset</span></a></span></span><span> </span><span id="local-6989586621684470421"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470421"><span class="hs-identifier hs-var">src_space</span></a></span></span><span> </span><span id="local-6989586621684470420"><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470420"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="annottext">VName
-&gt; Count Bytes (TExp Int64)
-&gt; Space
-&gt; VName
-&gt; Count Bytes (TExp Int64)
-&gt; Space
-&gt; Count Bytes (TExp Int64)
-&gt; Code op
forall a.
VName
-&gt; Count Bytes (TExp Int64)
-&gt; Space
-&gt; VName
-&gt; Count Bytes (TExp Int64)
-&gt; Space
-&gt; Count Bytes (TExp Int64)
-&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Copy"><span class="hs-identifier hs-var">Copy</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470426"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470425"><span class="hs-identifier hs-var">dest_offset</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470419"><span class="hs-identifier hs-var">dest_space'</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470423"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470422"><span class="hs-identifier hs-var">src_offset</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470418"><span class="hs-identifier hs-var">src_space'</span></a></span><span> </span><span class="annot"><span class="annottext">Count Bytes (TExp Int64)
</span><a href="#local-6989586621684470420"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>    </span><span id="local-6989586621684470419"><span class="annot"><span class="annottext">dest_space' :: Space
</span><a href="#local-6989586621684470419"><span class="hs-identifier hs-var hs-var">dest_space'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470428"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470424"><span class="hs-identifier hs-var">dest_space</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span id="local-6989586621684470418"><span class="annot"><span class="annottext">src_space' :: Space
</span><a href="#local-6989586621684470418"><span class="hs-identifier hs-var hs-var">src_space'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470428"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470421"><span class="hs-identifier hs-var">src_space</span></a></span><span>
</span><span id="line-71"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470417"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470417"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Write"><span class="hs-identifier hs-type">Write</span></a></span><span> </span><span id="local-6989586621684470415"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470415"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span id="local-6989586621684470414"><span class="annot"><span class="annottext">Count Elements (TExp Int64)
</span><a href="#local-6989586621684470414"><span class="hs-identifier hs-var">dest_offset</span></a></span></span><span> </span><span id="local-6989586621684470413"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470413"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span id="local-6989586621684470412"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470412"><span class="hs-identifier hs-var">dest_space</span></a></span></span><span> </span><span id="local-6989586621684470411"><span class="annot"><span class="annottext">Volatility
</span><a href="#local-6989586621684470411"><span class="hs-identifier hs-var">vol</span></a></span></span><span> </span><span id="local-6989586621684470410"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470410"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="annottext">VName
-&gt; Count Elements (TExp Int64)
-&gt; PrimType
-&gt; Space
-&gt; Volatility
-&gt; Exp
-&gt; Code op
forall a.
VName
-&gt; Count Elements (TExp Int64)
-&gt; PrimType
-&gt; Space
-&gt; Volatility
-&gt; Exp
-&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Write"><span class="hs-identifier hs-var">Write</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470415"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">Count Elements (TExp Int64)
</span><a href="#local-6989586621684470414"><span class="hs-identifier hs-var">dest_offset</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470413"><span class="hs-identifier hs-var">bt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470417"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470412"><span class="hs-identifier hs-var">dest_space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Volatility
</span><a href="#local-6989586621684470411"><span class="hs-identifier hs-var">vol</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470410"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-73"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470409"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470409"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Read"><span class="hs-identifier hs-type">Read</span></a></span><span> </span><span id="local-6989586621684470407"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470407"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684470406"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470406"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span id="local-6989586621684470405"><span class="annot"><span class="annottext">Count Elements (TExp Int64)
</span><a href="#local-6989586621684470405"><span class="hs-identifier hs-var">dest_offset</span></a></span></span><span> </span><span id="local-6989586621684470404"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470404"><span class="hs-identifier hs-var">bt</span></a></span></span><span> </span><span id="local-6989586621684470403"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470403"><span class="hs-identifier hs-var">dest_space</span></a></span></span><span> </span><span id="local-6989586621684470402"><span class="annot"><span class="annottext">Volatility
</span><a href="#local-6989586621684470402"><span class="hs-identifier hs-var">vol</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><span class="annottext">VName
-&gt; VName
-&gt; Count Elements (TExp Int64)
-&gt; PrimType
-&gt; Space
-&gt; Volatility
-&gt; Code op
forall a.
VName
-&gt; VName
-&gt; Count Elements (TExp Int64)
-&gt; PrimType
-&gt; Space
-&gt; Volatility
-&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Read"><span class="hs-identifier hs-var">Read</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470407"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470406"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">Count Elements (TExp Int64)
</span><a href="#local-6989586621684470405"><span class="hs-identifier hs-var">dest_offset</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470404"><span class="hs-identifier hs-var">bt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470409"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470403"><span class="hs-identifier hs-var">dest_space</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Volatility
</span><a href="#local-6989586621684470402"><span class="hs-identifier hs-var">vol</span></a></span><span>
</span><span id="line-75"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470401"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470401"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684470400"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470400"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#%3A%3E%3E%3A"><span class="hs-operator hs-type">:&gt;&gt;:</span></a></span><span> </span><span id="local-6989586621684470398"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470398"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470401"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470400"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Code op -&gt; Code op -&gt; Code op
forall a. Code a -&gt; Code a -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#%3A%3E%3E%3A"><span class="hs-operator hs-var">:&gt;&gt;:</span></a></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470401"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470398"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-77"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470397"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470397"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#For"><span class="hs-identifier hs-type">For</span></a></span><span> </span><span id="local-6989586621684470395"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470395"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621684470394"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470394"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684470393"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470393"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Exp -&gt; Code op -&gt; Code op
forall a. VName -&gt; Exp -&gt; Code a -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#For"><span class="hs-identifier hs-var">For</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470395"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470394"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(Code op -&gt; Code op) -&gt; Code op -&gt; Code op
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470397"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470393"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-79"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470392"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470392"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#While"><span class="hs-identifier hs-type">While</span></a></span><span> </span><span id="local-6989586621684470390"><span class="annot"><span class="annottext">TExp Bool
</span><a href="#local-6989586621684470390"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684470389"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470389"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><span class="annottext">TExp Bool -&gt; Code op -&gt; Code op
forall a. TExp Bool -&gt; Code a -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#While"><span class="hs-identifier hs-var">While</span></a></span><span> </span><span class="annot"><span class="annottext">TExp Bool
</span><a href="#local-6989586621684470390"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(Code op -&gt; Code op) -&gt; Code op -&gt; Code op
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470392"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470389"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-81"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470388"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470388"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#If"><span class="hs-identifier hs-type">If</span></a></span><span> </span><span id="local-6989586621684470386"><span class="annot"><span class="annottext">TExp Bool
</span><a href="#local-6989586621684470386"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684470385"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470385"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621684470384"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470384"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><span class="annottext">TExp Bool -&gt; Code op -&gt; Code op -&gt; Code op
forall a. TExp Bool -&gt; Code a -&gt; Code a -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#If"><span class="hs-identifier hs-var">If</span></a></span><span> </span><span class="annot"><span class="annottext">TExp Bool
</span><a href="#local-6989586621684470386"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470388"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470385"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470388"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470384"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470383"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470383"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Comment"><span class="hs-identifier hs-type">Comment</span></a></span><span> </span><span id="local-6989586621684470381"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684470381"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621684470380"><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470380"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-84"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Code op -&gt; Code op
forall a. String -&gt; Code a -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Comment"><span class="hs-identifier hs-var">Comment</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684470381"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">(Code op -&gt; Code op) -&gt; Code op -&gt; Code op
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Code op -&gt; Code op
forall op. Space -&gt; Code op -&gt; Code op
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470383"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="#local-6989586621684470380"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-85"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Code op
</span><a href="Futhark.CodeGen.ImpCode.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><span class="annottext">Code op
forall a. Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span>
</span><span id="line-87"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#DeclareScalar"><span class="hs-identifier hs-type">DeclareScalar</span></a></span><span> </span><span id="local-6989586621684470377"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470377"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684470376"><span class="annot"><span class="annottext">Volatility
</span><a href="#local-6989586621684470376"><span class="hs-identifier hs-var">vol</span></a></span></span><span> </span><span id="local-6989586621684470375"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470375"><span class="hs-identifier hs-var">bt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Volatility -&gt; PrimType -&gt; Code op
forall a. VName -&gt; Volatility -&gt; PrimType -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#DeclareScalar"><span class="hs-identifier hs-var">DeclareScalar</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470377"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Volatility
</span><a href="#local-6989586621684470376"><span class="hs-identifier hs-var">vol</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684470375"><span class="hs-identifier hs-var">bt</span></a></span><span>
</span><span id="line-89"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#SetScalar"><span class="hs-identifier hs-type">SetScalar</span></a></span><span> </span><span id="local-6989586621684470373"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470373"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684470372"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470372"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; Exp -&gt; Code op
forall a. VName -&gt; Exp -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#SetScalar"><span class="hs-identifier hs-var">SetScalar</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470373"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470372"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-91"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span id="local-6989586621684470371"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470371"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#SetMem"><span class="hs-identifier hs-type">SetMem</span></a></span><span> </span><span id="local-6989586621684470369"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470369"><span class="hs-identifier hs-var">to</span></a></span></span><span> </span><span id="local-6989586621684470368"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470368"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621684470367"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470367"><span class="hs-identifier hs-var">old_space</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; VName -&gt; Space -&gt; Code op
forall a. VName -&gt; VName -&gt; Space -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#SetMem"><span class="hs-identifier hs-var">SetMem</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470369"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684470368"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="annot"><span class="annottext">(Space -&gt; Code op) -&gt; Space -&gt; Code op
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470371"><span class="hs-identifier hs-var">space</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470367"><span class="hs-identifier hs-var">old_space</span></a></span><span>
</span><span id="line-93"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Call"><span class="hs-identifier hs-type">Call</span></a></span><span> </span><span id="local-6989586621684470365"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684470365"><span class="hs-identifier hs-var">dests</span></a></span></span><span> </span><span id="local-6989586621684470364"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684470364"><span class="hs-identifier hs-var">fname</span></a></span></span><span> </span><span id="local-6989586621684470363"><span class="annot"><span class="annottext">[Arg]
</span><a href="#local-6989586621684470363"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><span class="annottext">[VName] -&gt; Name -&gt; [Arg] -&gt; Code op
forall a. [VName] -&gt; Name -&gt; [Arg] -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684470365"><span class="hs-identifier hs-var">dests</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684470364"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg]
</span><a href="#local-6989586621684470363"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-95"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Assert"><span class="hs-identifier hs-type">Assert</span></a></span><span> </span><span id="local-6989586621684470361"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470361"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684470360"><span class="annot"><span class="annottext">ErrorMsg Exp
</span><a href="#local-6989586621684470360"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621684470359"><span class="annot"><span class="annottext">(SrcLoc, [SrcLoc])
</span><a href="#local-6989586621684470359"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><span class="annottext">Exp -&gt; ErrorMsg Exp -&gt; (SrcLoc, [SrcLoc]) -&gt; Code op
forall a. Exp -&gt; ErrorMsg Exp -&gt; (SrcLoc, [SrcLoc]) -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Assert"><span class="hs-identifier hs-var">Assert</span></a></span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621684470361"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorMsg Exp
</span><a href="#local-6989586621684470360"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcLoc, [SrcLoc])
</span><a href="#local-6989586621684470359"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-97"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#DebugPrint"><span class="hs-identifier hs-type">DebugPrint</span></a></span><span> </span><span id="local-6989586621684470357"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684470357"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621684470356"><span class="annot"><span class="annottext">Maybe Exp
</span><a href="#local-6989586621684470356"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Maybe Exp -&gt; Code op
forall a. String -&gt; Maybe Exp -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#DebugPrint"><span class="hs-identifier hs-var">DebugPrint</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684470357"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Exp
</span><a href="#local-6989586621684470356"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-99"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#TracePrint"><span class="hs-identifier hs-type">TracePrint</span></a></span><span> </span><span id="local-6989586621684470354"><span class="annot"><span class="annottext">ErrorMsg Exp
</span><a href="#local-6989586621684470354"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><span class="annottext">ErrorMsg Exp -&gt; Code op
forall a. ErrorMsg Exp -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#TracePrint"><span class="hs-identifier hs-var">TracePrint</span></a></span><span> </span><span class="annot"><span class="annottext">ErrorMsg Exp
</span><a href="#local-6989586621684470354"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-101"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setCodeSpace"><span class="hs-identifier hs-var">setCodeSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CodeGen.ImpCode.html#Op"><span class="hs-identifier hs-type">Op</span></a></span><span> </span><span id="local-6989586621684470352"><span class="annot"><span class="annottext">op
</span><a href="#local-6989586621684470352"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><span class="annottext">op -&gt; Code op
forall a. a -&gt; Code a
</span><a href="Futhark.CodeGen.ImpCode.html#Op"><span class="hs-identifier hs-var">Op</span></a></span><span> </span><span class="annot"><span class="annottext">op
</span><a href="#local-6989586621684470352"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-type">setSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.Core.html#Space"><span class="hs-identifier hs-type">Space</span></a></span><span>
</span><span id="line-105"></span><span id="setSpace"><span class="annot"><span class="annottext">setSpace :: Space -&gt; Space -&gt; Space
</span><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var hs-var">setSpace</span></a></span></span><span> </span><span id="local-6989586621684470351"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470351"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="Futhark.IR.Syntax.Core.html#DefaultSpace"><span class="hs-identifier hs-var">DefaultSpace</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470351"><span class="hs-identifier hs-var">space</span></a></span><span>
</span><span id="line-106"></span><span class="annot"><a href="Futhark.CodeGen.SetDefaultSpace.html#setSpace"><span class="hs-identifier hs-var">setSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684470350"><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470350"><span class="hs-identifier hs-var">space</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Space
</span><a href="#local-6989586621684470350"><span class="hs-identifier hs-var">space</span></a></span><span>
</span><span id="line-107"></span></pre></body></html>