<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621684492233"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">-- | This module provides various simple ways to query and manipulate</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- fundamental Futhark terms, such as types and values.  The intent is to</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- keep &quot;Futhark.Language.Syntax&quot; simple, and put whatever embellishments</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- we need here.</span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language.Futhark.Prop</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Various</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#Intrinsic"><span class="hs-identifier">Intrinsic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#intrinsics"><span class="hs-identifier">intrinsics</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#maxIntrinsicTag"><span class="hs-identifier">maxIntrinsicTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#namesToPrimTypes"><span class="hs-identifier">namesToPrimTypes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier">qualName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#qualify"><span class="hs-identifier">qualify</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#typeName"><span class="hs-identifier">typeName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#valueType"><span class="hs-identifier">valueType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier">primValueType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#leadingOperator"><span class="hs-identifier">leadingOperator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#progImports"><span class="hs-identifier">progImports</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier">decImports</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#progModuleTypes"><span class="hs-identifier">progModuleTypes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#identifierReference"><span class="hs-identifier">identifierReference</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Language.Futhark.Core.html#prettyStacktrace"><span class="hs-identifier">prettyStacktrace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Queries on expressions</span></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier">typeOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#valBindTypeScheme"><span class="hs-identifier">valBindTypeScheme</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#valBindBound"><span class="hs-identifier">valBindBound</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#funType"><span class="hs-identifier">funType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Queries on patterns and params</span></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier">patIdents</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier">patNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patternMap"><span class="hs-identifier">patternMap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier">patternType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patternStructType"><span class="hs-identifier">patternStructType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier">patternParam</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier">patternOrderZero</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier">patternDimNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Queries on types</span></span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier">uniqueness</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#unique"><span class="hs-identifier">unique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#aliases"><span class="hs-identifier">aliases</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier">diet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#arrayRank"><span class="hs-identifier">arrayRank</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#arrayShape"><span class="hs-identifier">arrayShape</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier">nestedDims</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier">orderZero</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#unfoldFunType"><span class="hs-identifier">unfoldFunType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#foldFunType"><span class="hs-identifier">foldFunType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier">typeVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier">typeDimNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Operations on types</span></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#peelArray"><span class="hs-identifier">peelArray</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#stripArray"><span class="hs-identifier">stripArray</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#arrayOf"><span class="hs-identifier">arrayOf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#toStructural"><span class="hs-identifier">toStructural</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#toStruct"><span class="hs-identifier">toStruct</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#fromStruct"><span class="hs-identifier">fromStruct</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-identifier">setAliases</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#addAliases"><span class="hs-identifier">addAliases</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-identifier">setUniqueness</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#noSizes"><span class="hs-identifier">noSizes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#traverseDims"><span class="hs-identifier">traverseDims</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#DimPos"><span class="hs-identifier">DimPos</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#mustBeExplicit"><span class="hs-identifier">mustBeExplicit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#mustBeExplicitInType"><span class="hs-identifier">mustBeExplicitInType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier">tupleRecord</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#isTupleRecord"><span class="hs-identifier">isTupleRecord</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#areTupleFields"><span class="hs-identifier">areTupleFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#tupleFields"><span class="hs-identifier">tupleFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier">tupleFieldNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#sortFields"><span class="hs-identifier">sortFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#sortConstrs"><span class="hs-identifier">sortConstrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#isTypeParam"><span class="hs-identifier">isTypeParam</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#isSizeParam"><span class="hs-identifier">isSizeParam</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier">combineTypeShapes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#matchDims"><span class="hs-identifier">matchDims</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-comment">-- | Values of these types are produces by the parser.  They use</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-comment">-- unadorned names and have no type information, apart from that</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-comment">-- which is syntactically required.</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier">NoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedType"><span class="hs-identifier">UncheckedType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedTypeExp"><span class="hs-identifier">UncheckedTypeExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedIdent"><span class="hs-identifier">UncheckedIdent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedTypeDecl"><span class="hs-identifier">UncheckedTypeDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedDimIndex"><span class="hs-identifier">UncheckedDimIndex</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedSlice"><span class="hs-identifier">UncheckedSlice</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedExp"><span class="hs-identifier">UncheckedExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedModExp"><span class="hs-identifier">UncheckedModExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedSigExp"><span class="hs-identifier">UncheckedSigExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedTypeParam"><span class="hs-identifier">UncheckedTypeParam</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedPat"><span class="hs-identifier">UncheckedPat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedValBind"><span class="hs-identifier">UncheckedValBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedDec"><span class="hs-identifier">UncheckedDec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedSpec"><span class="hs-identifier">UncheckedSpec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedProg"><span class="hs-identifier">UncheckedProg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedCase"><span class="hs-identifier">UncheckedCase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifoldable</span></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bitraversable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">bitraverse</span></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">genericLength</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isPrefixOf</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">sortOn</span></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Ord</span></span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html"><span class="hs-identifier">Futhark.IR.Primitive</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Primitive</span></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Util.html"><span class="hs-identifier">Futhark.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Util.html#maxinum"><span class="hs-identifier">maxinum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.Util.html#nubOrd"><span class="hs-identifier">nubOrd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Util.Pretty.html"><span class="hs-identifier">Futhark.Util.Pretty</span></a></span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html"><span class="hs-identifier">Language.Futhark.Syntax</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">-- | Return the dimensionality of a type.  For non-arrays, this is</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- zero.  For a one-dimensional array it is one, for a two-dimensional</span><span>
</span><span id="line-126"></span><span class="hs-comment">-- it is two, and so forth.</span><span>
</span><span id="line-127"></span><span id="local-6989586621684492683"><span id="local-6989586621684492684"><span class="annot"><a href="Language.Futhark.Prop.html#arrayRank"><span class="hs-identifier hs-type">arrayRank</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492684"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492683"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span></span><span>
</span><span id="line-128"></span><span id="arrayRank"><span class="annot"><span class="annottext">arrayRank :: forall dim as. TypeBase dim as -&gt; Int
</span><a href="Language.Futhark.Prop.html#arrayRank"><span class="hs-identifier hs-var hs-var">arrayRank</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim -&gt; Int
forall dim. ShapeDecl dim -&gt; Int
</span><a href="Language.Futhark.Syntax.html#shapeRank"><span class="hs-identifier hs-var">shapeRank</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl dim -&gt; Int)
-&gt; (TypeBase dim as -&gt; ShapeDecl dim) -&gt; TypeBase dim as -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; ShapeDecl dim
forall dim as. TypeBase dim as -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Prop.html#arrayShape"><span class="hs-identifier hs-var">arrayShape</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-comment">-- | Return the shape of a type - for non-arrays, this is 'mempty'.</span><span>
</span><span id="line-131"></span><span id="local-6989586621684492673"><span id="local-6989586621684492674"><span class="annot"><a href="Language.Futhark.Prop.html#arrayShape"><span class="hs-identifier hs-type">arrayShape</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492674"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492673"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492674"><span class="hs-identifier hs-type">dim</span></a></span></span></span><span>
</span><span id="line-132"></span><span id="arrayShape"><span class="annot"><span class="annottext">arrayShape :: forall dim as. TypeBase dim as -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Prop.html#arrayShape"><span class="hs-identifier hs-var hs-var">arrayShape</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491958"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491958"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491958"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-133"></span><span class="annot"><a href="Language.Futhark.Prop.html#arrayShape"><span class="hs-identifier hs-var">arrayShape</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | Return any free shape declarations in the type, with duplicates</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- removed.</span><span>
</span><span id="line-137"></span><span id="local-6989586621684492665"><span class="annot"><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-type">nestedDims</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621684492665"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-138"></span><span id="nestedDims"><span class="annot"><span class="annottext">nestedDims :: forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var hs-var">nestedDims</span></a></span></span><span> </span><span id="local-6989586621684491937"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as
</span><a href="#local-6989586621684491937"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as
</span><a href="#local-6989586621684491937"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491936"><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491936"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621684491935"><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName)
</span><a href="#local-6989586621684491935"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-141"></span><span>      </span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; [DimDecl VName]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Futhark.Util.html#nubOrd"><span class="hs-identifier hs-var">nubOrd</span></a></span><span> </span><span class="annot"><span class="annottext">([DimDecl VName] -&gt; [DimDecl VName])
-&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; [DimDecl VName]
forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var">nestedDims</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491936"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; [DimDecl VName]
forall dim. ShapeDecl dim -&gt; [dim]
</span><a href="Language.Futhark.Syntax.html#shapeDims"><span class="hs-identifier hs-var hs-var">shapeDims</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName)
</span><a href="#local-6989586621684491935"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491931"><span class="annot"><span class="annottext">Map Name (TypeBase (DimDecl VName) as)
</span><a href="#local-6989586621684491931"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-143"></span><span>      </span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; [DimDecl VName]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Futhark.Util.html#nubOrd"><span class="hs-identifier hs-var">nubOrd</span></a></span><span> </span><span class="annot"><span class="annottext">([DimDecl VName] -&gt; [DimDecl VName])
-&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) as -&gt; [DimDecl VName])
-&gt; Map Name (TypeBase (DimDecl VName) as) -&gt; [DimDecl VName]
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var">nestedDims</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase (DimDecl VName) as)
</span><a href="#local-6989586621684491931"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-145"></span><span>      </span><span class="annot"><span class="annottext">[DimDecl VName]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491927"><span class="annot"><span class="annottext">Map Name [TypeBase (DimDecl VName) as]
</span><a href="#local-6989586621684491927"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-147"></span><span>      </span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; [DimDecl VName]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="Futhark.Util.html#nubOrd"><span class="hs-identifier hs-var">nubOrd</span></a></span><span> </span><span class="annot"><span class="annottext">([DimDecl VName] -&gt; [DimDecl VName])
-&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([TypeBase (DimDecl VName) as] -&gt; [DimDecl VName])
-&gt; Map Name [TypeBase (DimDecl VName) as] -&gt; [DimDecl VName]
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) as -&gt; [DimDecl VName])
-&gt; [TypeBase (DimDecl VName) as] -&gt; [DimDecl VName]
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var">nestedDims</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase (DimDecl VName) as]
</span><a href="#local-6989586621684491927"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491925"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491925"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684491924"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as
</span><a href="#local-6989586621684491924"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684491922"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491922"><span class="hs-identifier hs-var">dims</span></a></span></span><span> </span><span id="local-6989586621684491921"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as
</span><a href="#local-6989586621684491921"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-149"></span><span>      </span><span class="annot"><span class="annottext">(DimDecl VName -&gt; Bool) -&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PName -&gt; DimDecl VName -&gt; Bool
</span><a href="#local-6989586621684491920"><span class="hs-identifier hs-var">notV</span></a></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491925"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([DimDecl VName] -&gt; [DimDecl VName])
-&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(DimDecl VName -&gt; Bool) -&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DimDecl VName -&gt; [DimDecl VName] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">[DimDecl VName]
</span><a href="#local-6989586621684491918"><span class="hs-identifier hs-var">dims'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([DimDecl VName] -&gt; [DimDecl VName])
-&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var">nestedDims</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as
</span><a href="#local-6989586621684491924"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; [DimDecl VName] -&gt; [DimDecl VName]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var">nestedDims</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) as
</span><a href="#local-6989586621684491921"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-150"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>        </span><span id="local-6989586621684491918"><span class="annot"><span class="annottext">dims' :: [DimDecl VName]
</span><a href="#local-6989586621684491918"><span class="hs-identifier hs-var hs-var">dims'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VName -&gt; DimDecl VName) -&gt; [VName] -&gt; [DimDecl VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualName VName -&gt; DimDecl VName
forall vn. QualName vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-var">NamedDim</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; DimDecl VName)
-&gt; (VName -&gt; QualName VName) -&gt; VName -&gt; DimDecl VName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; QualName VName
forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491922"><span class="hs-identifier hs-var">dims</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491915"><span class="annot"><span class="annottext">[TypeArg (DimDecl VName)]
</span><a href="#local-6989586621684491915"><span class="hs-identifier hs-var">targs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><span class="annottext">(TypeArg (DimDecl VName) -&gt; [DimDecl VName])
-&gt; [TypeArg (DimDecl VName)] -&gt; [DimDecl VName]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">TypeArg (DimDecl VName) -&gt; [DimDecl VName]
</span><a href="#local-6989586621684491913"><span class="hs-identifier hs-var">typeArgDims</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeArg (DimDecl VName)]
</span><a href="#local-6989586621684491915"><span class="hs-identifier hs-var">targs</span></a></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621684491913"><span class="annot"><span class="annottext">typeArgDims :: TypeArg (DimDecl VName) -&gt; [DimDecl VName]
</span><a href="#local-6989586621684491913"><span class="hs-identifier hs-var hs-var">typeArgDims</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgDim"><span class="hs-identifier hs-type">TypeArgDim</span></a></span><span> </span><span id="local-6989586621684491911"><span class="annot"><span class="annottext">DimDecl VName
</span><a href="#local-6989586621684491911"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DimDecl VName
</span><a href="#local-6989586621684491911"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><a href="#local-6989586621684491913"><span class="hs-identifier hs-var">typeArgDims</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span id="local-6989586621684491909"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491909"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; [DimDecl VName]
forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var">nestedDims</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491909"><span class="hs-identifier hs-var">at</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621684491920"><span class="annot"><span class="annottext">notV :: PName -&gt; DimDecl VName -&gt; Bool
</span><a href="#local-6989586621684491920"><span class="hs-identifier hs-var hs-var">notV</span></a></span></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="Language.Futhark.Syntax.html#Unnamed"><span class="hs-identifier hs-var">Unnamed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; DimDecl VName -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><a href="#local-6989586621684491920"><span class="hs-identifier hs-var">notV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span id="local-6989586621684491904"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491904"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DimDecl VName -&gt; DimDecl VName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; DimDecl VName
forall vn. QualName vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-var">NamedDim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; QualName VName
forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491904"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- | Change the shape of a type to be just the rank.</span><span>
</span><span id="line-162"></span><span id="local-6989586621684492630"><span id="local-6989586621684492631"><span class="annot"><a href="Language.Futhark.Prop.html#noSizes"><span class="hs-identifier hs-type">noSizes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492631"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621684492630"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621684492630"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-163"></span><span id="noSizes"><span class="annot"><span class="annottext">noSizes :: forall vn as. TypeBase (DimDecl vn) as -&gt; TypeBase () as
</span><a href="Language.Futhark.Prop.html#noSizes"><span class="hs-identifier hs-var hs-var">noSizes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DimDecl vn -&gt; ()) -&gt; TypeBase (DimDecl vn) as -&gt; TypeBase () as
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="annot"><span class="annottext">((DimDecl vn -&gt; ()) -&gt; TypeBase (DimDecl vn) as -&gt; TypeBase () as)
-&gt; (DimDecl vn -&gt; ()) -&gt; TypeBase (DimDecl vn) as -&gt; TypeBase () as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; DimDecl vn -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- | Where does this dimension occur?</span><span>
</span><span id="line-166"></span><span class="hs-keyword">data</span><span> </span><span id="DimPos"><span class="annot"><a href="Language.Futhark.Prop.html#DimPos"><span class="hs-identifier hs-var">DimPos</span></a></span></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Immediately in the argument to 'traverseDims'.</span><span>
</span><span id="line-168"></span><span>    </span><span id="PosImmediate"><span class="annot"><a href="Language.Futhark.Prop.html#PosImmediate"><span class="hs-identifier hs-var">PosImmediate</span></a></span></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | In a function parameter type.</span><span>
</span><span id="line-170"></span><span>    </span><span id="PosParam"><span class="annot"><a href="Language.Futhark.Prop.html#PosParam"><span class="hs-identifier hs-var">PosParam</span></a></span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | In a function return type.</span><span>
</span><span id="line-172"></span><span>    </span><span id="PosReturn"><span class="annot"><a href="Language.Futhark.Prop.html#PosReturn"><span class="hs-identifier hs-var">PosReturn</span></a></span></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491893"><span id="local-6989586621684491895"><span class="annot"><span class="annottext">DimPos -&gt; DimPos -&gt; Bool
(DimPos -&gt; DimPos -&gt; Bool)
-&gt; (DimPos -&gt; DimPos -&gt; Bool) -&gt; Eq DimPos
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DimPos -&gt; DimPos -&gt; Bool
$c/= :: DimPos -&gt; DimPos -&gt; Bool
== :: DimPos -&gt; DimPos -&gt; Bool
$c== :: DimPos -&gt; DimPos -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491873"><span id="local-6989586621684491875"><span id="local-6989586621684491878"><span id="local-6989586621684491881"><span id="local-6989586621684491884"><span id="local-6989586621684491886"><span id="local-6989586621684491888"><span class="annot"><span class="annottext">Eq DimPos
Eq DimPos
-&gt; (DimPos -&gt; DimPos -&gt; Ordering)
-&gt; (DimPos -&gt; DimPos -&gt; Bool)
-&gt; (DimPos -&gt; DimPos -&gt; Bool)
-&gt; (DimPos -&gt; DimPos -&gt; Bool)
-&gt; (DimPos -&gt; DimPos -&gt; Bool)
-&gt; (DimPos -&gt; DimPos -&gt; DimPos)
-&gt; (DimPos -&gt; DimPos -&gt; DimPos)
-&gt; Ord DimPos
DimPos -&gt; DimPos -&gt; Bool
DimPos -&gt; DimPos -&gt; Ordering
DimPos -&gt; DimPos -&gt; DimPos
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: DimPos -&gt; DimPos -&gt; DimPos
$cmin :: DimPos -&gt; DimPos -&gt; DimPos
max :: DimPos -&gt; DimPos -&gt; DimPos
$cmax :: DimPos -&gt; DimPos -&gt; DimPos
&gt;= :: DimPos -&gt; DimPos -&gt; Bool
$c&gt;= :: DimPos -&gt; DimPos -&gt; Bool
&gt; :: DimPos -&gt; DimPos -&gt; Bool
$c&gt; :: DimPos -&gt; DimPos -&gt; Bool
&lt;= :: DimPos -&gt; DimPos -&gt; Bool
$c&lt;= :: DimPos -&gt; DimPos -&gt; Bool
&lt; :: DimPos -&gt; DimPos -&gt; Bool
$c&lt; :: DimPos -&gt; DimPos -&gt; Bool
compare :: DimPos -&gt; DimPos -&gt; Ordering
$ccompare :: DimPos -&gt; DimPos -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491866"><span id="local-6989586621684491868"><span id="local-6989586621684491870"><span class="annot"><span class="annottext">Int -&gt; DimPos -&gt; ShowS
[DimPos] -&gt; ShowS
DimPos -&gt; String
(Int -&gt; DimPos -&gt; ShowS)
-&gt; (DimPos -&gt; String) -&gt; ([DimPos] -&gt; ShowS) -&gt; Show DimPos
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DimPos] -&gt; ShowS
$cshowList :: [DimPos] -&gt; ShowS
show :: DimPos -&gt; String
$cshow :: DimPos -&gt; String
showsPrec :: Int -&gt; DimPos -&gt; ShowS
$cshowsPrec :: Int -&gt; DimPos -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">-- | Perform a traversal (possibly including replacement) on sizes</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- that are parameters in a function type, but also including the type</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- immediately passed to the function.  Also passes along a set of the</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- parameter names inside the type that have come in scope at the</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- occurrence of the dimension.</span><span>
</span><span id="line-180"></span><span class="annot"><a href="Language.Futhark.Prop.html#traverseDims"><span class="hs-identifier hs-type">traverseDims</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621684492619"><span class="annot"><a href="#local-6989586621684492619"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621684492618"><span class="annot"><a href="#local-6989586621684492618"><span class="hs-identifier hs-type">fdim</span></a></span></span><span> </span><span id="local-6989586621684492617"><span class="annot"><a href="#local-6989586621684492617"><span class="hs-identifier hs-type">tdim</span></a></span></span><span> </span><span id="local-6989586621684492616"><span class="annot"><a href="#local-6989586621684492616"><span class="hs-identifier hs-type">als</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-182"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621684492619"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Prop.html#DimPos"><span class="hs-identifier hs-type">DimPos</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492618"><span class="hs-identifier hs-type">fdim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492619"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492617"><span class="hs-identifier hs-type">tdim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492618"><span class="hs-identifier hs-type">fdim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492616"><span class="hs-identifier hs-type">als</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="#local-6989586621684492619"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492617"><span class="hs-identifier hs-type">tdim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492616"><span class="hs-identifier hs-type">als</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span id="traverseDims"><span class="annot"><span class="annottext">traverseDims :: forall (f :: * -&gt; *) fdim tdim als.
Applicative f =&gt;
(Set VName -&gt; DimPos -&gt; fdim -&gt; f tdim)
-&gt; TypeBase fdim als -&gt; f (TypeBase tdim als)
</span><a href="Language.Futhark.Prop.html#traverseDims"><span class="hs-identifier hs-var hs-var">traverseDims</span></a></span></span><span> </span><span id="local-6989586621684491860"><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; fdim -&gt; f tdim
</span><a href="#local-6989586621684491860"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; TypeBase fdim als -&gt; f (TypeBase tdim als)
forall als'.
Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
</span><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="Language.Futhark.Prop.html#PosImmediate"><span class="hs-identifier hs-var">PosImmediate</span></a></span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><a href="#local-6989586621684491859"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621684492610"><span class="annot"><a href="#local-6989586621684492610"><span class="hs-identifier hs-type">als'</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-190"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>      </span><span class="annot"><a href="Language.Futhark.Prop.html#DimPos"><span class="hs-identifier hs-type">DimPos</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492618"><span class="hs-identifier hs-type">fdim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492610"><span class="hs-identifier hs-type">als'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><a href="#local-6989586621684492619"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492617"><span class="hs-identifier hs-type">tdim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492610"><span class="hs-identifier hs-type">als'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>    </span><span id="local-6989586621684491859"><span class="annot"><span class="annottext">go :: forall als'.
Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
</span><a href="#local-6989586621684491859"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621684491835"><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491835"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491834"><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491834"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621684491833"><span class="annot"><span class="annottext">t :: TypeBase fdim als'
</span><a href="#local-6989586621684491833"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>      </span><span class="annot"><span class="annottext">(fdim -&gt; f tdim)
-&gt; (als' -&gt; f als') -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
forall (t :: * -&gt; * -&gt; *) (f :: * -&gt; *) a c b d.
(Bitraversable t, Applicative f) =&gt;
(a -&gt; f c) -&gt; (b -&gt; f d) -&gt; t a b -&gt; f (t c d)
</span><span class="hs-identifier hs-var">bitraverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; fdim -&gt; f tdim
</span><a href="#local-6989586621684491860"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491835"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491834"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">als' -&gt; f als'
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TypeBase fdim als'
</span><a href="#local-6989586621684491833"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621684491832"><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491832"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491831"><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491831"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491830"><span class="annot"><span class="annottext">Map Name (TypeBase fdim als')
</span><a href="#local-6989586621684491830"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><span class="annottext">ScalarTypeBase tdim als' -&gt; TypeBase tdim als'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase tdim als' -&gt; TypeBase tdim als')
-&gt; (Map Name (TypeBase tdim als') -&gt; ScalarTypeBase tdim als')
-&gt; Map Name (TypeBase tdim als')
-&gt; TypeBase tdim als'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase tdim als') -&gt; ScalarTypeBase tdim als'
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name (TypeBase tdim als') -&gt; TypeBase tdim als')
-&gt; f (Map Name (TypeBase tdim als')) -&gt; f (TypeBase tdim als')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase fdim als' -&gt; f (TypeBase tdim als'))
-&gt; Map Name (TypeBase fdim als')
-&gt; f (Map Name (TypeBase tdim als'))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
forall als'.
Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
</span><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491832"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491831"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase fdim als')
</span><a href="#local-6989586621684491830"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621684491827"><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491827"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491826"><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491826"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span id="local-6989586621684491825"><span class="annot"><span class="annottext">als'
</span><a href="#local-6989586621684491825"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621684491824"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491824"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684491823"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491823"><span class="hs-identifier hs-var">tn</span></a></span></span><span> </span><span id="local-6989586621684491822"><span class="annot"><span class="annottext">[TypeArg fdim]
</span><a href="#local-6989586621684491822"><span class="hs-identifier hs-var">targs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="annottext">ScalarTypeBase tdim als' -&gt; TypeBase tdim als'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase tdim als' -&gt; TypeBase tdim als')
-&gt; f (ScalarTypeBase tdim als') -&gt; f (TypeBase tdim als')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">als'
-&gt; Uniqueness
-&gt; TypeName
-&gt; [TypeArg tdim]
-&gt; ScalarTypeBase tdim als'
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">als'
</span><a href="#local-6989586621684491825"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491824"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491823"><span class="hs-identifier hs-var">tn</span></a></span><span> </span><span class="annot"><span class="annottext">([TypeArg tdim] -&gt; ScalarTypeBase tdim als')
-&gt; f [TypeArg tdim] -&gt; f (ScalarTypeBase tdim als')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeArg fdim -&gt; f (TypeArg tdim))
-&gt; [TypeArg fdim] -&gt; f [TypeArg tdim]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; TypeArg fdim -&gt; f (TypeArg tdim)
</span><a href="#local-6989586621684491821"><span class="hs-identifier hs-var">onTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491827"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491826"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeArg fdim]
</span><a href="#local-6989586621684491822"><span class="hs-identifier hs-var">targs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621684491820"><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491820"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491819"><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491819"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491818"><span class="annot"><span class="annottext">Map Name [TypeBase fdim als']
</span><a href="#local-6989586621684491818"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-201"></span><span>      </span><span class="annot"><span class="annottext">ScalarTypeBase tdim als' -&gt; TypeBase tdim als'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase tdim als' -&gt; TypeBase tdim als')
-&gt; (Map Name [TypeBase tdim als'] -&gt; ScalarTypeBase tdim als')
-&gt; Map Name [TypeBase tdim als']
-&gt; TypeBase tdim als'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase tdim als'] -&gt; ScalarTypeBase tdim als'
forall dim as. Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-var">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name [TypeBase tdim als'] -&gt; TypeBase tdim als')
-&gt; f (Map Name [TypeBase tdim als']) -&gt; f (TypeBase tdim als')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">([TypeBase fdim als'] -&gt; f [TypeBase tdim als'])
-&gt; Map Name [TypeBase fdim als']
-&gt; f (Map Name [TypeBase tdim als'])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase fdim als' -&gt; f (TypeBase tdim als'))
-&gt; [TypeBase fdim als'] -&gt; f [TypeBase tdim als']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
forall als'.
Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
</span><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491820"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491819"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase fdim als']
</span><a href="#local-6989586621684491818"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="annot"><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span id="local-6989586621684491817"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491817"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>      </span><span class="annot"><span class="annottext">TypeBase tdim als' -&gt; f (TypeBase tdim als')
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase tdim als' -&gt; f (TypeBase tdim als'))
-&gt; TypeBase tdim als' -&gt; f (TypeBase tdim als')
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase tdim als' -&gt; TypeBase tdim als'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase tdim als' -&gt; TypeBase tdim als')
-&gt; ScalarTypeBase tdim als' -&gt; TypeBase tdim als'
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase tdim als'
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491817"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621684491816"><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491816"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span id="local-6989586621684491815"><span class="annot"><span class="annottext">als'
</span><a href="#local-6989586621684491815"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span id="local-6989586621684491814"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491814"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684491813"><span class="annot"><span class="annottext">TypeBase fdim als'
</span><a href="#local-6989586621684491813"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684491812"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491812"><span class="hs-identifier hs-var">dims</span></a></span></span><span> </span><span id="local-6989586621684491811"><span class="annot"><span class="annottext">TypeBase fdim als'
</span><a href="#local-6989586621684491811"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>      </span><span class="annot"><span class="annottext">ScalarTypeBase tdim als' -&gt; TypeBase tdim als'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase tdim als' -&gt; TypeBase tdim als')
-&gt; f (ScalarTypeBase tdim als') -&gt; f (TypeBase tdim als')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">als'
-&gt; PName
-&gt; TypeBase tdim als'
-&gt; RetTypeBase tdim als'
-&gt; ScalarTypeBase tdim als'
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">als'
</span><a href="#local-6989586621684491815"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491814"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase tdim als'
 -&gt; RetTypeBase tdim als' -&gt; ScalarTypeBase tdim als')
-&gt; f (TypeBase tdim als')
-&gt; f (RetTypeBase tdim als' -&gt; ScalarTypeBase tdim als')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
forall als'.
Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
</span><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491810"><span class="hs-identifier hs-var">bound'</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="Language.Futhark.Prop.html#PosParam"><span class="hs-identifier hs-var">PosParam</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase fdim als'
</span><a href="#local-6989586621684491813"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">f (RetTypeBase tdim als' -&gt; ScalarTypeBase tdim als')
-&gt; f (RetTypeBase tdim als') -&gt; f (ScalarTypeBase tdim als')
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase tdim als' -&gt; RetTypeBase tdim als'
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491812"><span class="hs-identifier hs-var">dims</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase tdim als' -&gt; RetTypeBase tdim als')
-&gt; f (TypeBase tdim als') -&gt; f (RetTypeBase tdim als')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
forall als'.
Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
</span><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491810"><span class="hs-identifier hs-var">bound'</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="Language.Futhark.Prop.html#PosReturn"><span class="hs-identifier hs-var">PosReturn</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase fdim als'
</span><a href="#local-6989586621684491811"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-207"></span><span>        </span><span id="local-6989586621684491810"><span class="annot"><span class="annottext">bound' :: Set VName
</span><a href="#local-6989586621684491810"><span class="hs-identifier hs-var hs-var">bound'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-208"></span><span>          </span><span class="annot"><span class="annottext">[VName] -&gt; Set VName
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491812"><span class="hs-identifier hs-var">dims</span></a></span><span>
</span><span id="line-209"></span><span>            </span><span class="annot"><span class="annottext">Set VName -&gt; Set VName -&gt; Set VName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491814"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-210"></span><span>              </span><span class="annot"><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span id="local-6989586621684491804"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491804"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VName -&gt; Set VName -&gt; Set VName
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">S.insert</span></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491804"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491816"><span class="hs-identifier hs-var">bound</span></a></span><span>
</span><span id="line-211"></span><span>              </span><span class="annot"><span class="annottext">PName
</span><a href="Language.Futhark.Syntax.html#Unnamed"><span class="hs-identifier hs-var">Unnamed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491816"><span class="hs-identifier hs-var">bound</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>    </span><span id="local-6989586621684491821"><span class="annot"><span class="annottext">onTypeArg :: Set VName -&gt; DimPos -&gt; TypeArg fdim -&gt; f (TypeArg tdim)
</span><a href="#local-6989586621684491821"><span class="hs-identifier hs-var hs-var">onTypeArg</span></a></span></span><span> </span><span id="local-6989586621684491796"><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491796"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491795"><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491795"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgDim"><span class="hs-identifier hs-type">TypeArgDim</span></a></span><span> </span><span id="local-6989586621684491794"><span class="annot"><span class="annottext">fdim
</span><a href="#local-6989586621684491794"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621684491793"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491793"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>      </span><span class="annot"><span class="annottext">tdim -&gt; SrcLoc -&gt; TypeArg tdim
forall dim. dim -&gt; SrcLoc -&gt; TypeArg dim
</span><a href="Language.Futhark.Syntax.html#TypeArgDim"><span class="hs-identifier hs-var">TypeArgDim</span></a></span><span> </span><span class="annot"><span class="annottext">(tdim -&gt; SrcLoc -&gt; TypeArg tdim)
-&gt; f tdim -&gt; f (SrcLoc -&gt; TypeArg tdim)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; fdim -&gt; f tdim
</span><a href="#local-6989586621684491860"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491796"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491795"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">fdim
</span><a href="#local-6989586621684491794"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">f (SrcLoc -&gt; TypeArg tdim) -&gt; f SrcLoc -&gt; f (TypeArg tdim)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; f SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491793"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><a href="#local-6989586621684491821"><span class="hs-identifier hs-var">onTypeArg</span></a></span><span> </span><span id="local-6989586621684491792"><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491792"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491791"><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491791"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span id="local-6989586621684491790"><span class="annot"><span class="annottext">TypeBase fdim ()
</span><a href="#local-6989586621684491790"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684491789"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491789"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">TypeBase tdim () -&gt; SrcLoc -&gt; TypeArg tdim
forall dim. TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
</span><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-var">TypeArgType</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase tdim () -&gt; SrcLoc -&gt; TypeArg tdim)
-&gt; f (TypeBase tdim ()) -&gt; f (SrcLoc -&gt; TypeArg tdim)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; DimPos -&gt; TypeBase fdim () -&gt; f (TypeBase tdim ())
forall als'.
Set VName -&gt; DimPos -&gt; TypeBase fdim als' -&gt; f (TypeBase tdim als')
</span><a href="#local-6989586621684491859"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
</span><a href="#local-6989586621684491792"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="#local-6989586621684491791"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase fdim ()
</span><a href="#local-6989586621684491790"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">f (SrcLoc -&gt; TypeArg tdim) -&gt; f SrcLoc -&gt; f (TypeArg tdim)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; f SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491789"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="annot"><a href="Language.Futhark.Prop.html#mustBeExplicitAux"><span class="hs-identifier hs-type">mustBeExplicitAux</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-219"></span><span id="mustBeExplicitAux"><span class="annot"><span class="annottext">mustBeExplicitAux :: TypeBase (DimDecl VName) () -&gt; Map VName Bool
</span><a href="Language.Futhark.Prop.html#mustBeExplicitAux"><span class="hs-identifier hs-var hs-var">mustBeExplicitAux</span></a></span></span><span> </span><span id="local-6989586621684491786"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491786"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><span class="annottext">State (Map VName Bool) (TypeBase () ())
-&gt; Map VName Bool -&gt; Map VName Bool
forall s a. State s a -&gt; s -&gt; s
</span><span class="hs-identifier hs-var">execState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Set VName
 -&gt; DimPos -&gt; DimDecl VName -&gt; StateT (Map VName Bool) Identity ())
-&gt; TypeBase (DimDecl VName) ()
-&gt; State (Map VName Bool) (TypeBase () ())
forall (f :: * -&gt; *) fdim tdim als.
Applicative f =&gt;
(Set VName -&gt; DimPos -&gt; fdim -&gt; f tdim)
-&gt; TypeBase fdim als -&gt; f (TypeBase tdim als)
</span><a href="Language.Futhark.Prop.html#traverseDims"><span class="hs-identifier hs-var">traverseDims</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName
-&gt; DimPos -&gt; DimDecl VName -&gt; StateT (Map VName Bool) Identity ()
forall {k} {m :: * -&gt; *}.
(Ord k, MonadState (Map k Bool) m) =&gt;
Set k -&gt; DimPos -&gt; DimDecl k -&gt; m ()
</span><a href="#local-6989586621684491784"><span class="hs-identifier hs-var">onDim</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491786"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map VName Bool
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-221"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span>    </span><span id="local-6989586621684491784"><span class="annot"><span class="annottext">onDim :: Set k -&gt; DimPos -&gt; DimDecl k -&gt; m ()
</span><a href="#local-6989586621684491784"><span class="hs-identifier hs-var hs-var">onDim</span></a></span></span><span> </span><span id="local-6989586621684491771"><span class="annot"><span class="annottext">Set k
</span><a href="#local-6989586621684491771"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-type">NamedDim</span></a></span><span> </span><span id="local-6989586621684491770"><span class="annot"><span class="annottext">QualName k
</span><a href="#local-6989586621684491770"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QualName k -&gt; k
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName k
</span><a href="#local-6989586621684491770"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">k -&gt; Set k -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`S.member`</span></span><span> </span><span class="annot"><span class="annottext">Set k
</span><a href="#local-6989586621684491771"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-224"></span><span>        </span><span class="annot"><span class="annottext">(Map k Bool -&gt; Map k Bool) -&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((Map k Bool -&gt; Map k Bool) -&gt; m ())
-&gt; (Map k Bool -&gt; Map k Bool) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684491766"><span class="annot"><span class="annottext">Map k Bool
</span><a href="#local-6989586621684491766"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool -&gt; Bool) -&gt; k -&gt; Bool -&gt; Map k Bool -&gt; Map k Bool
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insertWith</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">(&amp;&amp;)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualName k -&gt; k
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName k
</span><a href="#local-6989586621684491770"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Map k Bool
</span><a href="#local-6989586621684491766"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><a href="#local-6989586621684491784"><span class="hs-identifier hs-var">onDim</span></a></span><span> </span><span class="annot"><span class="annottext">Set k
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><a href="Language.Futhark.Prop.html#PosImmediate"><span class="hs-identifier hs-var">PosImmediate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-type">NamedDim</span></a></span><span> </span><span id="local-6989586621684491763"><span class="annot"><span class="annottext">QualName k
</span><a href="#local-6989586621684491763"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-226"></span><span>      </span><span class="annot"><span class="annottext">(Map k Bool -&gt; Map k Bool) -&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((Map k Bool -&gt; Map k Bool) -&gt; m ())
-&gt; (Map k Bool -&gt; Map k Bool) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684491762"><span class="annot"><span class="annottext">Map k Bool
</span><a href="#local-6989586621684491762"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool -&gt; Bool) -&gt; k -&gt; Bool -&gt; Map k Bool -&gt; Map k Bool
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insertWith</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">(&amp;&amp;)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualName k -&gt; k
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName k
</span><a href="#local-6989586621684491763"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Map k Bool
</span><a href="#local-6989586621684491762"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><a href="#local-6989586621684491784"><span class="hs-identifier hs-var">onDim</span></a></span><span> </span><span class="annot"><span class="annottext">Set k
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-type">NamedDim</span></a></span><span> </span><span id="local-6989586621684491761"><span class="annot"><span class="annottext">QualName k
</span><a href="#local-6989586621684491761"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-228"></span><span>      </span><span class="annot"><span class="annottext">(Map k Bool -&gt; Map k Bool) -&gt; m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((Map k Bool -&gt; Map k Bool) -&gt; m ())
-&gt; (Map k Bool -&gt; Map k Bool) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool -&gt; Bool) -&gt; k -&gt; Bool -&gt; Map k Bool -&gt; Map k Bool
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insertWith</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">(&amp;&amp;)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualName k -&gt; k
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName k
</span><a href="#local-6989586621684491761"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-229"></span><span>    </span><span class="annot"><a href="#local-6989586621684491784"><span class="hs-identifier hs-var">onDim</span></a></span><span> </span><span class="annot"><span class="annottext">Set k
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DimPos
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DimDecl k
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>      </span><span class="annot"><span class="annottext">() -&gt; m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-comment">-- | Figure out which of the sizes in a parameter type must be passed</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- explicitly, because their first use is as something else than just</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- an array dimension.  'mustBeExplicit' is like this function, but</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- first decomposes into parameter types.</span><span>
</span><span id="line-236"></span><span class="annot"><a href="Language.Futhark.Prop.html#mustBeExplicitInType"><span class="hs-identifier hs-type">mustBeExplicitInType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-237"></span><span id="mustBeExplicitInType"><span class="annot"><span class="annottext">mustBeExplicitInType :: TypeBase (DimDecl VName) () -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#mustBeExplicitInType"><span class="hs-identifier hs-var hs-var">mustBeExplicitInType</span></a></span></span><span> </span><span id="local-6989586621684491760"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491760"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-238"></span><span>  </span><span class="annot"><span class="annottext">[VName] -&gt; Set VName
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">([VName] -&gt; Set VName) -&gt; [VName] -&gt; Set VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map VName Bool -&gt; [VName]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">(Map VName Bool -&gt; [VName]) -&gt; Map VName Bool -&gt; [VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Map VName Bool -&gt; Map VName Bool
forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.filter</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(Map VName Bool -&gt; Map VName Bool)
-&gt; Map VName Bool -&gt; Map VName Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; Map VName Bool
</span><a href="Language.Futhark.Prop.html#mustBeExplicitAux"><span class="hs-identifier hs-var">mustBeExplicitAux</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491760"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="hs-comment">-- | Figure out which of the sizes in a binding type must be passed</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- explicitly, because their first use is as something else than just</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- an array dimension.</span><span>
</span><span id="line-243"></span><span class="annot"><a href="Language.Futhark.Prop.html#mustBeExplicit"><span class="hs-identifier hs-type">mustBeExplicit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-244"></span><span id="mustBeExplicit"><span class="annot"><span class="annottext">mustBeExplicit :: TypeBase (DimDecl VName) () -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#mustBeExplicit"><span class="hs-identifier hs-var hs-var">mustBeExplicit</span></a></span></span><span> </span><span id="local-6989586621684491756"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491756"><span class="hs-identifier hs-var">bind_t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491755"><span class="annot"><span class="annottext">[TypeBase (DimDecl VName) ()]
</span><a href="#local-6989586621684491755"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491754"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491754"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; ([TypeBase (DimDecl VName) ()], TypeBase (DimDecl VName) ())
forall dim as.
TypeBase dim as -&gt; ([TypeBase dim as], TypeBase dim as)
</span><a href="Language.Futhark.Prop.html#unfoldFunType"><span class="hs-identifier hs-var">unfoldFunType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491756"><span class="hs-identifier hs-var">bind_t</span></a></span><span>
</span><span id="line-246"></span><span>      </span><span id="local-6989586621684491751"><span class="annot"><span class="annottext">alsoRet :: Map VName Bool -&gt; Map VName Bool
</span><a href="#local-6989586621684491751"><span class="hs-identifier hs-var hs-var">alsoRet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-247"></span><span>        </span><span class="annot"><span class="annottext">(Bool -&gt; Bool -&gt; Bool)
-&gt; Map VName Bool -&gt; Map VName Bool -&gt; Map VName Bool
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.unionWith</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">(&amp;&amp;)</span></span><span> </span><span class="annot"><span class="annottext">(Map VName Bool -&gt; Map VName Bool -&gt; Map VName Bool)
-&gt; Map VName Bool -&gt; Map VName Bool -&gt; Map VName Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-248"></span><span>          </span><span class="annot"><span class="annottext">[(VName, Bool)] -&gt; Map VName Bool
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(VName, Bool)] -&gt; Map VName Bool)
-&gt; [(VName, Bool)] -&gt; Map VName Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; [Bool] -&gt; [(VName, Bool)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set VName -&gt; [VName]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set VName -&gt; [VName]) -&gt; Set VName -&gt; [VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; Set VName
forall als. TypeBase (DimDecl VName) als -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-var">typeDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491754"><span class="hs-identifier hs-var">ret</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Bool] -&gt; [(VName, Bool)]) -&gt; [Bool] -&gt; [(VName, Bool)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-249"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; Set VName
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">([VName] -&gt; Set VName) -&gt; [VName] -&gt; Set VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map VName Bool -&gt; [VName]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">(Map VName Bool -&gt; [VName]) -&gt; Map VName Bool -&gt; [VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Map VName Bool -&gt; Map VName Bool
forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.filter</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(Map VName Bool -&gt; Map VName Bool)
-&gt; Map VName Bool -&gt; Map VName Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map VName Bool -&gt; Map VName Bool
</span><a href="#local-6989586621684491751"><span class="hs-identifier hs-var">alsoRet</span></a></span><span> </span><span class="annot"><span class="annottext">(Map VName Bool -&gt; Map VName Bool)
-&gt; Map VName Bool -&gt; Map VName Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Map VName Bool -&gt; TypeBase (DimDecl VName) () -&gt; Map VName Bool)
-&gt; Map VName Bool
-&gt; [TypeBase (DimDecl VName) ()]
-&gt; Map VName Bool
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Map VName Bool -&gt; TypeBase (DimDecl VName) () -&gt; Map VName Bool
</span><a href="#local-6989586621684491745"><span class="hs-identifier hs-var">onType</span></a></span><span> </span><span class="annot"><span class="annottext">Map VName Bool
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">[TypeBase (DimDecl VName) ()]
</span><a href="#local-6989586621684491755"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621684491745"><span class="annot"><span class="annottext">onType :: Map VName Bool -&gt; TypeBase (DimDecl VName) () -&gt; Map VName Bool
</span><a href="#local-6989586621684491745"><span class="hs-identifier hs-var hs-var">onType</span></a></span></span><span> </span><span id="local-6989586621684491742"><span class="annot"><span class="annottext">Map VName Bool
</span><a href="#local-6989586621684491742"><span class="hs-identifier hs-var">uses</span></a></span></span><span> </span><span id="local-6989586621684491741"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491741"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map VName Bool
</span><a href="#local-6989586621684491742"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">Map VName Bool -&gt; Map VName Bool -&gt; Map VName Bool
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; Map VName Bool
</span><a href="Language.Futhark.Prop.html#mustBeExplicitAux"><span class="hs-identifier hs-var">mustBeExplicitAux</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491741"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-comment">-- Left-biased union.</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">-- | Return the uniqueness of a type.</span><span>
</span><span id="line-254"></span><span id="local-6989586621684492549"><span id="local-6989586621684492550"><span class="annot"><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-type">uniqueness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492550"><span class="hs-identifier hs-type">shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492549"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Uniqueness"><span class="hs-identifier hs-type">Uniqueness</span></a></span></span></span><span>
</span><span id="line-255"></span><span id="uniqueness"><span class="annot"><span class="annottext">uniqueness :: forall shape as. TypeBase shape as -&gt; Uniqueness
</span><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var hs-var">uniqueness</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491733"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491733"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase shape ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl shape
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491733"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-256"></span><span class="annot"><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var">uniqueness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491732"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491732"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TypeArg shape]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491732"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-257"></span><span class="annot"><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var">uniqueness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491731"><span class="annot"><span class="annottext">Map Name [TypeBase shape as]
</span><a href="#local-6989586621684491731"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([TypeBase shape as] -&gt; Uniqueness)
-&gt; [[TypeBase shape as]] -&gt; Uniqueness
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase shape as -&gt; Uniqueness)
-&gt; [TypeBase shape as] -&gt; Uniqueness
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as -&gt; Uniqueness
forall shape as. TypeBase shape as -&gt; Uniqueness
</span><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var">uniqueness</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([[TypeBase shape as]] -&gt; Uniqueness)
-&gt; [[TypeBase shape as]] -&gt; Uniqueness
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase shape as] -&gt; [[TypeBase shape as]]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">M.elems</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase shape as]
</span><a href="#local-6989586621684491731"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-258"></span><span class="annot"><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var">uniqueness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491729"><span class="annot"><span class="annottext">Map Name (TypeBase shape as)
</span><a href="#local-6989586621684491729"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypeBase shape as -&gt; Uniqueness)
-&gt; [TypeBase shape as] -&gt; Uniqueness
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as -&gt; Uniqueness
forall shape as. TypeBase shape as -&gt; Uniqueness
</span><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var">uniqueness</span></a></span><span> </span><span class="annot"><span class="annottext">([TypeBase shape as] -&gt; Uniqueness)
-&gt; [TypeBase shape as] -&gt; Uniqueness
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase shape as) -&gt; [TypeBase shape as]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">M.elems</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase shape as)
</span><a href="#local-6989586621684491729"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-259"></span><span class="annot"><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var">uniqueness</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-comment">-- | @unique t@ is 'True' if the type of the argument is unique.</span><span>
</span><span id="line-262"></span><span id="local-6989586621684492543"><span id="local-6989586621684492544"><span class="annot"><a href="Language.Futhark.Prop.html#unique"><span class="hs-identifier hs-type">unique</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492544"><span class="hs-identifier hs-type">shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492543"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-263"></span><span id="unique"><span class="annot"><span class="annottext">unique :: forall shape as. TypeBase shape as -&gt; Bool
</span><a href="Language.Futhark.Prop.html#unique"><span class="hs-identifier hs-var hs-var">unique</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Uniqueness -&gt; Uniqueness -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Uniqueness -&gt; Bool)
-&gt; (TypeBase shape as -&gt; Uniqueness) -&gt; TypeBase shape as -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as -&gt; Uniqueness
forall shape as. TypeBase shape as -&gt; Uniqueness
</span><a href="Language.Futhark.Prop.html#uniqueness"><span class="hs-identifier hs-var">uniqueness</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-comment">-- | Return the set of all variables mentioned in the aliasing of a</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- type.</span><span>
</span><span id="line-267"></span><span id="local-6989586621684492539"><span id="local-6989586621684492540"><span class="annot"><a href="Language.Futhark.Prop.html#aliases"><span class="hs-identifier hs-type">aliases</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492540"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492539"><span class="hs-identifier hs-type">shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492540"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492540"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-268"></span><span id="aliases"><span class="annot"><span class="annottext">aliases :: forall as shape. Monoid as =&gt; TypeBase shape as -&gt; as
</span><a href="Language.Futhark.Prop.html#aliases"><span class="hs-identifier hs-var hs-var">aliases</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(shape -&gt; as) -&gt; (as -&gt; as) -&gt; TypeBase shape as -&gt; as
forall (p :: * -&gt; * -&gt; *) m a b.
(Bifoldable p, Monoid m) =&gt;
(a -&gt; m) -&gt; (b -&gt; m) -&gt; p a b -&gt; m
</span><span class="hs-identifier hs-var">bifoldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as -&gt; shape -&gt; as
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">as
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">as -&gt; as
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- | @diet t@ returns a description of how a function parameter of</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- type @t@ might consume its argument.</span><span>
</span><span id="line-272"></span><span id="local-6989586621684492530"><span id="local-6989586621684492531"><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-type">diet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492531"><span class="hs-identifier hs-type">shape</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492530"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Diet"><span class="hs-identifier hs-type">Diet</span></a></span></span></span><span>
</span><span id="line-273"></span><span id="diet"><span class="annot"><span class="annottext">diet :: forall shape as. TypeBase shape as -&gt; Diet
</span><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var hs-var">diet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491717"><span class="annot"><span class="annottext">Map Name (TypeBase shape as)
</span><a href="#local-6989586621684491717"><span class="hs-identifier hs-var">ets</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name Diet -&gt; Diet
</span><a href="Language.Futhark.Syntax.html#RecordDiet"><span class="hs-identifier hs-var">RecordDiet</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name Diet -&gt; Diet) -&gt; Map Name Diet -&gt; Diet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase shape as -&gt; Diet)
-&gt; Map Name (TypeBase shape as) -&gt; Map Name Diet
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as -&gt; Diet
forall shape as. TypeBase shape as -&gt; Diet
</span><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase shape as)
</span><a href="#local-6989586621684491717"><span class="hs-identifier hs-var">ets</span></a></span><span>
</span><span id="line-274"></span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Diet
</span><a href="Language.Futhark.Syntax.html#Observe"><span class="hs-identifier hs-var">Observe</span></a></span><span>
</span><span id="line-275"></span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491714"><span class="annot"><span class="annottext">TypeBase shape as
</span><a href="#local-6989586621684491714"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491713"><span class="annot"><span class="annottext">TypeBase shape as
</span><a href="#local-6989586621684491713"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Diet -&gt; Diet -&gt; Diet
</span><a href="Language.Futhark.Syntax.html#FuncDiet"><span class="hs-identifier hs-var">FuncDiet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase shape as -&gt; Diet
forall shape as. TypeBase shape as -&gt; Diet
</span><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as
</span><a href="#local-6989586621684491714"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase shape as -&gt; Diet
forall shape as. TypeBase shape as -&gt; Diet
</span><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as
</span><a href="#local-6989586621684491713"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase shape ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl shape
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Diet
</span><a href="Language.Futhark.Syntax.html#Consume"><span class="hs-identifier hs-var">Consume</span></a></span><span>
</span><span id="line-277"></span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase shape ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl shape
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Diet
</span><a href="Language.Futhark.Syntax.html#Observe"><span class="hs-identifier hs-var">Observe</span></a></span><span>
</span><span id="line-278"></span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TypeArg shape]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Diet
</span><a href="Language.Futhark.Syntax.html#Consume"><span class="hs-identifier hs-var">Consume</span></a></span><span>
</span><span id="line-279"></span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TypeArg shape]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Diet
</span><a href="Language.Futhark.Syntax.html#Observe"><span class="hs-identifier hs-var">Observe</span></a></span><span>
</span><span id="line-280"></span><span class="annot"><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491710"><span class="annot"><span class="annottext">Map Name [TypeBase shape as]
</span><a href="#local-6989586621684491710"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name [Diet] -&gt; Diet
</span><a href="Language.Futhark.Syntax.html#SumDiet"><span class="hs-identifier hs-var">SumDiet</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name [Diet] -&gt; Diet) -&gt; Map Name [Diet] -&gt; Diet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([TypeBase shape as] -&gt; [Diet])
-&gt; Map Name [TypeBase shape as] -&gt; Map Name [Diet]
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">M.map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase shape as -&gt; Diet) -&gt; [TypeBase shape as] -&gt; [Diet]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeBase shape as -&gt; Diet
forall shape as. TypeBase shape as -&gt; Diet
</span><a href="Language.Futhark.Prop.html#diet"><span class="hs-identifier hs-var">diet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase shape as]
</span><a href="#local-6989586621684491710"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-comment">-- | Convert any type to one that has rank information, no alias</span><span>
</span><span id="line-283"></span><span class="hs-comment">-- information, and no embedded names.</span><span>
</span><span id="line-284"></span><span id="local-6989586621684492519"><span id="local-6989586621684492520"><span class="annot"><a href="Language.Futhark.Prop.html#toStructural"><span class="hs-identifier hs-type">toStructural</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492520"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492519"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-286"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-287"></span><span id="toStructural"><span class="annot"><span class="annottext">toStructural :: forall dim as. TypeBase dim as -&gt; TypeBase () ()
</span><a href="Language.Futhark.Prop.html#toStructural"><span class="hs-identifier hs-var hs-var">toStructural</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypeBase () as -&gt; () -&gt; TypeBase () ())
-&gt; () -&gt; TypeBase () as -&gt; TypeBase () ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">TypeBase () as -&gt; () -&gt; TypeBase () ()
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-identifier hs-var">setAliases</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TypeBase () as -&gt; TypeBase () ())
-&gt; (TypeBase dim as -&gt; TypeBase () as)
-&gt; TypeBase dim as
-&gt; TypeBase () ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(dim -&gt; ()) -&gt; TypeBase dim as -&gt; TypeBase () as
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; dim -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span class="hs-comment">-- | Remove aliasing information from a type.</span><span>
</span><span id="line-290"></span><span id="local-6989586621684492509"><span id="local-6989586621684492510"><span class="annot"><a href="Language.Futhark.Prop.html#toStruct"><span class="hs-identifier hs-type">toStruct</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-291"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492510"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492509"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492510"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-293"></span><span id="toStruct"><span class="annot"><span class="annottext">toStruct :: forall dim as. TypeBase dim as -&gt; TypeBase dim ()
</span><a href="Language.Futhark.Prop.html#toStruct"><span class="hs-identifier hs-var hs-var">toStruct</span></a></span></span><span> </span><span id="local-6989586621684491705"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491705"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491705"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; () -&gt; TypeBase dim ()
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-operator hs-var">`setAliases`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span class="hs-comment">-- | Replace no aliasing with an empty alias set.</span><span>
</span><span id="line-296"></span><span id="local-6989586621684492505"><span id="local-6989586621684492506"><span class="annot"><a href="Language.Futhark.Prop.html#fromStruct"><span class="hs-identifier hs-type">fromStruct</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-297"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492506"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492505"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-298"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492506"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Aliasing"><span class="hs-identifier hs-type">Aliasing</span></a></span></span></span><span>
</span><span id="line-299"></span><span id="fromStruct"><span class="annot"><span class="annottext">fromStruct :: forall dim as. TypeBase dim as -&gt; TypeBase dim Aliasing
</span><a href="Language.Futhark.Prop.html#fromStruct"><span class="hs-identifier hs-var hs-var">fromStruct</span></a></span></span><span> </span><span id="local-6989586621684491704"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491704"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491704"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Aliasing -&gt; TypeBase dim Aliasing
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-operator hs-var">`setAliases`</span></a></span><span> </span><span class="annot"><span class="annottext">Aliasing
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-comment">-- | @peelArray n t@ returns the type resulting from peeling the first</span><span>
</span><span id="line-302"></span><span class="hs-comment">-- @n@ array dimensions from @t@.  Returns @Nothing@ if @t@ has less</span><span>
</span><span id="line-303"></span><span class="hs-comment">-- than @n@ dimensions.</span><span>
</span><span id="line-304"></span><span id="local-6989586621684492500"><span id="local-6989586621684492501"><span class="annot"><a href="Language.Futhark.Prop.html#peelArray"><span class="hs-identifier hs-type">peelArray</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492501"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492500"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492501"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492500"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-305"></span><span id="peelArray"><span class="annot"><span class="annottext">peelArray :: forall dim as. Int -&gt; TypeBase dim as -&gt; Maybe (TypeBase dim as)
</span><a href="Language.Futhark.Prop.html#peelArray"><span class="hs-identifier hs-var hs-var">peelArray</span></a></span></span><span> </span><span id="local-6989586621684491698"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491698"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491697"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491697"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span id="local-6989586621684491696"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491696"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684491695"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491695"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684491694"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491694"><span class="hs-identifier hs-var">shape</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim -&gt; Int
forall dim. ShapeDecl dim -&gt; Int
</span><a href="Language.Futhark.Syntax.html#shapeRank"><span class="hs-identifier hs-var">shapeRank</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491694"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491698"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Maybe (TypeBase dim as)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; Maybe (TypeBase dim as))
-&gt; TypeBase dim as -&gt; Maybe (TypeBase dim as)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim () -&gt; TypeBase dim ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491695"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; (() -&gt; as) -&gt; TypeBase dim as
forall dim asf ast.
TypeBase dim asf -&gt; (asf -&gt; ast) -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#addAliases"><span class="hs-operator hs-var">`addAliases`</span></a></span><span> </span><span class="annot"><span class="annottext">as -&gt; () -&gt; as
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491697"><span class="hs-identifier hs-var">als</span></a></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-309"></span><span>    </span><span class="annot"><span class="annottext">as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491697"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491696"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491695"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl dim -&gt; TypeBase dim as)
-&gt; Maybe (ShapeDecl dim) -&gt; Maybe (TypeBase dim as)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ShapeDecl dim -&gt; Maybe (ShapeDecl dim)
forall dim. Int -&gt; ShapeDecl dim -&gt; Maybe (ShapeDecl dim)
</span><a href="Language.Futhark.Syntax.html#stripDims"><span class="hs-identifier hs-var">stripDims</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491698"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491694"><span class="hs-identifier hs-var">shape</span></a></span><span>
</span><span id="line-310"></span><span class="annot"><a href="Language.Futhark.Prop.html#peelArray"><span class="hs-identifier hs-var">peelArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (TypeBase dim as)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="hs-comment">-- | @arrayOf t s u@ constructs an array type.  The convenience</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- compared to using the 'Array' constructor directly is that @t@ can</span><span>
</span><span id="line-314"></span><span class="hs-comment">-- itself be an array.  If @t@ is an @n@-dimensional array, and @s@ is</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- a list of length @n@, the resulting type is of an @n+m@ dimensions.</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- The uniqueness of the new array will be @u@, no matter the</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- uniqueness of @t@.</span><span>
</span><span id="line-318"></span><span id="local-6989586621684492491"><span id="local-6989586621684492492"><span class="annot"><a href="Language.Futhark.Prop.html#arrayOf"><span class="hs-identifier hs-type">arrayOf</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492492"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-320"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492491"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492492"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-321"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492491"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-322"></span><span>  </span><span class="annot"><a href="Language.Futhark.Core.html#Uniqueness"><span class="hs-identifier hs-type">Uniqueness</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-323"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492491"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492492"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-324"></span><span id="arrayOf"><span class="annot"><span class="annottext">arrayOf :: forall as dim.
Monoid as =&gt;
TypeBase dim as -&gt; ShapeDecl dim -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#arrayOf"><span class="hs-identifier hs-var hs-var">arrayOf</span></a></span></span><span> </span><span id="local-6989586621684491689"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491689"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
-&gt; as -&gt; ShapeDecl dim -&gt; Uniqueness -&gt; TypeBase dim as
forall as dim.
Monoid as =&gt;
TypeBase dim as
-&gt; as -&gt; ShapeDecl dim -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#arrayOfWithAliases"><span class="hs-identifier hs-var">arrayOfWithAliases</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491689"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
forall dim as. TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-operator hs-var">`setUniqueness`</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">as
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span id="local-6989586621684492487"><span id="local-6989586621684492488"><span class="annot"><a href="Language.Futhark.Prop.html#arrayOfWithAliases"><span class="hs-identifier hs-type">arrayOfWithAliases</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-327"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492488"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-328"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492487"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492488"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-329"></span><span>  </span><span class="annot"><a href="#local-6989586621684492488"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-330"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492487"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-331"></span><span>  </span><span class="annot"><a href="Language.Futhark.Core.html#Uniqueness"><span class="hs-identifier hs-type">Uniqueness</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-332"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492487"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492488"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-333"></span><span id="arrayOfWithAliases"><span class="annot"><span class="annottext">arrayOfWithAliases :: forall as dim.
Monoid as =&gt;
TypeBase dim as
-&gt; as -&gt; ShapeDecl dim -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#arrayOfWithAliases"><span class="hs-identifier hs-var hs-var">arrayOfWithAliases</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491679"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491679"><span class="hs-identifier hs-var">as1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491678"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491678"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621684491677"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491677"><span class="hs-identifier hs-var">shape1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491676"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491676"><span class="hs-identifier hs-var">as2</span></a></span></span><span> </span><span id="local-6989586621684491675"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491675"><span class="hs-identifier hs-var">shape2</span></a></span></span><span> </span><span id="local-6989586621684491674"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491674"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-334"></span><span>  </span><span class="annot"><span class="annottext">as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491679"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">as -&gt; as -&gt; as
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491676"><span class="hs-identifier hs-var">as2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491674"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491678"><span class="hs-identifier hs-var">et</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491675"><span class="hs-identifier hs-var">shape2</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim -&gt; ShapeDecl dim -&gt; ShapeDecl dim
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491677"><span class="hs-identifier hs-var">shape1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-335"></span><span class="annot"><a href="Language.Futhark.Prop.html#arrayOfWithAliases"><span class="hs-identifier hs-var">arrayOfWithAliases</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span id="local-6989586621684491673"><span class="annot"><span class="annottext">ScalarTypeBase dim as
</span><a href="#local-6989586621684491673"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491672"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491672"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621684491671"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491671"><span class="hs-identifier hs-var">shape</span></a></span></span><span> </span><span id="local-6989586621684491670"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491670"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-336"></span><span>  </span><span class="annot"><span class="annottext">as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491672"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491670"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(as -&gt; ()) -&gt; ScalarTypeBase dim as -&gt; ScalarTypeBase dim ()
forall (p :: * -&gt; * -&gt; *) b c a.
Bifunctor p =&gt;
(b -&gt; c) -&gt; p a b -&gt; p a c
</span><span class="hs-identifier hs-var">second</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; as -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim as
</span><a href="#local-6989586621684491673"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491671"><span class="hs-identifier hs-var">shape</span></a></span><span>
</span><span id="line-337"></span><span>
</span><span id="line-338"></span><span class="hs-comment">-- | @stripArray n t@ removes the @n@ outermost layers of the array.</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- Essentially, it is the type of indexing an array of type @t@ with</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- @n@ indexes.</span><span>
</span><span id="line-341"></span><span id="local-6989586621684492477"><span id="local-6989586621684492478"><span class="annot"><a href="Language.Futhark.Prop.html#stripArray"><span class="hs-identifier hs-type">stripArray</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492478"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492477"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492478"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492477"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-342"></span><span id="stripArray"><span class="annot"><span class="annottext">stripArray :: forall dim as. Int -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#stripArray"><span class="hs-identifier hs-var hs-var">stripArray</span></a></span></span><span> </span><span id="local-6989586621684491668"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491668"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491667"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491667"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span id="local-6989586621684491666"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491666"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684491665"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491665"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621684491664"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491664"><span class="hs-identifier hs-var">shape</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684491663"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491663"><span class="hs-identifier hs-var">shape'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ShapeDecl dim -&gt; Maybe (ShapeDecl dim)
forall dim. Int -&gt; ShapeDecl dim -&gt; Maybe (ShapeDecl dim)
</span><a href="Language.Futhark.Syntax.html#stripDims"><span class="hs-identifier hs-var">stripDims</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491668"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491664"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-344"></span><span>    </span><span class="annot"><span class="annottext">as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491667"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491666"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491665"><span class="hs-identifier hs-var">et</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491663"><span class="hs-identifier hs-var">shape'</span></a></span><span>
</span><span id="line-345"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><span class="annottext">ScalarTypeBase dim () -&gt; TypeBase dim ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491665"><span class="hs-identifier hs-var">et</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; Uniqueness -&gt; TypeBase dim ()
forall dim as. TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-operator hs-var">`setUniqueness`</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491666"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; as -&gt; TypeBase dim as
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-operator hs-var">`setAliases`</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491667"><span class="hs-identifier hs-var">als</span></a></span><span>
</span><span id="line-347"></span><span class="annot"><a href="Language.Futhark.Prop.html#stripArray"><span class="hs-identifier hs-var">stripArray</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491662"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491662"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491662"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-comment">-- | Create a record type corresponding to a tuple with the given</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- element types.</span><span>
</span><span id="line-351"></span><span id="local-6989586621684492473"><span id="local-6989586621684492474"><span class="annot"><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-type">tupleRecord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492474"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492473"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ScalarTypeBase"><span class="hs-identifier hs-type">ScalarTypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492474"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492473"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-352"></span><span id="tupleRecord"><span class="annot"><span class="annottext">tupleRecord :: forall dim as. [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-var hs-var">tupleRecord</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as)
-&gt; ([TypeBase dim as] -&gt; Map Name (TypeBase dim as))
-&gt; [TypeBase dim as]
-&gt; ScalarTypeBase dim as
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[(Name, TypeBase dim as)] -&gt; Map Name (TypeBase dim as)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Name, TypeBase dim as)] -&gt; Map Name (TypeBase dim as))
-&gt; ([TypeBase dim as] -&gt; [(Name, TypeBase dim as)])
-&gt; [TypeBase dim as]
-&gt; Map Name (TypeBase dim as)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [TypeBase dim as] -&gt; [(Name, TypeBase dim as)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier hs-var">tupleFieldNames</span></a></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-comment">-- | Does this type corespond to a tuple?  If so, return the elements</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- of that tuple.</span><span>
</span><span id="line-356"></span><span id="local-6989586621684492469"><span id="local-6989586621684492470"><span class="annot"><a href="Language.Futhark.Prop.html#isTupleRecord"><span class="hs-identifier hs-type">isTupleRecord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492470"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492469"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492470"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492469"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-357"></span><span id="isTupleRecord"><span class="annot"><span class="annottext">isTupleRecord :: forall dim as. TypeBase dim as -&gt; Maybe [TypeBase dim as]
</span><a href="Language.Futhark.Prop.html#isTupleRecord"><span class="hs-identifier hs-var hs-var">isTupleRecord</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491660"><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491660"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; Maybe [TypeBase dim as]
forall a. Map Name a -&gt; Maybe [a]
</span><a href="Language.Futhark.Prop.html#areTupleFields"><span class="hs-identifier hs-var">areTupleFields</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491660"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-358"></span><span class="annot"><a href="Language.Futhark.Prop.html#isTupleRecord"><span class="hs-identifier hs-var">isTupleRecord</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [TypeBase dim as]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="hs-comment">-- | Does this record map correspond to a tuple?</span><span>
</span><span id="line-361"></span><span id="local-6989586621684492466"><span class="annot"><a href="Language.Futhark.Prop.html#areTupleFields"><span class="hs-identifier hs-type">areTupleFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492466"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621684492466"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-362"></span><span id="areTupleFields"><span class="annot"><span class="annottext">areTupleFields :: forall a. Map Name a -&gt; Maybe [a]
</span><a href="Language.Futhark.Prop.html#areTupleFields"><span class="hs-identifier hs-var hs-var">areTupleFields</span></a></span></span><span> </span><span id="local-6989586621684491656"><span class="annot"><span class="annottext">Map Name a
</span><a href="#local-6989586621684491656"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621684491655"><span class="annot"><span class="annottext">fs' :: [(Name, a)]
</span><a href="#local-6989586621684491655"><span class="hs-identifier hs-var hs-var">fs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name a -&gt; [(Name, a)]
forall a. Map Name a -&gt; [(Name, a)]
</span><a href="Language.Futhark.Prop.html#sortFields"><span class="hs-identifier hs-var">sortFields</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name a
</span><a href="#local-6989586621684491656"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-364"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">and</span></span><span> </span><span class="annot"><span class="annottext">([Bool] -&gt; Bool) -&gt; [Bool] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name -&gt; Bool) -&gt; [Name] -&gt; [Name] -&gt; [Bool]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Name, a) -&gt; Name) -&gt; [(Name, a)] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, a) -&gt; Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(Name, a)]
</span><a href="#local-6989586621684491655"><span class="hs-identifier hs-var">fs'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier hs-var">tupleFieldNames</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Maybe [a]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Maybe [a]) -&gt; [a] -&gt; Maybe [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Name, a) -&gt; a) -&gt; [(Name, a)] -&gt; [a]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, a) -&gt; a
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">[(Name, a)]
</span><a href="#local-6989586621684491655"><span class="hs-identifier hs-var">fs'</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe [a]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-comment">-- | Construct a record map corresponding to a tuple.</span><span>
</span><span id="line-369"></span><span id="local-6989586621684492455"><span class="annot"><a href="Language.Futhark.Prop.html#tupleFields"><span class="hs-identifier hs-type">tupleFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621684492455"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492455"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-370"></span><span id="tupleFields"><span class="annot"><span class="annottext">tupleFields :: forall a. [a] -&gt; Map Name a
</span><a href="Language.Futhark.Prop.html#tupleFields"><span class="hs-identifier hs-var hs-var">tupleFields</span></a></span></span><span> </span><span id="local-6989586621684491651"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621684491651"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Name, a)] -&gt; Map Name a
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Name, a)] -&gt; Map Name a) -&gt; [(Name, a)] -&gt; Map Name a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [a] -&gt; [(Name, a)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier hs-var">tupleFieldNames</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621684491651"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-- | Increasing field names for a tuple (starts at 0).</span><span>
</span><span id="line-373"></span><span class="annot"><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier hs-type">tupleFieldNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-374"></span><span id="tupleFieldNames"><span class="annot"><span class="annottext">tupleFieldNames :: [Name]
</span><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier hs-var hs-var">tupleFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Name) -&gt; [Int] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Name
</span><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier hs-var">nameFromString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Name) -&gt; (Int -&gt; String) -&gt; Int -&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-comment">-- | Sort fields by their name; taking care to sort numeric fields by</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- their numeric value.  This ensures that tuples and tuple-like</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- records match.</span><span>
</span><span id="line-379"></span><span id="local-6989586621684492464"><span class="annot"><a href="Language.Futhark.Prop.html#sortFields"><span class="hs-identifier hs-type">sortFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492464"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621684492464"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-380"></span><span id="sortFields"><span class="annot"><span class="annottext">sortFields :: forall a. Map Name a -&gt; [(Name, a)]
</span><a href="Language.Futhark.Prop.html#sortFields"><span class="hs-identifier hs-var hs-var">sortFields</span></a></span></span><span> </span><span id="local-6989586621684491646"><span class="annot"><span class="annottext">Map Name a
</span><a href="#local-6989586621684491646"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Either Int Name, (Name, a)) -&gt; (Name, a))
-&gt; [(Either Int Name, (Name, a))] -&gt; [(Name, a)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Either Int Name, (Name, a)) -&gt; (Name, a)
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">([(Either Int Name, (Name, a))] -&gt; [(Name, a)])
-&gt; [(Either Int Name, (Name, a))] -&gt; [(Name, a)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Either Int Name, (Name, a)) -&gt; Either Int Name)
-&gt; [(Either Int Name, (Name, a))] -&gt; [(Either Int Name, (Name, a))]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortOn</span></span><span> </span><span class="annot"><span class="annottext">(Either Int Name, (Name, a)) -&gt; Either Int Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">([(Either Int Name, (Name, a))] -&gt; [(Either Int Name, (Name, a))])
-&gt; [(Either Int Name, (Name, a))] -&gt; [(Either Int Name, (Name, a))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Either Int Name] -&gt; [(Name, a)] -&gt; [(Either Int Name, (Name, a))]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Name, a) -&gt; Either Int Name) -&gt; [(Name, a)] -&gt; [Either Int Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Either Int Name
</span><a href="#local-6989586621684491645"><span class="hs-identifier hs-var">fieldish</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Either Int Name)
-&gt; ((Name, a) -&gt; Name) -&gt; (Name, a) -&gt; Either Int Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name, a) -&gt; Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, a)]
</span><a href="#local-6989586621684491644"><span class="hs-identifier hs-var">l'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, a)]
</span><a href="#local-6989586621684491644"><span class="hs-identifier hs-var">l'</span></a></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621684491644"><span class="annot"><span class="annottext">l' :: [(Name, a)]
</span><a href="#local-6989586621684491644"><span class="hs-identifier hs-var hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name a -&gt; [(Name, a)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map Name a
</span><a href="#local-6989586621684491646"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621684491638"><span class="annot"><span class="annottext">onDigit :: Maybe Int -&gt; Char -&gt; Maybe Int
</span><a href="#local-6989586621684491638"><span class="hs-identifier hs-var hs-var">onDigit</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-384"></span><span>    </span><span class="annot"><a href="#local-6989586621684491638"><span class="hs-identifier hs-var">onDigit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684491637"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491637"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491636"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621684491636"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-385"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isDigit</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621684491636"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int) -&gt; Int -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491637"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Int
</span><span class="hs-identifier hs-var">ord</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621684491636"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Int
</span><span class="hs-identifier hs-var">ord</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'0'</span></span><span>
</span><span id="line-386"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-387"></span><span>    </span><span id="local-6989586621684491645"><span class="annot"><span class="annottext">fieldish :: Name -&gt; Either Int Name
</span><a href="#local-6989586621684491645"><span class="hs-identifier hs-var hs-var">fieldish</span></a></span></span><span> </span><span id="local-6989586621684491630"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684491630"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either Int Name
-&gt; (Int -&gt; Either Int Name) -&gt; Maybe Int -&gt; Either Int Name
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Either Int Name
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684491630"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Either Int Name
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Either Int Name) -&gt; Maybe Int -&gt; Either Int Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Char -&gt; Maybe Int) -&gt; Maybe Int -&gt; Text -&gt; Maybe Int
forall a. (a -&gt; Char -&gt; a) -&gt; a -&gt; Text -&gt; a
</span><span class="hs-identifier hs-var">T.foldl'</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Char -&gt; Maybe Int
</span><a href="#local-6989586621684491638"><span class="hs-identifier hs-var">onDigit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Int) -&gt; Text -&gt; Maybe Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
</span><a href="Language.Futhark.Core.html#nameToText"><span class="hs-identifier hs-var">nameToText</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684491630"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="hs-comment">-- | Sort the constructors of a sum type in some well-defined (but not</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- otherwise significant) manner.</span><span>
</span><span id="line-391"></span><span id="local-6989586621684491626"><span class="annot"><a href="Language.Futhark.Prop.html#sortConstrs"><span class="hs-identifier hs-type">sortConstrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684491626"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621684491626"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-392"></span><span id="sortConstrs"><span class="annot"><span class="annottext">sortConstrs :: forall a. Map Name a -&gt; [(Name, a)]
</span><a href="Language.Futhark.Prop.html#sortConstrs"><span class="hs-identifier hs-var hs-var">sortConstrs</span></a></span></span><span> </span><span id="local-6989586621684491624"><span class="annot"><span class="annottext">Map Name a
</span><a href="#local-6989586621684491624"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, a) -&gt; Name) -&gt; [(Name, a)] -&gt; [(Name, a)]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortOn</span></span><span> </span><span class="annot"><span class="annottext">(Name, a) -&gt; Name
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">([(Name, a)] -&gt; [(Name, a)]) -&gt; [(Name, a)] -&gt; [(Name, a)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name a -&gt; [(Name, a)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map Name a
</span><a href="#local-6989586621684491624"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-comment">-- | Is this a 'TypeParamType'?</span><span>
</span><span id="line-395"></span><span id="local-6989586621684492438"><span class="annot"><a href="Language.Futhark.Prop.html#isTypeParam"><span class="hs-identifier hs-type">isTypeParam</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492438"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-396"></span><span id="isTypeParam"><span class="annot"><span class="annottext">isTypeParam :: forall vn. TypeParamBase vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#isTypeParam"><span class="hs-identifier hs-var hs-var">isTypeParam</span></a></span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamType"><span class="hs-identifier hs-type">TypeParamType</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-397"></span><span class="annot"><a href="Language.Futhark.Prop.html#isTypeParam"><span class="hs-identifier hs-var">isTypeParam</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamDim"><span class="hs-identifier hs-type">TypeParamDim</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span class="hs-comment">-- | Is this a 'TypeParamDim'?</span><span>
</span><span id="line-400"></span><span id="local-6989586621684491621"><span class="annot"><a href="Language.Futhark.Prop.html#isSizeParam"><span class="hs-identifier hs-type">isSizeParam</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684491621"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-401"></span><span id="isSizeParam"><span class="annot"><span class="annottext">isSizeParam :: forall vn. TypeParamBase vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#isSizeParam"><span class="hs-identifier hs-var hs-var">isSizeParam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; (TypeParamBase vn -&gt; Bool) -&gt; TypeParamBase vn -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeParamBase vn -&gt; Bool
forall vn. TypeParamBase vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#isTypeParam"><span class="hs-identifier hs-var">isTypeParam</span></a></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-comment">-- | Combine the shape information of types as much as possible. The first</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- argument is the orignal type and the second is the type of the transformed</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- expression. This is necessary since the original type may contain additional</span><span>
</span><span id="line-406"></span><span class="hs-comment">-- information (e.g., shape restrictions) from the user given annotation.</span><span>
</span><span id="line-407"></span><span id="local-6989586621684492433"><span id="local-6989586621684492434"><span class="annot"><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-type">combineTypeShapes</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492434"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayDim"><span class="hs-identifier hs-type">ArrayDim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492433"><span class="hs-identifier hs-type">dim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-409"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492433"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492434"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492433"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492434"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492433"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492434"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-412"></span><span id="combineTypeShapes"><span class="annot"><span class="annottext">combineTypeShapes :: forall as dim.
(Monoid as, ArrayDim dim) =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var hs-var">combineTypeShapes</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491594"><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491594"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491593"><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491593"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; [Name]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491594"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; [Name]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491593"><span class="hs-identifier hs-var">ts2</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-414"></span><span>    </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-415"></span><span>      </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as)
-&gt; Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-416"></span><span>        </span><span class="annot"><span class="annottext">((TypeBase dim as, TypeBase dim as) -&gt; TypeBase dim as)
-&gt; Map Name (TypeBase dim as, TypeBase dim as)
-&gt; Map Name (TypeBase dim as)
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">M.map</span></span><span>
</span><span id="line-417"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as)
-&gt; (TypeBase dim as, TypeBase dim as) -&gt; TypeBase dim as
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
forall as dim.
(Monoid as, ArrayDim dim) =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase dim as
 -&gt; TypeBase dim as -&gt; (TypeBase dim as, TypeBase dim as))
-&gt; Map Name (TypeBase dim as)
-&gt; Map Name (TypeBase dim as)
-&gt; Map Name (TypeBase dim as, TypeBase dim as)
forall k a b c.
Ord k =&gt;
(a -&gt; b -&gt; c) -&gt; Map k a -&gt; Map k b -&gt; Map k c
</span><span class="hs-identifier hs-var">M.intersectionWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491594"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491593"><span class="hs-identifier hs-var">ts2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span class="annot"><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491590"><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491590"><span class="hs-identifier hs-var">cs1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491589"><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491589"><span class="hs-identifier hs-var">cs2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as] -&gt; [Name]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491590"><span class="hs-identifier hs-var">cs1</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Name] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as] -&gt; [Name]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491589"><span class="hs-identifier hs-var">cs2</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-421"></span><span>    </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
forall dim as. Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-var">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as)
-&gt; Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-423"></span><span>        </span><span class="annot"><span class="annottext">(([TypeBase dim as], [TypeBase dim as]) -&gt; [TypeBase dim as])
-&gt; Map Name ([TypeBase dim as], [TypeBase dim as])
-&gt; Map Name [TypeBase dim as]
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">M.map</span></span><span>
</span><span id="line-424"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([TypeBase dim as] -&gt; [TypeBase dim as] -&gt; [TypeBase dim as])
-&gt; ([TypeBase dim as], [TypeBase dim as]) -&gt; [TypeBase dim as]
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">(([TypeBase dim as] -&gt; [TypeBase dim as] -&gt; [TypeBase dim as])
 -&gt; ([TypeBase dim as], [TypeBase dim as]) -&gt; [TypeBase dim as])
-&gt; ([TypeBase dim as] -&gt; [TypeBase dim as] -&gt; [TypeBase dim as])
-&gt; ([TypeBase dim as], [TypeBase dim as])
-&gt; [TypeBase dim as]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as)
-&gt; [TypeBase dim as] -&gt; [TypeBase dim as] -&gt; [TypeBase dim as]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
forall as dim.
(Monoid as, ArrayDim dim) =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-425"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([TypeBase dim as]
 -&gt; [TypeBase dim as] -&gt; ([TypeBase dim as], [TypeBase dim as]))
-&gt; Map Name [TypeBase dim as]
-&gt; Map Name [TypeBase dim as]
-&gt; Map Name ([TypeBase dim as], [TypeBase dim as])
forall k a b c.
Ord k =&gt;
(a -&gt; b -&gt; c) -&gt; Map k a -&gt; Map k b -&gt; Map k c
</span><span class="hs-identifier hs-var">M.intersectionWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491590"><span class="hs-identifier hs-var">cs1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491589"><span class="hs-identifier hs-var">cs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span class="annot"><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span id="local-6989586621684491588"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491588"><span class="hs-identifier hs-var">als1</span></a></span></span><span> </span><span id="local-6989586621684491587"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491587"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621684491586"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491586"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684491585"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491585"><span class="hs-identifier hs-var">dims1</span></a></span></span><span> </span><span id="local-6989586621684491584"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491584"><span class="hs-identifier hs-var">b1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span id="local-6989586621684491583"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491583"><span class="hs-identifier hs-var">als2</span></a></span></span><span> </span><span id="local-6989586621684491582"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491582"><span class="hs-identifier hs-var">_p2</span></a></span></span><span> </span><span id="local-6989586621684491581"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491581"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491580"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491580"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-427"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491588"><span class="hs-identifier hs-var">als1</span></a></span><span> </span><span class="annot"><span class="annottext">as -&gt; as -&gt; as
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491583"><span class="hs-identifier hs-var">als2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491587"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
forall as dim.
(Monoid as, ArrayDim dim) =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491586"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491581"><span class="hs-identifier hs-var">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491585"><span class="hs-identifier hs-var">dims1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
forall as dim.
(Monoid as, ArrayDim dim) =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491584"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491580"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span class="annot"><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span id="local-6989586621684491579"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491579"><span class="hs-identifier hs-var">als1</span></a></span></span><span> </span><span id="local-6989586621684491578"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491578"><span class="hs-identifier hs-var">u1</span></a></span></span><span> </span><span id="local-6989586621684491577"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491577"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684491576"><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491576"><span class="hs-identifier hs-var">targs1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span id="local-6989586621684491575"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491575"><span class="hs-identifier hs-var">als2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491574"><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491574"><span class="hs-identifier hs-var">targs2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-429"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491579"><span class="hs-identifier hs-var">als1</span></a></span><span> </span><span class="annot"><span class="annottext">as -&gt; as -&gt; as
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491575"><span class="hs-identifier hs-var">als2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491578"><span class="hs-identifier hs-var">u1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491577"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">([TypeArg dim] -&gt; ScalarTypeBase dim as)
-&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeArg dim -&gt; TypeArg dim -&gt; TypeArg dim)
-&gt; [TypeArg dim] -&gt; [TypeArg dim] -&gt; [TypeArg dim]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">TypeArg dim -&gt; TypeArg dim -&gt; TypeArg dim
forall {dim}.
ArrayDim dim =&gt;
TypeArg dim -&gt; TypeArg dim -&gt; TypeArg dim
</span><a href="#local-6989586621684491573"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491576"><span class="hs-identifier hs-var">targs1</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491574"><span class="hs-identifier hs-var">targs2</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-431"></span><span>    </span><span id="local-6989586621684491573"><span class="annot"><span class="annottext">f :: TypeArg dim -&gt; TypeArg dim -&gt; TypeArg dim
</span><a href="#local-6989586621684491573"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span id="local-6989586621684491569"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491569"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684491568"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491568"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span id="local-6989586621684491567"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491567"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-432"></span><span>      </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
forall dim. TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
</span><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-var">TypeArgType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim () -&gt; TypeBase dim () -&gt; TypeBase dim ()
forall as dim.
(Monoid as, ArrayDim dim) =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491569"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491567"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491568"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-433"></span><span>    </span><span class="annot"><a href="#local-6989586621684491573"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621684491566"><span class="annot"><span class="annottext">TypeArg dim
</span><a href="#local-6989586621684491566"><span class="hs-identifier hs-var">targ</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeArg dim
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeArg dim
</span><a href="#local-6989586621684491566"><span class="hs-identifier hs-var">targ</span></a></span><span>
</span><span id="line-434"></span><span class="annot"><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491565"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491565"><span class="hs-identifier hs-var">als1</span></a></span></span><span> </span><span id="local-6989586621684491564"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491564"><span class="hs-identifier hs-var">u1</span></a></span></span><span> </span><span id="local-6989586621684491563"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491563"><span class="hs-identifier hs-var">et1</span></a></span></span><span> </span><span id="local-6989586621684491562"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491562"><span class="hs-identifier hs-var">shape1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491561"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491561"><span class="hs-identifier hs-var">als2</span></a></span></span><span> </span><span id="local-6989586621684491560"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491560"><span class="hs-identifier hs-var">_u2</span></a></span></span><span> </span><span id="local-6989586621684491559"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491559"><span class="hs-identifier hs-var">et2</span></a></span></span><span> </span><span id="local-6989586621684491558"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491558"><span class="hs-identifier hs-var">_shape2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><span class="annottext">TypeBase dim as
-&gt; as -&gt; ShapeDecl dim -&gt; Uniqueness -&gt; TypeBase dim as
forall as dim.
Monoid as =&gt;
TypeBase dim as
-&gt; as -&gt; ShapeDecl dim -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#arrayOfWithAliases"><span class="hs-identifier hs-var">arrayOfWithAliases</span></a></span><span>
</span><span id="line-436"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; TypeBase dim () -&gt; TypeBase dim ()
forall as dim.
(Monoid as, ArrayDim dim) =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase dim () -&gt; TypeBase dim ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491563"><span class="hs-identifier hs-var">et1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase dim () -&gt; TypeBase dim ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491559"><span class="hs-identifier hs-var">et2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>        </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; as -&gt; TypeBase dim as
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-operator hs-var">`setAliases`</span></a></span><span> </span><span class="annot"><span class="annottext">as
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491565"><span class="hs-identifier hs-var">als1</span></a></span><span> </span><span class="annot"><span class="annottext">as -&gt; as -&gt; as
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491561"><span class="hs-identifier hs-var">als2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>    </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491562"><span class="hs-identifier hs-var">shape1</span></a></span><span>
</span><span id="line-441"></span><span>    </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491564"><span class="hs-identifier hs-var">u1</span></a></span><span>
</span><span id="line-442"></span><span class="annot"><a href="Language.Futhark.Prop.html#combineTypeShapes"><span class="hs-identifier hs-var">combineTypeShapes</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491557"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491557"><span class="hs-identifier hs-var">new_tp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491557"><span class="hs-identifier hs-var">new_tp</span></a></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="hs-comment">-- | Match the dimensions of otherwise assumed-equal types.  The</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- combining function is also passed the names bound within the type</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- (from named parameters or return types).</span><span>
</span><span id="line-447"></span><span class="annot"><a href="Language.Futhark.Prop.html#matchDims"><span class="hs-identifier hs-type">matchDims</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621684492419"><span class="annot"><a href="#local-6989586621684492419"><span class="hs-keyword hs-type">as</span></a></span></span><span> </span><span id="local-6989586621684492418"><span class="annot"><a href="#local-6989586621684492418"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621684492417"><span class="annot"><a href="#local-6989586621684492417"><span class="hs-identifier hs-type">d1</span></a></span></span><span> </span><span id="local-6989586621684492416"><span class="annot"><a href="#local-6989586621684492416"><span class="hs-identifier hs-type">d2</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-449"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492419"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621684492418"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492417"><span class="hs-identifier hs-type">d1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492416"><span class="hs-identifier hs-type">d2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492418"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492417"><span class="hs-identifier hs-type">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-451"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492417"><span class="hs-identifier hs-type">d1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492419"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492416"><span class="hs-identifier hs-type">d2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492419"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-453"></span><span>  </span><span class="annot"><a href="#local-6989586621684492418"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492417"><span class="hs-identifier hs-type">d1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492419"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span id="matchDims"><span class="annot"><span class="annottext">matchDims :: forall as (m :: * -&gt; *) d1 d2.
(Monoid as, Monad m) =&gt;
([VName] -&gt; d1 -&gt; d2 -&gt; m d1)
-&gt; TypeBase d1 as -&gt; TypeBase d2 as -&gt; m (TypeBase d1 as)
</span><a href="Language.Futhark.Prop.html#matchDims"><span class="hs-identifier hs-var hs-var">matchDims</span></a></span></span><span> </span><span id="local-6989586621684491549"><span class="annot"><span class="annottext">[VName] -&gt; d1 -&gt; d2 -&gt; m d1
</span><a href="#local-6989586621684491549"><span class="hs-identifier hs-var">onDims</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase d1 as -&gt; TypeBase d2 as -&gt; m (TypeBase d1 as)
forall as'.
Monoid as' =&gt;
[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
</span><a href="#local-6989586621684491548"><span class="hs-identifier hs-var">matchDims'</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-456"></span><span>    </span><span class="annot"><a href="#local-6989586621684491548"><span class="hs-identifier hs-type">matchDims'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-457"></span><span>      </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621684492411"><span class="annot"><a href="#local-6989586621684492411"><span class="hs-identifier hs-type">as'</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492411"><span class="hs-identifier hs-type">as'</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492417"><span class="hs-identifier hs-type">d1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492411"><span class="hs-identifier hs-type">as'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492416"><span class="hs-identifier hs-type">d2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492411"><span class="hs-identifier hs-type">as'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492418"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492417"><span class="hs-identifier hs-type">d1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492411"><span class="hs-identifier hs-type">as'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>    </span><span id="local-6989586621684491548"><span class="annot"><span class="annottext">matchDims' :: forall as'.
Monoid as' =&gt;
[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
</span><a href="#local-6989586621684491548"><span class="hs-identifier hs-var hs-var">matchDims'</span></a></span></span><span> </span><span id="local-6989586621684491511"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491511"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491510"><span class="annot"><span class="annottext">TypeBase d1 as'
</span><a href="#local-6989586621684491510"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684491509"><span class="annot"><span class="annottext">TypeBase d2 as'
</span><a href="#local-6989586621684491509"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-459"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase d1 as'
</span><a href="#local-6989586621684491510"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeBase d2 as'
</span><a href="#local-6989586621684491509"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-460"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491508"><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491508"><span class="hs-identifier hs-var">als1</span></a></span></span><span> </span><span id="local-6989586621684491507"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491507"><span class="hs-identifier hs-var">u1</span></a></span></span><span> </span><span id="local-6989586621684491506"><span class="annot"><span class="annottext">ScalarTypeBase d1 ()
</span><a href="#local-6989586621684491506"><span class="hs-identifier hs-var">et1</span></a></span></span><span> </span><span id="local-6989586621684491505"><span class="annot"><span class="annottext">ShapeDecl d1
</span><a href="#local-6989586621684491505"><span class="hs-identifier hs-var">shape1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491504"><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491504"><span class="hs-identifier hs-var">als2</span></a></span></span><span> </span><span id="local-6989586621684491503"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491503"><span class="hs-identifier hs-var">u2</span></a></span></span><span> </span><span id="local-6989586621684491502"><span class="annot"><span class="annottext">ScalarTypeBase d2 ()
</span><a href="#local-6989586621684491502"><span class="hs-identifier hs-var">et2</span></a></span></span><span> </span><span id="local-6989586621684491501"><span class="annot"><span class="annottext">ShapeDecl d2
</span><a href="#local-6989586621684491501"><span class="hs-identifier hs-var">shape2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-461"></span><span>          </span><span class="annot"><span class="annottext">(TypeBase d1 () -&gt; as' -&gt; TypeBase d1 as')
-&gt; as' -&gt; TypeBase d1 () -&gt; TypeBase d1 as'
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">TypeBase d1 () -&gt; as' -&gt; TypeBase d1 as'
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-identifier hs-var">setAliases</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491508"><span class="hs-identifier hs-var">als1</span></a></span><span> </span><span class="annot"><span class="annottext">as' -&gt; as' -&gt; as'
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491504"><span class="hs-identifier hs-var">als2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>            </span><span class="annot"><span class="annottext">(TypeBase d1 () -&gt; TypeBase d1 as')
-&gt; m (TypeBase d1 ()) -&gt; m (TypeBase d1 as')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypeBase d1 () -&gt; ShapeDecl d1 -&gt; Uniqueness -&gt; TypeBase d1 ()
forall as dim.
Monoid as =&gt;
TypeBase dim as -&gt; ShapeDecl dim -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#arrayOf"><span class="hs-identifier hs-var">arrayOf</span></a></span><span>
</span><span id="line-463"></span><span>                    </span><span class="annot"><span class="annottext">(TypeBase d1 () -&gt; ShapeDecl d1 -&gt; Uniqueness -&gt; TypeBase d1 ())
-&gt; m (TypeBase d1 ())
-&gt; m (ShapeDecl d1 -&gt; Uniqueness -&gt; TypeBase d1 ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase d1 () -&gt; TypeBase d2 () -&gt; m (TypeBase d1 ())
forall as'.
Monoid as' =&gt;
[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
</span><a href="#local-6989586621684491548"><span class="hs-identifier hs-var">matchDims'</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491511"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase d1 () -&gt; TypeBase d1 ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase d1 ()
</span><a href="#local-6989586621684491506"><span class="hs-identifier hs-var">et1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase d2 () -&gt; TypeBase d2 ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase d2 ()
</span><a href="#local-6989586621684491502"><span class="hs-identifier hs-var">et2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>                    </span><span class="annot"><span class="annottext">m (ShapeDecl d1 -&gt; Uniqueness -&gt; TypeBase d1 ())
-&gt; m (ShapeDecl d1) -&gt; m (Uniqueness -&gt; TypeBase d1 ())
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl d1 -&gt; ShapeDecl d2 -&gt; m (ShapeDecl d1)
</span><a href="#local-6989586621684491500"><span class="hs-identifier hs-var">onShapes</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491511"><span class="hs-identifier hs-var">bound</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl d1
</span><a href="#local-6989586621684491505"><span class="hs-identifier hs-var">shape1</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl d2
</span><a href="#local-6989586621684491501"><span class="hs-identifier hs-var">shape2</span></a></span><span>
</span><span id="line-465"></span><span>                    </span><span class="annot"><span class="annottext">m (Uniqueness -&gt; TypeBase d1 ())
-&gt; m Uniqueness -&gt; m (TypeBase d1 ())
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness -&gt; m Uniqueness
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Uniqueness -&gt; Uniqueness -&gt; Uniqueness
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491507"><span class="hs-identifier hs-var">u1</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491503"><span class="hs-identifier hs-var">u2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491498"><span class="annot"><span class="annottext">Map Name (TypeBase d1 as')
</span><a href="#local-6989586621684491498"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491497"><span class="annot"><span class="annottext">Map Name (TypeBase d2 as')
</span><a href="#local-6989586621684491497"><span class="hs-identifier hs-var">f2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-468"></span><span>          </span><span class="annot"><span class="annottext">ScalarTypeBase d1 as' -&gt; TypeBase d1 as'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase d1 as' -&gt; TypeBase d1 as')
-&gt; (Map Name (TypeBase d1 as') -&gt; ScalarTypeBase d1 as')
-&gt; Map Name (TypeBase d1 as')
-&gt; TypeBase d1 as'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase d1 as') -&gt; ScalarTypeBase d1 as'
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span>
</span><span id="line-469"></span><span>            </span><span class="annot"><span class="annottext">(Map Name (TypeBase d1 as') -&gt; TypeBase d1 as')
-&gt; m (Map Name (TypeBase d1 as')) -&gt; m (TypeBase d1 as')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">((TypeBase d1 as', TypeBase d2 as') -&gt; m (TypeBase d1 as'))
-&gt; Map Name (TypeBase d1 as', TypeBase d2 as')
-&gt; m (Map Name (TypeBase d1 as'))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as'))
-&gt; (TypeBase d1 as', TypeBase d2 as') -&gt; m (TypeBase d1 as')
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
forall as'.
Monoid as' =&gt;
[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
</span><a href="#local-6989586621684491548"><span class="hs-identifier hs-var">matchDims'</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491511"><span class="hs-identifier hs-var">bound</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase d1 as'
 -&gt; TypeBase d2 as' -&gt; (TypeBase d1 as', TypeBase d2 as'))
-&gt; Map Name (TypeBase d1 as')
-&gt; Map Name (TypeBase d2 as')
-&gt; Map Name (TypeBase d1 as', TypeBase d2 as')
forall k a b c.
Ord k =&gt;
(a -&gt; b -&gt; c) -&gt; Map k a -&gt; Map k b -&gt; Map k c
</span><span class="hs-identifier hs-var">M.intersectionWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase d1 as')
</span><a href="#local-6989586621684491498"><span class="hs-identifier hs-var">f1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase d2 as')
</span><a href="#local-6989586621684491497"><span class="hs-identifier hs-var">f2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491496"><span class="annot"><span class="annottext">Map Name [TypeBase d1 as']
</span><a href="#local-6989586621684491496"><span class="hs-identifier hs-var">cs1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491495"><span class="annot"><span class="annottext">Map Name [TypeBase d2 as']
</span><a href="#local-6989586621684491495"><span class="hs-identifier hs-var">cs2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-471"></span><span>          </span><span class="annot"><span class="annottext">ScalarTypeBase d1 as' -&gt; TypeBase d1 as'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase d1 as' -&gt; TypeBase d1 as')
-&gt; (Map Name [TypeBase d1 as'] -&gt; ScalarTypeBase d1 as')
-&gt; Map Name [TypeBase d1 as']
-&gt; TypeBase d1 as'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase d1 as'] -&gt; ScalarTypeBase d1 as'
forall dim as. Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-var">Sum</span></a></span><span>
</span><span id="line-472"></span><span>            </span><span class="annot"><span class="annottext">(Map Name [TypeBase d1 as'] -&gt; TypeBase d1 as')
-&gt; m (Map Name [TypeBase d1 as']) -&gt; m (TypeBase d1 as')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">([(TypeBase d1 as', TypeBase d2 as')] -&gt; m [TypeBase d1 as'])
-&gt; Map Name [(TypeBase d1 as', TypeBase d2 as')]
-&gt; m (Map Name [TypeBase d1 as'])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span>
</span><span id="line-473"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((TypeBase d1 as', TypeBase d2 as') -&gt; m (TypeBase d1 as'))
-&gt; [(TypeBase d1 as', TypeBase d2 as')] -&gt; m [TypeBase d1 as']
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as'))
-&gt; (TypeBase d1 as', TypeBase d2 as') -&gt; m (TypeBase d1 as')
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
forall as'.
Monoid as' =&gt;
[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
</span><a href="#local-6989586621684491548"><span class="hs-identifier hs-var">matchDims'</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491511"><span class="hs-identifier hs-var">bound</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([TypeBase d1 as']
 -&gt; [TypeBase d2 as'] -&gt; [(TypeBase d1 as', TypeBase d2 as')])
-&gt; Map Name [TypeBase d1 as']
-&gt; Map Name [TypeBase d2 as']
-&gt; Map Name [(TypeBase d1 as', TypeBase d2 as')]
forall k a b c.
Ord k =&gt;
(a -&gt; b -&gt; c) -&gt; Map k a -&gt; Map k b -&gt; Map k c
</span><span class="hs-identifier hs-var">M.intersectionWith</span></span><span> </span><span class="annot"><span class="annottext">[TypeBase d1 as']
-&gt; [TypeBase d2 as'] -&gt; [(TypeBase d1 as', TypeBase d2 as')]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase d1 as']
</span><a href="#local-6989586621684491496"><span class="hs-identifier hs-var">cs1</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase d2 as']
</span><a href="#local-6989586621684491495"><span class="hs-identifier hs-var">cs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span id="local-6989586621684491494"><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491494"><span class="hs-identifier hs-var">als1</span></a></span></span><span> </span><span id="local-6989586621684491493"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491493"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621684491492"><span class="annot"><span class="annottext">TypeBase d1 as'
</span><a href="#local-6989586621684491492"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684491491"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491491"><span class="hs-identifier hs-var">dims1</span></a></span></span><span> </span><span id="local-6989586621684491490"><span class="annot"><span class="annottext">TypeBase d1 as'
</span><a href="#local-6989586621684491490"><span class="hs-identifier hs-var">b1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-476"></span><span>          </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span id="local-6989586621684491489"><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491489"><span class="hs-identifier hs-var">als2</span></a></span></span><span> </span><span id="local-6989586621684491488"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491488"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span id="local-6989586621684491487"><span class="annot"><span class="annottext">TypeBase d2 as'
</span><a href="#local-6989586621684491487"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684491486"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491486"><span class="hs-identifier hs-var">dims2</span></a></span></span><span> </span><span id="local-6989586621684491485"><span class="annot"><span class="annottext">TypeBase d2 as'
</span><a href="#local-6989586621684491485"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>          </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-478"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621684491481"><span class="annot"><span class="annottext">bound' :: [VName]
</span><a href="#local-6989586621684491481"><span class="hs-identifier hs-var hs-var">bound'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PName -&gt; Maybe VName) -&gt; [PName] -&gt; [VName]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">PName -&gt; Maybe VName
</span><a href="#local-6989586621684491479"><span class="hs-identifier hs-var">maybePName</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491493"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491488"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; [VName] -&gt; [VName]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491491"><span class="hs-identifier hs-var">dims1</span></a></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; [VName] -&gt; [VName]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491486"><span class="hs-identifier hs-var">dims2</span></a></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; [VName] -&gt; [VName]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491511"><span class="hs-identifier hs-var">bound</span></a></span><span>
</span><span id="line-479"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase d1 as' -&gt; TypeBase d1 as'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span>
</span><span id="line-480"></span><span>                  </span><span class="annot"><span class="annottext">(ScalarTypeBase d1 as' -&gt; TypeBase d1 as')
-&gt; m (ScalarTypeBase d1 as') -&gt; m (TypeBase d1 as')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">as'
-&gt; PName
-&gt; TypeBase d1 as'
-&gt; RetTypeBase d1 as'
-&gt; ScalarTypeBase d1 as'
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491494"><span class="hs-identifier hs-var">als1</span></a></span><span> </span><span class="annot"><span class="annottext">as' -&gt; as' -&gt; as'
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491489"><span class="hs-identifier hs-var">als2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491493"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase d1 as' -&gt; RetTypeBase d1 as' -&gt; ScalarTypeBase d1 as')
-&gt; m (TypeBase d1 as')
-&gt; m (RetTypeBase d1 as' -&gt; ScalarTypeBase d1 as')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
forall as'.
Monoid as' =&gt;
[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
</span><a href="#local-6989586621684491548"><span class="hs-identifier hs-var">matchDims'</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491481"><span class="hs-identifier hs-var">bound'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase d1 as'
</span><a href="#local-6989586621684491492"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase d2 as'
</span><a href="#local-6989586621684491487"><span class="hs-identifier hs-var">a2</span></a></span><span>
</span><span id="line-481"></span><span>                          </span><span class="annot"><span class="annottext">m (RetTypeBase d1 as' -&gt; ScalarTypeBase d1 as')
-&gt; m (RetTypeBase d1 as') -&gt; m (ScalarTypeBase d1 as')
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase d1 as' -&gt; RetTypeBase d1 as'
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491491"><span class="hs-identifier hs-var">dims1</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase d1 as' -&gt; RetTypeBase d1 as')
-&gt; m (TypeBase d1 as') -&gt; m (RetTypeBase d1 as')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
forall as'.
Monoid as' =&gt;
[VName]
-&gt; TypeBase d1 as' -&gt; TypeBase d2 as' -&gt; m (TypeBase d1 as')
</span><a href="#local-6989586621684491548"><span class="hs-identifier hs-var">matchDims'</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491481"><span class="hs-identifier hs-var">bound'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase d1 as'
</span><a href="#local-6989586621684491490"><span class="hs-identifier hs-var">b1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase d2 as'
</span><a href="#local-6989586621684491485"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span id="local-6989586621684491478"><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491478"><span class="hs-identifier hs-var">als1</span></a></span></span><span> </span><span id="local-6989586621684491477"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491477"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684491476"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491476"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684491475"><span class="annot"><span class="annottext">[TypeArg d1]
</span><a href="#local-6989586621684491475"><span class="hs-identifier hs-var">targs1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-484"></span><span>          </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span id="local-6989586621684491474"><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491474"><span class="hs-identifier hs-var">als2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491473"><span class="annot"><span class="annottext">[TypeArg d2]
</span><a href="#local-6989586621684491473"><span class="hs-identifier hs-var">targs2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>          </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-486"></span><span>            </span><span class="annot"><span class="annottext">ScalarTypeBase d1 as' -&gt; TypeBase d1 as'
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase d1 as' -&gt; TypeBase d1 as')
-&gt; ([TypeArg d1] -&gt; ScalarTypeBase d1 as')
-&gt; [TypeArg d1]
-&gt; TypeBase d1 as'
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">as'
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg d1] -&gt; ScalarTypeBase d1 as'
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491478"><span class="hs-identifier hs-var">als1</span></a></span><span> </span><span class="annot"><span class="annottext">as' -&gt; as' -&gt; as'
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">as'
</span><a href="#local-6989586621684491474"><span class="hs-identifier hs-var">als2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491477"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491476"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">([TypeArg d1] -&gt; TypeBase d1 as')
-&gt; m [TypeArg d1] -&gt; m (TypeBase d1 as')
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeArg d1 -&gt; TypeArg d2 -&gt; m (TypeArg d1))
-&gt; [TypeArg d1] -&gt; [TypeArg d2] -&gt; m [TypeArg d1]
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m [c]
</span><span class="hs-identifier hs-var">zipWithM</span></span><span> </span><span class="annot"><span class="annottext">TypeArg d1 -&gt; TypeArg d2 -&gt; m (TypeArg d1)
forall {f :: * -&gt; *} {dim} {p}.
Applicative f =&gt;
TypeArg dim -&gt; p -&gt; f (TypeArg dim)
</span><a href="#local-6989586621684491471"><span class="hs-identifier hs-var">matchTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeArg d1]
</span><a href="#local-6989586621684491475"><span class="hs-identifier hs-var">targs1</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeArg d2]
</span><a href="#local-6989586621684491473"><span class="hs-identifier hs-var">targs2</span></a></span><span>
</span><span id="line-487"></span><span>        </span><span class="annot"><span class="annottext">(TypeBase d1 as', TypeBase d2 as')
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeBase d1 as' -&gt; m (TypeBase d1 as')
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TypeBase d1 as'
</span><a href="#local-6989586621684491510"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span>    </span><span id="local-6989586621684491471"><span class="annot"><span class="annottext">matchTypeArg :: TypeArg dim -&gt; p -&gt; f (TypeArg dim)
</span><a href="#local-6989586621684491471"><span class="hs-identifier hs-var hs-var">matchTypeArg</span></a></span></span><span> </span><span id="local-6989586621684491467"><span class="annot"><span class="annottext">ta :: TypeArg dim
</span><a href="#local-6989586621684491467"><span class="hs-identifier hs-var">ta</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeArg dim -&gt; f (TypeArg dim)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TypeArg dim
</span><a href="#local-6989586621684491467"><span class="hs-identifier hs-var">ta</span></a></span><span>
</span><span id="line-490"></span><span>    </span><span class="annot"><a href="#local-6989586621684491471"><span class="hs-identifier hs-var">matchTypeArg</span></a></span><span> </span><span id="local-6989586621684491466"><span class="annot"><span class="annottext">TypeArg dim
</span><a href="#local-6989586621684491466"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeArg dim -&gt; f (TypeArg dim)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TypeArg dim
</span><a href="#local-6989586621684491466"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span>    </span><span id="local-6989586621684491479"><span class="annot"><span class="annottext">maybePName :: PName -&gt; Maybe VName
</span><a href="#local-6989586621684491479"><span class="hs-identifier hs-var hs-var">maybePName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span id="local-6989586621684491465"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491465"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; Maybe VName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491465"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-493"></span><span>    </span><span class="annot"><a href="#local-6989586621684491479"><span class="hs-identifier hs-var">maybePName</span></a></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="Language.Futhark.Syntax.html#Unnamed"><span class="hs-identifier hs-var">Unnamed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span>    </span><span id="local-6989586621684491500"><span class="annot"><span class="annottext">onShapes :: [VName] -&gt; ShapeDecl d1 -&gt; ShapeDecl d2 -&gt; m (ShapeDecl d1)
</span><a href="#local-6989586621684491500"><span class="hs-identifier hs-var hs-var">onShapes</span></a></span></span><span> </span><span id="local-6989586621684491462"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491462"><span class="hs-identifier hs-var">bound</span></a></span></span><span> </span><span id="local-6989586621684491461"><span class="annot"><span class="annottext">ShapeDecl d1
</span><a href="#local-6989586621684491461"><span class="hs-identifier hs-var">shape1</span></a></span></span><span> </span><span id="local-6989586621684491460"><span class="annot"><span class="annottext">ShapeDecl d2
</span><a href="#local-6989586621684491460"><span class="hs-identifier hs-var">shape2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-496"></span><span>      </span><span class="annot"><span class="annottext">[d1] -&gt; ShapeDecl d1
forall dim. [dim] -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-var">ShapeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">([d1] -&gt; ShapeDecl d1) -&gt; m [d1] -&gt; m (ShapeDecl d1)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(d1 -&gt; d2 -&gt; m d1) -&gt; [d1] -&gt; [d2] -&gt; m [d1]
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m [c]
</span><span class="hs-identifier hs-var">zipWithM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; d1 -&gt; d2 -&gt; m d1
</span><a href="#local-6989586621684491549"><span class="hs-identifier hs-var">onDims</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491462"><span class="hs-identifier hs-var">bound</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShapeDecl d1 -&gt; [d1]
forall dim. ShapeDecl dim -&gt; [dim]
</span><a href="Language.Futhark.Syntax.html#shapeDims"><span class="hs-identifier hs-var hs-var">shapeDims</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl d1
</span><a href="#local-6989586621684491461"><span class="hs-identifier hs-var">shape1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShapeDecl d2 -&gt; [d2]
forall dim. ShapeDecl dim -&gt; [dim]
</span><a href="Language.Futhark.Syntax.html#shapeDims"><span class="hs-identifier hs-var hs-var">shapeDims</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl d2
</span><a href="#local-6989586621684491460"><span class="hs-identifier hs-var">shape2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="hs-comment">-- | Set the uniqueness attribute of a type.  If the type is a record</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- or sum type, the uniqueness of its components will be modified.</span><span>
</span><span id="line-500"></span><span id="local-6989586621684492485"><span id="local-6989586621684492486"><span class="annot"><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-identifier hs-type">setUniqueness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492486"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492485"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Uniqueness"><span class="hs-identifier hs-type">Uniqueness</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492486"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492485"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-501"></span><span id="setUniqueness"><span class="annot"><span class="annottext">setUniqueness :: forall dim as. TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-identifier hs-var hs-var">setUniqueness</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684491456"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491456"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491455"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491455"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621684491454"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491454"><span class="hs-identifier hs-var">shape</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491453"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491453"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-502"></span><span>  </span><span class="annot"><span class="annottext">as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491456"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491453"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491455"><span class="hs-identifier hs-var">et</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491454"><span class="hs-identifier hs-var">shape</span></a></span><span>
</span><span id="line-503"></span><span class="annot"><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-identifier hs-var">setUniqueness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span id="local-6989586621684491452"><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491452"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491451"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491451"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684491450"><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491450"><span class="hs-identifier hs-var">targs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491449"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491449"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-504"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><a href="#local-6989586621684491452"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491449"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491451"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491450"><span class="hs-identifier hs-var">targs</span></a></span><span>
</span><span id="line-505"></span><span class="annot"><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-identifier hs-var">setUniqueness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491448"><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491448"><span class="hs-identifier hs-var">ets</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491447"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491447"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-506"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as)
-&gt; Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; TypeBase dim as)
-&gt; Map Name (TypeBase dim as) -&gt; Map Name (TypeBase dim as)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
forall dim as. TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-operator hs-var">`setUniqueness`</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491447"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491448"><span class="hs-identifier hs-var">ets</span></a></span><span>
</span><span id="line-507"></span><span class="annot"><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-identifier hs-var">setUniqueness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491446"><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491446"><span class="hs-identifier hs-var">ets</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491445"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491445"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-508"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
forall dim as. Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-var">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as)
-&gt; Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([TypeBase dim as] -&gt; [TypeBase dim as])
-&gt; Map Name [TypeBase dim as] -&gt; Map Name [TypeBase dim as]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; TypeBase dim as)
-&gt; [TypeBase dim as] -&gt; [TypeBase dim as]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
forall dim as. TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-operator hs-var">`setUniqueness`</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684491445"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491446"><span class="hs-identifier hs-var">ets</span></a></span><span>
</span><span id="line-509"></span><span class="annot"><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-identifier hs-var">setUniqueness</span></a></span><span> </span><span id="local-6989586621684491444"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491444"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491444"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="hs-comment">-- | @t \`setAliases\` als@ returns @t@, but with @als@ substituted for</span><span>
</span><span id="line-512"></span><span class="hs-comment">-- any already present aliasing.</span><span>
</span><span id="line-513"></span><span id="local-6989586621684492512"><span id="local-6989586621684492513"><span id="local-6989586621684492514"><span class="annot"><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-identifier hs-type">setAliases</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492514"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492513"><span class="hs-identifier hs-type">asf</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492512"><span class="hs-identifier hs-type">ast</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492514"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492512"><span class="hs-identifier hs-type">ast</span></a></span></span></span></span><span>
</span><span id="line-514"></span><span id="setAliases"><span class="annot"><span class="annottext">setAliases :: forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-identifier hs-var hs-var">setAliases</span></a></span></span><span> </span><span id="local-6989586621684491443"><span class="annot"><span class="annottext">TypeBase dim asf
</span><a href="#local-6989586621684491443"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim asf -&gt; (asf -&gt; ast) -&gt; TypeBase dim ast
forall dim asf ast.
TypeBase dim asf -&gt; (asf -&gt; ast) -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#addAliases"><span class="hs-identifier hs-var">addAliases</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim asf
</span><a href="#local-6989586621684491443"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">((asf -&gt; ast) -&gt; TypeBase dim ast)
-&gt; (ast -&gt; asf -&gt; ast) -&gt; ast -&gt; TypeBase dim ast
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ast -&gt; asf -&gt; ast
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span class="hs-comment">-- | @t \`addAliases\` f@ returns @t@, but with any already present</span><span>
</span><span id="line-517"></span><span class="hs-comment">-- aliasing replaced by @f@ applied to that aliasing.</span><span>
</span><span id="line-518"></span><span id="local-6989586621684492494"><span id="local-6989586621684492495"><span id="local-6989586621684492496"><span class="annot"><a href="Language.Futhark.Prop.html#addAliases"><span class="hs-identifier hs-type">addAliases</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-519"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492496"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492495"><span class="hs-identifier hs-type">asf</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-520"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621684492495"><span class="hs-identifier hs-type">asf</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684492494"><span class="hs-identifier hs-type">ast</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-521"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492496"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492494"><span class="hs-identifier hs-type">ast</span></a></span></span></span></span><span>
</span><span id="line-522"></span><span id="addAliases"><span class="annot"><span class="annottext">addAliases :: forall dim asf ast.
TypeBase dim asf -&gt; (asf -&gt; ast) -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#addAliases"><span class="hs-identifier hs-var hs-var">addAliases</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((asf -&gt; ast) -&gt; TypeBase dim asf -&gt; TypeBase dim ast)
-&gt; TypeBase dim asf -&gt; (asf -&gt; ast) -&gt; TypeBase dim ast
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(asf -&gt; ast) -&gt; TypeBase dim asf -&gt; TypeBase dim ast
forall (p :: * -&gt; * -&gt; *) b c a.
Bifunctor p =&gt;
(b -&gt; c) -&gt; p a b -&gt; p a c
</span><span class="hs-identifier hs-var">second</span></span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span class="annot"><a href="Language.Futhark.Prop.html#intValueType"><span class="hs-identifier hs-type">intValueType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#IntValue"><span class="hs-identifier hs-type">IntValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#IntType"><span class="hs-identifier hs-type">IntType</span></a></span><span>
</span><span id="line-525"></span><span id="intValueType"><span class="annot"><span class="annottext">intValueType :: IntValue -&gt; IntType
</span><a href="Language.Futhark.Prop.html#intValueType"><span class="hs-identifier hs-var hs-var">intValueType</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#Int8Value"><span class="hs-identifier hs-type">Int8Value</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int8"><span class="hs-identifier hs-var">Int8</span></a></span><span>
</span><span id="line-526"></span><span class="annot"><a href="Language.Futhark.Prop.html#intValueType"><span class="hs-identifier hs-var">intValueType</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#Int16Value"><span class="hs-identifier hs-type">Int16Value</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int16"><span class="hs-identifier hs-var">Int16</span></a></span><span>
</span><span id="line-527"></span><span class="annot"><a href="Language.Futhark.Prop.html#intValueType"><span class="hs-identifier hs-var">intValueType</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#Int32Value"><span class="hs-identifier hs-type">Int32Value</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int32"><span class="hs-identifier hs-var">Int32</span></a></span><span>
</span><span id="line-528"></span><span class="annot"><a href="Language.Futhark.Prop.html#intValueType"><span class="hs-identifier hs-var">intValueType</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#Int64Value"><span class="hs-identifier hs-type">Int64Value</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span class="annot"><a href="Language.Futhark.Prop.html#floatValueType"><span class="hs-identifier hs-type">floatValueType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#FloatValue"><span class="hs-identifier hs-type">FloatValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#FloatType"><span class="hs-identifier hs-type">FloatType</span></a></span><span>
</span><span id="line-531"></span><span id="floatValueType"><span class="annot"><span class="annottext">floatValueType :: FloatValue -&gt; FloatType
</span><a href="Language.Futhark.Prop.html#floatValueType"><span class="hs-identifier hs-var hs-var">floatValueType</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#Float16Value"><span class="hs-identifier hs-type">Float16Value</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FloatType
</span><a href="Futhark.IR.Primitive.html#Float16"><span class="hs-identifier hs-var">Float16</span></a></span><span>
</span><span id="line-532"></span><span class="annot"><a href="Language.Futhark.Prop.html#floatValueType"><span class="hs-identifier hs-var">floatValueType</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#Float32Value"><span class="hs-identifier hs-type">Float32Value</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FloatType
</span><a href="Futhark.IR.Primitive.html#Float32"><span class="hs-identifier hs-var">Float32</span></a></span><span>
</span><span id="line-533"></span><span class="annot"><a href="Language.Futhark.Prop.html#floatValueType"><span class="hs-identifier hs-var">floatValueType</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.Primitive.html#Float64Value"><span class="hs-identifier hs-type">Float64Value</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FloatType
</span><a href="Futhark.IR.Primitive.html#Float64"><span class="hs-identifier hs-var">Float64</span></a></span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-comment">-- | The type of a basic value.</span><span>
</span><span id="line-536"></span><span class="annot"><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier hs-type">primValueType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimValue"><span class="hs-identifier hs-type">PrimValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimType"><span class="hs-identifier hs-type">PrimType</span></a></span><span>
</span><span id="line-537"></span><span id="primValueType"><span class="annot"><span class="annottext">primValueType :: PrimValue -&gt; PrimType
</span><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier hs-var hs-var">primValueType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SignedValue"><span class="hs-identifier hs-type">SignedValue</span></a></span><span> </span><span id="local-6989586621684491424"><span class="annot"><span class="annottext">IntValue
</span><a href="#local-6989586621684491424"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; IntType -&gt; PrimType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntValue -&gt; IntType
</span><a href="Language.Futhark.Prop.html#intValueType"><span class="hs-identifier hs-var">intValueType</span></a></span><span> </span><span class="annot"><span class="annottext">IntValue
</span><a href="#local-6989586621684491424"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-538"></span><span class="annot"><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier hs-var">primValueType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#UnsignedValue"><span class="hs-identifier hs-type">UnsignedValue</span></a></span><span> </span><span id="local-6989586621684491421"><span class="annot"><span class="annottext">IntValue
</span><a href="#local-6989586621684491421"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; IntType -&gt; PrimType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntValue -&gt; IntType
</span><a href="Language.Futhark.Prop.html#intValueType"><span class="hs-identifier hs-var">intValueType</span></a></span><span> </span><span class="annot"><span class="annottext">IntValue
</span><a href="#local-6989586621684491421"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-539"></span><span class="annot"><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier hs-var">primValueType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FloatValue"><span class="hs-identifier hs-type">FloatValue</span></a></span><span> </span><span id="local-6989586621684491418"><span class="annot"><span class="annottext">FloatValue
</span><a href="#local-6989586621684491418"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FloatType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#FloatType"><span class="hs-identifier hs-var">FloatType</span></a></span><span> </span><span class="annot"><span class="annottext">(FloatType -&gt; PrimType) -&gt; FloatType -&gt; PrimType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FloatValue -&gt; FloatType
</span><a href="Language.Futhark.Prop.html#floatValueType"><span class="hs-identifier hs-var">floatValueType</span></a></span><span> </span><span class="annot"><span class="annottext">FloatValue
</span><a href="#local-6989586621684491418"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-540"></span><span class="annot"><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier hs-var">primValueType</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#BoolValue"><span class="hs-identifier hs-type">BoolValue</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-comment">-- | The type of the value.</span><span>
</span><span id="line-543"></span><span class="annot"><a href="Language.Futhark.Prop.html#valueType"><span class="hs-identifier hs-type">valueType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ValueType"><span class="hs-identifier hs-type">ValueType</span></a></span><span>
</span><span id="line-544"></span><span id="valueType"><span class="annot"><span class="annottext">valueType :: Value -&gt; ValueType
</span><a href="Language.Futhark.Prop.html#valueType"><span class="hs-identifier hs-var hs-var">valueType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimValue"><span class="hs-identifier hs-type">PrimValue</span></a></span><span> </span><span id="local-6989586621684491413"><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684491413"><span class="hs-identifier hs-var">bv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase Int64 () -&gt; ValueType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase Int64 () -&gt; ValueType)
-&gt; ScalarTypeBase Int64 () -&gt; ValueType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase Int64 ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase Int64 ())
-&gt; PrimType -&gt; ScalarTypeBase Int64 ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimValue -&gt; PrimType
</span><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier hs-var">primValueType</span></a></span><span> </span><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684491413"><span class="hs-identifier hs-var">bv</span></a></span><span>
</span><span id="line-545"></span><span class="annot"><a href="Language.Futhark.Prop.html#valueType"><span class="hs-identifier hs-var">valueType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayValue"><span class="hs-identifier hs-type">ArrayValue</span></a></span><span> </span><span class="annot"><span class="annottext">Array Int Value
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491411"><span class="annot"><span class="annottext">ValueType
</span><a href="#local-6989586621684491411"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValueType
</span><a href="#local-6989586621684491411"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="hs-comment">-- | The type of an Futhark term.  The aliasing will refer to itself, if</span><span>
</span><span id="line-548"></span><span class="hs-comment">-- the term is a non-tuple-typed variable.</span><span>
</span><span id="line-549"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-type">typeOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatType"><span class="hs-identifier hs-type">PatType</span></a></span><span>
</span><span id="line-550"></span><span id="typeOf"><span class="annot"><span class="annottext">typeOf :: ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var hs-var">typeOf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span id="local-6989586621684491409"><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684491409"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType)
-&gt; ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) Aliasing)
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimValue -&gt; PrimType
</span><a href="Language.Futhark.Prop.html#primValueType"><span class="hs-identifier hs-var">primValueType</span></a></span><span> </span><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684491409"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-551"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IntLit"><span class="hs-identifier hs-type">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491406"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491406"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491406"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-552"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FloatLit"><span class="hs-identifier hs-type">FloatLit</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491404"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491404"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491404"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-553"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Parens"><span class="hs-identifier hs-type">Parens</span></a></span><span> </span><span id="local-6989586621684491402"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491402"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491402"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-554"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualParens"><span class="hs-identifier hs-type">QualParens</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491400"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491400"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491400"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-555"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TupLit"><span class="hs-identifier hs-type">TupLit</span></a></span><span> </span><span id="local-6989586621684491398"><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684491398"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType)
-&gt; ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[PatType] -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall dim as. [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-var">tupleRecord</span></a></span><span> </span><span class="annot"><span class="annottext">([PatType] -&gt; ScalarTypeBase (DimDecl VName) Aliasing)
-&gt; [PatType] -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; PatType)
-&gt; [ExpBase Info VName] -&gt; [PatType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684491398"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-556"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordLit"><span class="hs-identifier hs-type">RecordLit</span></a></span><span> </span><span id="local-6989586621684491396"><span class="annot"><span class="annottext">[FieldBase Info VName]
</span><a href="#local-6989586621684491396"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-557"></span><span>  </span><span class="hs-comment">-- Reverse, because M.unions is biased to the left.</span><span>
</span><span id="line-558"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType)
-&gt; ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name PatType -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name PatType -&gt; ScalarTypeBase (DimDecl VName) Aliasing)
-&gt; Map Name PatType -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Map Name PatType] -&gt; Map Name PatType
forall (f :: * -&gt; *) k a.
(Foldable f, Ord k) =&gt;
f (Map k a) -&gt; Map k a
</span><span class="hs-identifier hs-var">M.unions</span></span><span> </span><span class="annot"><span class="annottext">([Map Name PatType] -&gt; Map Name PatType)
-&gt; [Map Name PatType] -&gt; Map Name PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Map Name PatType] -&gt; [Map Name PatType]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([Map Name PatType] -&gt; [Map Name PatType])
-&gt; [Map Name PatType] -&gt; [Map Name PatType]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldBase Info VName -&gt; Map Name PatType)
-&gt; [FieldBase Info VName] -&gt; [Map Name PatType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldBase Info VName -&gt; Map Name PatType
</span><a href="#local-6989586621684491393"><span class="hs-identifier hs-var">record</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldBase Info VName]
</span><a href="#local-6989586621684491396"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-560"></span><span>    </span><span id="local-6989586621684491393"><span class="annot"><span class="annottext">record :: FieldBase Info VName -&gt; Map Name PatType
</span><a href="#local-6989586621684491393"><span class="hs-identifier hs-var hs-var">record</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldExplicit"><span class="hs-identifier hs-type">RecordFieldExplicit</span></a></span><span> </span><span id="local-6989586621684491390"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684491390"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684491389"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491389"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; PatType -&gt; Map Name PatType
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.singleton</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684491390"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Map Name PatType) -&gt; PatType -&gt; Map Name PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491389"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-561"></span><span>    </span><span class="annot"><a href="#local-6989586621684491393"><span class="hs-identifier hs-var">record</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldImplicit"><span class="hs-identifier hs-type">RecordFieldImplicit</span></a></span><span> </span><span id="local-6989586621684491386"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491386"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491385"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491385"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-562"></span><span>      </span><span class="annot"><span class="annottext">Name -&gt; PatType -&gt; Map Name PatType
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; Name
</span><a href="Language.Futhark.Core.html#baseName"><span class="hs-identifier hs-var">baseName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491386"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Map Name PatType) -&gt; PatType -&gt; Map Name PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-563"></span><span>        </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491385"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-564"></span><span>          </span><span class="annot"><span class="annottext">PatType -&gt; (Aliasing -&gt; Aliasing) -&gt; PatType
forall dim asf ast.
TypeBase dim asf -&gt; (asf -&gt; ast) -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#addAliases"><span class="hs-operator hs-var">`addAliases`</span></a></span><span> </span><span class="annot"><span class="annottext">Alias -&gt; Aliasing -&gt; Aliasing
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">S.insert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; Alias
</span><a href="Language.Futhark.Syntax.html#AliasBound"><span class="hs-identifier hs-var">AliasBound</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491386"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-type">ArrayLit</span></a></span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491381"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491381"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491381"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-566"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#StringLit"><span class="hs-identifier hs-type">StringLit</span></a></span><span> </span><span id="local-6989586621684491379"><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684491379"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-567"></span><span>  </span><span class="annot"><span class="annottext">Aliasing
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; PatType
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span>
</span><span id="line-568"></span><span>    </span><span class="annot"><span class="annottext">Aliasing
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-569"></span><span>    </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span>
</span><span id="line-570"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int8"><span class="hs-identifier hs-var">Int8</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; ShapeDecl (DimDecl VName)
forall dim. [dim] -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-var">ShapeDecl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int -&gt; DimDecl VName
forall vn. Int -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#ConstDim"><span class="hs-identifier hs-var">ConstDim</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; DimDecl VName) -&gt; Int -&gt; DimDecl VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Word8] -&gt; Int
forall i a. Num i =&gt; [a] -&gt; i
</span><span class="hs-identifier hs-var">genericLength</span></span><span> </span><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684491379"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Project"><span class="hs-identifier hs-type">Project</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491376"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491376"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491376"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-573"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491374"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491374"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491374"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-574"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ascript"><span class="hs-identifier hs-type">Ascript</span></a></span><span> </span><span id="local-6989586621684491372"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491372"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491372"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-575"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Negate"><span class="hs-identifier hs-type">Negate</span></a></span><span> </span><span id="local-6989586621684491370"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491370"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491370"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-576"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Not"><span class="hs-identifier hs-type">Not</span></a></span><span> </span><span id="local-6989586621684491368"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491368"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491368"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-577"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Update"><span class="hs-identifier hs-type">Update</span></a></span><span> </span><span id="local-6989586621684491366"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491366"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491366"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Aliasing -&gt; PatType
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-operator hs-var">`setAliases`</span></a></span><span> </span><span class="annot"><span class="annottext">Aliasing
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-578"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordUpdate"><span class="hs-identifier hs-type">RecordUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491364"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491364"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491364"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-579"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Assert"><span class="hs-identifier hs-type">Assert</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491362"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491362"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491362"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-580"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span id="local-6989586621684491360"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491360"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491359"><span class="annot"><span class="annottext">Aliasing
</span><a href="#local-6989586621684491359"><span class="hs-identifier hs-var">als</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491358"><span class="annot"><span class="annottext">StructRetType
</span><a href="#local-6989586621684491358"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-581"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621684491356"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491356"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; StructRetType -&gt; StructRetType)
-&gt; StructRetType -&gt; [PatBase Info VName] -&gt; StructRetType
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PName, TypeBase (DimDecl VName) ())
-&gt; StructRetType -&gt; StructRetType
</span><a href="#local-6989586621684491354"><span class="hs-identifier hs-var">arrow</span></a></span><span> </span><span class="annot"><span class="annottext">((PName, TypeBase (DimDecl VName) ())
 -&gt; StructRetType -&gt; StructRetType)
-&gt; (PatBase Info VName -&gt; (PName, TypeBase (DimDecl VName) ()))
-&gt; PatBase Info VName
-&gt; StructRetType
-&gt; StructRetType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; (PName, TypeBase (DimDecl VName) ())
</span><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StructRetType
</span><a href="#local-6989586621684491358"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491360"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-582"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491356"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; Aliasing -&gt; PatType
forall dim asf ast. TypeBase dim asf -&gt; ast -&gt; TypeBase dim ast
</span><a href="Language.Futhark.Prop.html#setAliases"><span class="hs-operator hs-var">`setAliases`</span></a></span><span> </span><span class="annot"><span class="annottext">Aliasing
</span><a href="#local-6989586621684491359"><span class="hs-identifier hs-var">als</span></a></span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-584"></span><span>    </span><span id="local-6989586621684491354"><span class="annot"><span class="annottext">arrow :: (PName, TypeBase (DimDecl VName) ())
-&gt; StructRetType -&gt; StructRetType
</span><a href="#local-6989586621684491354"><span class="hs-identifier hs-var hs-var">arrow</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span id="local-6989586621684491352"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491352"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491351"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491351"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684491350"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491350"><span class="hs-identifier hs-var">dims</span></a></span></span><span> </span><span id="local-6989586621684491349"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491349"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491352"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">VName -&gt; Set VName -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`S.member`</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; Set VName
forall als. TypeBase (DimDecl VName) als -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-var">typeDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491349"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-586"></span><span>        </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">()
-&gt; PName
-&gt; TypeBase (DimDecl VName) ()
-&gt; StructRetType
-&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; PName
</span><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491352"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491351"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(StructRetType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; StructRetType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491352"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">VName -&gt; [VName] -&gt; [VName]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684491350"><span class="hs-identifier hs-var">dims</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491349"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-587"></span><span>    </span><span class="annot"><a href="#local-6989586621684491354"><span class="hs-identifier hs-var">arrow</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491348"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491348"><span class="hs-identifier hs-var">pn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491347"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491347"><span class="hs-identifier hs-var">tx</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491346"><span class="annot"><span class="annottext">StructRetType
</span><a href="#local-6989586621684491346"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-588"></span><span>      </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">()
-&gt; PName
-&gt; TypeBase (DimDecl VName) ()
-&gt; StructRetType
-&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491348"><span class="hs-identifier hs-var">pn</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491347"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">StructRetType
</span><a href="#local-6989586621684491346"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-589"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSection"><span class="hs-identifier hs-type">OpSection</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491344"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491344"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-590"></span><span>  </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491344"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-591"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionLeft"><span class="hs-identifier hs-type">OpSectionLeft</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Info (PName, TypeBase (DimDecl VName) (), Maybe VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491342"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491342"><span class="hs-identifier hs-var">pn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491341"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491341"><span class="hs-identifier hs-var">pt2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491340"><span class="annot"><span class="annottext">PatRetType
</span><a href="#local-6989586621684491340"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Info [VName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-592"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType)
-&gt; ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Aliasing
-&gt; PName
-&gt; PatType
-&gt; PatRetType
-&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">Aliasing
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491342"><span class="hs-identifier hs-var">pn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; PatType
forall dim as. TypeBase dim as -&gt; TypeBase dim Aliasing
</span><a href="Language.Futhark.Prop.html#fromStruct"><span class="hs-identifier hs-var">fromStruct</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491341"><span class="hs-identifier hs-var">pt2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PatRetType
</span><a href="#local-6989586621684491340"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-593"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionRight"><span class="hs-identifier hs-type">OpSectionRight</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491338"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491338"><span class="hs-identifier hs-var">pn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491337"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491337"><span class="hs-identifier hs-var">pt1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Info (PName, TypeBase (DimDecl VName) (), Maybe VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491336"><span class="annot"><span class="annottext">PatRetType
</span><a href="#local-6989586621684491336"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-594"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType)
-&gt; ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Aliasing
-&gt; PName
-&gt; PatType
-&gt; PatRetType
-&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">Aliasing
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491338"><span class="hs-identifier hs-var">pn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; PatType
forall dim as. TypeBase dim as -&gt; TypeBase dim Aliasing
</span><a href="Language.Futhark.Prop.html#fromStruct"><span class="hs-identifier hs-var">fromStruct</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491337"><span class="hs-identifier hs-var">pt1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PatRetType
</span><a href="#local-6989586621684491336"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-595"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ProjectSection"><span class="hs-identifier hs-type">ProjectSection</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491334"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491334"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491334"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-596"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IndexSection"><span class="hs-identifier hs-type">IndexSection</span></a></span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491332"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491332"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491332"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-597"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Constr"><span class="hs-identifier hs-type">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491330"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491330"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491330"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-598"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Attr"><span class="hs-identifier hs-type">Attr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491328"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491328"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684491328"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-599"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeOf"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-type">AppExp</span></a></span><span> </span><span class="annot"><span class="annottext">AppExpBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491326"><span class="annot"><span class="annottext">AppRes
</span><a href="#local-6989586621684491326"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AppRes -&gt; PatType
</span><a href="Language.Futhark.Syntax.html#appResType"><span class="hs-identifier hs-var hs-var">appResType</span></a></span><span> </span><span class="annot"><span class="annottext">AppRes
</span><a href="#local-6989586621684491326"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="hs-comment">-- | @foldFunType ts ret@ creates a function type ('Arrow') that takes</span><span>
</span><span id="line-602"></span><span class="hs-comment">-- @ts@ as parameters and returns @ret@.</span><span>
</span><span id="line-603"></span><span id="local-6989586621684492362"><span id="local-6989586621684492363"><span class="annot"><a href="Language.Futhark.Prop.html#foldFunType"><span class="hs-identifier hs-type">foldFunType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492363"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492362"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492363"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#RetTypeBase"><span class="hs-identifier hs-type">RetTypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492362"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492363"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492362"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492363"><span class="hs-keyword hs-type">as</span></a></span></span></span><span>
</span><span id="line-604"></span><span id="foldFunType"><span class="annot"><span class="annottext">foldFunType :: forall as dim.
Monoid as =&gt;
[TypeBase dim as] -&gt; RetTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#foldFunType"><span class="hs-identifier hs-var hs-var">foldFunType</span></a></span></span><span> </span><span id="local-6989586621684491323"><span class="annot"><span class="annottext">[TypeBase dim as]
</span><a href="#local-6989586621684491323"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621684491322"><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684491322"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-605"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491319"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491319"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; RetTypeBase dim as -&gt; RetTypeBase dim as)
-&gt; RetTypeBase dim as -&gt; [TypeBase dim as] -&gt; RetTypeBase dim as
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; RetTypeBase dim as -&gt; RetTypeBase dim as
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; RetTypeBase dim as -&gt; RetTypeBase dim as
</span><a href="#local-6989586621684491318"><span class="hs-identifier hs-var">arrow</span></a></span><span> </span><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684491322"><span class="hs-identifier hs-var">ret</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeBase dim as]
</span><a href="#local-6989586621684491323"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-606"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491319"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-607"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-608"></span><span>    </span><span id="local-6989586621684491318"><span class="annot"><span class="annottext">arrow :: TypeBase dim as -&gt; RetTypeBase dim as -&gt; RetTypeBase dim as
</span><a href="#local-6989586621684491318"><span class="hs-identifier hs-var hs-var">arrow</span></a></span></span><span> </span><span id="local-6989586621684491315"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491315"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684491314"><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684491314"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; RetTypeBase dim as)
-&gt; TypeBase dim as -&gt; RetTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="Language.Futhark.Syntax.html#Unnamed"><span class="hs-identifier hs-var">Unnamed</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491315"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684491314"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-609"></span><span>
</span><span id="line-610"></span><span class="hs-comment">-- | Extract the parameter types and return type from a type.</span><span>
</span><span id="line-611"></span><span class="hs-comment">-- If the type is not an arrow type, the list of parameter types is empty.</span><span>
</span><span id="line-612"></span><span id="local-6989586621684492562"><span id="local-6989586621684492563"><span class="annot"><a href="Language.Futhark.Prop.html#unfoldFunType"><span class="hs-identifier hs-type">unfoldFunType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492563"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492562"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492563"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492562"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492563"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492562"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-613"></span><span id="unfoldFunType"><span class="annot"><span class="annottext">unfoldFunType :: forall dim as.
TypeBase dim as -&gt; ([TypeBase dim as], TypeBase dim as)
</span><a href="Language.Futhark.Prop.html#unfoldFunType"><span class="hs-identifier hs-var hs-var">unfoldFunType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491313"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491313"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491312"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491312"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491311"><span class="annot"><span class="annottext">[TypeBase dim as]
</span><a href="#local-6989586621684491311"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491310"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491310"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; ([TypeBase dim as], TypeBase dim as)
forall dim as.
TypeBase dim as -&gt; ([TypeBase dim as], TypeBase dim as)
</span><a href="Language.Futhark.Prop.html#unfoldFunType"><span class="hs-identifier hs-var">unfoldFunType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491312"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-615"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491313"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; [TypeBase dim as] -&gt; [TypeBase dim as]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[TypeBase dim as]
</span><a href="#local-6989586621684491311"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491310"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-616"></span><span class="annot"><a href="Language.Futhark.Prop.html#unfoldFunType"><span class="hs-identifier hs-var">unfoldFunType</span></a></span><span> </span><span id="local-6989586621684491309"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491309"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491309"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>
</span><span id="line-618"></span><span class="hs-comment">-- | The type scheme of a value binding, comprising the type</span><span>
</span><span id="line-619"></span><span class="hs-comment">-- parameters and the actual type.</span><span>
</span><span id="line-620"></span><span class="annot"><a href="Language.Futhark.Prop.html#valBindTypeScheme"><span class="hs-identifier hs-type">valBindTypeScheme</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ValBindBase"><span class="hs-identifier hs-type">ValBindBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span id="valBindTypeScheme"><span class="annot"><span class="annottext">valBindTypeScheme :: ValBindBase Info VName
-&gt; ([TypeParamBase VName], TypeBase (DimDecl VName) ())
</span><a href="Language.Futhark.Prop.html#valBindTypeScheme"><span class="hs-identifier hs-var hs-var">valBindTypeScheme</span></a></span></span><span> </span><span id="local-6989586621684491308"><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491308"><span class="hs-identifier hs-var">vb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-622"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName -&gt; [TypeParamBase VName]
forall (f :: * -&gt; *) vn. ValBindBase f vn -&gt; [TypeParamBase vn]
</span><a href="Language.Futhark.Syntax.html#valBindTypeParams"><span class="hs-identifier hs-var hs-var">valBindTypeParams</span></a></span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491308"><span class="hs-identifier hs-var">vb</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-623"></span><span>    </span><span class="annot"><span class="annottext">[PatBase Info VName]
-&gt; StructRetType -&gt; TypeBase (DimDecl VName) ()
</span><a href="Language.Futhark.Prop.html#funType"><span class="hs-identifier hs-var">funType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValBindBase Info VName -&gt; [PatBase Info VName]
forall (f :: * -&gt; *) vn. ValBindBase f vn -&gt; [PatBase f vn]
</span><a href="Language.Futhark.Syntax.html#valBindParams"><span class="hs-identifier hs-var hs-var">valBindParams</span></a></span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491308"><span class="hs-identifier hs-var">vb</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Info StructRetType -&gt; StructRetType
forall a. Info a -&gt; a
</span><a href="Language.Futhark.Syntax.html#unInfo"><span class="hs-identifier hs-var hs-var">unInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValBindBase Info VName -&gt; Info StructRetType
forall (f :: * -&gt; *) vn. ValBindBase f vn -&gt; f StructRetType
</span><a href="Language.Futhark.Syntax.html#valBindRetType"><span class="hs-identifier hs-var hs-var">valBindRetType</span></a></span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491308"><span class="hs-identifier hs-var">vb</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="hs-comment">-- | The names that are brought into scope by this value binding (not</span><span>
</span><span id="line-627"></span><span class="hs-comment">-- including its own parameter names, but including any existential</span><span>
</span><span id="line-628"></span><span class="hs-comment">-- sizes).</span><span>
</span><span id="line-629"></span><span class="annot"><a href="Language.Futhark.Prop.html#valBindBound"><span class="hs-identifier hs-type">valBindBound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ValBindBase"><span class="hs-identifier hs-type">ValBindBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-630"></span><span id="valBindBound"><span class="annot"><span class="annottext">valBindBound :: ValBindBase Info VName -&gt; [VName]
</span><a href="Language.Futhark.Prop.html#valBindBound"><span class="hs-identifier hs-var hs-var">valBindBound</span></a></span></span><span> </span><span id="local-6989586621684491303"><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491303"><span class="hs-identifier hs-var">vb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-631"></span><span>  </span><span class="annot"><span class="annottext">ValBindBase Info VName -&gt; VName
forall (f :: * -&gt; *) vn. ValBindBase f vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#valBindName"><span class="hs-identifier hs-var hs-var">valBindName</span></a></span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491303"><span class="hs-identifier hs-var">vb</span></a></span><span> </span><span class="annot"><span class="annottext">VName -&gt; [VName] -&gt; [VName]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span>
</span><span id="line-632"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName -&gt; [PatBase Info VName]
forall (f :: * -&gt; *) vn. ValBindBase f vn -&gt; [PatBase f vn]
</span><a href="Language.Futhark.Syntax.html#valBindParams"><span class="hs-identifier hs-var hs-var">valBindParams</span></a></span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491303"><span class="hs-identifier hs-var">vb</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StructRetType -&gt; [VName]
forall dim as. RetTypeBase dim as -&gt; [VName]
</span><a href="Language.Futhark.Syntax.html#retDims"><span class="hs-identifier hs-var hs-var">retDims</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Info StructRetType -&gt; StructRetType
forall a. Info a -&gt; a
</span><a href="Language.Futhark.Syntax.html#unInfo"><span class="hs-identifier hs-var hs-var">unInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValBindBase Info VName -&gt; Info StructRetType
forall (f :: * -&gt; *) vn. ValBindBase f vn -&gt; f StructRetType
</span><a href="Language.Futhark.Syntax.html#valBindRetType"><span class="hs-identifier hs-var hs-var">valBindRetType</span></a></span><span> </span><span class="annot"><span class="annottext">ValBindBase Info VName
</span><a href="#local-6989586621684491303"><span class="hs-identifier hs-var">vb</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>    </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span class="hs-comment">-- | The type of a function with the given parameters and return type.</span><span>
</span><span id="line-637"></span><span class="annot"><a href="Language.Futhark.Prop.html#funType"><span class="hs-identifier hs-type">funType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructRetType"><span class="hs-identifier hs-type">StructRetType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span>
</span><span id="line-638"></span><span id="funType"><span class="annot"><span class="annottext">funType :: [PatBase Info VName]
-&gt; StructRetType -&gt; TypeBase (DimDecl VName) ()
</span><a href="Language.Futhark.Prop.html#funType"><span class="hs-identifier hs-var hs-var">funType</span></a></span></span><span> </span><span id="local-6989586621684491300"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491300"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621684491299"><span class="annot"><span class="annottext">StructRetType
</span><a href="#local-6989586621684491299"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-639"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491297"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491297"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; StructRetType -&gt; StructRetType)
-&gt; StructRetType -&gt; [PatBase Info VName] -&gt; StructRetType
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PName, TypeBase (DimDecl VName) ())
-&gt; StructRetType -&gt; StructRetType
forall {dim}.
(PName, TypeBase dim ())
-&gt; RetTypeBase dim () -&gt; RetTypeBase dim ()
</span><a href="#local-6989586621684491296"><span class="hs-identifier hs-var">arrow</span></a></span><span> </span><span class="annot"><span class="annottext">((PName, TypeBase (DimDecl VName) ())
 -&gt; StructRetType -&gt; StructRetType)
-&gt; (PatBase Info VName -&gt; (PName, TypeBase (DimDecl VName) ()))
-&gt; PatBase Info VName
-&gt; StructRetType
-&gt; StructRetType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; (PName, TypeBase (DimDecl VName) ())
</span><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StructRetType
</span><a href="#local-6989586621684491299"><span class="hs-identifier hs-var">ret</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491300"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-640"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491297"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-641"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-642"></span><span>    </span><span id="local-6989586621684491296"><span class="annot"><span class="annottext">arrow :: (PName, TypeBase dim ())
-&gt; RetTypeBase dim () -&gt; RetTypeBase dim ()
</span><a href="#local-6989586621684491296"><span class="hs-identifier hs-var hs-var">arrow</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491295"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491295"><span class="hs-identifier hs-var">xp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491294"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491294"><span class="hs-identifier hs-var">xt</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491293"><span class="annot"><span class="annottext">RetTypeBase dim ()
</span><a href="#local-6989586621684491293"><span class="hs-identifier hs-var">yt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase dim () -&gt; RetTypeBase dim ()
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase dim () -&gt; RetTypeBase dim ())
-&gt; TypeBase dim () -&gt; RetTypeBase dim ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim () -&gt; TypeBase dim ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim () -&gt; TypeBase dim ())
-&gt; ScalarTypeBase dim () -&gt; TypeBase dim ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">()
-&gt; PName
-&gt; TypeBase dim ()
-&gt; RetTypeBase dim ()
-&gt; ScalarTypeBase dim ()
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684491295"><span class="hs-identifier hs-var">xp</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491294"><span class="hs-identifier hs-var">xt</span></a></span><span> </span><span class="annot"><span class="annottext">RetTypeBase dim ()
</span><a href="#local-6989586621684491293"><span class="hs-identifier hs-var">yt</span></a></span><span>
</span><span id="line-643"></span><span>
</span><span id="line-644"></span><span class="hs-comment">-- | The type names mentioned in a type.</span><span>
</span><span id="line-645"></span><span id="local-6989586621684492349"><span id="local-6989586621684492350"><span class="annot"><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-type">typeVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621684492350"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492349"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492350"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span></span></span><span>
</span><span id="line-646"></span><span id="typeVars"><span class="annot"><span class="annottext">typeVars :: forall as dim. Monoid as =&gt; TypeBase dim as -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-var hs-var">typeVars</span></a></span></span><span> </span><span id="local-6989586621684491276"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491276"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-647"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491276"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-648"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set VName
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-649"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491275"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491275"><span class="hs-identifier hs-var">tn</span></a></span></span><span> </span><span id="local-6989586621684491274"><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491274"><span class="hs-identifier hs-var">targs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-650"></span><span>      </span><span class="annot"><span class="annottext">[Set VName] -&gt; Set VName
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set VName] -&gt; Set VName) -&gt; [Set VName] -&gt; Set VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; Set VName
</span><a href="#local-6989586621684491273"><span class="hs-identifier hs-var">typeVarFree</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684491275"><span class="hs-identifier hs-var">tn</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; [Set VName] -&gt; [Set VName]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(TypeArg dim -&gt; Set VName) -&gt; [TypeArg dim] -&gt; [Set VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeArg dim -&gt; Set VName
forall {dim}. TypeArg dim -&gt; Set VName
</span><a href="#local-6989586621684491272"><span class="hs-identifier hs-var">typeArgFree</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684491274"><span class="hs-identifier hs-var">targs</span></a></span><span>
</span><span id="line-651"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491271"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491271"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491270"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491270"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Set VName
forall as dim. Monoid as =&gt; TypeBase dim as -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-var">typeVars</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491271"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; Set VName -&gt; Set VName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Set VName
forall as dim. Monoid as =&gt; TypeBase dim as -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-var">typeVars</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491270"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-652"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491269"><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491269"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; Set VName)
-&gt; Map Name (TypeBase dim as) -&gt; Set VName
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Set VName
forall as dim. Monoid as =&gt; TypeBase dim as -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-var">typeVars</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491269"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-653"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491268"><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491268"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Set VName] -&gt; Set VName
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set VName] -&gt; Set VName) -&gt; [Set VName] -&gt; Set VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([TypeBase dim as] -&gt; [Set VName])
-&gt; Map Name [TypeBase dim as] -&gt; [Set VName]
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">(([TypeBase dim as] -&gt; [Set VName])
 -&gt; Map Name [TypeBase dim as] -&gt; [Set VName])
-&gt; ((TypeBase dim as -&gt; Set VName)
    -&gt; [TypeBase dim as] -&gt; [Set VName])
-&gt; (TypeBase dim as -&gt; Set VName)
-&gt; Map Name [TypeBase dim as]
-&gt; [Set VName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; Set VName) -&gt; [TypeBase dim as] -&gt; [Set VName]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Set VName
forall as dim. Monoid as =&gt; TypeBase dim as -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-var">typeVars</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491268"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-654"></span><span>    </span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491267"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491267"><span class="hs-identifier hs-var">rt</span></a></span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; Set VName
forall as dim. Monoid as =&gt; TypeBase dim as -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-var">typeVars</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim () -&gt; Set VName) -&gt; TypeBase dim () -&gt; Set VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim () -&gt; TypeBase dim ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684491267"><span class="hs-identifier hs-var">rt</span></a></span><span>
</span><span id="line-655"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-656"></span><span>    </span><span id="local-6989586621684491273"><span class="annot"><span class="annottext">typeVarFree :: TypeName -&gt; Set VName
</span><a href="#local-6989586621684491273"><span class="hs-identifier hs-var hs-var">typeVarFree</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; Set VName
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">S.singleton</span></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; Set VName)
-&gt; (TypeName -&gt; VName) -&gt; TypeName -&gt; Set VName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; VName
</span><a href="Language.Futhark.Syntax.html#typeLeaf"><span class="hs-identifier hs-var hs-var">typeLeaf</span></a></span><span>
</span><span id="line-657"></span><span>    </span><span id="local-6989586621684491272"><span class="annot"><span class="annottext">typeArgFree :: TypeArg dim -&gt; Set VName
</span><a href="#local-6989586621684491272"><span class="hs-identifier hs-var hs-var">typeArgFree</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span id="local-6989586621684491261"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491261"><span class="hs-identifier hs-var">ta</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; Set VName
forall as dim. Monoid as =&gt; TypeBase dim as -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeVars"><span class="hs-identifier hs-var">typeVars</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491261"><span class="hs-identifier hs-var">ta</span></a></span><span>
</span><span id="line-658"></span><span>    </span><span class="annot"><a href="#local-6989586621684491272"><span class="hs-identifier hs-var">typeArgFree</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgDim"><span class="hs-identifier hs-type">TypeArgDim</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set VName
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-659"></span><span>
</span><span id="line-660"></span><span class="hs-comment">-- | @orderZero t@ is 'True' if the argument type has order 0, i.e., it is not</span><span>
</span><span id="line-661"></span><span class="hs-comment">-- a function type, does not contain a function type as a subcomponent, and may</span><span>
</span><span id="line-662"></span><span class="hs-comment">-- not be instantiated with a function type.</span><span>
</span><span id="line-663"></span><span id="local-6989586621684491259"><span id="local-6989586621684491260"><span class="annot"><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-type">orderZero</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684491260"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684491259"><span class="hs-keyword hs-type">as</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-664"></span><span id="orderZero"><span class="annot"><span class="annottext">orderZero :: forall shape as. TypeBase shape as -&gt; Bool
</span><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var hs-var">orderZero</span></a></span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-665"></span><span class="annot"><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-666"></span><span class="annot"><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684491255"><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491255"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; Bool) -&gt; [TypeBase dim as] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Bool
forall shape as. TypeBase shape as -&gt; Bool
</span><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="annot"><span class="annottext">([TypeBase dim as] -&gt; Bool) -&gt; [TypeBase dim as] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; [TypeBase dim as]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">M.elems</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684491255"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-667"></span><span class="annot"><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-668"></span><span class="annot"><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-669"></span><span class="annot"><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684491253"><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491253"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([TypeBase dim as] -&gt; Bool) -&gt; Map Name [TypeBase dim as] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; Bool) -&gt; [TypeBase dim as] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Bool
forall shape as. TypeBase shape as -&gt; Bool
</span><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684491253"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-670"></span><span>
</span><span id="line-671"></span><span class="hs-comment">-- | Extract all the shape names that occur in a given pattern.</span><span>
</span><span id="line-672"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-type">patternDimNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-673"></span><span id="patternDimNames"><span class="annot"><span class="annottext">patternDimNames :: PatBase Info VName -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var hs-var">patternDimNames</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684491251"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491251"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; Set VName)
-&gt; [PatBase Info VName] -&gt; Set VName
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491251"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-674"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684491249"><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684491249"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, PatBase Info VName) -&gt; Set VName)
-&gt; [(Name, PatBase Info VName)] -&gt; Set VName
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; Set VName)
-&gt; ((Name, PatBase Info VName) -&gt; PatBase Info VName)
-&gt; (Name, PatBase Info VName)
-&gt; Set VName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name, PatBase Info VName) -&gt; PatBase Info VName
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684491249"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-675"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684491247"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491247"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491247"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-676"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491245"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491245"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Set VName
forall als. TypeBase (DimDecl VName) als -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-var">typeDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491245"><span class="hs-identifier hs-var">tp</span></a></span><span>
</span><span id="line-677"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491243"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491243"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Set VName
forall als. TypeBase (DimDecl VName) als -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-var">typeDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491243"><span class="hs-identifier hs-var">tp</span></a></span><span>
</span><span id="line-678"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684491241"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491241"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDecl"><span class="hs-identifier hs-type">TypeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491239"><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491239"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-679"></span><span>  </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491241"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Set VName -&gt; Set VName -&gt; Set VName
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; Set VName
forall als. TypeBase (DimDecl VName) als -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-var">typeDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491239"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-680"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span class="annot"><span class="annottext">PatLit
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491237"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491237"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Set VName
forall als. TypeBase (DimDecl VName) als -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-var">typeDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491237"><span class="hs-identifier hs-var">tp</span></a></span><span>
</span><span id="line-681"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491235"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491235"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; Set VName)
-&gt; [PatBase Info VName] -&gt; Set VName
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491235"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-682"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491233"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491233"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#patternDimNames"><span class="hs-identifier hs-var">patternDimNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491233"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="hs-comment">-- | Extract all the shape names that occur free in a given type.</span><span>
</span><span id="line-685"></span><span id="local-6989586621684492554"><span class="annot"><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-type">typeDimNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621684492554"><span class="hs-identifier hs-type">als</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span></span><span>
</span><span id="line-686"></span><span id="typeDimNames"><span class="annot"><span class="annottext">typeDimNames :: forall als. TypeBase (DimDecl VName) als -&gt; Set VName
</span><a href="Language.Futhark.Prop.html#typeDimNames"><span class="hs-identifier hs-var hs-var">typeDimNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DimDecl VName -&gt; Set VName) -&gt; [DimDecl VName] -&gt; Set VName
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">DimDecl VName -&gt; Set VName
forall {a}. Ord a =&gt; DimDecl a -&gt; Set a
</span><a href="#local-6989586621684491229"><span class="hs-identifier hs-var">dimName</span></a></span><span> </span><span class="annot"><span class="annottext">([DimDecl VName] -&gt; Set VName)
-&gt; (TypeBase (DimDecl VName) als -&gt; [DimDecl VName])
-&gt; TypeBase (DimDecl VName) als
-&gt; Set VName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) als -&gt; [DimDecl VName]
forall as. TypeBase (DimDecl VName) as -&gt; [DimDecl VName]
</span><a href="Language.Futhark.Prop.html#nestedDims"><span class="hs-identifier hs-var">nestedDims</span></a></span><span>
</span><span id="line-687"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-688"></span><span>    </span><span id="local-6989586621684491229"><span class="annot"><span class="annottext">dimName :: DimDecl a -&gt; Set a
</span><a href="#local-6989586621684491229"><span class="hs-identifier hs-var hs-var">dimName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-type">NamedDim</span></a></span><span> </span><span id="local-6989586621684491225"><span class="annot"><span class="annottext">QualName a
</span><a href="#local-6989586621684491225"><span class="hs-identifier hs-var">qn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Set a
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">S.singleton</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Set a) -&gt; a -&gt; Set a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualName a -&gt; a
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName a
</span><a href="#local-6989586621684491225"><span class="hs-identifier hs-var">qn</span></a></span><span>
</span><span id="line-689"></span><span>    </span><span class="annot"><a href="#local-6989586621684491229"><span class="hs-identifier hs-var">dimName</span></a></span><span> </span><span class="annot"><span class="annottext">DimDecl a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span class="hs-comment">-- | @patternOrderZero pat@ is 'True' if all of the types in the given pattern</span><span>
</span><span id="line-692"></span><span class="hs-comment">-- have order 0.</span><span>
</span><span id="line-693"></span><span id="local-6989586621684492337"><span class="annot"><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-type">patternOrderZero</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492337"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-694"></span><span id="patternOrderZero"><span class="annot"><span class="annottext">patternOrderZero :: forall vn. PatBase Info vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-var hs-var">patternOrderZero</span></a></span></span><span> </span><span id="local-6989586621684491221"><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491221"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491221"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-695"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684491220"><span class="annot"><span class="annottext">[PatBase Info vn]
</span><a href="#local-6989586621684491220"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(PatBase Info vn -&gt; Bool) -&gt; [PatBase Info vn] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info vn -&gt; Bool
forall vn. PatBase Info vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-var">patternOrderZero</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info vn]
</span><a href="#local-6989586621684491220"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-696"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684491219"><span class="annot"><span class="annottext">[(Name, PatBase Info vn)]
</span><a href="#local-6989586621684491219"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((Name, PatBase Info vn) -&gt; Bool)
-&gt; [(Name, PatBase Info vn)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info vn -&gt; Bool
forall vn. PatBase Info vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-var">patternOrderZero</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info vn -&gt; Bool)
-&gt; ((Name, PatBase Info vn) -&gt; PatBase Info vn)
-&gt; (Name, PatBase Info vn)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name, PatBase Info vn) -&gt; PatBase Info vn
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase Info vn)]
</span><a href="#local-6989586621684491219"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-697"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684491218"><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491218"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatBase Info vn -&gt; Bool
forall vn. PatBase Info vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-var">patternOrderZero</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491218"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-698"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491217"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491217"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Bool
forall shape as. TypeBase shape as -&gt; Bool
</span><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491217"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-699"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491216"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491216"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Bool
forall shape as. TypeBase shape as -&gt; Bool
</span><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491216"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-700"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684491215"><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491215"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info vn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatBase Info vn -&gt; Bool
forall vn. PatBase Info vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-var">patternOrderZero</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491215"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-701"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span class="annot"><span class="annottext">PatLit
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491214"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491214"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Bool
forall shape as. TypeBase shape as -&gt; Bool
</span><a href="Language.Futhark.Prop.html#orderZero"><span class="hs-identifier hs-var">orderZero</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491214"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-702"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491213"><span class="annot"><span class="annottext">[PatBase Info vn]
</span><a href="#local-6989586621684491213"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(PatBase Info vn -&gt; Bool) -&gt; [PatBase Info vn] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info vn -&gt; Bool
forall vn. PatBase Info vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-var">patternOrderZero</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info vn]
</span><a href="#local-6989586621684491213"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-703"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491212"><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491212"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatBase Info vn -&gt; Bool
forall vn. PatBase Info vn -&gt; Bool
</span><a href="Language.Futhark.Prop.html#patternOrderZero"><span class="hs-identifier hs-var">patternOrderZero</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info vn
</span><a href="#local-6989586621684491212"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span class="hs-comment">-- | The set of identifiers bound in a pattern.</span><span>
</span><span id="line-706"></span><span id="local-6989586621684492334"><span id="local-6989586621684492335"><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-type">patIdents</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621684492335"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621684492334"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492335"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492334"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IdentBase"><span class="hs-identifier hs-type">IdentBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492335"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492334"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-707"></span><span id="patIdents"><span class="annot"><span class="annottext">patIdents :: forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var hs-var">patIdents</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621684491190"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684491190"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684491189"><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684491189"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684491188"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491188"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdentBase f vn -&gt; Set (IdentBase f vn)
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">S.singleton</span></span><span> </span><span class="annot"><span class="annottext">(IdentBase f vn -&gt; Set (IdentBase f vn))
-&gt; IdentBase f vn -&gt; Set (IdentBase f vn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; f PatType -&gt; SrcLoc -&gt; IdentBase f vn
forall (f :: * -&gt; *) vn.
vn -&gt; f PatType -&gt; SrcLoc -&gt; IdentBase f vn
</span><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-var">Ident</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684491190"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684491189"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684491188"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-708"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684491186"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491186"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set (IdentBase f vn)
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491186"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-709"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684491185"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491185"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set (IdentBase f vn)] -&gt; Set (IdentBase f vn)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set (IdentBase f vn)] -&gt; Set (IdentBase f vn))
-&gt; [Set (IdentBase f vn)] -&gt; Set (IdentBase f vn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Set (IdentBase f vn))
-&gt; [PatBase f vn] -&gt; [Set (IdentBase f vn)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set (IdentBase f vn)
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491185"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-710"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684491184"><span class="annot"><span class="annottext">[(Name, PatBase f vn)]
</span><a href="#local-6989586621684491184"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set (IdentBase f vn)] -&gt; Set (IdentBase f vn)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set (IdentBase f vn)] -&gt; Set (IdentBase f vn))
-&gt; [Set (IdentBase f vn)] -&gt; Set (IdentBase f vn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Name, PatBase f vn) -&gt; Set (IdentBase f vn))
-&gt; [(Name, PatBase f vn)] -&gt; [Set (IdentBase f vn)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set (IdentBase f vn)
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Set (IdentBase f vn))
-&gt; ((Name, PatBase f vn) -&gt; PatBase f vn)
-&gt; (Name, PatBase f vn)
-&gt; Set (IdentBase f vn)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name, PatBase f vn) -&gt; PatBase f vn
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase f vn)]
</span><a href="#local-6989586621684491184"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-711"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (IdentBase f vn)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-712"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684491183"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491183"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set (IdentBase f vn)
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491183"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-713"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (IdentBase f vn)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-714"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491182"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491182"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set (IdentBase f vn)] -&gt; Set (IdentBase f vn)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set (IdentBase f vn)] -&gt; Set (IdentBase f vn))
-&gt; [Set (IdentBase f vn)] -&gt; Set (IdentBase f vn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Set (IdentBase f vn))
-&gt; [PatBase f vn] -&gt; [Set (IdentBase f vn)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set (IdentBase f vn)
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491182"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-715"></span><span class="annot"><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491181"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491181"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set (IdentBase f vn)
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491181"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span class="hs-comment">-- | The set of names bound in a pattern.</span><span>
</span><span id="line-718"></span><span id="local-6989586621684492325"><span id="local-6989586621684492326"><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-type">patNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621684492326"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621684492325"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492326"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492325"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="#local-6989586621684492325"><span class="hs-identifier hs-type">vn</span></a></span></span></span><span>
</span><span id="line-719"></span><span id="patNames"><span class="annot"><span class="annottext">patNames :: forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var hs-var">patNames</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621684491161"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684491161"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">vn -&gt; Set vn
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">S.singleton</span></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684491161"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-720"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684491160"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491160"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set vn
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491160"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-721"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684491159"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491159"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set vn] -&gt; Set vn
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set vn] -&gt; Set vn) -&gt; [Set vn] -&gt; Set vn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Set vn) -&gt; [PatBase f vn] -&gt; [Set vn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set vn
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491159"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-722"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684491158"><span class="annot"><span class="annottext">[(Name, PatBase f vn)]
</span><a href="#local-6989586621684491158"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set vn] -&gt; Set vn
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set vn] -&gt; Set vn) -&gt; [Set vn] -&gt; Set vn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Name, PatBase f vn) -&gt; Set vn)
-&gt; [(Name, PatBase f vn)] -&gt; [Set vn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set vn
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Set vn)
-&gt; ((Name, PatBase f vn) -&gt; PatBase f vn)
-&gt; (Name, PatBase f vn)
-&gt; Set vn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Name, PatBase f vn) -&gt; PatBase f vn
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase f vn)]
</span><a href="#local-6989586621684491158"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-723"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-724"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684491157"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491157"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set vn
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491157"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-725"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-726"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491156"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491156"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set vn] -&gt; Set vn
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set vn] -&gt; Set vn) -&gt; [Set vn] -&gt; Set vn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Set vn) -&gt; [PatBase f vn] -&gt; [Set vn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set vn
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684491156"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-727"></span><span class="annot"><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491155"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491155"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Set vn
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#patNames"><span class="hs-identifier hs-var">patNames</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684491155"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-728"></span><span>
</span><span id="line-729"></span><span class="hs-comment">-- | A mapping from names bound in a map to their identifier.</span><span>
</span><span id="line-730"></span><span id="local-6989586621684492322"><span class="annot"><a href="Language.Futhark.Prop.html#patternMap"><span class="hs-identifier hs-type">patternMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621684492322"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492322"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IdentBase"><span class="hs-identifier hs-type">IdentBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492322"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-731"></span><span id="patternMap"><span class="annot"><span class="annottext">patternMap :: forall (f :: * -&gt; *).
Functor f =&gt;
PatBase f VName -&gt; Map VName (IdentBase f VName)
</span><a href="Language.Futhark.Prop.html#patternMap"><span class="hs-identifier hs-var hs-var">patternMap</span></a></span></span><span> </span><span id="local-6989586621684491152"><span class="annot"><span class="annottext">PatBase f VName
</span><a href="#local-6989586621684491152"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-732"></span><span>  </span><span class="annot"><span class="annottext">[(VName, IdentBase f VName)] -&gt; Map VName (IdentBase f VName)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(VName, IdentBase f VName)] -&gt; Map VName (IdentBase f VName))
-&gt; [(VName, IdentBase f VName)] -&gt; Map VName (IdentBase f VName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; [IdentBase f VName] -&gt; [(VName, IdentBase f VName)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(IdentBase f VName -&gt; VName) -&gt; [IdentBase f VName] -&gt; [VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f VName -&gt; VName
forall (f :: * -&gt; *) vn. IdentBase f vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#identName"><span class="hs-identifier hs-var hs-var">identName</span></a></span><span> </span><span class="annot"><span class="annottext">[IdentBase f VName]
</span><a href="#local-6989586621684491150"><span class="hs-identifier hs-var">idents</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[IdentBase f VName]
</span><a href="#local-6989586621684491150"><span class="hs-identifier hs-var">idents</span></a></span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-734"></span><span>    </span><span id="local-6989586621684491150"><span class="annot"><span class="annottext">idents :: [IdentBase f VName]
</span><a href="#local-6989586621684491150"><span class="hs-identifier hs-var hs-var">idents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (IdentBase f VName) -&gt; [IdentBase f VName]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span> </span><span class="annot"><span class="annottext">(Set (IdentBase f VName) -&gt; [IdentBase f VName])
-&gt; Set (IdentBase f VName) -&gt; [IdentBase f VName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatBase f VName -&gt; Set (IdentBase f VName)
forall (f :: * -&gt; *) vn.
(Functor f, Ord vn) =&gt;
PatBase f vn -&gt; Set (IdentBase f vn)
</span><a href="Language.Futhark.Prop.html#patIdents"><span class="hs-identifier hs-var">patIdents</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase f VName
</span><a href="#local-6989586621684491152"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span class="hs-comment">-- | The type of values bound by the pattern.</span><span>
</span><span id="line-737"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-type">patternType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatType"><span class="hs-identifier hs-type">PatType</span></a></span><span>
</span><span id="line-738"></span><span id="patternType"><span class="annot"><span class="annottext">patternType :: PatBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var hs-var">patternType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491147"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491147"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491147"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-739"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684491146"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491146"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491146"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-740"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491145"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491145"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491145"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-741"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684491144"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491144"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType)
-&gt; ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[PatType] -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall dim as. [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-var">tupleRecord</span></a></span><span> </span><span class="annot"><span class="annottext">([PatType] -&gt; ScalarTypeBase (DimDecl VName) Aliasing)
-&gt; [PatType] -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; PatType)
-&gt; [PatBase Info VName] -&gt; [PatType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684491144"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-742"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684491143"><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684491143"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType)
-&gt; ScalarTypeBase (DimDecl VName) Aliasing -&gt; PatType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name PatType -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name PatType -&gt; ScalarTypeBase (DimDecl VName) Aliasing)
-&gt; Map Name PatType -&gt; ScalarTypeBase (DimDecl VName) Aliasing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; PatType)
-&gt; Map Name (PatBase Info VName) -&gt; Map Name PatType
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase Info VName)] -&gt; Map Name (PatBase Info VName)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684491143"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-743"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684491142"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491142"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491142"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-744"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span class="annot"><span class="annottext">PatLit
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491141"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491141"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491141"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-745"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491140"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491140"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491140"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-746"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491139"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491139"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491139"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span class="hs-comment">-- | The type matched by the pattern, including shape declarations if present.</span><span>
</span><span id="line-749"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternStructType"><span class="hs-identifier hs-type">patternStructType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span>
</span><span id="line-750"></span><span id="patternStructType"><span class="annot"><span class="annottext">patternStructType :: PatBase Info VName -&gt; TypeBase (DimDecl VName) ()
</span><a href="Language.Futhark.Prop.html#patternStructType"><span class="hs-identifier hs-var hs-var">patternStructType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; TypeBase (DimDecl VName) ()
forall dim as. TypeBase dim as -&gt; TypeBase dim ()
</span><a href="Language.Futhark.Prop.html#toStruct"><span class="hs-identifier hs-var">toStruct</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; TypeBase (DimDecl VName) ())
-&gt; (PatBase Info VName -&gt; PatType)
-&gt; PatBase Info VName
-&gt; TypeBase (DimDecl VName) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatType
</span><a href="Language.Futhark.Prop.html#patternType"><span class="hs-identifier hs-var">patternType</span></a></span><span>
</span><span id="line-751"></span><span>
</span><span id="line-752"></span><span class="hs-comment">-- | When viewed as a function parameter, does this pattern correspond</span><span>
</span><span id="line-753"></span><span class="hs-comment">-- to a named parameter of some type?</span><span>
</span><span id="line-754"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-type">patternParam</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PName"><span class="hs-identifier hs-type">PName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span id="patternParam"><span class="annot"><span class="annottext">patternParam :: PatBase Info VName -&gt; (PName, TypeBase (DimDecl VName) ())
</span><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var hs-var">patternParam</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684491138"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491138"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-756"></span><span>  </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; (PName, TypeBase (DimDecl VName) ())
</span><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491138"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-757"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684491137"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491137"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-758"></span><span>  </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; (PName, TypeBase (DimDecl VName) ())
</span><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491137"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-759"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621684491136"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491136"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684491135"><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684491135"><span class="hs-identifier hs-var">td</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; PName
</span><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491136"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Info (TypeBase (DimDecl VName) ()) -&gt; TypeBase (DimDecl VName) ()
forall a. Info a -&gt; a
</span><a href="Language.Futhark.Syntax.html#unInfo"><span class="hs-identifier hs-var hs-var">unInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(Info (TypeBase (DimDecl VName) ()) -&gt; TypeBase (DimDecl VName) ())
-&gt; Info (TypeBase (DimDecl VName) ())
-&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName -&gt; Info (TypeBase (DimDecl VName) ())
forall (f :: * -&gt; *) vn.
TypeDeclBase f vn -&gt; f (TypeBase (DimDecl VName) ())
</span><a href="Language.Futhark.Syntax.html#expandedType"><span class="hs-identifier hs-var hs-var">expandedType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684491135"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-761"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621684491133"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491133"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684491132"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491132"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-762"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; PName
</span><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491133"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; TypeBase (DimDecl VName) ()
forall dim as. TypeBase dim as -&gt; TypeBase dim ()
</span><a href="Language.Futhark.Prop.html#toStruct"><span class="hs-identifier hs-var">toStruct</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684491132"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span class="annot"><a href="Language.Futhark.Prop.html#patternParam"><span class="hs-identifier hs-var">patternParam</span></a></span><span> </span><span id="local-6989586621684491131"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491131"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-764"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PName
</span><a href="Language.Futhark.Syntax.html#Unnamed"><span class="hs-identifier hs-var">Unnamed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; TypeBase (DimDecl VName) ()
</span><a href="Language.Futhark.Prop.html#patternStructType"><span class="hs-identifier hs-var">patternStructType</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684491131"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>
</span><span id="line-766"></span><span class="hs-comment">-- | Names of primitive types to types.  This is only valid if no</span><span>
</span><span id="line-767"></span><span class="hs-comment">-- shadowing is going on, but useful for tools.</span><span>
</span><span id="line-768"></span><span class="annot"><a href="Language.Futhark.Prop.html#namesToPrimTypes"><span class="hs-identifier hs-type">namesToPrimTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimType"><span class="hs-identifier hs-type">PrimType</span></a></span><span>
</span><span id="line-769"></span><span id="namesToPrimTypes"><span class="annot"><span class="annottext">namesToPrimTypes :: Map Name PrimType
</span><a href="Language.Futhark.Prop.html#namesToPrimTypes"><span class="hs-identifier hs-var hs-var">namesToPrimTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-770"></span><span>  </span><span class="annot"><span class="annottext">[(Name, PrimType)] -&gt; Map Name PrimType
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span>
</span><span id="line-771"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Name
</span><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier hs-var">nameFromString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Name) -&gt; String -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491129"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491129"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-772"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621684491129"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491129"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-773"></span><span>          </span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; [PrimType] -&gt; [PrimType]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span>
</span><span id="line-774"></span><span>          </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-775"></span><span>            </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-776"></span><span>            </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(FloatType -&gt; PrimType) -&gt; [FloatType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FloatType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#FloatType"><span class="hs-identifier hs-var">FloatType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FloatType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">FloatType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-777"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-778"></span><span>
</span><span id="line-779"></span><span class="hs-comment">-- | The nature of something predefined.  For functions, these can</span><span>
</span><span id="line-780"></span><span class="hs-comment">-- either be monomorphic or overloaded.  An overloaded builtin is a</span><span>
</span><span id="line-781"></span><span class="hs-comment">-- list valid types it can be instantiated with, to the parameter and</span><span>
</span><span id="line-782"></span><span class="hs-comment">-- result type, with 'Nothing' representing the overloaded parameter</span><span>
</span><span id="line-783"></span><span class="hs-comment">-- type.</span><span>
</span><span id="line-784"></span><span class="hs-keyword">data</span><span> </span><span id="Intrinsic"><span class="annot"><a href="Language.Futhark.Prop.html#Intrinsic"><span class="hs-identifier hs-var">Intrinsic</span></a></span></span><span>
</span><span id="line-785"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IntrinsicMonoFun"><span class="annot"><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimType"><span class="hs-identifier hs-type">PrimType</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimType"><span class="hs-identifier hs-type">PrimType</span></a></span><span>
</span><span id="line-786"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IntrinsicOverloadedFun"><span class="annot"><a href="Language.Futhark.Prop.html#IntrinsicOverloadedFun"><span class="hs-identifier hs-var">IntrinsicOverloadedFun</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimType"><span class="hs-identifier hs-type">PrimType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimType"><span class="hs-identifier hs-type">PrimType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimType"><span class="hs-identifier hs-type">PrimType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IntrinsicPolyFun"><span class="annot"><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetTypeBase"><span class="hs-identifier hs-type">RetTypeBase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IntrinsicType"><span class="annot"><a href="Language.Futhark.Prop.html#IntrinsicType"><span class="hs-identifier hs-var">IntrinsicType</span></a></span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Liftedness"><span class="hs-identifier hs-type">Liftedness</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span>
</span><span id="line-789"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IntrinsicEquality"><span class="annot"><a href="Language.Futhark.Prop.html#IntrinsicEquality"><span class="hs-identifier hs-var">IntrinsicEquality</span></a></span></span><span> </span><span class="hs-comment">-- Special cased.</span><span>
</span><span id="line-790"></span><span>
</span><span id="line-791"></span><span class="annot"><a href="Language.Futhark.Prop.html#intrinsicAcc"><span class="hs-identifier hs-type">intrinsicAcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Prop.html#Intrinsic"><span class="hs-identifier hs-type">Intrinsic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span id="intrinsicAcc"><span class="annot"><span class="annottext">intrinsicAcc :: (VName, Intrinsic)
</span><a href="Language.Futhark.Prop.html#intrinsicAcc"><span class="hs-identifier hs-var hs-var">intrinsicAcc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-793"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491120"><span class="hs-identifier hs-var">acc_v</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-794"></span><span>    </span><span class="annot"><span class="annottext">Liftedness
-&gt; [TypeParamBase VName]
-&gt; TypeBase (DimDecl VName) ()
-&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicType"><span class="hs-identifier hs-var">IntrinsicType</span></a></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#SizeLifted"><span class="hs-identifier hs-var">SizeLifted</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Liftedness -&gt; VName -&gt; SrcLoc -&gt; TypeParamBase VName
forall vn. Liftedness -&gt; vn -&gt; SrcLoc -&gt; TypeParamBase vn
</span><a href="Language.Futhark.Syntax.html#TypeParamType"><span class="hs-identifier hs-var">TypeParamType</span></a></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#Unlifted"><span class="hs-identifier hs-var">Unlifted</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491117"><span class="hs-identifier hs-var">t_v</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; Intrinsic)
-&gt; TypeBase (DimDecl VName) () -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-795"></span><span>      </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; TypeName
-&gt; [TypeArg (DimDecl VName)]
-&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; VName -&gt; TypeName
</span><a href="Language.Futhark.Syntax.html#TypeName"><span class="hs-identifier hs-var">TypeName</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491120"><span class="hs-identifier hs-var">acc_v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeArg (DimDecl VName)
forall {dim}. TypeArg dim
</span><a href="#local-6989586621684491115"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-796"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-798"></span><span>    </span><span id="local-6989586621684491120"><span class="annot"><span class="annottext">acc_v :: VName
</span><a href="#local-6989586621684491120"><span class="hs-identifier hs-var hs-var">acc_v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Int -&gt; VName
</span><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-var">VName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-string">&quot;acc&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span>
</span><span id="line-799"></span><span>    </span><span id="local-6989586621684491117"><span class="annot"><span class="annottext">t_v :: VName
</span><a href="#local-6989586621684491117"><span class="hs-identifier hs-var hs-var">t_v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Int -&gt; VName
</span><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-var">VName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-string">&quot;t&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span>
</span><span id="line-800"></span><span>    </span><span id="local-6989586621684491115"><span class="annot"><span class="annottext">arg :: TypeArg dim
</span><a href="#local-6989586621684491115"><span class="hs-identifier hs-var hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
forall dim. TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
</span><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-var">TypeArgType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase dim () -&gt; TypeBase dim ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">()
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim ()
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; VName -&gt; TypeName
</span><a href="Language.Futhark.Syntax.html#TypeName"><span class="hs-identifier hs-var">TypeName</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491117"><span class="hs-identifier hs-var">t_v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span class="hs-comment">-- | A map of all built-ins.</span><span>
</span><span id="line-803"></span><span class="annot"><a href="Language.Futhark.Prop.html#intrinsics"><span class="hs-identifier hs-type">intrinsics</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Prop.html#Intrinsic"><span class="hs-identifier hs-type">Intrinsic</span></a></span><span>
</span><span id="line-804"></span><span id="intrinsics"><span class="annot"><span class="annottext">intrinsics :: Map VName Intrinsic
</span><a href="Language.Futhark.Prop.html#intrinsics"><span class="hs-identifier hs-var hs-var">intrinsics</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-805"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(VName, Intrinsic)] -&gt; Map VName Intrinsic
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(VName, Intrinsic)
</span><a href="Language.Futhark.Prop.html#intrinsicAcc"><span class="hs-identifier hs-var">intrinsicAcc</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Map VName Intrinsic -&gt; Map VName Intrinsic -&gt; Map VName Intrinsic
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Map VName Intrinsic -&gt; Map VName Intrinsic)
-&gt; Map VName Intrinsic -&gt; Map VName Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-806"></span><span>    </span><span class="annot"><span class="annottext">[(VName, Intrinsic)] -&gt; Map VName Intrinsic
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(VName, Intrinsic)] -&gt; Map VName Intrinsic)
-&gt; [(VName, Intrinsic)] -&gt; Map VName Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-807"></span><span>      </span><span class="annot"><span class="annottext">(Int -&gt; (String, Intrinsic) -&gt; (VName, Intrinsic))
-&gt; [Int] -&gt; [(String, Intrinsic)] -&gt; [(VName, Intrinsic)]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; (String, Intrinsic) -&gt; (VName, Intrinsic)
forall {b}. Int -&gt; (String, b) -&gt; (VName, b)
</span><a href="#local-6989586621684491109"><span class="hs-identifier hs-var">namify</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">([(String, Intrinsic)] -&gt; [(VName, Intrinsic)])
-&gt; [(String, Intrinsic)] -&gt; [(VName, Intrinsic)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-808"></span><span>        </span><span class="annot"><span class="annottext">((String, ([PrimType], PrimType, [PrimValue] -&gt; Maybe PrimValue))
 -&gt; (String, Intrinsic))
-&gt; [(String,
     ([PrimType], PrimType, [PrimValue] -&gt; Maybe PrimValue))]
-&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(String, ([PrimType], PrimType, [PrimValue] -&gt; Maybe PrimValue))
-&gt; (String, Intrinsic)
forall {a} {c}. (a, ([PrimType], PrimType, c)) -&gt; (a, Intrinsic)
</span><a href="#local-6989586621684491108"><span class="hs-identifier hs-var">primFun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map String ([PrimType], PrimType, [PrimValue] -&gt; Maybe PrimValue)
-&gt; [(String,
     ([PrimType], PrimType, [PrimValue] -&gt; Maybe PrimValue))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map String ([PrimType], PrimType, [PrimValue] -&gt; Maybe PrimValue)
</span><a href="Futhark.IR.Primitive.html#primFuns"><span class="hs-identifier hs-var">Primitive.primFuns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(UnOp -&gt; (String, Intrinsic)) -&gt; [UnOp] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">UnOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491106"><span class="hs-identifier hs-var">unOpFun</span></a></span><span> </span><span class="annot"><span class="annottext">[UnOp]
</span><a href="Futhark.IR.Primitive.html#allUnOps"><span class="hs-identifier hs-var">Primitive.allUnOps</span></a></span><span>
</span><span id="line-810"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(BinOp -&gt; (String, Intrinsic)) -&gt; [BinOp] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491104"><span class="hs-identifier hs-var">binOpFun</span></a></span><span> </span><span class="annot"><span class="annottext">[BinOp]
</span><a href="Futhark.IR.Primitive.html#allBinOps"><span class="hs-identifier hs-var">Primitive.allBinOps</span></a></span><span>
</span><span id="line-811"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(CmpOp -&gt; (String, Intrinsic)) -&gt; [CmpOp] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CmpOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491102"><span class="hs-identifier hs-var">cmpOpFun</span></a></span><span> </span><span class="annot"><span class="annottext">[CmpOp]
</span><a href="Futhark.IR.Primitive.html#allCmpOps"><span class="hs-identifier hs-var">Primitive.allCmpOps</span></a></span><span>
</span><span id="line-812"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(ConvOp -&gt; (String, Intrinsic))
-&gt; [ConvOp] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ConvOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491100"><span class="hs-identifier hs-var">convOpFun</span></a></span><span> </span><span class="annot"><span class="annottext">[ConvOp]
</span><a href="Futhark.IR.Primitive.html#allConvOps"><span class="hs-identifier hs-var">Primitive.allConvOps</span></a></span><span>
</span><span id="line-813"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; (String, Intrinsic))
-&gt; [IntType] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491098"><span class="hs-identifier hs-var">signFun</span></a></span><span> </span><span class="annot"><span class="annottext">[IntType]
</span><a href="Futhark.IR.Primitive.html#allIntTypes"><span class="hs-identifier hs-var">Primitive.allIntTypes</span></a></span><span>
</span><span id="line-814"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; (String, Intrinsic))
-&gt; [IntType] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491096"><span class="hs-identifier hs-var">unsignFun</span></a></span><span> </span><span class="annot"><span class="annottext">[IntType]
</span><a href="Futhark.IR.Primitive.html#allIntTypes"><span class="hs-identifier hs-var">Primitive.allIntTypes</span></a></span><span>
</span><span id="line-815"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; (String, Intrinsic))
-&gt; [PrimType] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-816"></span><span>            </span><span class="annot"><span class="annottext">PrimType -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491095"><span class="hs-identifier hs-var">intrinsicPrim</span></a></span><span>
</span><span id="line-817"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-818"></span><span>                </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-819"></span><span>                </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(FloatType -&gt; PrimType) -&gt; [FloatType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FloatType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#FloatType"><span class="hs-identifier hs-var">FloatType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FloatType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">FloatType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-820"></span><span>                </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-821"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-823"></span><span>          </span><span class="hs-comment">-- This overrides the ! from Primitive.</span><span>
</span><span id="line-824"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;!&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-825"></span><span>              </span><span class="annot"><span class="annottext">[PrimType] -&gt; [Maybe PrimType] -&gt; Maybe PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicOverloadedFun"><span class="hs-identifier hs-var">IntrinsicOverloadedFun</span></a></span><span>
</span><span id="line-826"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-827"></span><span>                    </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-828"></span><span>                    </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-829"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe PrimType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">]</span><span>
</span><span id="line-831"></span><span>                </span><span class="annot"><span class="annottext">Maybe PrimType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-832"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-834"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-835"></span><span>          </span><span class="hs-comment">-- The reason for the loop formulation is to ensure that we</span><span>
</span><span id="line-836"></span><span>          </span><span class="hs-comment">-- get a missing case warning if we forget a case.</span><span>
</span><span id="line-837"></span><span>          </span><span class="annot"><span class="annottext">(BinOp -&gt; Maybe (String, Intrinsic))
-&gt; [BinOp] -&gt; [(String, Intrinsic)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; Maybe (String, Intrinsic)
</span><a href="#local-6989586621684491094"><span class="hs-identifier hs-var">mkIntrinsicBinOp</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">BinOp
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">BinOp
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-838"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flatten&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-839"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-840"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-841"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-842"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-843"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-844"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unflatten&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-845"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-846"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-847"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-848"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-849"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-851"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-852"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-853"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-854"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;concat&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-855"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-856"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-857"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-858"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-859"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-860"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rotate&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-861"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-862"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-863"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-864"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-865"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-866"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;transpose&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-867"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-868"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-869"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-870"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-871"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-872"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scatter&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-873"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-874"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-875"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-876"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-877"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-879"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-880"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-881"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scatter_2d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-882"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-883"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-884"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-885"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim} {as}. Int -&gt; ScalarTypeBase dim as
</span><a href="#local-6989586621684491081"><span class="hs-identifier hs-var">tupInt64</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-886"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-888"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-889"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-890"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scatter_3d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-891"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-892"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-893"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-894"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim} {as}. Int -&gt; ScalarTypeBase dim as
</span><a href="#local-6989586621684491081"><span class="hs-identifier hs-var">tupInt64</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-895"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-897"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-898"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-899"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zip&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-900"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-901"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-902"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491078"><span class="hs-identifier hs-var">arr_b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-903"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall {dim}.
TypeBase dim ()
-&gt; TypeBase dim () -&gt; ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491077"><span class="hs-identifier hs-var">tuple_uarr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-904"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-905"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unzip&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-906"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-907"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-908"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall {dim}.
TypeBase dim ()
-&gt; TypeBase dim () -&gt; ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491075"><span class="hs-identifier hs-var">tuple_arr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-909"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; ([(Name, TypeBase (DimDecl VName) ())]
    -&gt; TypeBase (DimDecl VName) ())
-&gt; [(Name, TypeBase (DimDecl VName) ())]
-&gt; StructRetType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ([(Name, TypeBase (DimDecl VName) ())]
    -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; [(Name, TypeBase (DimDecl VName) ())]
-&gt; TypeBase (DimDecl VName) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name (TypeBase (DimDecl VName) ())
 -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; ([(Name, TypeBase (DimDecl VName) ())]
    -&gt; Map Name (TypeBase (DimDecl VName) ()))
-&gt; [(Name, TypeBase (DimDecl VName) ())]
-&gt; ScalarTypeBase (DimDecl VName) ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[(Name, TypeBase (DimDecl VName) ())]
-&gt; Map Name (TypeBase (DimDecl VName) ())
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Name, TypeBase (DimDecl VName) ())] -&gt; StructRetType)
-&gt; [(Name, TypeBase (DimDecl VName) ())] -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-910"></span><span>                     </span><span class="annot"><span class="annottext">[Name]
-&gt; [TypeBase (DimDecl VName) ()]
-&gt; [(Name, TypeBase (DimDecl VName) ())]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier hs-var">tupleFieldNames</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491078"><span class="hs-identifier hs-var">arr_b</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-911"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-912"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hist_1d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-913"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-914"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-915"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-916"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-917"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-918"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-919"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim} {as}. Int -&gt; ScalarTypeBase dim as
</span><a href="#local-6989586621684491081"><span class="hs-identifier hs-var">tupInt64</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-920"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-921"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-922"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-923"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-924"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hist_2d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-925"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-926"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-927"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-928"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-929"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-930"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-931"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim} {as}. Int -&gt; ScalarTypeBase dim as
</span><a href="#local-6989586621684491081"><span class="hs-identifier hs-var">tupInt64</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-932"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-933"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-934"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-935"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-936"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hist_3d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-937"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-938"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-939"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-940"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-941"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-942"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-943"></span><span>                     </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim} {as}. Int -&gt; ScalarTypeBase dim as
</span><a href="#local-6989586621684491081"><span class="hs-identifier hs-var">tupInt64</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-944"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-945"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-946"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-947"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-948"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;map&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-949"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-950"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-951"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-952"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-953"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-954"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491073"><span class="hs-identifier hs-var">uarr_b</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-955"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-956"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reduce&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-957"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-958"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-959"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-960"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-961"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-962"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-963"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span>
</span><span id="line-964"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-965"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reduce_comm&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-966"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-967"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-968"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-969"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-970"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-971"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-972"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span>
</span><span id="line-973"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-974"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scan&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-975"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-976"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-977"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-978"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-979"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-980"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-981"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-982"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-983"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;partition&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-984"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-985"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-986"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int32"><span class="hs-identifier hs-var">Int32</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-987"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-988"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-989"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-990"></span><span>                   </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; (ScalarTypeBase (DimDecl VName) ()
    -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; StructRetType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-991"></span><span>                       </span><span class="annot"><span class="annottext">[TypeBase (DimDecl VName) ()] -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-var">tupleRecord</span></a></span><span>
</span><span id="line-992"></span><span>                         </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-993"></span><span>                           </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-994"></span><span>                         </span><span class="hs-special">]</span><span>
</span><span id="line-995"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-996"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-997"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;map_stream&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-998"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-999"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1000"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491072"><span class="hs-operator hs-var">`karr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491070"><span class="hs-identifier hs-var">arr_kb</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1001"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1002"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1003"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491073"><span class="hs-identifier hs-var">uarr_b</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1004"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1005"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;map_stream_per&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1006"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1007"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1008"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491072"><span class="hs-operator hs-var">`karr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491070"><span class="hs-identifier hs-var">arr_kb</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1009"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1010"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1011"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491073"><span class="hs-identifier hs-var">uarr_b</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1012"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1013"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reduce_stream&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1014"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1015"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1016"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1017"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491072"><span class="hs-operator hs-var">`karr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1018"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1019"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1020"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span>
</span><span id="line-1021"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1022"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reduce_stream_per&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1023"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1024"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1025"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1026"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491072"><span class="hs-operator hs-var">`karr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1027"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1028"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1029"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span>
</span><span id="line-1030"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1031"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acc_write&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1032"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1033"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1034"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim}. TypeBase dim () -&gt; ScalarTypeBase dim ()
</span><a href="#local-6989586621684491069"><span class="hs-identifier hs-var">accType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1035"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1036"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span>
</span><span id="line-1037"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1038"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim}. TypeBase dim () -&gt; ScalarTypeBase dim ()
</span><a href="#local-6989586621684491069"><span class="hs-identifier hs-var">accType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span>
</span><span id="line-1039"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1040"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scatter_stream&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1041"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1042"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1043"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491068"><span class="hs-identifier hs-var">uarr_ka</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1044"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim}. TypeBase dim () -&gt; ScalarTypeBase dim ()
</span><a href="#local-6989586621684491069"><span class="hs-identifier hs-var">accType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1045"></span><span>                       </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span>
</span><span id="line-1046"></span><span>                                 </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim}. TypeBase dim () -&gt; ScalarTypeBase dim ()
</span><a href="#local-6989586621684491069"><span class="hs-identifier hs-var">accType</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1047"></span><span>                             </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1048"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491078"><span class="hs-identifier hs-var">arr_b</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1049"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1050"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491068"><span class="hs-identifier hs-var">uarr_ka</span></a></span><span>
</span><span id="line-1051"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1052"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hist_stream&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1053"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1054"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1055"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1056"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1057"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1058"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim}. TypeBase dim () -&gt; ScalarTypeBase dim ()
</span><a href="#local-6989586621684491069"><span class="hs-identifier hs-var">accType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var">arr_ka</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1059"></span><span>                       </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span>
</span><span id="line-1060"></span><span>                                 </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall {dim}. TypeBase dim () -&gt; ScalarTypeBase dim ()
</span><a href="#local-6989586621684491069"><span class="hs-identifier hs-var">accType</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; TypeBase (DimDecl VName) () -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1061"></span><span>                             </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1062"></span><span>                     </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491078"><span class="hs-identifier hs-var">arr_b</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1063"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1064"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1065"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1066"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;jvp2&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1067"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1068"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1069"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1070"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1071"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span>
</span><span id="line-1072"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1073"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeBase (DimDecl VName) ()] -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-var">tupleRecord</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1074"></span><span>               </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1075"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;vjp2&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1076"></span><span>                 </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1077"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var">tp_b</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1078"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase (DimDecl VName) ()
-&gt; TypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall {as} {dim}.
Monoid as =&gt;
TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-operator hs-var">`arr`</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1079"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1080"></span><span>                     </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span>
</span><span id="line-1081"></span><span>                   </span><span class="hs-special">]</span><span>
</span><span id="line-1082"></span><span>                   </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TypeBase (DimDecl VName) ()] -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-var">tupleRecord</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1083"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>             </span><span class="hs-special">]</span><span>
</span><span id="line-1085"></span><span>          </span><span class="annot"><span class="annottext">[(String, Intrinsic)]
-&gt; [(String, Intrinsic)] -&gt; [(String, Intrinsic)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-1086"></span><span>          </span><span class="hs-comment">-- Experimental LMAD ones.</span><span>
</span><span id="line-1087"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flat_index_2d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1088"></span><span>              </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1089"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1090"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1091"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1092"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1093"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1094"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1095"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1096"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1097"></span><span>                </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1098"></span><span>            </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1099"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flat_update_2d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1100"></span><span>              </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1101"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1102"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1103"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1104"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1105"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1106"></span><span>                  </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1107"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1108"></span><span>                </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1109"></span><span>            </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1110"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flat_index_3d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1111"></span><span>              </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1112"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1113"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1114"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1115"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1116"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1117"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1118"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1119"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1120"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1121"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1122"></span><span>                </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1123"></span><span>            </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1124"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flat_update_3d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1125"></span><span>              </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1126"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491067"><span class="hs-identifier hs-var">sp_p</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1127"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1128"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1129"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1130"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1131"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1132"></span><span>                  </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491066"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1133"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1134"></span><span>                </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1135"></span><span>            </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1136"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flat_index_4d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1137"></span><span>              </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1138"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1139"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1140"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1141"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1142"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1143"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1144"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1145"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1146"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1147"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1148"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1149"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1150"></span><span>                </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491066"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491066"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1151"></span><span>            </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1152"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flat_update_4d&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1153"></span><span>              </span><span class="annot"><span class="annottext">[TypeParamBase VName]
-&gt; [TypeBase (DimDecl VName) ()] -&gt; StructRetType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicPolyFun"><span class="hs-identifier hs-var">IntrinsicPolyFun</span></a></span><span>
</span><span id="line-1154"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var">tp_a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491067"><span class="hs-identifier hs-var">sp_p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491065"><span class="hs-identifier hs-var">sp_q</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1155"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1156"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1157"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1158"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1159"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1160"></span><span>                  </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase (DimDecl VName) ())
-&gt; PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1161"></span><span>                  </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var">arr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491066"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491064"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1162"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-1163"></span><span>                </span><span class="annot"><span class="annottext">(StructRetType -&gt; Intrinsic) -&gt; StructRetType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; StructRetType)
-&gt; TypeBase (DimDecl VName) () -&gt; StructRetType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall {dim}. ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var">uarr_a</span></a></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ())
-&gt; ShapeDecl (DimDecl VName) -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; ShapeDecl (DimDecl VName)
forall {a}. [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1164"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1165"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1166"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1167"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621684491052"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491052"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491051"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491051"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491088"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491087"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491086"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491082"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491066"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491066"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491064"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491064"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Int -&gt; VName) -&gt; [Name] -&gt; [Int] -&gt; [VName]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Int -&gt; VName
</span><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-var">VName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(String -&gt; Name) -&gt; [String] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier hs-var">nameFromString</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;b&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;n&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;m&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;k&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;l&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;q&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span>    </span><span id="local-6989586621684491090"><span class="annot"><span class="annottext">t_a :: ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var hs-var">t_a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim ()
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; TypeName
</span><a href="Language.Futhark.Prop.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491052"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1170"></span><span>    </span><span id="local-6989586621684491085"><span class="annot"><span class="annottext">arr_a :: ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491085"><span class="hs-identifier hs-var hs-var">arr_a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span>
</span><span id="line-1171"></span><span>    </span><span id="local-6989586621684491084"><span class="annot"><span class="annottext">uarr_a :: ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491084"><span class="hs-identifier hs-var hs-var">uarr_a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span>
</span><span id="line-1172"></span><span>    </span><span id="local-6989586621684491093"><span class="annot"><span class="annottext">tp_a :: TypeParamBase VName
</span><a href="#local-6989586621684491093"><span class="hs-identifier hs-var hs-var">tp_a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Liftedness -&gt; VName -&gt; SrcLoc -&gt; TypeParamBase VName
forall vn. Liftedness -&gt; vn -&gt; SrcLoc -&gt; TypeParamBase vn
</span><a href="Language.Futhark.Syntax.html#TypeParamType"><span class="hs-identifier hs-var">TypeParamType</span></a></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#Unlifted"><span class="hs-identifier hs-var">Unlifted</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491052"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1173"></span><span>
</span><span id="line-1174"></span><span>    </span><span id="local-6989586621684491076"><span class="annot"><span class="annottext">t_b :: ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var hs-var">t_b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim ()
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; TypeName
</span><a href="Language.Futhark.Prop.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491051"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1175"></span><span>    </span><span id="local-6989586621684491078"><span class="annot"><span class="annottext">arr_b :: ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491078"><span class="hs-identifier hs-var hs-var">arr_b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span>
</span><span id="line-1176"></span><span>    </span><span id="local-6989586621684491073"><span class="annot"><span class="annottext">uarr_b :: ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491073"><span class="hs-identifier hs-var hs-var">uarr_b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span>
</span><span id="line-1177"></span><span>    </span><span id="local-6989586621684491079"><span class="annot"><span class="annottext">tp_b :: TypeParamBase VName
</span><a href="#local-6989586621684491079"><span class="hs-identifier hs-var hs-var">tp_b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Liftedness -&gt; VName -&gt; SrcLoc -&gt; TypeParamBase VName
forall vn. Liftedness -&gt; vn -&gt; SrcLoc -&gt; TypeParamBase vn
</span><a href="Language.Futhark.Syntax.html#TypeParamType"><span class="hs-identifier hs-var">TypeParamType</span></a></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#Unlifted"><span class="hs-identifier hs-var">Unlifted</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491051"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621684491092"><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491092"><span class="hs-identifier hs-var">sp_n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491091"><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491091"><span class="hs-identifier hs-var">sp_m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491080"><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491080"><span class="hs-identifier hs-var">sp_k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491083"><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491083"><span class="hs-identifier hs-var">sp_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491067"><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491067"><span class="hs-identifier hs-var">sp_p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491065"><span class="annot"><span class="annottext">TypeParamBase VName
</span><a href="#local-6989586621684491065"><span class="hs-identifier hs-var">sp_q</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VName -&gt; TypeParamBase VName) -&gt; [VName] -&gt; [TypeParamBase VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; SrcLoc -&gt; TypeParamBase VName
forall vn. vn -&gt; SrcLoc -&gt; TypeParamBase vn
</span><a href="Language.Futhark.Syntax.html#TypeParamDim"><span class="hs-operator hs-var">`TypeParamDim`</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491088"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491087"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491066"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491064"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span>    </span><span id="local-6989586621684491089"><span class="annot"><span class="annottext">shape :: [a] -&gt; ShapeDecl (DimDecl a)
</span><a href="#local-6989586621684491089"><span class="hs-identifier hs-var hs-var">shape</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[DimDecl a] -&gt; ShapeDecl (DimDecl a)
forall dim. [dim] -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-var">ShapeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">([DimDecl a] -&gt; ShapeDecl (DimDecl a))
-&gt; ([a] -&gt; [DimDecl a]) -&gt; [a] -&gt; ShapeDecl (DimDecl a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; DimDecl a) -&gt; [a] -&gt; [DimDecl a]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualName a -&gt; DimDecl a
forall vn. QualName vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-var">NamedDim</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName a -&gt; DimDecl a) -&gt; (a -&gt; QualName a) -&gt; a -&gt; DimDecl a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; QualName a
forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1182"></span><span>
</span><span id="line-1183"></span><span>    </span><span id="local-6989586621684491075"><span class="annot"><span class="annottext">tuple_arr :: TypeBase dim ()
-&gt; TypeBase dim () -&gt; ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491075"><span class="hs-identifier hs-var hs-var">tuple_arr</span></a></span></span><span> </span><span id="local-6989586621684491046"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491046"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684491045"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491045"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1184"></span><span>      </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span>
</span><span id="line-1185"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1186"></span><span>        </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span>
</span><span id="line-1187"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Name (TypeBase dim ()) -&gt; ScalarTypeBase dim ()
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, TypeBase dim ())] -&gt; Map Name (TypeBase dim ())
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Name, TypeBase dim ())] -&gt; Map Name (TypeBase dim ()))
-&gt; [(Name, TypeBase dim ())] -&gt; Map Name (TypeBase dim ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [TypeBase dim ()] -&gt; [(Name, TypeBase dim ())]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="Language.Futhark.Prop.html#tupleFieldNames"><span class="hs-identifier hs-var">tupleFieldNames</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491046"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491045"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1188"></span><span>    </span><span id="local-6989586621684491077"><span class="annot"><span class="annottext">tuple_uarr :: TypeBase dim ()
-&gt; TypeBase dim () -&gt; ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491077"><span class="hs-identifier hs-var hs-var">tuple_uarr</span></a></span></span><span> </span><span id="local-6989586621684491044"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491044"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684491043"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491043"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621684491042"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491042"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
-&gt; TypeBase dim () -&gt; ShapeDecl dim -&gt; TypeBase dim ()
forall {dim}.
TypeBase dim ()
-&gt; TypeBase dim () -&gt; ShapeDecl dim -&gt; TypeBase dim ()
</span><a href="#local-6989586621684491075"><span class="hs-identifier hs-var">tuple_arr</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491044"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491043"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684491042"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim () -&gt; Uniqueness -&gt; TypeBase dim ()
forall dim as. TypeBase dim as -&gt; Uniqueness -&gt; TypeBase dim as
</span><a href="Language.Futhark.Prop.html#setUniqueness"><span class="hs-operator hs-var">`setUniqueness`</span></a></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span>
</span><span id="line-1189"></span><span>
</span><span id="line-1190"></span><span>    </span><span id="local-6989586621684491074"><span class="annot"><span class="annottext">arr :: TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491074"><span class="hs-identifier hs-var hs-var">arr</span></a></span></span><span> </span><span id="local-6989586621684491039"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491039"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684491038"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491038"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="Language.Futhark.Syntax.html#Unnamed"><span class="hs-identifier hs-var">Unnamed</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491039"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491038"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1191"></span><span>
</span><span id="line-1192"></span><span>    </span><span id="local-6989586621684491071"><span class="annot"><span class="annottext">arr_ka :: TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491071"><span class="hs-identifier hs-var hs-var">arr_ka</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; ShapeDecl (DimDecl VName)
forall dim. [dim] -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-var">ShapeDecl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">QualName VName -&gt; DimDecl VName
forall vn. QualName vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-var">NamedDim</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; DimDecl VName)
-&gt; QualName VName -&gt; DimDecl VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; QualName VName
forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1193"></span><span>    </span><span id="local-6989586621684491068"><span class="annot"><span class="annottext">uarr_ka :: TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491068"><span class="hs-identifier hs-var hs-var">uarr_ka</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491090"><span class="hs-identifier hs-var">t_a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; ShapeDecl (DimDecl VName)
forall dim. [dim] -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-var">ShapeDecl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">QualName VName -&gt; DimDecl VName
forall vn. QualName vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-var">NamedDim</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; DimDecl VName)
-&gt; QualName VName -&gt; DimDecl VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; QualName VName
forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1194"></span><span>    </span><span id="local-6989586621684491070"><span class="annot"><span class="annottext">arr_kb :: TypeBase (DimDecl VName) ()
</span><a href="#local-6989586621684491070"><span class="hs-identifier hs-var hs-var">arr_kb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness
-&gt; ScalarTypeBase (DimDecl VName) ()
-&gt; ShapeDecl (DimDecl VName)
-&gt; TypeBase (DimDecl VName) ()
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Nonunique"><span class="hs-identifier hs-var">Nonunique</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) ()
forall {dim}. ScalarTypeBase dim ()
</span><a href="#local-6989586621684491076"><span class="hs-identifier hs-var">t_b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DimDecl VName] -&gt; ShapeDecl (DimDecl VName)
forall dim. [dim] -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-var">ShapeDecl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">QualName VName -&gt; DimDecl VName
forall vn. QualName vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-var">NamedDim</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; DimDecl VName)
-&gt; QualName VName -&gt; DimDecl VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; QualName VName
forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1195"></span><span>    </span><span id="local-6989586621684491072"><span class="annot"><span class="annottext">karr :: TypeBase dim as -&gt; TypeBase dim as -&gt; TypeBase dim as
</span><a href="#local-6989586621684491072"><span class="hs-identifier hs-var hs-var">karr</span></a></span></span><span> </span><span id="local-6989586621684491035"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491035"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684491034"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491034"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; PName
</span><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-var">Named</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684491086"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491035"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684491034"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1196"></span><span>
</span><span id="line-1197"></span><span>    </span><span id="local-6989586621684491069"><span class="annot"><span class="annottext">accType :: TypeBase dim () -&gt; ScalarTypeBase dim ()
</span><a href="#local-6989586621684491069"><span class="hs-identifier hs-var hs-var">accType</span></a></span></span><span> </span><span id="local-6989586621684491032"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491032"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1198"></span><span>      </span><span class="annot"><span class="annottext">()
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim ()
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="Language.Futhark.Core.html#Unique"><span class="hs-identifier hs-var">Unique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; TypeName
</span><a href="Language.Futhark.Prop.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VName, Intrinsic) -&gt; VName
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(VName, Intrinsic)
</span><a href="Language.Futhark.Prop.html#intrinsicAcc"><span class="hs-identifier hs-var">intrinsicAcc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
forall dim. TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
</span><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-var">TypeArgType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684491032"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">]</span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span>    </span><span id="local-6989586621684491109"><span class="annot"><span class="annottext">namify :: Int -&gt; (String, b) -&gt; (VName, b)
</span><a href="#local-6989586621684491109"><span class="hs-identifier hs-var hs-var">namify</span></a></span></span><span> </span><span id="local-6989586621684491031"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491031"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491030"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684491030"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491029"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621684491029"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Int -&gt; VName
</span><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-var">VName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Name
</span><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier hs-var">nameFromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684491030"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684491031"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621684491029"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1201"></span><span>
</span><span id="line-1202"></span><span>    </span><span id="local-6989586621684491108"><span class="annot"><span class="annottext">primFun :: (a, ([PrimType], PrimType, c)) -&gt; (a, Intrinsic)
</span><a href="#local-6989586621684491108"><span class="hs-identifier hs-var hs-var">primFun</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491028"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684491028"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684491027"><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684491027"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491026"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491026"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1203"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684491028"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PrimType -&gt; PrimType) -&gt; [PrimType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684491027"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; Intrinsic) -&gt; PrimType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491026"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1204"></span><span>
</span><span id="line-1205"></span><span>    </span><span id="local-6989586621684491106"><span class="annot"><span class="annottext">unOpFun :: UnOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491106"><span class="hs-identifier hs-var hs-var">unOpFun</span></a></span></span><span> </span><span id="local-6989586621684491022"><span class="annot"><span class="annottext">UnOp
</span><a href="#local-6989586621684491022"><span class="hs-identifier hs-var">bop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnOp -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">UnOp
</span><a href="#local-6989586621684491022"><span class="hs-identifier hs-var">bop</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491021"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491021"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1206"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1207"></span><span>        </span><span id="local-6989586621684491021"><span class="annot"><span class="annottext">t :: PrimType
</span><a href="#local-6989586621684491021"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; PrimType) -&gt; PrimType -&gt; PrimType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnOp -&gt; PrimType
</span><a href="Futhark.IR.Primitive.html#unOpType"><span class="hs-identifier hs-var">Primitive.unOpType</span></a></span><span> </span><span class="annot"><span class="annottext">UnOp
</span><a href="#local-6989586621684491022"><span class="hs-identifier hs-var">bop</span></a></span><span>
</span><span id="line-1208"></span><span>
</span><span id="line-1209"></span><span>    </span><span id="local-6989586621684491104"><span class="annot"><span class="annottext">binOpFun :: BinOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491104"><span class="hs-identifier hs-var hs-var">binOpFun</span></a></span></span><span> </span><span id="local-6989586621684491017"><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684491017"><span class="hs-identifier hs-var">bop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BinOp -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684491017"><span class="hs-identifier hs-var">bop</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491016"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491016"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491016"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1210"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1211"></span><span>        </span><span id="local-6989586621684491016"><span class="annot"><span class="annottext">t :: PrimType
</span><a href="#local-6989586621684491016"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; PrimType) -&gt; PrimType -&gt; PrimType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; PrimType
</span><a href="Futhark.IR.Primitive.html#binOpType"><span class="hs-identifier hs-var">Primitive.binOpType</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684491017"><span class="hs-identifier hs-var">bop</span></a></span><span>
</span><span id="line-1212"></span><span>
</span><span id="line-1213"></span><span>    </span><span id="local-6989586621684491102"><span class="annot"><span class="annottext">cmpOpFun :: CmpOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491102"><span class="hs-identifier hs-var hs-var">cmpOpFun</span></a></span></span><span> </span><span id="local-6989586621684491012"><span class="annot"><span class="annottext">CmpOp
</span><a href="#local-6989586621684491012"><span class="hs-identifier hs-var">bop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmpOp -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">CmpOp
</span><a href="#local-6989586621684491012"><span class="hs-identifier hs-var">bop</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491011"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491011"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1214"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1215"></span><span>        </span><span id="local-6989586621684491011"><span class="annot"><span class="annottext">t :: PrimType
</span><a href="#local-6989586621684491011"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; PrimType) -&gt; PrimType -&gt; PrimType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CmpOp -&gt; PrimType
</span><a href="Futhark.IR.Primitive.html#cmpOpType"><span class="hs-identifier hs-var">Primitive.cmpOpType</span></a></span><span> </span><span class="annot"><span class="annottext">CmpOp
</span><a href="#local-6989586621684491012"><span class="hs-identifier hs-var">bop</span></a></span><span>
</span><span id="line-1216"></span><span>
</span><span id="line-1217"></span><span>    </span><span id="local-6989586621684491100"><span class="annot"><span class="annottext">convOpFun :: ConvOp -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491100"><span class="hs-identifier hs-var hs-var">convOpFun</span></a></span></span><span> </span><span id="local-6989586621684491007"><span class="annot"><span class="annottext">ConvOp
</span><a href="#local-6989586621684491007"><span class="hs-identifier hs-var">cop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConvOp -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">ConvOp
</span><a href="#local-6989586621684491007"><span class="hs-identifier hs-var">cop</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491006"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; Intrinsic) -&gt; PrimType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491005"><span class="hs-identifier hs-var">tt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1218"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1219"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621684491006"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491006"><span class="hs-identifier hs-var">ft</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684491005"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684491005"><span class="hs-identifier hs-var">tt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConvOp -&gt; (PrimType, PrimType)
</span><a href="Futhark.IR.Primitive.html#convOpType"><span class="hs-identifier hs-var">Primitive.convOpType</span></a></span><span> </span><span class="annot"><span class="annottext">ConvOp
</span><a href="#local-6989586621684491007"><span class="hs-identifier hs-var">cop</span></a></span><span>
</span><span id="line-1220"></span><span>
</span><span id="line-1221"></span><span>    </span><span id="local-6989586621684491098"><span class="annot"><span class="annottext">signFun :: IntType -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491098"><span class="hs-identifier hs-var hs-var">signFun</span></a></span></span><span> </span><span id="local-6989586621684490999"><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490999"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sign_&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490999"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490999"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; Intrinsic) -&gt; PrimType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490999"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1222"></span><span>
</span><span id="line-1223"></span><span>    </span><span id="local-6989586621684491096"><span class="annot"><span class="annottext">unsignFun :: IntType -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491096"><span class="hs-identifier hs-var hs-var">unsignFun</span></a></span></span><span> </span><span id="local-6989586621684490995"><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490995"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unsign_&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490995"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicMonoFun"><span class="hs-identifier hs-var">IntrinsicMonoFun</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490995"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; Intrinsic) -&gt; PrimType -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490995"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span>    </span><span id="local-6989586621684491025"><span class="annot"><span class="annottext">unPrim :: PrimType -&gt; PrimType
</span><a href="#local-6989586621684491025"><span class="hs-identifier hs-var hs-var">unPrim</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Primitive.html#IntType"><span class="hs-identifier hs-type">Primitive.IntType</span></a></span><span> </span><span id="local-6989586621684490993"><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490993"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="#local-6989586621684490993"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1226"></span><span>    </span><span class="annot"><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Primitive.html#FloatType"><span class="hs-identifier hs-type">Primitive.FloatType</span></a></span><span> </span><span id="local-6989586621684490991"><span class="annot"><span class="annottext">FloatType
</span><a href="#local-6989586621684490991"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FloatType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#FloatType"><span class="hs-identifier hs-var">FloatType</span></a></span><span> </span><span class="annot"><span class="annottext">FloatType
</span><a href="#local-6989586621684490991"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1227"></span><span>    </span><span class="annot"><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Futhark.IR.Primitive.html#Bool"><span class="hs-identifier hs-var">Primitive.Bool</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span>
</span><span id="line-1228"></span><span>    </span><span class="annot"><a href="#local-6989586621684491025"><span class="hs-identifier hs-var">unPrim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Futhark.IR.Primitive.html#Unit"><span class="hs-identifier hs-var">Primitive.Unit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span>
</span><span id="line-1229"></span><span>
</span><span id="line-1230"></span><span>    </span><span id="local-6989586621684491095"><span class="annot"><span class="annottext">intrinsicPrim :: PrimType -&gt; (String, Intrinsic)
</span><a href="#local-6989586621684491095"><span class="hs-identifier hs-var hs-var">intrinsicPrim</span></a></span></span><span> </span><span id="local-6989586621684490987"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684490987"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684490987"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Liftedness
-&gt; [TypeParamBase VName]
-&gt; TypeBase (DimDecl VName) ()
-&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicType"><span class="hs-identifier hs-var">IntrinsicType</span></a></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#Unlifted"><span class="hs-identifier hs-var">Unlifted</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TypeBase (DimDecl VName) () -&gt; Intrinsic)
-&gt; TypeBase (DimDecl VName) () -&gt; Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ())
-&gt; ScalarTypeBase (DimDecl VName) () -&gt; TypeBase (DimDecl VName) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase (DimDecl VName) ()
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684490987"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1231"></span><span>
</span><span id="line-1232"></span><span>    </span><span id="local-6989586621684490980"><span class="annot"><span class="annottext">anyIntType :: [PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var hs-var">anyIntType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1233"></span><span>      </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-1234"></span><span>        </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(IntType -&gt; PrimType) -&gt; [IntType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">IntType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-1235"></span><span>    </span><span id="local-6989586621684490976"><span class="annot"><span class="annottext">anyNumberType :: [PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var hs-var">anyNumberType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1236"></span><span>      </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1237"></span><span>        </span><span class="annot"><span class="annottext">[PrimType] -&gt; [PrimType] -&gt; [PrimType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(FloatType -&gt; PrimType) -&gt; [FloatType] -&gt; [PrimType]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FloatType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#FloatType"><span class="hs-identifier hs-var">FloatType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FloatType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">FloatType
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-1238"></span><span>    </span><span id="local-6989586621684490975"><span class="annot"><span class="annottext">anyPrimType :: [PrimType]
</span><a href="#local-6989586621684490975"><span class="hs-identifier hs-var hs-var">anyPrimType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; [PrimType] -&gt; [PrimType]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var">anyNumberType</span></a></span><span>
</span><span id="line-1239"></span><span>
</span><span id="line-1240"></span><span>    </span><span class="annot"><a href="#local-6989586621684491094"><span class="hs-identifier hs-type">mkIntrinsicBinOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-type">BinOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Prop.html#Intrinsic"><span class="hs-identifier hs-type">Intrinsic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1241"></span><span>    </span><span id="local-6989586621684491094"><span class="annot"><span class="annottext">mkIntrinsicBinOp :: BinOp -&gt; Maybe (String, Intrinsic)
</span><a href="#local-6989586621684491094"><span class="hs-identifier hs-var hs-var">mkIntrinsicBinOp</span></a></span></span><span> </span><span id="local-6989586621684490974"><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684490974"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1242"></span><span>      </span><span id="local-6989586621684490973"><span class="annot"><span class="annottext">Intrinsic
</span><a href="#local-6989586621684490973"><span class="hs-identifier hs-var">op'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684490974"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1243"></span><span>      </span><span class="annot"><span class="annottext">(String, Intrinsic) -&gt; Maybe (String, Intrinsic)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BinOp -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684490974"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Intrinsic
</span><a href="#local-6989586621684490973"><span class="hs-identifier hs-var">op'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1244"></span><span>
</span><span id="line-1245"></span><span>    </span><span id="local-6989586621684490971"><span class="annot"><span class="annottext">binOp :: [PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var hs-var">binOp</span></a></span></span><span> </span><span id="local-6989586621684490970"><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490970"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Intrinsic -&gt; Maybe Intrinsic
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Intrinsic -&gt; Maybe Intrinsic) -&gt; Intrinsic -&gt; Maybe Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; [Maybe PrimType] -&gt; Maybe PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicOverloadedFun"><span class="hs-identifier hs-var">IntrinsicOverloadedFun</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490970"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe PrimType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe PrimType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe PrimType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1246"></span><span>    </span><span id="local-6989586621684490969"><span class="annot"><span class="annottext">ordering :: Maybe Intrinsic
</span><a href="#local-6989586621684490969"><span class="hs-identifier hs-var hs-var">ordering</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Intrinsic -&gt; Maybe Intrinsic
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Intrinsic -&gt; Maybe Intrinsic) -&gt; Intrinsic -&gt; Maybe Intrinsic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; [Maybe PrimType] -&gt; Maybe PrimType -&gt; Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicOverloadedFun"><span class="hs-identifier hs-var">IntrinsicOverloadedFun</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490975"><span class="hs-identifier hs-var">anyPrimType</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe PrimType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe PrimType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; Maybe PrimType
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span>    </span><span id="local-6989586621684490972"><span class="annot"><span class="annottext">intrinsicBinOp :: BinOp -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490972"><span class="hs-identifier hs-var hs-var">intrinsicBinOp</span></a></span></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Plus"><span class="hs-identifier hs-var">Plus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var">anyNumberType</span></a></span><span>
</span><span id="line-1249"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Minus"><span class="hs-identifier hs-var">Minus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var">anyNumberType</span></a></span><span>
</span><span id="line-1250"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Pow"><span class="hs-identifier hs-var">Pow</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var">anyNumberType</span></a></span><span>
</span><span id="line-1251"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Times"><span class="hs-identifier hs-var">Times</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var">anyNumberType</span></a></span><span>
</span><span id="line-1252"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Divide"><span class="hs-identifier hs-var">Divide</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var">anyNumberType</span></a></span><span>
</span><span id="line-1253"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Mod"><span class="hs-identifier hs-var">Mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490976"><span class="hs-identifier hs-var">anyNumberType</span></a></span><span>
</span><span id="line-1254"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Quot"><span class="hs-identifier hs-var">Quot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1255"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Rem"><span class="hs-identifier hs-var">Rem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1256"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1257"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1258"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Band"><span class="hs-identifier hs-var">Band</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1259"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Xor"><span class="hs-identifier hs-var">Xor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1260"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Bor"><span class="hs-identifier hs-var">Bor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimType]
</span><a href="#local-6989586621684490980"><span class="hs-identifier hs-var">anyIntType</span></a></span><span>
</span><span id="line-1261"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#LogAnd"><span class="hs-identifier hs-var">LogAnd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1262"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#LogOr"><span class="hs-identifier hs-var">LogOr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrimType] -&gt; Maybe Intrinsic
</span><a href="#local-6989586621684490971"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType
</span><a href="Language.Futhark.Syntax.html#Bool"><span class="hs-identifier hs-var">Bool</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1263"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Intrinsic -&gt; Maybe Intrinsic
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicEquality"><span class="hs-identifier hs-var">IntrinsicEquality</span></a></span><span>
</span><span id="line-1264"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#NotEqual"><span class="hs-identifier hs-var">NotEqual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Intrinsic -&gt; Maybe Intrinsic
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Intrinsic
</span><a href="Language.Futhark.Prop.html#IntrinsicEquality"><span class="hs-identifier hs-var">IntrinsicEquality</span></a></span><span>
</span><span id="line-1265"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Less"><span class="hs-identifier hs-var">Less</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Intrinsic
</span><a href="#local-6989586621684490969"><span class="hs-identifier hs-var">ordering</span></a></span><span>
</span><span id="line-1266"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Leq"><span class="hs-identifier hs-var">Leq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Intrinsic
</span><a href="#local-6989586621684490969"><span class="hs-identifier hs-var">ordering</span></a></span><span>
</span><span id="line-1267"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Greater"><span class="hs-identifier hs-var">Greater</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Intrinsic
</span><a href="#local-6989586621684490969"><span class="hs-identifier hs-var">ordering</span></a></span><span>
</span><span id="line-1268"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Geq"><span class="hs-identifier hs-var">Geq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Intrinsic
</span><a href="#local-6989586621684490969"><span class="hs-identifier hs-var">ordering</span></a></span><span>
</span><span id="line-1269"></span><span>    </span><span class="annot"><a href="#local-6989586621684490972"><span class="hs-identifier hs-var">intrinsicBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Intrinsic
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1270"></span><span>
</span><span id="line-1271"></span><span>    </span><span id="local-6989586621684491081"><span class="annot"><span class="annottext">tupInt64 :: Int -&gt; ScalarTypeBase dim as
</span><a href="#local-6989586621684491081"><span class="hs-identifier hs-var hs-var">tupInt64</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1272"></span><span>      </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase dim as
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase dim as)
-&gt; PrimType -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span>
</span><span id="line-1273"></span><span>    </span><span class="annot"><a href="#local-6989586621684491081"><span class="hs-identifier hs-var">tupInt64</span></a></span><span> </span><span id="local-6989586621684490945"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684490945"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1274"></span><span>      </span><span class="annot"><span class="annottext">[TypeBase dim as] -&gt; ScalarTypeBase dim as
forall dim as. [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Prop.html#tupleRecord"><span class="hs-identifier hs-var">tupleRecord</span></a></span><span> </span><span class="annot"><span class="annottext">([TypeBase dim as] -&gt; ScalarTypeBase dim as)
-&gt; [TypeBase dim as] -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TypeBase dim as -&gt; [TypeBase dim as]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684490945"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; [TypeBase dim as])
-&gt; TypeBase dim as -&gt; [TypeBase dim as]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim as -&gt; TypeBase dim as
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dim as -&gt; TypeBase dim as)
-&gt; ScalarTypeBase dim as -&gt; TypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase dim as
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">(PrimType -&gt; ScalarTypeBase dim as)
-&gt; PrimType -&gt; ScalarTypeBase dim as
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntType -&gt; PrimType
</span><a href="Language.Futhark.Syntax.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">IntType
</span><a href="Futhark.IR.Primitive.html#Int64"><span class="hs-identifier hs-var">Int64</span></a></span><span>
</span><span id="line-1275"></span><span>
</span><span id="line-1276"></span><span class="hs-comment">-- | The largest tag used by an intrinsic - this can be used to</span><span>
</span><span id="line-1277"></span><span class="hs-comment">-- determine whether a 'VName' refers to an intrinsic or a user-defined name.</span><span>
</span><span id="line-1278"></span><span class="annot"><a href="Language.Futhark.Prop.html#maxIntrinsicTag"><span class="hs-identifier hs-type">maxIntrinsicTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1279"></span><span id="maxIntrinsicTag"><span class="annot"><span class="annottext">maxIntrinsicTag :: Int
</span><a href="Language.Futhark.Prop.html#maxIntrinsicTag"><span class="hs-identifier hs-var hs-var">maxIntrinsicTag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a (f :: * -&gt; *). (Num a, Ord a, Foldable f) =&gt; f a -&gt; a
</span><a href="Futhark.Util.html#maxinum"><span class="hs-identifier hs-var">maxinum</span></a></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; [Int] -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; Int) -&gt; [VName] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; Int
</span><a href="Language.Futhark.Core.html#baseTag"><span class="hs-identifier hs-var">baseTag</span></a></span><span> </span><span class="annot"><span class="annottext">([VName] -&gt; [Int]) -&gt; [VName] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map VName Intrinsic -&gt; [VName]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">Map VName Intrinsic
</span><a href="Language.Futhark.Prop.html#intrinsics"><span class="hs-identifier hs-var">intrinsics</span></a></span><span>
</span><span id="line-1280"></span><span>
</span><span id="line-1281"></span><span class="hs-comment">-- | Create a name with no qualifiers from a name.</span><span>
</span><span id="line-1282"></span><span id="local-6989586621684492640"><span class="annot"><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-type">qualName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621684492640"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492640"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-1283"></span><span id="qualName"><span class="annot"><span class="annottext">qualName :: forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var hs-var">qualName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[v] -&gt; v -&gt; QualName v
forall vn. [vn] -&gt; vn -&gt; QualName vn
</span><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-var">QualName</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1284"></span><span>
</span><span id="line-1285"></span><span class="hs-comment">-- | Add another qualifier (at the head) to a qualified name.</span><span>
</span><span id="line-1286"></span><span id="local-6989586621684492283"><span class="annot"><a href="Language.Futhark.Prop.html#qualify"><span class="hs-identifier hs-type">qualify</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621684492283"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492283"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492283"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-1287"></span><span id="qualify"><span class="annot"><span class="annottext">qualify :: forall v. v -&gt; QualName v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualify"><span class="hs-identifier hs-var hs-var">qualify</span></a></span></span><span> </span><span id="local-6989586621684490941"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621684490941"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span id="local-6989586621684490940"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621684490940"><span class="hs-identifier hs-var">ks</span></a></span></span><span> </span><span id="local-6989586621684490939"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621684490939"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[v] -&gt; v -&gt; QualName v
forall vn. [vn] -&gt; vn -&gt; QualName vn
</span><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-var">QualName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621684490941"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; [v] -&gt; [v]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621684490940"><span class="hs-identifier hs-var">ks</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621684490939"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1288"></span><span>
</span><span id="line-1289"></span><span class="hs-comment">-- | Create a type name name with no qualifiers from a 'VName'.</span><span>
</span><span id="line-1290"></span><span class="annot"><a href="Language.Futhark.Prop.html#typeName"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span>
</span><span id="line-1291"></span><span id="typeName"><span class="annot"><span class="annottext">typeName :: VName -&gt; TypeName
</span><a href="Language.Futhark.Prop.html#typeName"><span class="hs-identifier hs-var hs-var">typeName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; TypeName
</span><a href="Language.Futhark.Syntax.html#typeNameFromQualName"><span class="hs-identifier hs-var">typeNameFromQualName</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; TypeName)
-&gt; (VName -&gt; QualName VName) -&gt; VName -&gt; TypeName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; QualName VName
forall v. v -&gt; QualName v
</span><a href="Language.Futhark.Prop.html#qualName"><span class="hs-identifier hs-var">qualName</span></a></span><span>
</span><span id="line-1292"></span><span>
</span><span id="line-1293"></span><span class="hs-comment">-- | The modules imported by a Futhark program.</span><span>
</span><span id="line-1294"></span><span id="local-6989586621684492280"><span id="local-6989586621684492281"><span class="annot"><a href="Language.Futhark.Prop.html#progImports"><span class="hs-identifier hs-type">progImports</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ProgBase"><span class="hs-identifier hs-type">ProgBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492281"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492280"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SrcLoc</span></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-1295"></span><span id="progImports"><span class="annot"><span class="annottext">progImports :: forall (f :: * -&gt; *) vn. ProgBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#progImports"><span class="hs-identifier hs-var hs-var">progImports</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DecBase f vn -&gt; [(String, SrcLoc)])
-&gt; [DecBase f vn] -&gt; [(String, SrcLoc)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. DecBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="annot"><span class="annottext">([DecBase f vn] -&gt; [(String, SrcLoc)])
-&gt; (ProgBase f vn -&gt; [DecBase f vn])
-&gt; ProgBase f vn
-&gt; [(String, SrcLoc)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProgBase f vn -&gt; [DecBase f vn]
forall (f :: * -&gt; *) vn. ProgBase f vn -&gt; [DecBase f vn]
</span><a href="Language.Futhark.Syntax.html#progDecs"><span class="hs-identifier hs-var hs-var">progDecs</span></a></span><span>
</span><span id="line-1296"></span><span>
</span><span id="line-1297"></span><span class="hs-comment">-- | The modules imported by a single declaration.</span><span>
</span><span id="line-1298"></span><span id="local-6989586621684492274"><span id="local-6989586621684492275"><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-type">decImports</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#DecBase"><span class="hs-identifier hs-type">DecBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492275"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492274"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SrcLoc</span></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-1299"></span><span id="decImports"><span class="annot"><span class="annottext">decImports :: forall (f :: * -&gt; *) vn. DecBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var hs-var">decImports</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpenDec"><span class="hs-identifier hs-type">OpenDec</span></a></span><span> </span><span id="local-6989586621684490934"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490934"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. ModExpBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490934"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1300"></span><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModDec"><span class="hs-identifier hs-type">ModDec</span></a></span><span> </span><span id="local-6989586621684490931"><span class="annot"><span class="annottext">ModBindBase f vn
</span><a href="#local-6989586621684490931"><span class="hs-identifier hs-var">md</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. ModExpBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="annot"><span class="annottext">(ModExpBase f vn -&gt; [(String, SrcLoc)])
-&gt; ModExpBase f vn -&gt; [(String, SrcLoc)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModBindBase f vn -&gt; ModExpBase f vn
forall (f :: * -&gt; *) vn. ModBindBase f vn -&gt; ModExpBase f vn
</span><a href="Language.Futhark.Syntax.html#modExp"><span class="hs-identifier hs-var hs-var">modExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModBindBase f vn
</span><a href="#local-6989586621684490931"><span class="hs-identifier hs-var">md</span></a></span><span>
</span><span id="line-1301"></span><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#SigDec"><span class="hs-identifier hs-type">SigDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1302"></span><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDec"><span class="hs-identifier hs-type">TypeDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1303"></span><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ValDec"><span class="hs-identifier hs-type">ValDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1304"></span><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LocalDec"><span class="hs-identifier hs-type">LocalDec</span></a></span><span> </span><span id="local-6989586621684490925"><span class="annot"><span class="annottext">DecBase f vn
</span><a href="#local-6989586621684490925"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. DecBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="annot"><span class="annottext">DecBase f vn
</span><a href="#local-6989586621684490925"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1305"></span><span class="annot"><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ImportDec"><span class="hs-identifier hs-type">ImportDec</span></a></span><span> </span><span id="local-6989586621684490923"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490923"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">f String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684490922"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684490922"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490923"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684490922"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1306"></span><span>
</span><span id="line-1307"></span><span id="local-6989586621684492267"><span id="local-6989586621684492268"><span class="annot"><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-type">modExpImports</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ModExpBase"><span class="hs-identifier hs-type">ModExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492268"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492267"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SrcLoc</span></span><span class="hs-special">)</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-1308"></span><span id="modExpImports"><span class="annot"><span class="annottext">modExpImports :: forall (f :: * -&gt; *) vn. ModExpBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var hs-var">modExpImports</span></a></span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ModVar"><span class="hs-identifier hs-type">ModVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1309"></span><span class="annot"><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModParens"><span class="hs-identifier hs-type">ModParens</span></a></span><span> </span><span id="local-6989586621684490918"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490918"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. ModExpBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490918"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1310"></span><span class="annot"><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModImport"><span class="hs-identifier hs-type">ModImport</span></a></span><span> </span><span id="local-6989586621684490916"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490916"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">f String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684490915"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684490915"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490916"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684490915"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1311"></span><span class="annot"><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModDecs"><span class="hs-identifier hs-type">ModDecs</span></a></span><span> </span><span id="local-6989586621684490913"><span class="annot"><span class="annottext">[DecBase f vn]
</span><a href="#local-6989586621684490913"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DecBase f vn -&gt; [(String, SrcLoc)])
-&gt; [DecBase f vn] -&gt; [(String, SrcLoc)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. DecBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#decImports"><span class="hs-identifier hs-var">decImports</span></a></span><span> </span><span class="annot"><span class="annottext">[DecBase f vn]
</span><a href="#local-6989586621684490913"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1312"></span><span class="annot"><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModApply"><span class="hs-identifier hs-type">ModApply</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684490911"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490911"><span class="hs-identifier hs-var">me</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. ModExpBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490911"><span class="hs-identifier hs-var">me</span></a></span><span>
</span><span id="line-1313"></span><span class="annot"><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModAscript"><span class="hs-identifier hs-type">ModAscript</span></a></span><span> </span><span id="local-6989586621684490909"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490909"><span class="hs-identifier hs-var">me</span></a></span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; [(String, SrcLoc)]
forall (f :: * -&gt; *) vn. ModExpBase f vn -&gt; [(String, SrcLoc)]
</span><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490909"><span class="hs-identifier hs-var">me</span></a></span><span>
</span><span id="line-1314"></span><span class="annot"><a href="Language.Futhark.Prop.html#modExpImports"><span class="hs-identifier hs-var">modExpImports</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ModLambda"><span class="hs-identifier hs-type">ModLambda</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1315"></span><span>
</span><span id="line-1316"></span><span class="hs-comment">-- | The set of module types used in any exported (non-local)</span><span>
</span><span id="line-1317"></span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-1318"></span><span id="local-6989586621684492259"><span id="local-6989586621684492260"><span class="annot"><a href="Language.Futhark.Prop.html#progModuleTypes"><span class="hs-identifier hs-type">progModuleTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621684492260"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ProgBase"><span class="hs-identifier hs-type">ProgBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492259"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492260"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><a href="#local-6989586621684492260"><span class="hs-identifier hs-type">vn</span></a></span></span></span><span>
</span><span id="line-1319"></span><span id="progModuleTypes"><span class="annot"><span class="annottext">progModuleTypes :: forall vn (f :: * -&gt; *). Ord vn =&gt; ProgBase f vn -&gt; Set vn
</span><a href="Language.Futhark.Prop.html#progModuleTypes"><span class="hs-identifier hs-var hs-var">progModuleTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set vn] -&gt; Set vn
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set vn] -&gt; Set vn)
-&gt; (ProgBase f vn -&gt; [Set vn]) -&gt; ProgBase f vn -&gt; Set vn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DecBase f vn -&gt; Set vn) -&gt; [DecBase f vn] -&gt; [Set vn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; Set vn
forall {f :: * -&gt; *}. DecBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="annot"><span class="annottext">([DecBase f vn] -&gt; [Set vn])
-&gt; (ProgBase f vn -&gt; [DecBase f vn]) -&gt; ProgBase f vn -&gt; [Set vn]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProgBase f vn -&gt; [DecBase f vn]
forall (f :: * -&gt; *) vn. ProgBase f vn -&gt; [DecBase f vn]
</span><a href="Language.Futhark.Syntax.html#progDecs"><span class="hs-identifier hs-var hs-var">progDecs</span></a></span><span>
</span><span id="line-1320"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1321"></span><span>    </span><span id="local-6989586621684490905"><span class="annot"><span class="annottext">onDec :: DecBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490905"><span class="hs-identifier hs-var hs-var">onDec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpenDec"><span class="hs-identifier hs-type">OpenDec</span></a></span><span> </span><span id="local-6989586621684490885"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490885"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490885"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1322"></span><span>    </span><span class="annot"><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModDec"><span class="hs-identifier hs-type">ModDec</span></a></span><span> </span><span id="local-6989586621684490883"><span class="annot"><span class="annottext">ModBindBase f vn
</span><a href="#local-6989586621684490883"><span class="hs-identifier hs-var">md</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1323"></span><span>      </span><span class="annot"><span class="annottext">Set vn
-&gt; ((SigExpBase f vn, f (Map VName VName)) -&gt; Set vn)
-&gt; Maybe (SigExpBase f vn, f (Map VName VName))
-&gt; Set vn
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Set vn
forall {a} {f :: * -&gt; *}. Ord a =&gt; SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">(SigExpBase f vn -&gt; Set vn)
-&gt; ((SigExpBase f vn, f (Map VName VName)) -&gt; SigExpBase f vn)
-&gt; (SigExpBase f vn, f (Map VName VName))
-&gt; Set vn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SigExpBase f vn, f (Map VName VName)) -&gt; SigExpBase f vn
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModBindBase f vn -&gt; Maybe (SigExpBase f vn, f (Map VName VName))
forall (f :: * -&gt; *) vn.
ModBindBase f vn -&gt; Maybe (SigExpBase f vn, f (Map VName VName))
</span><a href="Language.Futhark.Syntax.html#modSignature"><span class="hs-identifier hs-var hs-var">modSignature</span></a></span><span> </span><span class="annot"><span class="annottext">ModBindBase f vn
</span><a href="#local-6989586621684490883"><span class="hs-identifier hs-var">md</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set vn -&gt; Set vn -&gt; Set vn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModBindBase f vn -&gt; ModExpBase f vn
forall (f :: * -&gt; *) vn. ModBindBase f vn -&gt; ModExpBase f vn
</span><a href="Language.Futhark.Syntax.html#modExp"><span class="hs-identifier hs-var hs-var">modExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModBindBase f vn
</span><a href="#local-6989586621684490883"><span class="hs-identifier hs-var">md</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1324"></span><span>    </span><span class="annot"><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#SigDec"><span class="hs-identifier hs-type">SigDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1325"></span><span>    </span><span class="annot"><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDec"><span class="hs-identifier hs-type">TypeDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1326"></span><span>    </span><span class="annot"><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ValDec"><span class="hs-identifier hs-type">ValDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1327"></span><span>    </span><span class="annot"><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#LocalDec"><span class="hs-identifier hs-type">LocalDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1328"></span><span>    </span><span class="annot"><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ImportDec"><span class="hs-identifier hs-type">ImportDec</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1329"></span><span>
</span><span id="line-1330"></span><span>    </span><span id="local-6989586621684490884"><span class="annot"><span class="annottext">onModExp :: ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var hs-var">onModExp</span></a></span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ModVar"><span class="hs-identifier hs-type">ModVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1331"></span><span>    </span><span class="annot"><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModParens"><span class="hs-identifier hs-type">ModParens</span></a></span><span> </span><span id="local-6989586621684490880"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490880"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490880"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1332"></span><span>    </span><span class="annot"><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ModImport"><span class="hs-identifier hs-type">ModImport</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1333"></span><span>    </span><span class="annot"><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModDecs"><span class="hs-identifier hs-type">ModDecs</span></a></span><span> </span><span id="local-6989586621684490879"><span class="annot"><span class="annottext">[DecBase f vn]
</span><a href="#local-6989586621684490879"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set vn] -&gt; Set vn
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Set vn] -&gt; Set vn) -&gt; [Set vn] -&gt; Set vn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(DecBase f vn -&gt; Set vn) -&gt; [DecBase f vn] -&gt; [Set vn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490905"><span class="hs-identifier hs-var">onDec</span></a></span><span> </span><span class="annot"><span class="annottext">[DecBase f vn]
</span><a href="#local-6989586621684490879"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1334"></span><span>    </span><span class="annot"><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModApply"><span class="hs-identifier hs-type">ModApply</span></a></span><span> </span><span id="local-6989586621684490878"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490878"><span class="hs-identifier hs-var">me1</span></a></span></span><span> </span><span id="local-6989586621684490877"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490877"><span class="hs-identifier hs-var">me2</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490878"><span class="hs-identifier hs-var">me1</span></a></span><span> </span><span class="annot"><span class="annottext">Set vn -&gt; Set vn -&gt; Set vn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490877"><span class="hs-identifier hs-var">me2</span></a></span><span>
</span><span id="line-1335"></span><span>    </span><span class="annot"><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModAscript"><span class="hs-identifier hs-type">ModAscript</span></a></span><span> </span><span id="local-6989586621684490876"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490876"><span class="hs-identifier hs-var">me</span></a></span></span><span> </span><span id="local-6989586621684490875"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684490875"><span class="hs-identifier hs-var">se</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490876"><span class="hs-identifier hs-var">me</span></a></span><span> </span><span class="annot"><span class="annottext">Set vn -&gt; Set vn -&gt; Set vn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Set vn
forall {a} {f :: * -&gt; *}. Ord a =&gt; SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684490875"><span class="hs-identifier hs-var">se</span></a></span><span>
</span><span id="line-1336"></span><span>    </span><span class="annot"><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModLambda"><span class="hs-identifier hs-type">ModLambda</span></a></span><span> </span><span id="local-6989586621684490874"><span class="annot"><span class="annottext">ModParamBase f vn
</span><a href="#local-6989586621684490874"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684490873"><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><a href="#local-6989586621684490873"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621684490872"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490872"><span class="hs-identifier hs-var">me</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1337"></span><span>      </span><span class="annot"><span class="annottext">ModParamBase f vn -&gt; Set vn
forall {f :: * -&gt; *}. ModParamBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490871"><span class="hs-identifier hs-var">onModParam</span></a></span><span> </span><span class="annot"><span class="annottext">ModParamBase f vn
</span><a href="#local-6989586621684490874"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Set vn -&gt; Set vn -&gt; Set vn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Set vn
-&gt; ((SigExpBase f vn, f (Map VName VName)) -&gt; Set vn)
-&gt; Maybe (SigExpBase f vn, f (Map VName VName))
-&gt; Set vn
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Set vn
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Set vn
forall {a} {f :: * -&gt; *}. Ord a =&gt; SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">(SigExpBase f vn -&gt; Set vn)
-&gt; ((SigExpBase f vn, f (Map VName VName)) -&gt; SigExpBase f vn)
-&gt; (SigExpBase f vn, f (Map VName VName))
-&gt; Set vn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SigExpBase f vn, f (Map VName VName)) -&gt; SigExpBase f vn
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><a href="#local-6989586621684490873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Set vn -&gt; Set vn -&gt; Set vn
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490884"><span class="hs-identifier hs-var">onModExp</span></a></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684490872"><span class="hs-identifier hs-var">me</span></a></span><span>
</span><span id="line-1338"></span><span>
</span><span id="line-1339"></span><span>    </span><span id="local-6989586621684490871"><span class="annot"><span class="annottext">onModParam :: ModParamBase f vn -&gt; Set vn
</span><a href="#local-6989586621684490871"><span class="hs-identifier hs-var hs-var">onModParam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Set vn
forall {a} {f :: * -&gt; *}. Ord a =&gt; SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">(SigExpBase f vn -&gt; Set vn)
-&gt; (ModParamBase f vn -&gt; SigExpBase f vn)
-&gt; ModParamBase f vn
-&gt; Set vn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ModParamBase f vn -&gt; SigExpBase f vn
forall (f :: * -&gt; *) vn. ModParamBase f vn -&gt; SigExpBase f vn
</span><a href="Language.Futhark.Syntax.html#modParamType"><span class="hs-identifier hs-var hs-var">modParamType</span></a></span><span>
</span><span id="line-1340"></span><span>
</span><span id="line-1341"></span><span>    </span><span id="local-6989586621684490882"><span class="annot"><span class="annottext">onSigExp :: SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var hs-var">onSigExp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigVar"><span class="hs-identifier hs-type">SigVar</span></a></span><span> </span><span id="local-6989586621684490863"><span class="annot"><span class="annottext">QualName a
</span><a href="#local-6989586621684490863"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Set a
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">S.singleton</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Set a) -&gt; a -&gt; Set a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualName a -&gt; a
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName a
</span><a href="#local-6989586621684490863"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1342"></span><span>    </span><span class="annot"><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigParens"><span class="hs-identifier hs-type">SigParens</span></a></span><span> </span><span id="local-6989586621684490861"><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490861"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490861"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1343"></span><span>    </span><span class="annot"><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#SigSpecs"><span class="hs-identifier hs-type">SigSpecs</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1344"></span><span>    </span><span class="annot"><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigWith"><span class="hs-identifier hs-type">SigWith</span></a></span><span> </span><span id="local-6989586621684490858"><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490858"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeRefBase f a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490858"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1345"></span><span>    </span><span class="annot"><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigArrow"><span class="hs-identifier hs-type">SigArrow</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684490856"><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490856"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621684490855"><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490855"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490856"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Set a -&gt; Set a -&gt; Set a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f a -&gt; Set a
</span><a href="#local-6989586621684490882"><span class="hs-identifier hs-var">onSigExp</span></a></span><span> </span><span class="annot"><span class="annottext">SigExpBase f a
</span><a href="#local-6989586621684490855"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1346"></span><span>
</span><span id="line-1347"></span><span class="hs-comment">-- | Extract a leading @((name, namespace, file), remainder)@ from a</span><span>
</span><span id="line-1348"></span><span class="hs-comment">-- documentation comment string.  These are formatted as</span><span>
</span><span id="line-1349"></span><span class="hs-comment">-- \`name\`\@namespace[\@file].  Let us hope that this pattern does not occur</span><span>
</span><span id="line-1350"></span><span class="hs-comment">-- anywhere else.</span><span>
</span><span id="line-1351"></span><span class="annot"><a href="Language.Futhark.Prop.html#identifierReference"><span class="hs-identifier hs-type">identifierReference</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-1352"></span><span id="identifierReference"><span class="annot"><span class="annottext">identifierReference :: String -&gt; Maybe ((String, String, Maybe String), String)
</span><a href="Language.Futhark.Prop.html#identifierReference"><span class="hs-identifier hs-var hs-var">identifierReference</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'`'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621684490853"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490853"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1353"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684490852"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490852"><span class="hs-identifier hs-var">identifier</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'`'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621684490851"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490851"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; (String, String)
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'`'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490853"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1354"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621684490849"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490849"><span class="hs-identifier hs-var">namespace</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684490848"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490848"><span class="hs-identifier hs-var">s''</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; (String, String)
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">span</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isAlpha</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490851"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1355"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490849"><span class="hs-identifier hs-var">namespace</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1356"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490848"><span class="hs-identifier hs-var">s''</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1357"></span><span>      </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'@'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621684490844"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490844"><span class="hs-identifier hs-var">s'''</span></a></span></span><span>
</span><span id="line-1358"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684490843"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490843"><span class="hs-identifier hs-var">file</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621684490842"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490842"><span class="hs-identifier hs-var">s''''</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; (String, String)
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">span</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490844"><span class="hs-identifier hs-var">s'''</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1359"></span><span>          </span><span class="annot"><span class="annottext">((String, String, Maybe String), String)
-&gt; Maybe ((String, String, Maybe String), String)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490852"><span class="hs-identifier hs-var">identifier</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490849"><span class="hs-identifier hs-var">namespace</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490843"><span class="hs-identifier hs-var">file</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490842"><span class="hs-identifier hs-var">s''''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1360"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((String, String, Maybe String), String)
-&gt; Maybe ((String, String, Maybe String), String)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490852"><span class="hs-identifier hs-var">identifier</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490849"><span class="hs-identifier hs-var">namespace</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490848"><span class="hs-identifier hs-var">s''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1361"></span><span class="annot"><a href="Language.Futhark.Prop.html#identifierReference"><span class="hs-identifier hs-var">identifierReference</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ((String, String, Maybe String), String)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1362"></span><span>
</span><span id="line-1363"></span><span class="hs-comment">-- | Given an operator name, return the operator that determines its</span><span>
</span><span id="line-1364"></span><span class="hs-comment">-- syntactical properties.</span><span>
</span><span id="line-1365"></span><span class="annot"><a href="Language.Futhark.Prop.html#leadingOperator"><span class="hs-identifier hs-type">leadingOperator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-type">BinOp</span></a></span><span>
</span><span id="line-1366"></span><span id="leadingOperator"><span class="annot"><span class="annottext">leadingOperator :: Name -&gt; BinOp
</span><a href="Language.Futhark.Prop.html#leadingOperator"><span class="hs-identifier hs-var hs-var">leadingOperator</span></a></span></span><span> </span><span id="local-6989586621684490841"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684490841"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1367"></span><span>  </span><span class="annot"><span class="annottext">BinOp
-&gt; ((String, BinOp) -&gt; BinOp) -&gt; Maybe (String, BinOp) -&gt; BinOp
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Backtick"><span class="hs-identifier hs-var">Backtick</span></a></span><span> </span><span class="annot"><span class="annottext">(String, BinOp) -&gt; BinOp
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (String, BinOp) -&gt; BinOp) -&gt; Maybe (String, BinOp) -&gt; BinOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1368"></span><span>    </span><span class="annot"><span class="annottext">((String, BinOp) -&gt; Bool)
-&gt; [(String, BinOp)] -&gt; Maybe (String, BinOp)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">find</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><span class="hs-operator hs-var">`isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684490838"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool)
-&gt; ((String, BinOp) -&gt; String) -&gt; (String, BinOp) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(String, BinOp) -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(String, BinOp)] -&gt; Maybe (String, BinOp))
-&gt; [(String, BinOp)] -&gt; Maybe (String, BinOp)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1369"></span><span>      </span><span class="annot"><span class="annottext">((String, BinOp) -&gt; Down Int)
-&gt; [(String, BinOp)] -&gt; [(String, BinOp)]
forall b a. Ord b =&gt; (a -&gt; b) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortOn</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Down Int
forall a. a -&gt; Down a
</span><span class="hs-identifier hs-var">Down</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Down Int)
-&gt; ((String, BinOp) -&gt; Int) -&gt; (String, BinOp) -&gt; Down Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Int)
-&gt; ((String, BinOp) -&gt; String) -&gt; (String, BinOp) -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(String, BinOp) -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(String, BinOp)] -&gt; [(String, BinOp)])
-&gt; [(String, BinOp)] -&gt; [(String, BinOp)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1370"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; [BinOp] -&gt; [(String, BinOp)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(BinOp -&gt; String) -&gt; [BinOp] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">[BinOp]
</span><a href="#local-6989586621684490835"><span class="hs-identifier hs-var">operators</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[BinOp]
</span><a href="#local-6989586621684490835"><span class="hs-identifier hs-var">operators</span></a></span><span>
</span><span id="line-1371"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1372"></span><span>    </span><span id="local-6989586621684490838"><span class="annot"><span class="annottext">s' :: String
</span><a href="#local-6989586621684490838"><span class="hs-identifier hs-var hs-var">s'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><a href="Language.Futhark.Core.html#nameToString"><span class="hs-identifier hs-var">nameToString</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684490841"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1373"></span><span>    </span><span class="annot"><a href="#local-6989586621684490835"><span class="hs-identifier hs-type">operators</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-type">BinOp</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1374"></span><span>    </span><span id="local-6989586621684490835"><span class="annot"><span class="annottext">operators :: [BinOp]
</span><a href="#local-6989586621684490835"><span class="hs-identifier hs-var hs-var">operators</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">BinOp
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">BinOp
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-type">BinOp</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1375"></span><span>
</span><span id="line-1376"></span><span class="hs-comment">-- | A type with no aliasing information but shape annotations.</span><span>
</span><span id="line-1377"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedType"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedType"><span class="hs-identifier hs-var">UncheckedType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>
</span><span id="line-1379"></span><span class="hs-comment">-- | An expression with no type annotations.</span><span>
</span><span id="line-1380"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedTypeExp"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedTypeExp"><span class="hs-identifier hs-var">UncheckedTypeExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeExp"><span class="hs-identifier hs-type">TypeExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1381"></span><span>
</span><span id="line-1382"></span><span class="hs-comment">-- | A type declaration with no expanded type.</span><span>
</span><span id="line-1383"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedTypeDecl"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedTypeDecl"><span class="hs-identifier hs-var">UncheckedTypeDecl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDeclBase"><span class="hs-identifier hs-type">TypeDeclBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1384"></span><span>
</span><span id="line-1385"></span><span class="hs-comment">-- | An identifier with no type annotations.</span><span>
</span><span id="line-1386"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedIdent"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedIdent"><span class="hs-identifier hs-var">UncheckedIdent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#IdentBase"><span class="hs-identifier hs-type">IdentBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1387"></span><span>
</span><span id="line-1388"></span><span class="hs-comment">-- | An index with no type annotations.</span><span>
</span><span id="line-1389"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedDimIndex"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedDimIndex"><span class="hs-identifier hs-var">UncheckedDimIndex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#DimIndexBase"><span class="hs-identifier hs-type">DimIndexBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span class="hs-comment">-- | A slice with no type annotations.</span><span>
</span><span id="line-1392"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedSlice"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedSlice"><span class="hs-identifier hs-var">UncheckedSlice</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#SliceBase"><span class="hs-identifier hs-type">SliceBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="hs-comment">-- | An expression with no type annotations.</span><span>
</span><span id="line-1395"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedExp"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedExp"><span class="hs-identifier hs-var">UncheckedExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1396"></span><span>
</span><span id="line-1397"></span><span class="hs-comment">-- | A module expression with no type annotations.</span><span>
</span><span id="line-1398"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedModExp"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedModExp"><span class="hs-identifier hs-var">UncheckedModExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ModExpBase"><span class="hs-identifier hs-type">ModExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1399"></span><span>
</span><span id="line-1400"></span><span class="hs-comment">-- | A module type expression with no type annotations.</span><span>
</span><span id="line-1401"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedSigExp"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedSigExp"><span class="hs-identifier hs-var">UncheckedSigExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#SigExpBase"><span class="hs-identifier hs-type">SigExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1402"></span><span>
</span><span id="line-1403"></span><span class="hs-comment">-- | A type parameter with no type annotations.</span><span>
</span><span id="line-1404"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedTypeParam"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedTypeParam"><span class="hs-identifier hs-var">UncheckedTypeParam</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1405"></span><span>
</span><span id="line-1406"></span><span class="hs-comment">-- | A pattern with no type annotations.</span><span>
</span><span id="line-1407"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedPat"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedPat"><span class="hs-identifier hs-var">UncheckedPat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1408"></span><span>
</span><span id="line-1409"></span><span class="hs-comment">-- | A function declaration with no type annotations.</span><span>
</span><span id="line-1410"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedValBind"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedValBind"><span class="hs-identifier hs-var">UncheckedValBind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ValBindBase"><span class="hs-identifier hs-type">ValBindBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1411"></span><span>
</span><span id="line-1412"></span><span class="hs-comment">-- | A declaration with no type annotations.</span><span>
</span><span id="line-1413"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedDec"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedDec"><span class="hs-identifier hs-var">UncheckedDec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#DecBase"><span class="hs-identifier hs-type">DecBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1414"></span><span>
</span><span id="line-1415"></span><span class="hs-comment">-- | A spec with no type annotations.</span><span>
</span><span id="line-1416"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedSpec"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedSpec"><span class="hs-identifier hs-var">UncheckedSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#SpecBase"><span class="hs-identifier hs-type">SpecBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1417"></span><span>
</span><span id="line-1418"></span><span class="hs-comment">-- | A Futhark program with no type annotations.</span><span>
</span><span id="line-1419"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedProg"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedProg"><span class="hs-identifier hs-var">UncheckedProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ProgBase"><span class="hs-identifier hs-type">ProgBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1420"></span><span>
</span><span id="line-1421"></span><span class="hs-comment">-- | A case (of a match expression) with no type annotations.</span><span>
</span><span id="line-1422"></span><span class="hs-keyword">type</span><span> </span><span id="UncheckedCase"><span class="annot"><a href="Language.Futhark.Prop.html#UncheckedCase"><span class="hs-identifier hs-var">UncheckedCase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#CaseBase"><span class="hs-identifier hs-type">CaseBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1423"></span></pre></body></html>