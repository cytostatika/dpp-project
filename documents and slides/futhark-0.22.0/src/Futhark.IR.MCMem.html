<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Futhark.IR.MCMem</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier">MCMem</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Simplification</span></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Futhark.IR.MCMem.html#simplifyProg"><span class="hs-identifier">simplifyProg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Module re-exports</span></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html"><span class="hs-identifier">Futhark.IR.Mem</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Futhark.IR.SegOp.html"><span class="hs-identifier">Futhark.IR.SegOp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Futhark.IR.MC.Op.html"><span class="hs-identifier">Futhark.IR.MC.Op</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">where</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Analysis.PrimExp.Convert.html"><span class="hs-identifier">Futhark.Analysis.PrimExp.Convert</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.MC.Op.html"><span class="hs-identifier">Futhark.IR.MC.Op</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html"><span class="hs-identifier">Futhark.IR.Mem</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.Simplify.html"><span class="hs-identifier">Futhark.IR.Mem.Simplify</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.SegOp.html"><span class="hs-identifier">Futhark.IR.SegOp</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.TypeCheck.html"><span class="hs-identifier">Futhark.IR.TypeCheck</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TC</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.Optimise.Simplify.Engine.html"><span class="hs-identifier">Futhark.Optimise.Simplify.Engine</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Engine</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.html"><span class="hs-identifier">Futhark.Pass</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.ExplicitAllocations.html"><span class="hs-identifier">Futhark.Pass.ExplicitAllocations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Builder.html#BuilderOps"><span class="hs-identifier">BuilderOps</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.Pass.ExplicitAllocations.html#mkLetNamesB%27"><span class="hs-identifier">mkLetNamesB'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.Pass.ExplicitAllocations.html#mkLetNamesB%27%27"><span class="hs-identifier">mkLetNamesB''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">data</span><span> </span><span id="MCMem"><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-var">MCMem</span></a></span></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.IR.Rep.html#RepTypes"><span class="hs-identifier hs-type">RepTypes</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="LetDec"><span class="annot"><a href="Futhark.IR.Rep.html#LetDec"><span class="hs-identifier hs-var">LetDec</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#LetDecMem"><span class="hs-identifier hs-type">LetDecMem</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FParamInfo"><span class="annot"><a href="Futhark.IR.Rep.html#FParamInfo"><span class="hs-identifier hs-var">FParamInfo</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#FParamMem"><span class="hs-identifier hs-type">FParamMem</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="LParamInfo"><span class="annot"><a href="Futhark.IR.Rep.html#LParamInfo"><span class="hs-identifier hs-var">LParamInfo</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#LParamMem"><span class="hs-identifier hs-type">LParamMem</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="RetType"><span class="annot"><a href="Futhark.IR.Rep.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#RetTypeMem"><span class="hs-identifier hs-type">RetTypeMem</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="BranchType"><span class="annot"><a href="Futhark.IR.Rep.html#BranchType"><span class="hs-identifier hs-var">BranchType</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#BranchTypeMem"><span class="hs-identifier hs-type">BranchTypeMem</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Op"><span class="annot"><a href="Futhark.IR.Rep.html#Op"><span class="hs-identifier hs-var">Op</span></a></span></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#MemOp"><span class="hs-identifier hs-type">MemOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.MC.Op.html#MCOp"><span class="hs-identifier hs-type">MCOp</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.IR.Prop.html#ASTRep"><span class="hs-identifier hs-type">ASTRep</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-41"></span><span>  </span><span id="local-6989586621684412558"><span class="annot"><span class="annottext">expTypesFromPat :: forall (m :: * -&gt; *).
(HasScope MCMem m, Monad m) =&gt;
Pat MCMem -&gt; m [BranchType MCMem]
</span><a href="Futhark.IR.Prop.html#expTypesFromPat"><span class="hs-identifier hs-var hs-var hs-var hs-var">expTypesFromPat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[BranchTypeMem] -&gt; m [BranchTypeMem]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([BranchTypeMem] -&gt; m [BranchTypeMem])
-&gt; (PatT LetDecMem -&gt; [BranchTypeMem])
-&gt; PatT LetDecMem
-&gt; m [BranchTypeMem]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((VName, BranchTypeMem) -&gt; BranchTypeMem)
-&gt; [(VName, BranchTypeMem)] -&gt; [BranchTypeMem]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(VName, BranchTypeMem) -&gt; BranchTypeMem
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">([(VName, BranchTypeMem)] -&gt; [BranchTypeMem])
-&gt; (PatT LetDecMem -&gt; [(VName, BranchTypeMem)])
-&gt; PatT LetDecMem
-&gt; [BranchTypeMem]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PatT LetDecMem -&gt; [(VName, BranchTypeMem)]
</span><a href="Futhark.IR.Mem.html#bodyReturnsFromPat"><span class="hs-identifier hs-var">bodyReturnsFromPat</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#OpReturns"><span class="hs-identifier hs-type">OpReturns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.MC.Op.html#MCOp"><span class="hs-identifier hs-type">MCOp</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>  </span><span id="local-6989586621684412496"><span class="annot"><span class="annottext">opReturns :: forall rep inner (m :: * -&gt; *).
(Mem rep inner, Monad m, HasScope rep m) =&gt;
MCOp MCMem () -&gt; m [ExpReturns]
</span><a href="Futhark.IR.Mem.html#opReturns"><span class="hs-identifier hs-var hs-var hs-var hs-var">opReturns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.MC.Op.html#ParOp"><span class="hs-identifier hs-type">ParOp</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SegOp () MCMem)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684412493"><span class="annot"><span class="annottext">SegOp () MCMem
</span><a href="#local-6989586621684412493"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SegOp () MCMem -&gt; m [ExpReturns]
forall rep inner (m :: * -&gt; *) lvl somerep.
(Mem rep inner, Monad m, HasScope rep m) =&gt;
SegOp lvl somerep -&gt; m [ExpReturns]
</span><a href="Futhark.IR.SegOp.html#segOpReturns"><span class="hs-identifier hs-var">segOpReturns</span></a></span><span> </span><span class="annot"><span class="annottext">SegOp () MCMem
</span><a href="#local-6989586621684412493"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Futhark.IR.Mem.html#opReturns"><span class="hs-identifier hs-var">opReturns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.MC.Op.html#OtherOp"><span class="hs-identifier hs-type">OtherOp</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ExpReturns] -&gt; m [ExpReturns]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.IR.Mem.html#OpReturns"><span class="hs-identifier hs-type">OpReturns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.MC.Op.html#MCOp"><span class="hs-identifier hs-type">MCOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Optimise.Simplify.Rep.html#Wise"><span class="hs-identifier hs-type">Engine.Wise</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-48"></span><span>  </span><span id="local-6989586621684412438"><span class="annot"><span class="annottext">opReturns :: forall rep inner (m :: * -&gt; *).
(Mem rep inner, Monad m, HasScope rep m) =&gt;
MCOp (Wise MCMem) () -&gt; m [ExpReturns]
</span><a href="#local-6989586621684412438"><span class="hs-identifier hs-var hs-var hs-var hs-var">opReturns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.MC.Op.html#ParOp"><span class="hs-identifier hs-type">ParOp</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SegOp () (Wise MCMem))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684412437"><span class="annot"><span class="annottext">SegOp () (Wise MCMem)
</span><a href="#local-6989586621684412437"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SegOp () (Wise MCMem) -&gt; m [ExpReturns]
forall rep inner (m :: * -&gt; *) lvl somerep.
(Mem rep inner, Monad m, HasScope rep m) =&gt;
SegOp lvl somerep -&gt; m [ExpReturns]
</span><a href="Futhark.IR.SegOp.html#segOpReturns"><span class="hs-identifier hs-var">segOpReturns</span></a></span><span> </span><span class="annot"><span class="annottext">SegOp () (Wise MCMem)
</span><a href="#local-6989586621684412437"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Futhark.IR.Mem.html#opReturns"><span class="hs-identifier hs-var">opReturns</span></a></span><span> </span><span id="local-6989586621684412436"><span class="annot"><span class="annottext">MCOp (Wise MCMem) ()
</span><a href="#local-6989586621684412436"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ExtType] -&gt; [ExpReturns]
</span><a href="Futhark.IR.Mem.html#extReturns"><span class="hs-identifier hs-var">extReturns</span></a></span><span> </span><span class="annot"><span class="annottext">([ExtType] -&gt; [ExpReturns]) -&gt; m [ExtType] -&gt; m [ExpReturns]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MCOp (Wise MCMem) () -&gt; m [ExtType]
forall op t (m :: * -&gt; *).
(TypedOp op, HasScope t m) =&gt;
op -&gt; m [ExtType]
</span><a href="Futhark.IR.Prop.TypeOf.html#opType"><span class="hs-identifier hs-var">opType</span></a></span><span> </span><span class="annot"><span class="annottext">MCOp (Wise MCMem) ()
</span><a href="#local-6989586621684412436"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684412411"><span class="annot"><a href="Futhark.IR.Pretty.html#PrettyRep"><span class="hs-identifier hs-type">PrettyRep</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.IR.TypeCheck.html#CheckableOp"><span class="hs-identifier hs-type">TC.CheckableOp</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-54"></span><span>  </span><span id="local-6989586621684412354"><span class="annot"><span class="annottext">checkOp :: OpWithAliases (Op MCMem) -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#checkOp"><span class="hs-identifier hs-var hs-var hs-var hs-var">checkOp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OpWithAliases (Op MCMem) -&gt; TypeM MCMem ()
forall {rep}.
Checkable rep =&gt;
MemOp (MCOp (Aliases rep) ()) -&gt; TypeM rep ()
</span><a href="#local-6989586621684412352"><span class="hs-identifier hs-var">typeCheckMemoryOp</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>      </span><span id="local-6989586621684412352"><span class="annot"><span class="annottext">typeCheckMemoryOp :: MemOp (MCOp (Aliases rep) ()) -&gt; TypeM rep ()
</span><a href="#local-6989586621684412352"><span class="hs-identifier hs-var hs-var">typeCheckMemoryOp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Mem.html#Alloc"><span class="hs-identifier hs-type">Alloc</span></a></span><span> </span><span id="local-6989586621684412345"><span class="annot"><span class="annottext">SubExp
</span><a href="#local-6989586621684412345"><span class="hs-identifier hs-var">size</span></a></span></span><span> </span><span class="annot"><span class="annottext">Space
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><span class="annottext">[TypeBase (ShapeBase SubExp) NoUniqueness]
-&gt; SubExp -&gt; TypeM rep ()
forall rep.
Checkable rep =&gt;
[TypeBase (ShapeBase SubExp) NoUniqueness]
-&gt; SubExp -&gt; TypeM rep ()
</span><a href="Futhark.IR.TypeCheck.html#require"><span class="hs-identifier hs-var">TC.require</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrimType -&gt; TypeBase (ShapeBase SubExp) NoUniqueness
forall shape u. PrimType -&gt; TypeBase shape u
</span><a href="Futhark.IR.Syntax.Core.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="Futhark.IR.Prop.Types.html#int64"><span class="hs-identifier hs-var">int64</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">SubExp
</span><a href="#local-6989586621684412345"><span class="hs-identifier hs-var">size</span></a></span><span>
</span><span id="line-58"></span><span>      </span><span class="annot"><a href="#local-6989586621684412352"><span class="hs-identifier hs-var">typeCheckMemoryOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Mem.html#Inner"><span class="hs-identifier hs-type">Inner</span></a></span><span> </span><span id="local-6989586621684412340"><span class="annot"><span class="annottext">MCOp (Aliases rep) ()
</span><a href="#local-6989586621684412340"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><span class="annottext">(() -&gt; TypeM rep ()) -&gt; MCOp (Aliases rep) () -&gt; TypeM rep ()
forall rep op.
Checkable rep =&gt;
(op -&gt; TypeM rep ()) -&gt; MCOp (Aliases rep) op -&gt; TypeM rep ()
</span><a href="Futhark.IR.MC.Op.html#typeCheckMCOp"><span class="hs-identifier hs-var">typeCheckMCOp</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; TypeM rep ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">MCOp (Aliases rep) ()
</span><a href="#local-6989586621684412340"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684412328"><span id="local-6989586621684412330"><span class="annot"><a href="Futhark.IR.TypeCheck.html#Checkable"><span class="hs-identifier hs-type">TC.Checkable</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-62"></span><span>  </span><span id="local-6989586621684412310"><span class="annot"><span class="annottext">checkFParamDec :: VName -&gt; FParamInfo MCMem -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#checkFParamDec"><span class="hs-identifier hs-var hs-var hs-var hs-var">checkFParamDec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; FParamInfo MCMem -&gt; TypeM MCMem ()
forall rep u.
Checkable rep =&gt;
VName -&gt; MemInfo SubExp u MemBind -&gt; TypeM rep ()
</span><a href="Futhark.IR.Mem.html#checkMemInfo"><span class="hs-identifier hs-var">checkMemInfo</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span id="local-6989586621684412306"><span class="annot"><span class="annottext">checkLParamDec :: VName -&gt; LParamInfo MCMem -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#checkLParamDec"><span class="hs-identifier hs-var hs-var hs-var hs-var">checkLParamDec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; LParamInfo MCMem -&gt; TypeM MCMem ()
forall rep u.
Checkable rep =&gt;
VName -&gt; MemInfo SubExp u MemBind -&gt; TypeM rep ()
</span><a href="Futhark.IR.Mem.html#checkMemInfo"><span class="hs-identifier hs-var">checkMemInfo</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span id="local-6989586621684412303"><span class="annot"><span class="annottext">checkLetBoundDec :: VName -&gt; LetDec MCMem -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#checkLetBoundDec"><span class="hs-identifier hs-var hs-var hs-var hs-var">checkLetBoundDec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; LetDec MCMem -&gt; TypeM MCMem ()
forall rep u.
Checkable rep =&gt;
VName -&gt; MemInfo SubExp u MemBind -&gt; TypeM rep ()
</span><a href="Futhark.IR.Mem.html#checkMemInfo"><span class="hs-identifier hs-var">checkMemInfo</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span id="local-6989586621684412292"><span class="annot"><span class="annottext">checkRetType :: [RetType MCMem] -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#checkRetType"><span class="hs-identifier hs-var hs-var hs-var hs-var">checkRetType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RetTypeMem -&gt; TypeM MCMem ()) -&gt; [RetTypeMem] -&gt; TypeM MCMem ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase (ShapeBase (Ext SubExp)) Uniqueness -&gt; TypeM MCMem ()
forall rep u.
Checkable rep =&gt;
TypeBase (ShapeBase (Ext SubExp)) u -&gt; TypeM rep ()
</span><a href="Futhark.IR.TypeCheck.html#checkExtType"><span class="hs-identifier hs-var">TC.checkExtType</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase (ShapeBase (Ext SubExp)) Uniqueness -&gt; TypeM MCMem ())
-&gt; (RetTypeMem -&gt; TypeBase (ShapeBase (Ext SubExp)) Uniqueness)
-&gt; RetTypeMem
-&gt; TypeM MCMem ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RetTypeMem -&gt; TypeBase (ShapeBase (Ext SubExp)) Uniqueness
forall t.
DeclExtTyped t =&gt;
t -&gt; TypeBase (ShapeBase (Ext SubExp)) Uniqueness
</span><a href="Futhark.IR.Prop.Types.html#declExtTypeOf"><span class="hs-identifier hs-var">declExtTypeOf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>  </span><span id="local-6989586621684412284"><span class="annot"><span class="annottext">primFParam :: VName -&gt; PrimType -&gt; TypeM MCMem (FParam (Aliases MCMem))
</span><a href="Futhark.IR.TypeCheck.html#primFParam"><span class="hs-identifier hs-var hs-var hs-var hs-var">primFParam</span></a></span></span><span> </span><span id="local-6989586621684412282"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684412282"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684412281"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684412281"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Param FParamMem -&gt; TypeM MCMem (Param FParamMem)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Param FParamMem -&gt; TypeM MCMem (Param FParamMem))
-&gt; Param FParamMem -&gt; TypeM MCMem (Param FParamMem)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Attrs -&gt; VName -&gt; FParamMem -&gt; Param FParamMem
forall dec. Attrs -&gt; VName -&gt; dec -&gt; Param dec
</span><a href="Futhark.IR.Syntax.Core.html#Param"><span class="hs-identifier hs-var">Param</span></a></span><span> </span><span class="annot"><span class="annottext">Attrs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684412282"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrimType -&gt; FParamMem
forall d u ret. PrimType -&gt; MemInfo d u ret
</span><a href="Futhark.IR.Mem.html#MemPrim"><span class="hs-identifier hs-var">MemPrim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684412281"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621684412267"><span class="annot"><span class="annottext">matchPat :: Pat (Aliases MCMem) -&gt; Exp (Aliases MCMem) -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#matchPat"><span class="hs-identifier hs-var hs-var hs-var hs-var">matchPat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat (Aliases MCMem) -&gt; Exp (Aliases MCMem) -&gt; TypeM MCMem ()
forall rep inner.
(Mem rep inner, LetDec rep ~ LetDecMem, Checkable rep) =&gt;
Pat (Aliases rep) -&gt; Exp (Aliases rep) -&gt; TypeM rep ()
</span><a href="Futhark.IR.Mem.html#matchPatToExp"><span class="hs-identifier hs-var">matchPatToExp</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span id="local-6989586621684412255"><span class="annot"><span class="annottext">matchReturnType :: [RetType MCMem] -&gt; Result -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#matchReturnType"><span class="hs-identifier hs-var hs-var hs-var hs-var">matchReturnType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[RetType MCMem] -&gt; Result -&gt; TypeM MCMem ()
forall rep inner.
(Mem rep inner, Checkable rep) =&gt;
[RetTypeMem] -&gt; Result -&gt; TypeM rep ()
</span><a href="Futhark.IR.Mem.html#matchFunctionReturnType"><span class="hs-identifier hs-var">matchFunctionReturnType</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621684412243"><span class="annot"><span class="annottext">matchBranchType :: [BranchType MCMem] -&gt; Body (Aliases MCMem) -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#matchBranchType"><span class="hs-identifier hs-var hs-var hs-var hs-var">matchBranchType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[BranchType MCMem] -&gt; Body (Aliases MCMem) -&gt; TypeM MCMem ()
forall rep inner.
(Mem rep inner, Checkable rep) =&gt;
[BranchTypeMem] -&gt; Body (Aliases rep) -&gt; TypeM rep ()
</span><a href="Futhark.IR.Mem.html#matchBranchReturnType"><span class="hs-identifier hs-var">matchBranchReturnType</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span id="local-6989586621684412231"><span class="annot"><span class="annottext">matchLoopResult :: [FParam (Aliases MCMem)] -&gt; Result -&gt; TypeM MCMem ()
</span><a href="Futhark.IR.TypeCheck.html#matchLoopResult"><span class="hs-identifier hs-var hs-var hs-var hs-var">matchLoopResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FParam (Aliases MCMem)] -&gt; Result -&gt; TypeM MCMem ()
forall rep inner.
(Mem rep inner, Checkable rep) =&gt;
[FParam (Aliases rep)] -&gt; Result -&gt; TypeM rep ()
</span><a href="Futhark.IR.Mem.html#matchLoopResultMem"><span class="hs-identifier hs-var">matchLoopResultMem</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.Builder.html#BuilderOps"><span class="hs-identifier hs-type">BuilderOps</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-73"></span><span>  </span><span id="local-6989586621684412214"><span class="annot"><span class="annottext">mkExpDecB :: forall (m :: * -&gt; *).
(MonadBuilder m, Rep m ~ MCMem) =&gt;
Pat MCMem -&gt; Exp MCMem -&gt; m (ExpDec MCMem)
</span><a href="Futhark.Builder.html#mkExpDecB"><span class="hs-identifier hs-var hs-var hs-var hs-var">mkExpDecB</span></a></span></span><span> </span><span class="annot"><span class="annottext">Pat MCMem
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Exp MCMem
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>  </span><span id="local-6989586621684412207"><span class="annot"><span class="annottext">mkBodyB :: forall (m :: * -&gt; *).
(MonadBuilder m, Rep m ~ MCMem) =&gt;
Stms MCMem -&gt; Result -&gt; m (Body MCMem)
</span><a href="Futhark.Builder.html#mkBodyB"><span class="hs-identifier hs-var hs-var hs-var hs-var">mkBodyB</span></a></span></span><span> </span><span id="local-6989586621684412205"><span class="annot"><span class="annottext">Stms MCMem
</span><a href="#local-6989586621684412205"><span class="hs-identifier hs-var">stms</span></a></span></span><span> </span><span id="local-6989586621684412204"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621684412204"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Body MCMem -&gt; m (Body MCMem)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Body MCMem -&gt; m (Body MCMem)) -&gt; Body MCMem -&gt; m (Body MCMem)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BodyDec MCMem -&gt; Stms MCMem -&gt; Result -&gt; Body MCMem
forall rep. BodyDec rep -&gt; Stms rep -&gt; Result -&gt; BodyT rep
</span><a href="Futhark.IR.Syntax.html#Body"><span class="hs-identifier hs-var">Body</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Stms MCMem
</span><a href="#local-6989586621684412205"><span class="hs-identifier hs-var">stms</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621684412204"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621684412184"><span class="annot"><span class="annottext">mkLetNamesB :: forall (m :: * -&gt; *).
(MonadBuilder m, Rep m ~ MCMem) =&gt;
[VName] -&gt; Exp MCMem -&gt; m (Stm MCMem)
</span><a href="Futhark.Builder.html#mkLetNamesB"><span class="hs-identifier hs-var hs-var hs-var hs-var">mkLetNamesB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpDec (Rep m) -&gt; [VName] -&gt; Exp (Rep m) -&gt; m (Stm (Rep m))
forall (m :: * -&gt; *) inner.
(LetDec (Rep m) ~ LetDecMem, Mem (Rep m) inner, MonadBuilder m,
 ExpDec (Rep m) ~ ()) =&gt;
ExpDec (Rep m) -&gt; [VName] -&gt; Exp (Rep m) -&gt; m (Stm (Rep m))
</span><a href="Futhark.Pass.ExplicitAllocations.html#mkLetNamesB%27"><span class="hs-identifier hs-var">mkLetNamesB'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.Builder.html#BuilderOps"><span class="hs-identifier hs-type">BuilderOps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Optimise.Simplify.Rep.html#Wise"><span class="hs-identifier hs-type">Engine.Wise</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>  </span><span id="local-6989586621684412170"><span class="annot"><span class="annottext">mkExpDecB :: forall (m :: * -&gt; *).
(MonadBuilder m, Rep m ~ Wise MCMem) =&gt;
Pat (Wise MCMem) -&gt; Exp (Wise MCMem) -&gt; m (ExpDec (Wise MCMem))
</span><a href="#local-6989586621684412170"><span class="hs-identifier hs-var hs-var hs-var hs-var">mkExpDecB</span></a></span></span><span> </span><span id="local-6989586621684412169"><span class="annot"><span class="annottext">Pat (Wise MCMem)
</span><a href="#local-6989586621684412169"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684412168"><span class="annot"><span class="annottext">Exp (Wise MCMem)
</span><a href="#local-6989586621684412168"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ExpWisdom, ()) -&gt; m (ExpWisdom, ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((ExpWisdom, ()) -&gt; m (ExpWisdom, ()))
-&gt; (ExpWisdom, ()) -&gt; m (ExpWisdom, ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pat (Wise MCMem)
-&gt; ExpDec MCMem -&gt; Exp (Wise MCMem) -&gt; ExpDec (Wise MCMem)
forall rep.
(ASTRep rep, CanBeWise (Op rep)) =&gt;
Pat (Wise rep) -&gt; ExpDec rep -&gt; Exp (Wise rep) -&gt; ExpDec (Wise rep)
</span><a href="Futhark.Optimise.Simplify.Rep.html#mkWiseExpDec"><span class="hs-identifier hs-var">Engine.mkWiseExpDec</span></a></span><span> </span><span class="annot"><span class="annottext">Pat (Wise MCMem)
</span><a href="#local-6989586621684412169"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Exp (Wise MCMem)
</span><a href="#local-6989586621684412168"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span id="local-6989586621684412159"><span class="annot"><span class="annottext">mkBodyB :: forall (m :: * -&gt; *).
(MonadBuilder m, Rep m ~ Wise MCMem) =&gt;
Stms (Wise MCMem) -&gt; Result -&gt; m (Body (Wise MCMem))
</span><a href="#local-6989586621684412159"><span class="hs-identifier hs-var hs-var hs-var hs-var">mkBodyB</span></a></span></span><span> </span><span id="local-6989586621684412158"><span class="annot"><span class="annottext">Stms (Wise MCMem)
</span><a href="#local-6989586621684412158"><span class="hs-identifier hs-var">stms</span></a></span></span><span> </span><span id="local-6989586621684412157"><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621684412157"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Body (Wise MCMem) -&gt; m (Body (Wise MCMem))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Body (Wise MCMem) -&gt; m (Body (Wise MCMem)))
-&gt; Body (Wise MCMem) -&gt; m (Body (Wise MCMem))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BodyDec MCMem -&gt; Stms (Wise MCMem) -&gt; Result -&gt; Body (Wise MCMem)
forall rep.
(ASTRep rep, CanBeWise (Op rep)) =&gt;
BodyDec rep -&gt; Stms (Wise rep) -&gt; Result -&gt; Body (Wise rep)
</span><a href="Futhark.Optimise.Simplify.Rep.html#mkWiseBody"><span class="hs-identifier hs-var">Engine.mkWiseBody</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Stms (Wise MCMem)
</span><a href="#local-6989586621684412158"><span class="hs-identifier hs-var">stms</span></a></span><span> </span><span class="annot"><span class="annottext">Result
</span><a href="#local-6989586621684412157"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span id="local-6989586621684412125"><span class="annot"><span class="annottext">mkLetNamesB :: forall (m :: * -&gt; *).
(MonadBuilder m, Rep m ~ Wise MCMem) =&gt;
[VName] -&gt; Exp (Wise MCMem) -&gt; m (Stm (Wise MCMem))
</span><a href="#local-6989586621684412125"><span class="hs-identifier hs-var hs-var hs-var hs-var">mkLetNamesB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; Exp (Wise MCMem) -&gt; m (Stm (Wise MCMem))
forall rep inner (m :: * -&gt; *).
(BuilderOps rep, Mem rep inner, LetDec rep ~ LetDecMem,
 OpReturns (OpWithWisdom inner), ExpDec rep ~ (), Rep m ~ Wise rep,
 HasScope (Wise rep) m, MonadBuilder m, CanBeWise inner) =&gt;
[VName] -&gt; Exp (Wise rep) -&gt; m (Stm (Wise rep))
</span><a href="Futhark.Pass.ExplicitAllocations.html#mkLetNamesB%27%27"><span class="hs-identifier hs-var">mkLetNamesB''</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.IR.Traversals.html#TraverseOpStms"><span class="hs-identifier hs-type">TraverseOpStms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Optimise.Simplify.Rep.html#Wise"><span class="hs-identifier hs-type">Engine.Wise</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-83"></span><span>  </span><span id="local-6989586621684412117"><span class="annot"><span class="annottext">traverseOpStms :: forall (m :: * -&gt; *).
Monad m =&gt;
OpStmsTraverser m (Op (Wise MCMem)) (Wise MCMem)
</span><a href="Futhark.IR.Traversals.html#traverseOpStms"><span class="hs-identifier hs-var hs-var hs-var hs-var">traverseOpStms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OpStmsTraverser m (MCOp (Wise MCMem) ()) (Wise MCMem)
-&gt; OpStmsTraverser m (MemOp (MCOp (Wise MCMem) ())) (Wise MCMem)
forall (m :: * -&gt; *) inner rep.
Monad m =&gt;
OpStmsTraverser m inner rep -&gt; OpStmsTraverser m (MemOp inner) rep
</span><a href="Futhark.IR.Mem.html#traverseMemOpStms"><span class="hs-identifier hs-var">traverseMemOpStms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpStmsTraverser m () (Wise MCMem)
-&gt; OpStmsTraverser m (MCOp (Wise MCMem) ()) (Wise MCMem)
forall (m :: * -&gt; *) op rep.
Monad m =&gt;
OpStmsTraverser m op rep -&gt; OpStmsTraverser m (MCOp rep op) rep
</span><a href="Futhark.IR.MC.Op.html#traverseMCOpStms"><span class="hs-identifier hs-var">traverseMCOpStms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() -&gt; m ()) -&gt; OpStmsTraverser m () (Wise MCMem)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="annot"><a href="Futhark.IR.MCMem.html#simplifyProg"><span class="hs-identifier hs-type">simplifyProg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Pass.html#PassM"><span class="hs-identifier hs-type">PassM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span id="simplifyProg"><span class="annot"><span class="annottext">simplifyProg :: Prog MCMem -&gt; PassM (Prog MCMem)
</span><a href="Futhark.IR.MCMem.html#simplifyProg"><span class="hs-identifier hs-var hs-var">simplifyProg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SimpleOps MCMem -&gt; Prog MCMem -&gt; PassM (Prog MCMem)
forall rep inner.
SimplifyMemory rep inner =&gt;
SimpleOps rep -&gt; Prog rep -&gt; PassM (Prog rep)
</span><a href="Futhark.IR.Mem.Simplify.html#simplifyProgGeneric"><span class="hs-identifier hs-var">simplifyProgGeneric</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleOps MCMem
</span><a href="Futhark.IR.MCMem.html#simpleMCMem"><span class="hs-identifier hs-var">simpleMCMem</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="Futhark.IR.MCMem.html#simpleMCMem"><span class="hs-identifier hs-type">simpleMCMem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.Optimise.Simplify.Engine.html#SimpleOps"><span class="hs-identifier hs-type">Engine.SimpleOps</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span>
</span><span id="line-89"></span><span id="simpleMCMem"><span class="annot"><span class="annottext">simpleMCMem :: SimpleOps MCMem
</span><a href="Futhark.IR.MCMem.html#simpleMCMem"><span class="hs-identifier hs-var hs-var">simpleMCMem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="annottext">(OpWithWisdom (MCOp MCMem ()) -&gt; UsageTable)
-&gt; SimplifyOp MCMem (OpWithWisdom (MCOp MCMem ()))
-&gt; SimpleOps MCMem
forall rep inner.
SimplifyMemory rep inner =&gt;
(OpWithWisdom inner -&gt; UsageTable)
-&gt; SimplifyOp rep (OpWithWisdom inner) -&gt; SimpleOps rep
</span><a href="Futhark.IR.Mem.Simplify.html#simpleGeneric"><span class="hs-identifier hs-var">simpleGeneric</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UsageTable -&gt; MCOp (Wise MCMem) () -&gt; UsageTable
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">UsageTable
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SimplifyOp MCMem (OpWithWisdom (MCOp MCMem ()))
 -&gt; SimpleOps MCMem)
-&gt; SimplifyOp MCMem (OpWithWisdom (MCOp MCMem ()))
-&gt; SimpleOps MCMem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SimplifyOp MCMem ()
-&gt; MCOp (Wise MCMem) ()
-&gt; SimpleM MCMem (MCOp (Wise MCMem) (), Stms (Wise MCMem))
forall rep op.
(SimplifiableRep rep, BodyDec rep ~ ()) =&gt;
SimplifyOp rep op
-&gt; MCOp (Wise rep) op
-&gt; SimpleM rep (MCOp (Wise rep) op, Stms (Wise rep))
</span><a href="Futhark.IR.MC.Op.html#simplifyMCOp"><span class="hs-identifier hs-var">simplifyMCOp</span></a></span><span> </span><span class="annot"><span class="annottext">(SimplifyOp MCMem ()
 -&gt; MCOp (Wise MCMem) ()
 -&gt; SimpleM MCMem (MCOp (Wise MCMem) (), Stms (Wise MCMem)))
-&gt; SimplifyOp MCMem ()
-&gt; MCOp (Wise MCMem) ()
-&gt; SimpleM MCMem (MCOp (Wise MCMem) (), Stms (Wise MCMem))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SimpleM MCMem ((), Stms (Wise MCMem)) -&gt; SimplifyOp MCMem ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(SimpleM MCMem ((), Stms (Wise MCMem)) -&gt; SimplifyOp MCMem ())
-&gt; SimpleM MCMem ((), Stms (Wise MCMem)) -&gt; SimplifyOp MCMem ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((), Stms (Wise MCMem)) -&gt; SimpleM MCMem ((), Stms (Wise MCMem))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Stms (Wise MCMem)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span></pre></body></html>