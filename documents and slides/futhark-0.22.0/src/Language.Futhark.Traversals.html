<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-5"></span><span class="hs-comment">--</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Functions for generic traversals across Futhark syntax trees.  The</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- motivation for this module came from dissatisfaction with rewriting</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- the same trivial tree recursions for every module.  A possible</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- alternative would be to use normal \&quot;Scrap your</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- boilerplate\&quot;-techniques, but these are rejected for two reasons:</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">--    * They are too slow.</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-comment">--    * More importantly, they do not tell you whether you have missed</span><span>
</span><span id="line-15"></span><span class="hs-comment">--      some cases.</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- Instead, this module defines various traversals of the Futhark syntax</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- tree.  The implementation is rather tedious, but the interface is</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- easy to use.</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- A traversal of the Futhark syntax tree is expressed as a record of</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- functions expressing the operations to be performed on the various</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- types of nodes.</span><span>
</span><span id="line-24"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language.Futhark.Traversals</span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMapper"><span class="hs-identifier">ASTMapper</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Language.Futhark.Traversals.html#identityMapper"><span class="hs-identifier">identityMapper</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier">bareExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">where</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html"><span class="hs-identifier">Language.Futhark.Syntax</span></a></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-comment">-- | Express a monad mapping operation on a syntax node.  Each element</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- of this structure expresses the operation to be performed on a</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- given child.</span><span>
</span><span id="line-39"></span><span class="hs-keyword">data</span><span> </span><span id="ASTMapper"><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMapper"><span class="hs-identifier hs-var">ASTMapper</span></a></span></span><span> </span><span id="local-6989586621684520293"><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ASTMapper"><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMapper"><span class="hs-identifier hs-var">ASTMapper</span></a></span></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="mapOnExp"><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span id="mapOnName"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span id="mapOnQualName"><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span id="mapOnStructType"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span id="mapOnPatType"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatType"><span class="hs-identifier hs-type">PatType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatType"><span class="hs-identifier hs-type">PatType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span id="mapOnStructRetType"><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
ASTMapper m -&gt; StructRetType -&gt; m StructRetType
</span><a href="Language.Futhark.Traversals.html#mapOnStructRetType"><span class="hs-identifier hs-var hs-var">mapOnStructRetType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructRetType"><span class="hs-identifier hs-type">StructRetType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructRetType"><span class="hs-identifier hs-type">StructRetType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span id="mapOnPatRetType"><span class="annot"><span class="annottext">forall (m :: * -&gt; *). ASTMapper m -&gt; PatRetType -&gt; m PatRetType
</span><a href="Language.Futhark.Traversals.html#mapOnPatRetType"><span class="hs-identifier hs-var hs-var">mapOnPatRetType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatRetType"><span class="hs-identifier hs-type">PatRetType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520293"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatRetType"><span class="hs-identifier hs-type">PatRetType</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">-- | An 'ASTMapper' that just leaves its input unchanged.</span><span>
</span><span id="line-50"></span><span id="local-6989586621684520276"><span class="annot"><a href="Language.Futhark.Traversals.html#identityMapper"><span class="hs-identifier hs-type">identityMapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621684520276"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMapper"><span class="hs-identifier hs-type">ASTMapper</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520276"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-51"></span><span id="identityMapper"><span class="annot"><span class="annottext">identityMapper :: forall (m :: * -&gt; *). Monad m =&gt; ASTMapper m
</span><a href="Language.Futhark.Traversals.html#identityMapper"><span class="hs-identifier hs-var hs-var">identityMapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><span class="annottext">ASTMapper :: forall (m :: * -&gt; *).
(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; (VName -&gt; m VName)
-&gt; (QualName VName -&gt; m (QualName VName))
-&gt; (StructType -&gt; m StructType)
-&gt; (PatType -&gt; m PatType)
-&gt; (StructRetType -&gt; m StructRetType)
-&gt; (PatRetType -&gt; m PatRetType)
-&gt; ASTMapper m
</span><a href="Language.Futhark.Traversals.html#ASTMapper"><span class="hs-identifier hs-type">ASTMapper</span></a></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mapOnExp :: ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var">mapOnExp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>      </span><span class="annot"><span class="annottext">mapOnName :: VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var">mapOnName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; m VName
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>      </span><span class="annot"><span class="annottext">mapOnQualName :: QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var">mapOnQualName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>      </span><span class="annot"><span class="annottext">mapOnStructType :: StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var">mapOnStructType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StructType -&gt; m StructType
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>      </span><span class="annot"><span class="annottext">mapOnPatType :: PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var">mapOnPatType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatType -&gt; m PatType
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>      </span><span class="annot"><span class="annottext">mapOnStructRetType :: StructRetType -&gt; m StructRetType
</span><a href="Language.Futhark.Traversals.html#mapOnStructRetType"><span class="hs-identifier hs-var">mapOnStructRetType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StructRetType -&gt; m StructRetType
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>      </span><span class="annot"><span class="annottext">mapOnPatRetType :: PatRetType -&gt; m PatRetType
</span><a href="Language.Futhark.Traversals.html#mapOnPatRetType"><span class="hs-identifier hs-var">mapOnPatRetType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatRetType -&gt; m PatRetType
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-comment">-- | The class of things that we can map an 'ASTMapper' across.</span><span>
</span><span id="line-63"></span><span class="hs-keyword">class</span><span> </span><span id="ASTMappable"><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-var">ASTMappable</span></a></span></span><span> </span><span id="local-6989586621684520269"><span class="annot"><a href="#local-6989586621684520269"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-comment">-- | Map a monadic action across the immediate children of an</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-comment">-- object.  Importantly, the 'astMap' action is not invoked for</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-comment">-- the object itself, and the mapping does not descend recursively</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-comment">-- into subexpressions.  The mapping is done left-to-right.</span><span>
</span><span id="line-68"></span><span>  </span><span id="local-6989586621684520272"><span id="astMap"><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-type">astMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621684520272"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMapper"><span class="hs-identifier hs-type">ASTMapper</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520272"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520269"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520272"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520269"><span class="hs-identifier hs-type">x</span></a></span></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExpBase"><span class="hs-identifier hs-type">AppExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621684519919"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; AppExpBase Info VName -&gt; m (AppExpBase Info VName)
</span><a href="#local-6989586621684519919"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519918"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519918"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Range"><span class="hs-identifier hs-type">Range</span></a></span><span> </span><span id="local-6989586621684519916"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519916"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621684519915"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519915"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span id="local-6989586621684519914"><span class="annot"><span class="annottext">Inclusiveness (ExpBase Info VName)
</span><a href="#local-6989586621684519914"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span id="local-6989586621684519913"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519913"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; Maybe (ExpBase Info VName)
-&gt; Inclusiveness (ExpBase Info VName)
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; Maybe (ExpBase f vn)
-&gt; Inclusiveness (ExpBase f vn)
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Range"><span class="hs-identifier hs-var">Range</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; Maybe (ExpBase Info VName)
 -&gt; Inclusiveness (ExpBase Info VName)
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (Maybe (ExpBase Info VName)
      -&gt; Inclusiveness (ExpBase Info VName)
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519918"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519916"><span class="hs-identifier hs-var">start</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe (ExpBase Info VName)
   -&gt; Inclusiveness (ExpBase Info VName)
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (Maybe (ExpBase Info VName))
-&gt; m (Inclusiveness (ExpBase Info VName)
      -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; Maybe (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519918"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519915"><span class="hs-identifier hs-var">next</span></a></span><span>
</span><span id="line-73"></span><span>      </span><span class="annot"><span class="annottext">m (Inclusiveness (ExpBase Info VName)
   -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (Inclusiveness (ExpBase Info VName))
-&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; Inclusiveness (ExpBase Info VName)
-&gt; m (Inclusiveness (ExpBase Info VName))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519918"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Inclusiveness (ExpBase Info VName)
</span><a href="#local-6989586621684519914"><span class="hs-identifier hs-var">end</span></a></span><span>
</span><span id="line-74"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519913"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519910"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519910"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#If"><span class="hs-identifier hs-type">If</span></a></span><span> </span><span id="local-6989586621684519908"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519908"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621684519907"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519907"><span class="hs-identifier hs-var">texp</span></a></span></span><span> </span><span id="local-6989586621684519906"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519906"><span class="hs-identifier hs-var">fexp</span></a></span></span><span> </span><span id="local-6989586621684519905"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519905"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; ExpBase Info VName
-&gt; ExpBase Info VName
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; ExpBase f vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#If"><span class="hs-identifier hs-var">If</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; ExpBase Info VName
 -&gt; ExpBase Info VName
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (ExpBase Info VName
      -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519910"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519908"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519910"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519907"><span class="hs-identifier hs-var">texp</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519910"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519906"><span class="hs-identifier hs-var">fexp</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519905"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519904"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519904"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span id="local-6989586621684519902"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519902"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519901"><span class="annot"><span class="annottext">NonEmpty (CaseBase Info VName)
</span><a href="#local-6989586621684519901"><span class="hs-identifier hs-var">cases</span></a></span></span><span> </span><span id="local-6989586621684519900"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519900"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; NonEmpty (CaseBase Info VName)
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; NonEmpty (CaseBase f vn) -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Match"><span class="hs-identifier hs-var">Match</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; NonEmpty (CaseBase Info VName)
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (NonEmpty (CaseBase Info VName)
      -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519904"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519902"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (NonEmpty (CaseBase Info VName)
   -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (NonEmpty (CaseBase Info VName))
-&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
-&gt; NonEmpty (CaseBase Info VName)
-&gt; m (NonEmpty (CaseBase Info VName))
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519904"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (CaseBase Info VName)
</span><a href="#local-6989586621684519901"><span class="hs-identifier hs-var">cases</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519900"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519899"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519899"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621684519897"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519897"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519896"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519896"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621684519895"><span class="annot"><span class="annottext">Info (Diet, Maybe VName)
</span><a href="#local-6989586621684519895"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621684519894"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519894"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; ExpBase Info VName
-&gt; Info (Diet, Maybe VName)
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; ExpBase f vn
-&gt; f (Diet, Maybe VName)
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; ExpBase Info VName
 -&gt; Info (Diet, Maybe VName)
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (ExpBase Info VName
      -&gt; Info (Diet, Maybe VName) -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519899"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519897"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; Info (Diet, Maybe VName) -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (Info (Diet, Maybe VName) -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519899"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519896"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info (Diet, Maybe VName) -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (Info (Diet, Maybe VName))
-&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Info (Diet, Maybe VName) -&gt; m (Info (Diet, Maybe VName))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Info (Diet, Maybe VName)
</span><a href="#local-6989586621684519895"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519894"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519893"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519893"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LetPat"><span class="hs-identifier hs-type">LetPat</span></a></span><span> </span><span id="local-6989586621684519891"><span class="annot"><span class="annottext">[SizeBinder VName]
</span><a href="#local-6989586621684519891"><span class="hs-identifier hs-var">sizes</span></a></span></span><span> </span><span id="local-6989586621684519890"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684519890"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684519889"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519889"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519888"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519888"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684519887"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519887"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><span class="annottext">[SizeBinder VName]
-&gt; PatBase Info VName
-&gt; ExpBase Info VName
-&gt; ExpBase Info VName
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
[SizeBinder vn]
-&gt; PatBase f vn
-&gt; ExpBase f vn
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#LetPat"><span class="hs-identifier hs-var">LetPat</span></a></span><span> </span><span class="annot"><span class="annottext">([SizeBinder VName]
 -&gt; PatBase Info VName
 -&gt; ExpBase Info VName
 -&gt; ExpBase Info VName
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m [SizeBinder VName]
-&gt; m (PatBase Info VName
      -&gt; ExpBase Info VName
      -&gt; ExpBase Info VName
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; [SizeBinder VName] -&gt; m [SizeBinder VName]
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519893"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">[SizeBinder VName]
</span><a href="#local-6989586621684519891"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="annot"><span class="annottext">m (PatBase Info VName
   -&gt; ExpBase Info VName
   -&gt; ExpBase Info VName
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (PatBase Info VName)
-&gt; m (ExpBase Info VName
      -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519893"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684519890"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519893"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519889"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519893"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519888"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519887"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519886"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LetFun"><span class="hs-identifier hs-type">LetFun</span></a></span><span> </span><span id="local-6989586621684519884"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519884"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519883"><span class="annot"><span class="annottext">[TypeParamBase VName]
</span><a href="#local-6989586621684519883"><span class="hs-identifier hs-var">fparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519882"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684519882"><span class="hs-identifier hs-var">params</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519881"><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684519881"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519880"><span class="annot"><span class="annottext">Info StructRetType
</span><a href="#local-6989586621684519880"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519879"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519879"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519878"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519878"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684519877"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519877"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><span class="annottext">VName
-&gt; ([TypeParamBase VName], [PatBase Info VName],
    Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName)
-&gt; ExpBase Info VName
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
vn
-&gt; ([TypeParamBase vn], [PatBase f vn], Maybe (TypeExp vn),
    f StructRetType, ExpBase f vn)
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#LetFun"><span class="hs-identifier hs-var">LetFun</span></a></span><span> </span><span class="annot"><span class="annottext">(VName
 -&gt; ([TypeParamBase VName], [PatBase Info VName],
     Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName)
 -&gt; ExpBase Info VName
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m VName
-&gt; m (([TypeParamBase VName], [PatBase Info VName],
       Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName)
      -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519884"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-85"></span><span>      </span><span class="annot"><span class="annottext">m (([TypeParamBase VName], [PatBase Info VName],
    Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName)
   -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m ([TypeParamBase VName], [PatBase Info VName],
      Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([TypeParamBase VName]
 -&gt; [PatBase Info VName]
 -&gt; Maybe (TypeExp VName)
 -&gt; Info StructRetType
 -&gt; ExpBase Info VName
 -&gt; ([TypeParamBase VName], [PatBase Info VName],
     Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
-&gt; m [TypeParamBase VName]
-&gt; m ([PatBase Info VName]
      -&gt; Maybe (TypeExp VName)
      -&gt; Info StructRetType
      -&gt; ExpBase Info VName
      -&gt; ([TypeParamBase VName], [PatBase Info VName],
          Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeParamBase VName -&gt; m (TypeParamBase VName))
-&gt; [TypeParamBase VName] -&gt; m [TypeParamBase VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeParamBase VName -&gt; m (TypeParamBase VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeParamBase VName]
</span><a href="#local-6989586621684519883"><span class="hs-identifier hs-var">fparams</span></a></span><span> </span><span class="annot"><span class="annottext">m ([PatBase Info VName]
   -&gt; Maybe (TypeExp VName)
   -&gt; Info StructRetType
   -&gt; ExpBase Info VName
   -&gt; ([TypeParamBase VName], [PatBase Info VName],
       Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
-&gt; m [PatBase Info VName]
-&gt; m (Maybe (TypeExp VName)
      -&gt; Info StructRetType
      -&gt; ExpBase Info VName
      -&gt; ([TypeParamBase VName], [PatBase Info VName],
          Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; m (PatBase Info VName))
-&gt; [PatBase Info VName] -&gt; m [PatBase Info VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684519882"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-86"></span><span>              </span><span class="annot"><span class="annottext">m (Maybe (TypeExp VName)
   -&gt; Info StructRetType
   -&gt; ExpBase Info VName
   -&gt; ([TypeParamBase VName], [PatBase Info VName],
       Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
-&gt; m (Maybe (TypeExp VName))
-&gt; m (Info StructRetType
      -&gt; ExpBase Info VName
      -&gt; ([TypeParamBase VName], [PatBase Info VName],
          Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; m (TypeExp VName))
-&gt; Maybe (TypeExp VName) -&gt; m (Maybe (TypeExp VName))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684519881"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-87"></span><span>              </span><span class="annot"><span class="annottext">m (Info StructRetType
   -&gt; ExpBase Info VName
   -&gt; ([TypeParamBase VName], [PatBase Info VName],
       Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
-&gt; m (Info StructRetType)
-&gt; m (ExpBase Info VName
      -&gt; ([TypeParamBase VName], [PatBase Info VName],
          Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(StructRetType -&gt; m StructRetType)
-&gt; Info StructRetType -&gt; m (Info StructRetType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructRetType -&gt; m StructRetType
forall (m :: * -&gt; *).
ASTMapper m -&gt; StructRetType -&gt; m StructRetType
</span><a href="Language.Futhark.Traversals.html#mapOnStructRetType"><span class="hs-identifier hs-var hs-var">mapOnStructRetType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info StructRetType
</span><a href="#local-6989586621684519880"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-88"></span><span>              </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; ([TypeParamBase VName], [PatBase Info VName],
       Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName))
-&gt; m (ExpBase Info VName)
-&gt; m ([TypeParamBase VName], [PatBase Info VName],
      Maybe (TypeExp VName), Info StructRetType, ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519879"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-89"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519886"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519878"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-91"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519877"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519875"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519875"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LetWith"><span class="hs-identifier hs-type">LetWith</span></a></span><span> </span><span id="local-6989586621684519873"><span class="annot"><span class="annottext">IdentBase Info VName
</span><a href="#local-6989586621684519873"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span id="local-6989586621684519872"><span class="annot"><span class="annottext">IdentBase Info VName
</span><a href="#local-6989586621684519872"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684519871"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519871"><span class="hs-identifier hs-var">idxexps</span></a></span></span><span> </span><span id="local-6989586621684519870"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519870"><span class="hs-identifier hs-var">vexp</span></a></span></span><span> </span><span id="local-6989586621684519869"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519869"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684519868"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519868"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><span class="annottext">IdentBase Info VName
-&gt; IdentBase Info VName
-&gt; SliceBase Info VName
-&gt; ExpBase Info VName
-&gt; ExpBase Info VName
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
IdentBase f vn
-&gt; IdentBase f vn
-&gt; SliceBase f vn
-&gt; ExpBase f vn
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#LetWith"><span class="hs-identifier hs-var">LetWith</span></a></span><span>
</span><span id="line-94"></span><span>      </span><span class="annot"><span class="annottext">(IdentBase Info VName
 -&gt; IdentBase Info VName
 -&gt; SliceBase Info VName
 -&gt; ExpBase Info VName
 -&gt; ExpBase Info VName
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m (IdentBase Info VName)
-&gt; m (IdentBase Info VName
      -&gt; SliceBase Info VName
      -&gt; ExpBase Info VName
      -&gt; ExpBase Info VName
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; IdentBase Info VName -&gt; m (IdentBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519875"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">IdentBase Info VName
</span><a href="#local-6989586621684519873"><span class="hs-identifier hs-var">dest</span></a></span><span>
</span><span id="line-95"></span><span>      </span><span class="annot"><span class="annottext">m (IdentBase Info VName
   -&gt; SliceBase Info VName
   -&gt; ExpBase Info VName
   -&gt; ExpBase Info VName
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (IdentBase Info VName)
-&gt; m (SliceBase Info VName
      -&gt; ExpBase Info VName
      -&gt; ExpBase Info VName
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; IdentBase Info VName -&gt; m (IdentBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519875"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">IdentBase Info VName
</span><a href="#local-6989586621684519872"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span class="annot"><span class="annottext">m (SliceBase Info VName
   -&gt; ExpBase Info VName
   -&gt; ExpBase Info VName
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (SliceBase Info VName)
-&gt; m (ExpBase Info VName
      -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; m (DimIndexBase Info VName))
-&gt; SliceBase Info VName -&gt; m (SliceBase Info VName)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m
-&gt; DimIndexBase Info VName -&gt; m (DimIndexBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519875"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519871"><span class="hs-identifier hs-var">idxexps</span></a></span><span>
</span><span id="line-97"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519875"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519870"><span class="hs-identifier hs-var">vexp</span></a></span><span>
</span><span id="line-98"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519875"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519869"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-99"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519868"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519867"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519867"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Coerce"><span class="hs-identifier hs-type">Coerce</span></a></span><span> </span><span id="local-6989586621684519865"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519865"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519864"><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684519864"><span class="hs-identifier hs-var">tdecl</span></a></span></span><span> </span><span id="local-6989586621684519863"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519863"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; TypeDeclBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; TypeDeclBase f vn -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Coerce"><span class="hs-identifier hs-var">Coerce</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; TypeDeclBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (TypeDeclBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519867"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519865"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (TypeDeclBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (TypeDeclBase Info VName)
-&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
-&gt; TypeDeclBase Info VName -&gt; m (TypeDeclBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519867"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684519864"><span class="hs-identifier hs-var">tdecl</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519863"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519862"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519862"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-type">BinOp</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519860"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519860"><span class="hs-identifier hs-var">fname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519859"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519859"><span class="hs-identifier hs-var">fname_loc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519858"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519858"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519857"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519857"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519855"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519855"><span class="hs-identifier hs-var">xt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519854"><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519854"><span class="hs-identifier hs-var">xext</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519853"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519853"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519852"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519852"><span class="hs-identifier hs-var">yt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519851"><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519851"><span class="hs-identifier hs-var">yext</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519850"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519850"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
-&gt; Info PatType
-&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
-&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
(QualName vn, SrcLoc)
-&gt; f PatType
-&gt; (ExpBase f vn, f (StructType, Maybe VName))
-&gt; (ExpBase f vn, f (StructType, Maybe VName))
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-var">BinOp</span></a></span><span> </span><span class="annot"><span class="annottext">((QualName VName, SrcLoc)
 -&gt; Info PatType
 -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
 -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m (QualName VName, SrcLoc)
-&gt; m (Info PatType
      -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
      -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; SrcLoc -&gt; (QualName VName, SrcLoc))
-&gt; m (QualName VName) -&gt; m (SrcLoc -&gt; (QualName VName, SrcLoc))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519862"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519860"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; (QualName VName, SrcLoc))
-&gt; m SrcLoc -&gt; m (QualName VName, SrcLoc)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519859"><span class="hs-identifier hs-var">fname_loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatType
   -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
   -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (Info PatType)
-&gt; m ((ExpBase Info VName, Info (StructType, Maybe VName))
      -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519862"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519858"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-105"></span><span>      </span><span class="annot"><span class="annottext">m ((ExpBase Info VName, Info (StructType, Maybe VName))
   -&gt; (ExpBase Info VName, Info (StructType, Maybe VName))
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName, Info (StructType, Maybe VName))
-&gt; m ((ExpBase Info VName, Info (StructType, Maybe VName))
      -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; Info (StructType, Maybe VName)
 -&gt; (ExpBase Info VName, Info (StructType, Maybe VName)))
-&gt; m (ExpBase Info VName)
-&gt; m (Info (StructType, Maybe VName)
      -&gt; (ExpBase Info VName, Info (StructType, Maybe VName)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519862"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519857"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-106"></span><span>              </span><span class="annot"><span class="annottext">m (Info (StructType, Maybe VName)
   -&gt; (ExpBase Info VName, Info (StructType, Maybe VName)))
-&gt; m (Info (StructType, Maybe VName))
-&gt; m (ExpBase Info VName, Info (StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StructType, Maybe VName) -&gt; Info (StructType, Maybe VName)
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">((StructType, Maybe VName) -&gt; Info (StructType, Maybe VName))
-&gt; m (StructType, Maybe VName)
-&gt; m (Info (StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; Maybe VName -&gt; (StructType, Maybe VName))
-&gt; m StructType -&gt; m (Maybe VName -&gt; (StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519862"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519855"><span class="hs-identifier hs-var">xt</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe VName -&gt; (StructType, Maybe VName))
-&gt; m (Maybe VName) -&gt; m (StructType, Maybe VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName -&gt; m (Maybe VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519854"><span class="hs-identifier hs-var">xext</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>      </span><span class="annot"><span class="annottext">m ((ExpBase Info VName, Info (StructType, Maybe VName))
   -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName, Info (StructType, Maybe VName))
-&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; Info (StructType, Maybe VName)
 -&gt; (ExpBase Info VName, Info (StructType, Maybe VName)))
-&gt; m (ExpBase Info VName)
-&gt; m (Info (StructType, Maybe VName)
      -&gt; (ExpBase Info VName, Info (StructType, Maybe VName)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519862"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519853"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-109"></span><span>              </span><span class="annot"><span class="annottext">m (Info (StructType, Maybe VName)
   -&gt; (ExpBase Info VName, Info (StructType, Maybe VName)))
-&gt; m (Info (StructType, Maybe VName))
-&gt; m (ExpBase Info VName, Info (StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StructType, Maybe VName) -&gt; Info (StructType, Maybe VName)
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">((StructType, Maybe VName) -&gt; Info (StructType, Maybe VName))
-&gt; m (StructType, Maybe VName)
-&gt; m (Info (StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; Maybe VName -&gt; (StructType, Maybe VName))
-&gt; m StructType -&gt; m (Maybe VName -&gt; (StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519862"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519852"><span class="hs-identifier hs-var">yt</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe VName -&gt; (StructType, Maybe VName))
-&gt; m (Maybe VName) -&gt; m (StructType, Maybe VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName -&gt; m (Maybe VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519851"><span class="hs-identifier hs-var">yext</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519850"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519849"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519849"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DoLoop"><span class="hs-identifier hs-type">DoLoop</span></a></span><span> </span><span id="local-6989586621684519847"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519847"><span class="hs-identifier hs-var">sparams</span></a></span></span><span> </span><span id="local-6989586621684519846"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684519846"><span class="hs-identifier hs-var">mergepat</span></a></span></span><span> </span><span id="local-6989586621684519845"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519845"><span class="hs-identifier hs-var">mergeexp</span></a></span></span><span> </span><span id="local-6989586621684519844"><span class="annot"><span class="annottext">LoopFormBase Info VName
</span><a href="#local-6989586621684519844"><span class="hs-identifier hs-var">form</span></a></span></span><span> </span><span id="local-6989586621684519843"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519843"><span class="hs-identifier hs-var">loopbody</span></a></span></span><span> </span><span id="local-6989586621684519842"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519842"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="annottext">[VName]
-&gt; PatBase Info VName
-&gt; ExpBase Info VName
-&gt; LoopFormBase Info VName
-&gt; ExpBase Info VName
-&gt; SrcLoc
-&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
[VName]
-&gt; PatBase f vn
-&gt; ExpBase f vn
-&gt; LoopFormBase f vn
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#DoLoop"><span class="hs-identifier hs-var">DoLoop</span></a></span><span> </span><span class="annot"><span class="annottext">([VName]
 -&gt; PatBase Info VName
 -&gt; ExpBase Info VName
 -&gt; LoopFormBase Info VName
 -&gt; ExpBase Info VName
 -&gt; SrcLoc
 -&gt; AppExpBase Info VName)
-&gt; m [VName]
-&gt; m (PatBase Info VName
      -&gt; ExpBase Info VName
      -&gt; LoopFormBase Info VName
      -&gt; ExpBase Info VName
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; m VName) -&gt; [VName] -&gt; m [VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519849"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519847"><span class="hs-identifier hs-var">sparams</span></a></span><span> </span><span class="annot"><span class="annottext">m (PatBase Info VName
   -&gt; ExpBase Info VName
   -&gt; LoopFormBase Info VName
   -&gt; ExpBase Info VName
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (PatBase Info VName)
-&gt; m (ExpBase Info VName
      -&gt; LoopFormBase Info VName
      -&gt; ExpBase Info VName
      -&gt; SrcLoc
      -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519849"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684519846"><span class="hs-identifier hs-var">mergepat</span></a></span><span>
</span><span id="line-114"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; LoopFormBase Info VName
   -&gt; ExpBase Info VName
   -&gt; SrcLoc
   -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (LoopFormBase Info VName
      -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519849"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519845"><span class="hs-identifier hs-var">mergeexp</span></a></span><span>
</span><span id="line-115"></span><span>      </span><span class="annot"><span class="annottext">m (LoopFormBase Info VName
   -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (LoopFormBase Info VName)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
-&gt; LoopFormBase Info VName -&gt; m (LoopFormBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519849"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">LoopFormBase Info VName
</span><a href="#local-6989586621684519844"><span class="hs-identifier hs-var">form</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519849"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519843"><span class="hs-identifier hs-var">loopbody</span></a></span><span>
</span><span id="line-117"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519842"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519841"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519841"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621684519839"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519839"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span id="local-6989586621684519838"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519838"><span class="hs-identifier hs-var">idxexps</span></a></span></span><span> </span><span id="local-6989586621684519837"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519837"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; SliceBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; SliceBase f vn -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; SliceBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (SliceBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519841"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519839"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">m (SliceBase Info VName -&gt; SrcLoc -&gt; AppExpBase Info VName)
-&gt; m (SliceBase Info VName) -&gt; m (SrcLoc -&gt; AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; m (DimIndexBase Info VName))
-&gt; SliceBase Info VName -&gt; m (SliceBase Info VName)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m
-&gt; DimIndexBase Info VName -&gt; m (DimIndexBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519841"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519838"><span class="hs-identifier hs-var">idxexps</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; AppExpBase Info VName)
-&gt; m SrcLoc -&gt; m (AppExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519837"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621684519638"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="#local-6989586621684519638"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519637"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519637"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621684519635"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519635"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684519634"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519634"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519633"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519633"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">QualName VName -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
QualName vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (QualName VName)
-&gt; m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519637"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519635"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519637"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519634"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519633"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span id="local-6989586621684519631"><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684519631"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621684519630"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519630"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimValue -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn. PrimValue -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Literal"><span class="hs-identifier hs-var">Literal</span></a></span><span> </span><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684519631"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519630"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#StringLit"><span class="hs-identifier hs-type">StringLit</span></a></span><span> </span><span id="local-6989586621684519628"><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684519628"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621684519627"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519627"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Word8] -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn. [Word8] -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#StringLit"><span class="hs-identifier hs-var">StringLit</span></a></span><span> </span><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684519628"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519627"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519626"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519626"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IntLit"><span class="hs-identifier hs-type">IntLit</span></a></span><span> </span><span id="local-6989586621684519624"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684519624"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621684519623"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519623"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519622"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519622"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><span class="annottext">Integer -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
Integer -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684519624"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">(Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519626"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519623"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519622"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519621"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519621"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FloatLit"><span class="hs-identifier hs-type">FloatLit</span></a></span><span> </span><span id="local-6989586621684519619"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684519619"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621684519618"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519618"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519617"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519617"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><span class="annottext">Double -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
Double -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#FloatLit"><span class="hs-identifier hs-var">FloatLit</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684519619"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">(Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519621"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519618"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519617"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519616"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519616"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Parens"><span class="hs-identifier hs-type">Parens</span></a></span><span> </span><span id="local-6989586621684519614"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519614"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519613"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519613"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Parens"><span class="hs-identifier hs-var">Parens</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519616"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519614"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519613"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-135"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519612"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519612"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualParens"><span class="hs-identifier hs-type">QualParens</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519610"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519610"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519609"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519609"><span class="hs-identifier hs-var">nameloc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519608"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519608"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519607"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519607"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-136"></span><span>    </span><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
-&gt; ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
(QualName vn, SrcLoc) -&gt; ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#QualParens"><span class="hs-identifier hs-var">QualParens</span></a></span><span> </span><span class="annot"><span class="annottext">((QualName VName, SrcLoc)
 -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (QualName VName, SrcLoc)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; SrcLoc -&gt; (QualName VName, SrcLoc))
-&gt; m (QualName VName) -&gt; m (SrcLoc -&gt; (QualName VName, SrcLoc))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519612"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519610"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; (QualName VName, SrcLoc))
-&gt; m SrcLoc -&gt; m (QualName VName, SrcLoc)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519609"><span class="hs-identifier hs-var">nameloc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519612"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519608"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-138"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519607"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519606"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519606"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TupLit"><span class="hs-identifier hs-type">TupLit</span></a></span><span> </span><span id="local-6989586621684519604"><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684519604"><span class="hs-identifier hs-var">els</span></a></span></span><span> </span><span id="local-6989586621684519603"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519603"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><span class="annottext">[ExpBase Info VName] -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn. [ExpBase f vn] -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#TupLit"><span class="hs-identifier hs-var">TupLit</span></a></span><span> </span><span class="annot"><span class="annottext">([ExpBase Info VName] -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m [ExpBase Info VName] -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; [ExpBase Info VName] -&gt; m [ExpBase Info VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519606"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684519604"><span class="hs-identifier hs-var">els</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519603"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519602"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519602"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordLit"><span class="hs-identifier hs-type">RecordLit</span></a></span><span> </span><span id="local-6989586621684519600"><span class="annot"><span class="annottext">[FieldBase Info VName]
</span><a href="#local-6989586621684519600"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621684519599"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519599"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><span class="annottext">[FieldBase Info VName] -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn. [FieldBase f vn] -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordLit"><span class="hs-identifier hs-var">RecordLit</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldBase Info VName] -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m [FieldBase Info VName] -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; [FieldBase Info VName] -&gt; m [FieldBase Info VName]
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519602"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldBase Info VName]
</span><a href="#local-6989586621684519600"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519599"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-143"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519598"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519598"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-type">ArrayLit</span></a></span><span> </span><span id="local-6989586621684519596"><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684519596"><span class="hs-identifier hs-var">els</span></a></span></span><span> </span><span id="local-6989586621684519595"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519595"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519594"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519594"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><span class="annottext">[ExpBase Info VName]
-&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
[ExpBase f vn] -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-var">ArrayLit</span></a></span><span> </span><span class="annot"><span class="annottext">([ExpBase Info VName]
 -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m [ExpBase Info VName]
-&gt; m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; [ExpBase Info VName] -&gt; m [ExpBase Info VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519598"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684519596"><span class="hs-identifier hs-var">els</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519598"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519595"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519594"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519593"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519593"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ascript"><span class="hs-identifier hs-type">Ascript</span></a></span><span> </span><span id="local-6989586621684519591"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519591"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519590"><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684519590"><span class="hs-identifier hs-var">tdecl</span></a></span></span><span> </span><span id="local-6989586621684519589"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519589"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; TypeDeclBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; TypeDeclBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Ascript"><span class="hs-identifier hs-var">Ascript</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; TypeDeclBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (TypeDeclBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519593"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519591"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (TypeDeclBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (TypeDeclBase Info VName) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
-&gt; TypeDeclBase Info VName -&gt; m (TypeDeclBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519593"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684519590"><span class="hs-identifier hs-var">tdecl</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519589"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519588"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519588"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Negate"><span class="hs-identifier hs-type">Negate</span></a></span><span> </span><span id="local-6989586621684519586"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519586"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684519585"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519585"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Negate"><span class="hs-identifier hs-var">Negate</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519588"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519586"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519585"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519584"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519584"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Not"><span class="hs-identifier hs-type">Not</span></a></span><span> </span><span id="local-6989586621684519582"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519582"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684519581"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519581"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Not"><span class="hs-identifier hs-var">Not</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519584"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519582"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519581"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519580"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519580"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Update"><span class="hs-identifier hs-type">Update</span></a></span><span> </span><span id="local-6989586621684519578"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519578"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684519577"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519577"><span class="hs-identifier hs-var">slice</span></a></span></span><span> </span><span id="local-6989586621684519576"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519576"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684519575"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519575"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; SliceBase Info VName
-&gt; ExpBase Info VName
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; SliceBase f vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Update"><span class="hs-identifier hs-var">Update</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; SliceBase Info VName
 -&gt; ExpBase Info VName
 -&gt; SrcLoc
 -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (SliceBase Info VName
      -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519580"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519578"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">m (SliceBase Info VName
   -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (SliceBase Info VName)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; m (DimIndexBase Info VName))
-&gt; SliceBase Info VName -&gt; m (SliceBase Info VName)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m
-&gt; DimIndexBase Info VName -&gt; m (DimIndexBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519580"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519577"><span class="hs-identifier hs-var">slice</span></a></span><span>
</span><span id="line-153"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519580"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519576"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-154"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519575"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519574"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519574"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordUpdate"><span class="hs-identifier hs-type">RecordUpdate</span></a></span><span> </span><span id="local-6989586621684519572"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519572"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684519571"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684519571"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621684519570"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519570"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684519569"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519569"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519568"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519568"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; [Name]
-&gt; ExpBase Info VName
-&gt; Info PatType
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; [Name] -&gt; ExpBase f vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordUpdate"><span class="hs-identifier hs-var">RecordUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; [Name]
 -&gt; ExpBase Info VName
 -&gt; Info PatType
 -&gt; SrcLoc
 -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m ([Name]
      -&gt; ExpBase Info VName
      -&gt; Info PatType
      -&gt; SrcLoc
      -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519574"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519572"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">m ([Name]
   -&gt; ExpBase Info VName
   -&gt; Info PatType
   -&gt; SrcLoc
   -&gt; ExpBase Info VName)
-&gt; m [Name]
-&gt; m (ExpBase Info VName
      -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; m [Name]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684519571"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-157"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519574"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519570"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-158"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatType -&gt; Info PatType
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Info PatType) -&gt; m PatType -&gt; m (Info PatType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519574"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519569"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519568"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519567"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519567"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Project"><span class="hs-identifier hs-type">Project</span></a></span><span> </span><span id="local-6989586621684519565"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684519565"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span id="local-6989586621684519564"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519564"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519563"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519563"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519562"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519562"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; ExpBase Info VName
-&gt; Info PatType
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
Name -&gt; ExpBase f vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Project"><span class="hs-identifier hs-var">Project</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684519565"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519567"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519564"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519567"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519563"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519562"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519561"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519561"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Assert"><span class="hs-identifier hs-type">Assert</span></a></span><span> </span><span id="local-6989586621684519559"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519559"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621684519558"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519558"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621684519557"><span class="annot"><span class="annottext">Info String
</span><a href="#local-6989586621684519557"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621684519556"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519556"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><span class="annottext">ExpBase Info VName
-&gt; ExpBase Info VName
-&gt; Info String
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; ExpBase f vn -&gt; f String -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Assert"><span class="hs-identifier hs-var">Assert</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName
 -&gt; ExpBase Info VName
 -&gt; Info String
 -&gt; SrcLoc
 -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (ExpBase Info VName
      -&gt; Info String -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519561"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519559"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; Info String -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (Info String -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519561"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519558"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info String -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info String) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Info String -&gt; m (Info String)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Info String
</span><a href="#local-6989586621684519557"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519556"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519555"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519555"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span id="local-6989586621684519553"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684519553"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621684519552"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519552"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684519551"><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684519551"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span id="local-6989586621684519550"><span class="annot"><span class="annottext">Info (Aliasing, StructRetType)
</span><a href="#local-6989586621684519550"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519549"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519549"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">[PatBase Info VName]
-&gt; ExpBase Info VName
-&gt; Maybe (TypeExp VName)
-&gt; Info (Aliasing, StructRetType)
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
[PatBase f vn]
-&gt; ExpBase f vn
-&gt; Maybe (TypeExp vn)
-&gt; f (Aliasing, StructRetType)
-&gt; SrcLoc
-&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Lambda"><span class="hs-identifier hs-var">Lambda</span></a></span><span> </span><span class="annot"><span class="annottext">([PatBase Info VName]
 -&gt; ExpBase Info VName
 -&gt; Maybe (TypeExp VName)
 -&gt; Info (Aliasing, StructRetType)
 -&gt; SrcLoc
 -&gt; ExpBase Info VName)
-&gt; m [PatBase Info VName]
-&gt; m (ExpBase Info VName
      -&gt; Maybe (TypeExp VName)
      -&gt; Info (Aliasing, StructRetType)
      -&gt; SrcLoc
      -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; m (PatBase Info VName))
-&gt; [PatBase Info VName] -&gt; m [PatBase Info VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519555"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684519553"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-166"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; Maybe (TypeExp VName)
   -&gt; Info (Aliasing, StructRetType)
   -&gt; SrcLoc
   -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m (Maybe (TypeExp VName)
      -&gt; Info (Aliasing, StructRetType) -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519555"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519552"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-167"></span><span>      </span><span class="annot"><span class="annottext">m (Maybe (TypeExp VName)
   -&gt; Info (Aliasing, StructRetType) -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Maybe (TypeExp VName))
-&gt; m (Info (Aliasing, StructRetType)
      -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; m (TypeExp VName))
-&gt; Maybe (TypeExp VName) -&gt; m (Maybe (TypeExp VName))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519555"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684519551"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span class="annot"><span class="annottext">m (Info (Aliasing, StructRetType) -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info (Aliasing, StructRetType))
-&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Aliasing, StructRetType) -&gt; m (Aliasing, StructRetType))
-&gt; Info (Aliasing, StructRetType)
-&gt; m (Info (Aliasing, StructRetType))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StructRetType -&gt; m StructRetType)
-&gt; (Aliasing, StructRetType) -&gt; m (Aliasing, StructRetType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((StructRetType -&gt; m StructRetType)
 -&gt; (Aliasing, StructRetType) -&gt; m (Aliasing, StructRetType))
-&gt; (StructRetType -&gt; m StructRetType)
-&gt; (Aliasing, StructRetType)
-&gt; m (Aliasing, StructRetType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructRetType -&gt; m StructRetType
forall (m :: * -&gt; *).
ASTMapper m -&gt; StructRetType -&gt; m StructRetType
</span><a href="Language.Futhark.Traversals.html#mapOnStructRetType"><span class="hs-identifier hs-var hs-var">mapOnStructRetType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519555"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info (Aliasing, StructRetType)
</span><a href="#local-6989586621684519550"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-169"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519549"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519548"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519548"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSection"><span class="hs-identifier hs-type">OpSection</span></a></span><span> </span><span id="local-6989586621684519546"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519546"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684519545"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519545"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519544"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519544"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><span class="annottext">QualName VName -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
QualName vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#OpSection"><span class="hs-identifier hs-var">OpSection</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (QualName VName)
-&gt; m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519548"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519546"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-172"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519548"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519545"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-173"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519544"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519543"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionLeft"><span class="hs-identifier hs-type">OpSectionLeft</span></a></span><span> </span><span id="local-6989586621684519541"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519541"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684519540"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519540"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519539"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519539"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519538"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519538"><span class="hs-identifier hs-var">pa</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519537"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519537"><span class="hs-identifier hs-var">t1a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519536"><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519536"><span class="hs-identifier hs-var">argext</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519535"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519535"><span class="hs-identifier hs-var">pb</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519534"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519534"><span class="hs-identifier hs-var">t1b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519533"><span class="annot"><span class="annottext">Info PatRetType
</span><a href="#local-6989586621684519533"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519532"><span class="annot"><span class="annottext">Info [VName]
</span><a href="#local-6989586621684519532"><span class="hs-identifier hs-var">retext</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519531"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519531"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-175"></span><span>    </span><span class="annot"><span class="annottext">QualName VName
-&gt; Info PatType
-&gt; ExpBase Info VName
-&gt; (Info (PName, StructType, Maybe VName),
    Info (PName, StructType))
-&gt; (Info PatRetType, Info [VName])
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
QualName vn
-&gt; f PatType
-&gt; ExpBase f vn
-&gt; (f (PName, StructType, Maybe VName), f (PName, StructType))
-&gt; (f PatRetType, f [VName])
-&gt; SrcLoc
-&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#OpSectionLeft"><span class="hs-identifier hs-var">OpSectionLeft</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName
 -&gt; Info PatType
 -&gt; ExpBase Info VName
 -&gt; (Info (PName, StructType, Maybe VName),
     Info (PName, StructType))
 -&gt; (Info PatRetType, Info [VName])
 -&gt; SrcLoc
 -&gt; ExpBase Info VName)
-&gt; m (QualName VName)
-&gt; m (Info PatType
      -&gt; ExpBase Info VName
      -&gt; (Info (PName, StructType, Maybe VName),
          Info (PName, StructType))
      -&gt; (Info PatRetType, Info [VName])
      -&gt; SrcLoc
      -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519541"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatType
   -&gt; ExpBase Info VName
   -&gt; (Info (PName, StructType, Maybe VName),
       Info (PName, StructType))
   -&gt; (Info PatRetType, Info [VName])
   -&gt; SrcLoc
   -&gt; ExpBase Info VName)
-&gt; m (Info PatType)
-&gt; m (ExpBase Info VName
      -&gt; (Info (PName, StructType, Maybe VName),
          Info (PName, StructType))
      -&gt; (Info PatRetType, Info [VName])
      -&gt; SrcLoc
      -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519540"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; (Info (PName, StructType, Maybe VName),
       Info (PName, StructType))
   -&gt; (Info PatRetType, Info [VName])
   -&gt; SrcLoc
   -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m ((Info (PName, StructType, Maybe VName),
       Info (PName, StructType))
      -&gt; (Info PatRetType, Info [VName]) -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519539"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-178"></span><span>      </span><span class="annot"><span class="annottext">m ((Info (PName, StructType, Maybe VName),
    Info (PName, StructType))
   -&gt; (Info PatRetType, Info [VName]) -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info (PName, StructType, Maybe VName),
      Info (PName, StructType))
-&gt; m ((Info PatRetType, Info [VName])
      -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>              </span><span class="annot"><span class="annottext">(Info (PName, StructType, Maybe VName)
 -&gt; Info (PName, StructType)
 -&gt; (Info (PName, StructType, Maybe VName),
     Info (PName, StructType)))
-&gt; m (Info (PName, StructType, Maybe VName))
-&gt; m (Info (PName, StructType)
      -&gt; (Info (PName, StructType, Maybe VName),
          Info (PName, StructType)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PName, StructType, Maybe VName)
-&gt; Info (PName, StructType, Maybe VName)
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">((PName, StructType, Maybe VName)
 -&gt; Info (PName, StructType, Maybe VName))
-&gt; m (PName, StructType, Maybe VName)
-&gt; m (Info (PName, StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519538"><span class="hs-identifier hs-var">pa</span></a></span><span class="hs-special">,</span><span class="annot"><span class="hs-special">,</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; Maybe VName -&gt; (PName, StructType, Maybe VName))
-&gt; m StructType
-&gt; m (Maybe VName -&gt; (PName, StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519537"><span class="hs-identifier hs-var">t1a</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe VName -&gt; (PName, StructType, Maybe VName))
-&gt; m (Maybe VName) -&gt; m (PName, StructType, Maybe VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName -&gt; m (Maybe VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519536"><span class="hs-identifier hs-var">argext</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>              </span><span class="annot"><span class="annottext">m (Info (PName, StructType)
   -&gt; (Info (PName, StructType, Maybe VName),
       Info (PName, StructType)))
-&gt; m (Info (PName, StructType))
-&gt; m (Info (PName, StructType, Maybe VName),
      Info (PName, StructType))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PName, StructType) -&gt; Info (PName, StructType)
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">((PName, StructType) -&gt; Info (PName, StructType))
-&gt; m (PName, StructType) -&gt; m (Info (PName, StructType))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519535"><span class="hs-identifier hs-var">pb</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; (PName, StructType))
-&gt; m StructType -&gt; m (PName, StructType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519534"><span class="hs-identifier hs-var">t1b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>      </span><span class="annot"><span class="annottext">m ((Info PatRetType, Info [VName]) -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatRetType, Info [VName])
-&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Info PatRetType
 -&gt; Info [VName] -&gt; (Info PatRetType, Info [VName]))
-&gt; m (Info PatRetType)
-&gt; m (Info [VName] -&gt; (Info PatRetType, Info [VName]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatRetType -&gt; m PatRetType)
-&gt; Info PatRetType -&gt; m (Info PatRetType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatRetType -&gt; m PatRetType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatRetType -&gt; m PatRetType
</span><a href="Language.Futhark.Traversals.html#mapOnPatRetType"><span class="hs-identifier hs-var hs-var">mapOnPatRetType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatRetType
</span><a href="#local-6989586621684519533"><span class="hs-identifier hs-var">ret</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info [VName] -&gt; (Info PatRetType, Info [VName]))
-&gt; m (Info [VName]) -&gt; m (Info PatRetType, Info [VName])
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">([VName] -&gt; m [VName]) -&gt; Info [VName] -&gt; m (Info [VName])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VName -&gt; m VName) -&gt; [VName] -&gt; m [VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519543"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info [VName]
</span><a href="#local-6989586621684519532"><span class="hs-identifier hs-var">retext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519531"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519530"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519530"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionRight"><span class="hs-identifier hs-type">OpSectionRight</span></a></span><span> </span><span id="local-6989586621684519528"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519528"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684519527"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519527"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519526"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519526"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519525"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519525"><span class="hs-identifier hs-var">pa</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519524"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519524"><span class="hs-identifier hs-var">t1a</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684519523"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519523"><span class="hs-identifier hs-var">pb</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519522"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519522"><span class="hs-identifier hs-var">t1b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684519521"><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519521"><span class="hs-identifier hs-var">argext</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519520"><span class="annot"><span class="annottext">Info PatRetType
</span><a href="#local-6989586621684519520"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span id="local-6989586621684519519"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519519"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="annottext">QualName VName
-&gt; Info PatType
-&gt; ExpBase Info VName
-&gt; (Info (PName, StructType),
    Info (PName, StructType, Maybe VName))
-&gt; Info PatRetType
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
QualName vn
-&gt; f PatType
-&gt; ExpBase f vn
-&gt; (f (PName, StructType), f (PName, StructType, Maybe VName))
-&gt; f PatRetType
-&gt; SrcLoc
-&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#OpSectionRight"><span class="hs-identifier hs-var">OpSectionRight</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName
 -&gt; Info PatType
 -&gt; ExpBase Info VName
 -&gt; (Info (PName, StructType),
     Info (PName, StructType, Maybe VName))
 -&gt; Info PatRetType
 -&gt; SrcLoc
 -&gt; ExpBase Info VName)
-&gt; m (QualName VName)
-&gt; m (Info PatType
      -&gt; ExpBase Info VName
      -&gt; (Info (PName, StructType),
          Info (PName, StructType, Maybe VName))
      -&gt; Info PatRetType
      -&gt; SrcLoc
      -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519530"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519528"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-186"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatType
   -&gt; ExpBase Info VName
   -&gt; (Info (PName, StructType),
       Info (PName, StructType, Maybe VName))
   -&gt; Info PatRetType
   -&gt; SrcLoc
   -&gt; ExpBase Info VName)
-&gt; m (Info PatType)
-&gt; m (ExpBase Info VName
      -&gt; (Info (PName, StructType),
          Info (PName, StructType, Maybe VName))
      -&gt; Info PatRetType
      -&gt; SrcLoc
      -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519530"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519527"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><span class="annottext">m (ExpBase Info VName
   -&gt; (Info (PName, StructType),
       Info (PName, StructType, Maybe VName))
   -&gt; Info PatRetType
   -&gt; SrcLoc
   -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName)
-&gt; m ((Info (PName, StructType),
       Info (PName, StructType, Maybe VName))
      -&gt; Info PatRetType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519530"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519526"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><span class="annottext">m ((Info (PName, StructType),
    Info (PName, StructType, Maybe VName))
   -&gt; Info PatRetType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info (PName, StructType),
      Info (PName, StructType, Maybe VName))
-&gt; m (Info PatRetType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>              </span><span class="annot"><span class="annottext">(Info (PName, StructType)
 -&gt; Info (PName, StructType, Maybe VName)
 -&gt; (Info (PName, StructType),
     Info (PName, StructType, Maybe VName)))
-&gt; m (Info (PName, StructType))
-&gt; m (Info (PName, StructType, Maybe VName)
      -&gt; (Info (PName, StructType),
          Info (PName, StructType, Maybe VName)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PName, StructType) -&gt; Info (PName, StructType)
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">((PName, StructType) -&gt; Info (PName, StructType))
-&gt; m (PName, StructType) -&gt; m (Info (PName, StructType))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519525"><span class="hs-identifier hs-var">pa</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; (PName, StructType))
-&gt; m StructType -&gt; m (PName, StructType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519530"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519524"><span class="hs-identifier hs-var">t1a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>              </span><span class="annot"><span class="annottext">m (Info (PName, StructType, Maybe VName)
   -&gt; (Info (PName, StructType),
       Info (PName, StructType, Maybe VName)))
-&gt; m (Info (PName, StructType, Maybe VName))
-&gt; m (Info (PName, StructType),
      Info (PName, StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PName, StructType, Maybe VName)
-&gt; Info (PName, StructType, Maybe VName)
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">((PName, StructType, Maybe VName)
 -&gt; Info (PName, StructType, Maybe VName))
-&gt; m (PName, StructType, Maybe VName)
-&gt; m (Info (PName, StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519523"><span class="hs-identifier hs-var">pb</span></a></span><span class="hs-special">,</span><span class="annot"><span class="hs-special">,</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; Maybe VName -&gt; (PName, StructType, Maybe VName))
-&gt; m StructType
-&gt; m (Maybe VName -&gt; (PName, StructType, Maybe VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519530"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519522"><span class="hs-identifier hs-var">t1b</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe VName -&gt; (PName, StructType, Maybe VName))
-&gt; m (Maybe VName) -&gt; m (PName, StructType, Maybe VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName -&gt; m (Maybe VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519521"><span class="hs-identifier hs-var">argext</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatRetType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatRetType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatRetType -&gt; m PatRetType)
-&gt; Info PatRetType -&gt; m (Info PatRetType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatRetType -&gt; m PatRetType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatRetType -&gt; m PatRetType
</span><a href="Language.Futhark.Traversals.html#mapOnPatRetType"><span class="hs-identifier hs-var hs-var">mapOnPatRetType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519530"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatRetType
</span><a href="#local-6989586621684519520"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519519"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519518"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519518"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ProjectSection"><span class="hs-identifier hs-type">ProjectSection</span></a></span><span> </span><span id="local-6989586621684519516"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684519516"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621684519515"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519515"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519514"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519514"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">[Name] -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
[Name] -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#ProjectSection"><span class="hs-identifier hs-var">ProjectSection</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684519516"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">(Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519518"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519515"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519514"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519513"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519513"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IndexSection"><span class="hs-identifier hs-type">IndexSection</span></a></span><span> </span><span id="local-6989586621684519511"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519511"><span class="hs-identifier hs-var">idxs</span></a></span></span><span> </span><span id="local-6989586621684519510"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519510"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519509"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519509"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-197"></span><span>    </span><span class="annot"><span class="annottext">SliceBase Info VName
-&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
SliceBase f vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#IndexSection"><span class="hs-identifier hs-var">IndexSection</span></a></span><span> </span><span class="annot"><span class="annottext">(SliceBase Info VName
 -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (SliceBase Info VName)
-&gt; m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; m (DimIndexBase Info VName))
-&gt; SliceBase Info VName -&gt; m (SliceBase Info VName)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m
-&gt; DimIndexBase Info VName -&gt; m (DimIndexBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519513"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684519511"><span class="hs-identifier hs-var">idxs</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519513"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519510"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519509"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519508"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519508"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Constr"><span class="hs-identifier hs-type">Constr</span></a></span><span> </span><span id="local-6989586621684519506"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684519506"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684519505"><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684519505"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621684519504"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519504"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span id="local-6989586621684519503"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519503"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; [ExpBase Info VName]
-&gt; Info PatType
-&gt; SrcLoc
-&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
Name -&gt; [ExpBase f vn] -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684519506"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">([ExpBase Info VName]
 -&gt; Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m [ExpBase Info VName]
-&gt; m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; [ExpBase Info VName] -&gt; m [ExpBase Info VName]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519508"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684519505"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519508"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684519504"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519503"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519502"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519502"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Attr"><span class="hs-identifier hs-type">Attr</span></a></span><span> </span><span id="local-6989586621684519500"><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684519500"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span id="local-6989586621684519499"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519499"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519498"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519498"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><span class="annottext">AttrInfo VName
-&gt; ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
AttrInfo vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Attr"><span class="hs-identifier hs-var">Attr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684519500"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; SrcLoc -&gt; ExpBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519502"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519499"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; ExpBase Info VName)
-&gt; m SrcLoc -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519498"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519497"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519497"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-type">AppExp</span></a></span><span> </span><span id="local-6989586621684519495"><span class="annot"><span class="annottext">AppExpBase Info VName
</span><a href="#local-6989586621684519495"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684519494"><span class="annot"><span class="annottext">Info AppRes
</span><a href="#local-6989586621684519494"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><span class="annottext">AppExpBase Info VName -&gt; Info AppRes -&gt; ExpBase Info VName
forall (f :: * -&gt; *) vn.
AppExpBase f vn -&gt; f AppRes -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-var">AppExp</span></a></span><span> </span><span class="annot"><span class="annottext">(AppExpBase Info VName -&gt; Info AppRes -&gt; ExpBase Info VName)
-&gt; m (AppExpBase Info VName)
-&gt; m (Info AppRes -&gt; ExpBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; AppExpBase Info VName -&gt; m (AppExpBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519497"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">AppExpBase Info VName
</span><a href="#local-6989586621684519495"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info AppRes -&gt; ExpBase Info VName)
-&gt; m (Info AppRes) -&gt; m (ExpBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; Info AppRes -&gt; m (Info AppRes)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519497"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Info AppRes
</span><a href="#local-6989586621684519494"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LoopFormBase"><span class="hs-identifier hs-type">LoopFormBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-208"></span><span>  </span><span id="local-6989586621684519480"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m
-&gt; LoopFormBase Info VName -&gt; m (LoopFormBase Info VName)
</span><a href="#local-6989586621684519480"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519479"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519479"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#For"><span class="hs-identifier hs-type">For</span></a></span><span> </span><span id="local-6989586621684519477"><span class="annot"><span class="annottext">IdentBase Info VName
</span><a href="#local-6989586621684519477"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621684519476"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519476"><span class="hs-identifier hs-var">bound</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdentBase Info VName
-&gt; ExpBase Info VName -&gt; LoopFormBase Info VName
forall (f :: * -&gt; *) vn.
IdentBase f vn -&gt; ExpBase f vn -&gt; LoopFormBase f vn
</span><a href="Language.Futhark.Syntax.html#For"><span class="hs-identifier hs-var">For</span></a></span><span> </span><span class="annot"><span class="annottext">(IdentBase Info VName
 -&gt; ExpBase Info VName -&gt; LoopFormBase Info VName)
-&gt; m (IdentBase Info VName)
-&gt; m (ExpBase Info VName -&gt; LoopFormBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; IdentBase Info VName -&gt; m (IdentBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519479"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">IdentBase Info VName
</span><a href="#local-6989586621684519477"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; LoopFormBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (LoopFormBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519479"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519476"><span class="hs-identifier hs-var">bound</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519475"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519475"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ForIn"><span class="hs-identifier hs-type">ForIn</span></a></span><span> </span><span id="local-6989586621684519473"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684519473"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684519472"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519472"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; ExpBase Info VName -&gt; LoopFormBase Info VName
forall (f :: * -&gt; *) vn.
PatBase f vn -&gt; ExpBase f vn -&gt; LoopFormBase f vn
</span><a href="Language.Futhark.Syntax.html#ForIn"><span class="hs-identifier hs-var">ForIn</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName
 -&gt; ExpBase Info VName -&gt; LoopFormBase Info VName)
-&gt; m (PatBase Info VName)
-&gt; m (ExpBase Info VName -&gt; LoopFormBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519475"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684519473"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; LoopFormBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (LoopFormBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519475"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519472"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519471"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519471"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#While"><span class="hs-identifier hs-type">While</span></a></span><span> </span><span id="local-6989586621684519469"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519469"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; LoopFormBase Info VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; LoopFormBase f vn
</span><a href="Language.Futhark.Syntax.html#While"><span class="hs-identifier hs-var">While</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; LoopFormBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (LoopFormBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519471"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519469"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeExp"><span class="hs-identifier hs-type">TypeExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621684519400"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
</span><a href="#local-6989586621684519400"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519399"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519399"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEVar"><span class="hs-identifier hs-type">TEVar</span></a></span><span> </span><span id="local-6989586621684519397"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519397"><span class="hs-identifier hs-var">qn</span></a></span></span><span> </span><span id="local-6989586621684519396"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519396"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; SrcLoc -&gt; TypeExp VName
forall vn. QualName vn -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TEVar"><span class="hs-identifier hs-var">TEVar</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (QualName VName) -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519399"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519397"><span class="hs-identifier hs-var">qn</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519396"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519395"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519395"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TETuple"><span class="hs-identifier hs-type">TETuple</span></a></span><span> </span><span id="local-6989586621684519393"><span class="annot"><span class="annottext">[TypeExp VName]
</span><a href="#local-6989586621684519393"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span id="local-6989586621684519392"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519392"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TypeExp VName] -&gt; SrcLoc -&gt; TypeExp VName
forall vn. [TypeExp vn] -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TETuple"><span class="hs-identifier hs-var">TETuple</span></a></span><span> </span><span class="annot"><span class="annottext">([TypeExp VName] -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m [TypeExp VName] -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; m (TypeExp VName))
-&gt; [TypeExp VName] -&gt; m [TypeExp VName]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519395"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeExp VName]
</span><a href="#local-6989586621684519393"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519392"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519391"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519391"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TERecord"><span class="hs-identifier hs-type">TERecord</span></a></span><span> </span><span id="local-6989586621684519389"><span class="annot"><span class="annottext">[(Name, TypeExp VName)]
</span><a href="#local-6989586621684519389"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span id="local-6989586621684519388"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519388"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="annottext">[(Name, TypeExp VName)] -&gt; SrcLoc -&gt; TypeExp VName
forall vn. [(Name, TypeExp vn)] -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TERecord"><span class="hs-identifier hs-var">TERecord</span></a></span><span> </span><span class="annot"><span class="annottext">([(Name, TypeExp VName)] -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m [(Name, TypeExp VName)] -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Name, TypeExp VName) -&gt; m (Name, TypeExp VName))
-&gt; [(Name, TypeExp VName)] -&gt; m [(Name, TypeExp VName)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeExp VName -&gt; m (TypeExp VName))
-&gt; (Name, TypeExp VName) -&gt; m (Name, TypeExp VName)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((TypeExp VName -&gt; m (TypeExp VName))
 -&gt; (Name, TypeExp VName) -&gt; m (Name, TypeExp VName))
-&gt; (TypeExp VName -&gt; m (TypeExp VName))
-&gt; (Name, TypeExp VName)
-&gt; m (Name, TypeExp VName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519391"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, TypeExp VName)]
</span><a href="#local-6989586621684519389"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519388"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519387"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519387"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEArray"><span class="hs-identifier hs-type">TEArray</span></a></span><span> </span><span id="local-6989586621684519385"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519385"><span class="hs-identifier hs-var">te</span></a></span></span><span> </span><span id="local-6989586621684519384"><span class="annot"><span class="annottext">DimExp VName
</span><a href="#local-6989586621684519384"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621684519383"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519383"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><span class="annottext">TypeExp VName -&gt; DimExp VName -&gt; SrcLoc -&gt; TypeExp VName
forall vn. TypeExp vn -&gt; DimExp vn -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TEArray"><span class="hs-identifier hs-var">TEArray</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; DimExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (TypeExp VName) -&gt; m (DimExp VName -&gt; SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519387"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519385"><span class="hs-identifier hs-var">te</span></a></span><span> </span><span class="annot"><span class="annottext">m (DimExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (DimExp VName) -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; DimExp VName -&gt; m (DimExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519387"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">DimExp VName
</span><a href="#local-6989586621684519384"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519383"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-219"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519382"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519382"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEUnique"><span class="hs-identifier hs-type">TEUnique</span></a></span><span> </span><span id="local-6989586621684519380"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519380"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519379"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519379"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName
forall vn. TypeExp vn -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TEUnique"><span class="hs-identifier hs-var">TEUnique</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (TypeExp VName) -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519382"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519380"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519379"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519378"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519378"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEApply"><span class="hs-identifier hs-type">TEApply</span></a></span><span> </span><span id="local-6989586621684519376"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519376"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684519375"><span class="annot"><span class="annottext">TypeArgExp VName
</span><a href="#local-6989586621684519375"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span id="local-6989586621684519374"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519374"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">TypeExp VName -&gt; TypeArgExp VName -&gt; SrcLoc -&gt; TypeExp VName
forall vn. TypeExp vn -&gt; TypeArgExp vn -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TEApply"><span class="hs-identifier hs-var">TEApply</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; TypeArgExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (TypeExp VName)
-&gt; m (TypeArgExp VName -&gt; SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519378"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519376"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">m (TypeArgExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (TypeArgExp VName) -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeArgExp VName -&gt; m (TypeArgExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519378"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeArgExp VName
</span><a href="#local-6989586621684519375"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519374"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519373"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519373"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEArrow"><span class="hs-identifier hs-type">TEArrow</span></a></span><span> </span><span id="local-6989586621684519371"><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519371"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684519370"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519370"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684519369"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519369"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span id="local-6989586621684519368"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519368"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">Maybe VName
-&gt; TypeExp VName -&gt; TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName
forall vn.
Maybe vn -&gt; TypeExp vn -&gt; TypeExp vn -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TEArrow"><span class="hs-identifier hs-var">TEArrow</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519371"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (TypeExp VName)
-&gt; m (TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519373"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519370"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">m (TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (TypeExp VName) -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519373"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519369"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519368"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-224"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519367"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519367"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TESum"><span class="hs-identifier hs-type">TESum</span></a></span><span> </span><span id="local-6989586621684519365"><span class="annot"><span class="annottext">[(Name, [TypeExp VName])]
</span><a href="#local-6989586621684519365"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621684519364"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519364"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><span class="annottext">[(Name, [TypeExp VName])] -&gt; SrcLoc -&gt; TypeExp VName
forall vn. [(Name, [TypeExp vn])] -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TESum"><span class="hs-identifier hs-var">TESum</span></a></span><span> </span><span class="annot"><span class="annottext">([(Name, [TypeExp VName])] -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m [(Name, [TypeExp VName])] -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Name, [TypeExp VName]) -&gt; m (Name, [TypeExp VName]))
-&gt; [(Name, [TypeExp VName])] -&gt; m [(Name, [TypeExp VName])]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([TypeExp VName] -&gt; m [TypeExp VName])
-&gt; (Name, [TypeExp VName]) -&gt; m (Name, [TypeExp VName])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(([TypeExp VName] -&gt; m [TypeExp VName])
 -&gt; (Name, [TypeExp VName]) -&gt; m (Name, [TypeExp VName]))
-&gt; ([TypeExp VName] -&gt; m [TypeExp VName])
-&gt; (Name, [TypeExp VName])
-&gt; m (Name, [TypeExp VName])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; [TypeExp VName] -&gt; m [TypeExp VName]
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519367"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, [TypeExp VName])]
</span><a href="#local-6989586621684519365"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519364"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519363"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519363"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEDim"><span class="hs-identifier hs-type">TEDim</span></a></span><span> </span><span id="local-6989586621684519361"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519361"><span class="hs-identifier hs-var">dims</span></a></span></span><span> </span><span id="local-6989586621684519360"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519360"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519359"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519359"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><span class="annottext">[VName] -&gt; TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName
forall vn. [vn] -&gt; TypeExp vn -&gt; SrcLoc -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#TEDim"><span class="hs-identifier hs-var">TEDim</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519361"><span class="hs-identifier hs-var">dims</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; SrcLoc -&gt; TypeExp VName)
-&gt; m (TypeExp VName) -&gt; m (SrcLoc -&gt; TypeExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519363"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519360"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeExp VName) -&gt; m SrcLoc -&gt; m (TypeExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519359"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgExp"><span class="hs-identifier hs-type">TypeArgExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-230"></span><span>  </span><span id="local-6989586621684519346"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; TypeArgExp VName -&gt; m (TypeArgExp VName)
</span><a href="#local-6989586621684519346"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519345"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519345"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgExpDim"><span class="hs-identifier hs-type">TypeArgExpDim</span></a></span><span> </span><span id="local-6989586621684519343"><span class="annot"><span class="annottext">DimExp VName
</span><a href="#local-6989586621684519343"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621684519342"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519342"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><span class="annottext">DimExp VName -&gt; SrcLoc -&gt; TypeArgExp VName
forall vn. DimExp vn -&gt; SrcLoc -&gt; TypeArgExp vn
</span><a href="Language.Futhark.Syntax.html#TypeArgExpDim"><span class="hs-identifier hs-var">TypeArgExpDim</span></a></span><span> </span><span class="annot"><span class="annottext">(DimExp VName -&gt; SrcLoc -&gt; TypeArgExp VName)
-&gt; m (DimExp VName) -&gt; m (SrcLoc -&gt; TypeArgExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; DimExp VName -&gt; m (DimExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519345"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">DimExp VName
</span><a href="#local-6989586621684519343"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; TypeArgExp VName) -&gt; m SrcLoc -&gt; m (TypeArgExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519342"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519341"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519341"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgExpType"><span class="hs-identifier hs-type">TypeArgExpType</span></a></span><span> </span><span id="local-6989586621684519339"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519339"><span class="hs-identifier hs-var">te</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><span class="annottext">TypeExp VName -&gt; TypeArgExp VName
forall vn. TypeExp vn -&gt; TypeArgExp vn
</span><a href="Language.Futhark.Syntax.html#TypeArgExpType"><span class="hs-identifier hs-var">TypeArgExpType</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; TypeArgExp VName)
-&gt; m (TypeExp VName) -&gt; m (TypeArgExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519341"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519339"><span class="hs-identifier hs-var">te</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimExp"><span class="hs-identifier hs-type">DimExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="local-6989586621684519329"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; DimExp VName -&gt; m (DimExp VName)
</span><a href="#local-6989586621684519329"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519328"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519328"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimExpNamed"><span class="hs-identifier hs-type">DimExpNamed</span></a></span><span> </span><span id="local-6989586621684519326"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519326"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span id="local-6989586621684519325"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519325"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><span class="annottext">QualName VName -&gt; SrcLoc -&gt; DimExp VName
forall vn. QualName vn -&gt; SrcLoc -&gt; DimExp vn
</span><a href="Language.Futhark.Syntax.html#DimExpNamed"><span class="hs-identifier hs-var">DimExpNamed</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; SrcLoc -&gt; DimExp VName)
-&gt; m (QualName VName) -&gt; m (SrcLoc -&gt; DimExp VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519328"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519326"><span class="hs-identifier hs-var">vn</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; DimExp VName) -&gt; m SrcLoc -&gt; m (DimExp VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519325"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-238"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimExpConst"><span class="hs-identifier hs-type">DimExpConst</span></a></span><span> </span><span id="local-6989586621684519323"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684519323"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621684519322"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519322"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DimExp VName -&gt; m (DimExp VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(DimExp VName -&gt; m (DimExp VName))
-&gt; DimExp VName -&gt; m (DimExp VName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SrcLoc -&gt; DimExp VName
forall vn. Int -&gt; SrcLoc -&gt; DimExp vn
</span><a href="Language.Futhark.Syntax.html#DimExpConst"><span class="hs-identifier hs-var">DimExpConst</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684519323"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519322"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DimExp VName
</span><a href="Language.Futhark.Syntax.html#DimExpAny"><span class="hs-identifier hs-var">DimExpAny</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DimExp VName -&gt; m (DimExp VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">DimExp VName
forall vn. DimExp vn
</span><a href="Language.Futhark.Syntax.html#DimExpAny"><span class="hs-identifier hs-var">DimExpAny</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>  </span><span id="local-6989586621684519310"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; DimDecl VName -&gt; m (DimDecl VName)
</span><a href="#local-6989586621684519310"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519309"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519309"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-type">NamedDim</span></a></span><span> </span><span id="local-6989586621684519307"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519307"><span class="hs-identifier hs-var">vn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; DimDecl VName
forall vn. QualName vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-var">NamedDim</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; DimDecl VName)
-&gt; m (QualName VName) -&gt; m (DimDecl VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519309"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684519307"><span class="hs-identifier hs-var">vn</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ConstDim"><span class="hs-identifier hs-type">ConstDim</span></a></span><span> </span><span id="local-6989586621684519305"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684519305"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DimDecl VName -&gt; m (DimDecl VName)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(DimDecl VName -&gt; m (DimDecl VName))
-&gt; DimDecl VName -&gt; m (DimDecl VName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; DimDecl VName
forall vn. Int -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#ConstDim"><span class="hs-identifier hs-var">ConstDim</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684519305"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519304"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519304"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AnyDim"><span class="hs-identifier hs-type">AnyDim</span></a></span><span> </span><span id="local-6989586621684519302"><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519302"><span class="hs-identifier hs-var">vn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe VName -&gt; DimDecl VName
forall vn. Maybe vn -&gt; DimDecl vn
</span><a href="Language.Futhark.Syntax.html#AnyDim"><span class="hs-identifier hs-var">AnyDim</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe VName -&gt; DimDecl VName)
-&gt; m (Maybe VName) -&gt; m (DimDecl VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; m VName) -&gt; Maybe VName -&gt; m (Maybe VName)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519304"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe VName
</span><a href="#local-6989586621684519302"><span class="hs-identifier hs-var">vn</span></a></span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span id="local-6989586621684519295"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; TypeParamBase VName -&gt; m (TypeParamBase VName)
</span><a href="#local-6989586621684519295"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VName -&gt; m VName)
-&gt; TypeParamBase VName -&gt; m (TypeParamBase VName)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((VName -&gt; m VName)
 -&gt; TypeParamBase VName -&gt; m (TypeParamBase VName))
-&gt; (ASTMapper m -&gt; VName -&gt; m VName)
-&gt; ASTMapper m
-&gt; TypeParamBase VName
-&gt; m (TypeParamBase VName)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimIndexBase"><span class="hs-identifier hs-type">DimIndexBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>  </span><span id="local-6989586621684519279"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m
-&gt; DimIndexBase Info VName -&gt; m (DimIndexBase Info VName)
</span><a href="#local-6989586621684519279"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519278"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519278"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimFix"><span class="hs-identifier hs-type">DimFix</span></a></span><span> </span><span id="local-6989586621684519276"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519276"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; DimIndexBase Info VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; DimIndexBase f vn
</span><a href="Language.Futhark.Syntax.html#DimFix"><span class="hs-identifier hs-var">DimFix</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; DimIndexBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (DimIndexBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519278"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684519276"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519275"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519275"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimSlice"><span class="hs-identifier hs-type">DimSlice</span></a></span><span> </span><span id="local-6989586621684519273"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519273"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621684519272"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519272"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621684519271"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519271"><span class="hs-identifier hs-var">stride</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
-&gt; Maybe (ExpBase Info VName)
-&gt; Maybe (ExpBase Info VName)
-&gt; DimIndexBase Info VName
forall (f :: * -&gt; *) vn.
Maybe (ExpBase f vn)
-&gt; Maybe (ExpBase f vn)
-&gt; Maybe (ExpBase f vn)
-&gt; DimIndexBase f vn
</span><a href="Language.Futhark.Syntax.html#DimSlice"><span class="hs-identifier hs-var">DimSlice</span></a></span><span>
</span><span id="line-253"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (ExpBase Info VName)
 -&gt; Maybe (ExpBase Info VName)
 -&gt; Maybe (ExpBase Info VName)
 -&gt; DimIndexBase Info VName)
-&gt; m (Maybe (ExpBase Info VName))
-&gt; m (Maybe (ExpBase Info VName)
      -&gt; Maybe (ExpBase Info VName) -&gt; DimIndexBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe (ExpBase Info VName))
-&gt; (ExpBase Info VName -&gt; m (Maybe (ExpBase Info VName)))
-&gt; Maybe (ExpBase Info VName)
-&gt; m (Maybe (ExpBase Info VName))
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; Maybe (ExpBase Info VName))
-&gt; m (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; Maybe (ExpBase Info VName)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(m (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName)))
-&gt; (ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; ExpBase Info VName
-&gt; m (Maybe (ExpBase Info VName))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519275"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519273"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-254"></span><span>      </span><span class="annot"><span class="annottext">m (Maybe (ExpBase Info VName)
   -&gt; Maybe (ExpBase Info VName) -&gt; DimIndexBase Info VName)
-&gt; m (Maybe (ExpBase Info VName))
-&gt; m (Maybe (ExpBase Info VName) -&gt; DimIndexBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe (ExpBase Info VName))
-&gt; (ExpBase Info VName -&gt; m (Maybe (ExpBase Info VName)))
-&gt; Maybe (ExpBase Info VName)
-&gt; m (Maybe (ExpBase Info VName))
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; Maybe (ExpBase Info VName))
-&gt; m (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; Maybe (ExpBase Info VName)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(m (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName)))
-&gt; (ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; ExpBase Info VName
-&gt; m (Maybe (ExpBase Info VName))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519275"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519272"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-255"></span><span>      </span><span class="annot"><span class="annottext">m (Maybe (ExpBase Info VName) -&gt; DimIndexBase Info VName)
-&gt; m (Maybe (ExpBase Info VName)) -&gt; m (DimIndexBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe (ExpBase Info VName))
-&gt; (ExpBase Info VName -&gt; m (Maybe (ExpBase Info VName)))
-&gt; Maybe (ExpBase Info VName)
-&gt; m (Maybe (ExpBase Info VName))
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; Maybe (ExpBase Info VName))
-&gt; m (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; Maybe (ExpBase Info VName)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(m (ExpBase Info VName) -&gt; m (Maybe (ExpBase Info VName)))
-&gt; (ExpBase Info VName -&gt; m (ExpBase Info VName))
-&gt; ExpBase Info VName
-&gt; m (Maybe (ExpBase Info VName))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519275"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684519271"><span class="hs-identifier hs-var">stride</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Alias"><span class="hs-identifier hs-type">Alias</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-258"></span><span>  </span><span id="local-6989586621684519262"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *). Monad m =&gt; ASTMapper m -&gt; Alias -&gt; m Alias
</span><a href="#local-6989586621684519262"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519261"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519261"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AliasBound"><span class="hs-identifier hs-type">AliasBound</span></a></span><span> </span><span id="local-6989586621684519259"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519259"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; Alias
</span><a href="Language.Futhark.Syntax.html#AliasBound"><span class="hs-identifier hs-var">AliasBound</span></a></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; Alias) -&gt; m VName -&gt; m Alias
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519261"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519259"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684519258"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519258"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AliasFree"><span class="hs-identifier hs-type">AliasFree</span></a></span><span> </span><span id="local-6989586621684519256"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519256"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; Alias
</span><a href="Language.Futhark.Syntax.html#AliasFree"><span class="hs-identifier hs-var">AliasFree</span></a></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; Alias) -&gt; m VName -&gt; m Alias
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519258"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519256"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Aliasing"><span class="hs-identifier hs-type">Aliasing</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621684519243"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; Aliasing -&gt; m Aliasing
</span><a href="#local-6989586621684519243"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519242"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519242"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Alias] -&gt; Aliasing) -&gt; m [Alias] -&gt; m Aliasing
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[Alias] -&gt; Aliasing
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">S.fromList</span></span><span> </span><span class="annot"><span class="annottext">(m [Alias] -&gt; m Aliasing)
-&gt; (Aliasing -&gt; m [Alias]) -&gt; Aliasing -&gt; m Aliasing
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Alias -&gt; m Alias) -&gt; [Alias] -&gt; m [Alias]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; Alias -&gt; m Alias
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519242"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Alias] -&gt; m [Alias])
-&gt; (Aliasing -&gt; [Alias]) -&gt; Aliasing -&gt; m [Alias]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Aliasing -&gt; [Alias]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">S.toList</span></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#AppRes"><span class="hs-identifier hs-type">AppRes</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-265"></span><span>  </span><span id="local-6989586621684519232"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *). Monad m =&gt; ASTMapper m -&gt; AppRes -&gt; m AppRes
</span><a href="#local-6989586621684519232"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519231"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519231"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppRes"><span class="hs-identifier hs-type">AppRes</span></a></span><span> </span><span id="local-6989586621684519229"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519229"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519228"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519228"><span class="hs-identifier hs-var">ext</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">PatType -&gt; [VName] -&gt; AppRes
</span><a href="Language.Futhark.Syntax.html#AppRes"><span class="hs-identifier hs-var">AppRes</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; [VName] -&gt; AppRes)
-&gt; m PatType -&gt; m ([VName] -&gt; AppRes)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519231"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519229"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m ([VName] -&gt; AppRes) -&gt; m [VName] -&gt; m AppRes
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; m [VName]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519228"><span class="hs-identifier hs-var">ext</span></a></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="hs-keyword">type</span><span> </span><span id="TypeTraverser"><span class="annot"><a href="Language.Futhark.Traversals.html#TypeTraverser"><span class="hs-identifier hs-var">TypeTraverser</span></a></span></span><span> </span><span id="local-6989586621684519227"><span class="annot"><a href="#local-6989586621684519227"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span id="local-6989586621684519226"><span class="annot"><a href="#local-6989586621684519226"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621684519225"><span class="annot"><a href="#local-6989586621684519225"><span class="hs-identifier hs-type">dim1</span></a></span></span><span> </span><span id="local-6989586621684519224"><span class="annot"><a href="#local-6989586621684519224"><span class="hs-identifier hs-type">als1</span></a></span></span><span> </span><span id="local-6989586621684519223"><span class="annot"><a href="#local-6989586621684519223"><span class="hs-identifier hs-type">dim2</span></a></span></span><span> </span><span id="local-6989586621684519222"><span class="annot"><a href="#local-6989586621684519222"><span class="hs-identifier hs-type">als2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684519227"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621684519225"><span class="hs-identifier hs-type">dim1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684519227"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684519223"><span class="hs-identifier hs-type">dim2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621684519224"><span class="hs-identifier hs-type">als1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684519227"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684519222"><span class="hs-identifier hs-type">als2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-272"></span><span>  </span><span class="annot"><a href="#local-6989586621684519226"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684519225"><span class="hs-identifier hs-type">dim1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684519224"><span class="hs-identifier hs-type">als1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-273"></span><span>  </span><span class="annot"><a href="#local-6989586621684519227"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621684519226"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684519223"><span class="hs-identifier hs-type">dim2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684519222"><span class="hs-identifier hs-type">als2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span id="local-6989586621684520177"><span id="local-6989586621684520178"><span id="local-6989586621684520179"><span id="local-6989586621684520180"><span id="local-6989586621684520182"><span class="annot"><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-type">traverseScalarType</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621684520182"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-277"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#TypeTraverser"><span class="hs-identifier hs-type">TypeTraverser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520182"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ScalarTypeBase"><span class="hs-identifier hs-type">ScalarTypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520180"><span class="hs-identifier hs-type">dim1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520179"><span class="hs-identifier hs-type">als1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520178"><span class="hs-identifier hs-type">dims</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520177"><span class="hs-identifier hs-type">als2</span></a></span></span></span></span></span></span><span>
</span><span id="line-278"></span><span id="traverseScalarType"><span class="annot"><span class="annottext">traverseScalarType :: forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f ScalarTypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-var hs-var">traverseScalarType</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span id="local-6989586621684519189"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684519189"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dims als2 -&gt; f (ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dims als2 -&gt; f (ScalarTypeBase dims als2))
-&gt; ScalarTypeBase dims als2 -&gt; f (ScalarTypeBase dims als2)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; ScalarTypeBase dims als2
forall dim as. PrimType -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-var">Prim</span></a></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684519189"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-279"></span><span class="annot"><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-var">traverseScalarType</span></a></span><span> </span><span id="local-6989586621684519188"><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519188"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519187"><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519187"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621684519186"><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519186"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684519184"><span class="annot"><span class="annottext">Map Name (TypeBase dim1 als1)
</span><a href="#local-6989586621684519184"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dims als2) -&gt; ScalarTypeBase dims als2
forall dim as. Map Name (TypeBase dim as) -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-var">Record</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name (TypeBase dims als2) -&gt; ScalarTypeBase dims als2)
-&gt; f (Map Name (TypeBase dims als2))
-&gt; f (ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim1 als1 -&gt; f (TypeBase dims als2))
-&gt; Map Name (TypeBase dim1 als1)
-&gt; f (Map Name (TypeBase dims als2))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeTraverser f TypeBase dim1 als1 dims als2
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519188"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519187"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519186"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim1 als1)
</span><a href="#local-6989586621684519184"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-280"></span><span class="annot"><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-var">traverseScalarType</span></a></span><span> </span><span id="local-6989586621684519182"><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519182"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519181"><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519181"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621684519180"><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519180"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span id="local-6989586621684519178"><span class="annot"><span class="annottext">als1
</span><a href="#local-6989586621684519178"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span id="local-6989586621684519177"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684519177"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684519176"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684519176"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519175"><span class="annot"><span class="annottext">[TypeArg dim1]
</span><a href="#local-6989586621684519175"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-281"></span><span>  </span><span class="annot"><span class="annottext">als2
-&gt; Uniqueness
-&gt; TypeName
-&gt; [TypeArg dims]
-&gt; ScalarTypeBase dims als2
forall dim as.
as
-&gt; Uniqueness -&gt; TypeName -&gt; [TypeArg dim] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-var">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">(als2
 -&gt; Uniqueness
 -&gt; TypeName
 -&gt; [TypeArg dims]
 -&gt; ScalarTypeBase dims als2)
-&gt; f als2
-&gt; f (Uniqueness
      -&gt; TypeName -&gt; [TypeArg dims] -&gt; ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519180"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">als1
</span><a href="#local-6989586621684519178"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">f (Uniqueness
   -&gt; TypeName -&gt; [TypeArg dims] -&gt; ScalarTypeBase dims als2)
-&gt; f Uniqueness
-&gt; f (TypeName -&gt; [TypeArg dims] -&gt; ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness -&gt; f Uniqueness
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684519177"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">f (TypeName -&gt; [TypeArg dims] -&gt; ScalarTypeBase dims als2)
-&gt; f TypeName -&gt; f ([TypeArg dims] -&gt; ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519182"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684519176"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">f ([TypeArg dims] -&gt; ScalarTypeBase dims als2)
-&gt; f [TypeArg dims] -&gt; f (ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeArg dim1 -&gt; f (TypeArg dims))
-&gt; [TypeArg dim1] -&gt; f [TypeArg dims]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeName -&gt; f TypeName)
-&gt; (dim1 -&gt; f dims) -&gt; TypeArg dim1 -&gt; f (TypeArg dims)
forall (f :: * -&gt; *) dim1 dim2.
Applicative f =&gt;
(TypeName -&gt; f TypeName)
-&gt; (dim1 -&gt; f dim2) -&gt; TypeArg dim1 -&gt; f (TypeArg dim2)
</span><a href="Language.Futhark.Traversals.html#traverseTypeArg"><span class="hs-identifier hs-var">traverseTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519182"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519181"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeArg dim1]
</span><a href="#local-6989586621684519175"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-282"></span><span class="annot"><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-var">traverseScalarType</span></a></span><span> </span><span id="local-6989586621684519173"><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519173"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519172"><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519172"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621684519171"><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519171"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span id="local-6989586621684519169"><span class="annot"><span class="annottext">als1
</span><a href="#local-6989586621684519169"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span id="local-6989586621684519168"><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519168"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684519167"><span class="annot"><span class="annottext">TypeBase dim1 als1
</span><a href="#local-6989586621684519167"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684519165"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519165"><span class="hs-identifier hs-var">dims</span></a></span></span><span> </span><span id="local-6989586621684519164"><span class="annot"><span class="annottext">TypeBase dim1 als1
</span><a href="#local-6989586621684519164"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><span class="annottext">als2
-&gt; PName
-&gt; TypeBase dims als2
-&gt; RetTypeBase dims als2
-&gt; ScalarTypeBase dims als2
forall dim as.
as
-&gt; PName
-&gt; TypeBase dim as
-&gt; RetTypeBase dim as
-&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-var">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">(als2
 -&gt; PName
 -&gt; TypeBase dims als2
 -&gt; RetTypeBase dims als2
 -&gt; ScalarTypeBase dims als2)
-&gt; f als2
-&gt; f (PName
      -&gt; TypeBase dims als2
      -&gt; RetTypeBase dims als2
      -&gt; ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519171"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">als1
</span><a href="#local-6989586621684519169"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">f (PName
   -&gt; TypeBase dims als2
   -&gt; RetTypeBase dims als2
   -&gt; ScalarTypeBase dims als2)
-&gt; f PName
-&gt; f (TypeBase dims als2
      -&gt; RetTypeBase dims als2 -&gt; ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">PName -&gt; f PName
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="#local-6989586621684519168"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">f (TypeBase dims als2
   -&gt; RetTypeBase dims als2 -&gt; ScalarTypeBase dims als2)
-&gt; f (TypeBase dims als2)
-&gt; f (RetTypeBase dims als2 -&gt; ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeTraverser f TypeBase dim1 als1 dims als2
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519173"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519172"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519171"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim1 als1
</span><a href="#local-6989586621684519167"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><span class="annottext">f (RetTypeBase dims als2 -&gt; ScalarTypeBase dims als2)
-&gt; f (RetTypeBase dims als2) -&gt; f (ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VName] -&gt; TypeBase dims als2 -&gt; RetTypeBase dims als2
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519165"><span class="hs-identifier hs-var">dims</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase dims als2 -&gt; RetTypeBase dims als2)
-&gt; f (TypeBase dims als2) -&gt; f (RetTypeBase dims als2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeTraverser f TypeBase dim1 als1 dims als2
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519173"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519172"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519171"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim1 als1
</span><a href="#local-6989586621684519164"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span class="annot"><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-var">traverseScalarType</span></a></span><span> </span><span id="local-6989586621684519163"><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519163"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519162"><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519162"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621684519161"><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519161"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684519159"><span class="annot"><span class="annottext">Map Name [TypeBase dim1 als1]
</span><a href="#local-6989586621684519159"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-286"></span><span>  </span><span class="annot"><span class="annottext">Map Name [TypeBase dims als2] -&gt; ScalarTypeBase dims als2
forall dim as. Map Name [TypeBase dim as] -&gt; ScalarTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-var">Sum</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Name [TypeBase dims als2] -&gt; ScalarTypeBase dims als2)
-&gt; f (Map Name [TypeBase dims als2])
-&gt; f (ScalarTypeBase dims als2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([TypeBase dim1 als1] -&gt; f [TypeBase dims als2])
-&gt; Map Name [TypeBase dim1 als1]
-&gt; f (Map Name [TypeBase dims als2])
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(([TypeBase dim1 als1] -&gt; f [TypeBase dims als2])
 -&gt; Map Name [TypeBase dim1 als1]
 -&gt; f (Map Name [TypeBase dims als2]))
-&gt; ((TypeBase dim1 als1 -&gt; f (TypeBase dims als2))
    -&gt; [TypeBase dim1 als1] -&gt; f [TypeBase dims als2])
-&gt; (TypeBase dim1 als1 -&gt; f (TypeBase dims als2))
-&gt; Map Name [TypeBase dim1 als1]
-&gt; f (Map Name [TypeBase dims als2])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim1 als1 -&gt; f (TypeBase dims als2))
-&gt; [TypeBase dim1 als1] -&gt; f [TypeBase dims als2]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeTraverser f TypeBase dim1 als1 dims als2
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519163"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519162"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519161"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim1 als1]
</span><a href="#local-6989586621684519159"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span id="local-6989586621684520159"><span id="local-6989586621684520160"><span id="local-6989586621684520161"><span id="local-6989586621684520162"><span id="local-6989586621684520163"><span class="annot"><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-type">traverseType</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-289"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621684520163"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-290"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#TypeTraverser"><span class="hs-identifier hs-type">TypeTraverser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520163"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520162"><span class="hs-identifier hs-type">dim1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520161"><span class="hs-identifier hs-type">als1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520160"><span class="hs-identifier hs-type">dims</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520159"><span class="hs-identifier hs-type">als2</span></a></span></span></span></span></span></span><span>
</span><span id="line-291"></span><span id="traverseType"><span class="annot"><span class="annottext">traverseType :: forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var hs-var">traverseType</span></a></span></span><span> </span><span id="local-6989586621684519144"><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519144"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519143"><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519143"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621684519142"><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519142"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span id="local-6989586621684519140"><span class="annot"><span class="annottext">als1
</span><a href="#local-6989586621684519140"><span class="hs-identifier hs-var">als</span></a></span></span><span> </span><span id="local-6989586621684519139"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684519139"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684519138"><span class="annot"><span class="annottext">ScalarTypeBase dim1 ()
</span><a href="#local-6989586621684519138"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621684519137"><span class="annot"><span class="annottext">ShapeDecl dim1
</span><a href="#local-6989586621684519137"><span class="hs-identifier hs-var">shape</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><span class="annottext">als2
-&gt; Uniqueness
-&gt; ScalarTypeBase dims ()
-&gt; ShapeDecl dims
-&gt; TypeBase dims als2
forall dim as.
as
-&gt; Uniqueness
-&gt; ScalarTypeBase dim ()
-&gt; ShapeDecl dim
-&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-var">Array</span></a></span><span> </span><span class="annot"><span class="annottext">(als2
 -&gt; Uniqueness
 -&gt; ScalarTypeBase dims ()
 -&gt; ShapeDecl dims
 -&gt; TypeBase dims als2)
-&gt; f als2
-&gt; f (Uniqueness
      -&gt; ScalarTypeBase dims () -&gt; ShapeDecl dims -&gt; TypeBase dims als2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519142"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">als1
</span><a href="#local-6989586621684519140"><span class="hs-identifier hs-var">als</span></a></span><span> </span><span class="annot"><span class="annottext">f (Uniqueness
   -&gt; ScalarTypeBase dims () -&gt; ShapeDecl dims -&gt; TypeBase dims als2)
-&gt; f Uniqueness
-&gt; f (ScalarTypeBase dims ()
      -&gt; ShapeDecl dims -&gt; TypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness -&gt; f Uniqueness
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684519139"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><span class="annottext">f (ScalarTypeBase dims () -&gt; ShapeDecl dims -&gt; TypeBase dims als2)
-&gt; f (ScalarTypeBase dims ())
-&gt; f (ShapeDecl dims -&gt; TypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeTraverser f ScalarTypeBase dim1 () dims ()
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f ScalarTypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-var">traverseScalarType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519144"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519143"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; f ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim1 ()
</span><a href="#local-6989586621684519138"><span class="hs-identifier hs-var">et</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">f (ShapeDecl dims -&gt; TypeBase dims als2)
-&gt; f (ShapeDecl dims) -&gt; f (TypeBase dims als2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(dim1 -&gt; f dims) -&gt; ShapeDecl dim1 -&gt; f (ShapeDecl dims)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519143"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim1
</span><a href="#local-6989586621684519137"><span class="hs-identifier hs-var">shape</span></a></span><span>
</span><span id="line-295"></span><span class="annot"><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span id="local-6989586621684519136"><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519136"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519135"><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519135"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621684519134"><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519134"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span id="local-6989586621684519132"><span class="annot"><span class="annottext">ScalarTypeBase dim1 als1
</span><a href="#local-6989586621684519132"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-296"></span><span>  </span><span class="annot"><span class="annottext">ScalarTypeBase dims als2 -&gt; TypeBase dims als2
forall dim as. ScalarTypeBase dim as -&gt; TypeBase dim as
</span><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-var">Scalar</span></a></span><span> </span><span class="annot"><span class="annottext">(ScalarTypeBase dims als2 -&gt; TypeBase dims als2)
-&gt; f (ScalarTypeBase dims als2) -&gt; f (TypeBase dims als2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeTraverser f ScalarTypeBase dim1 als1 dims als2
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f ScalarTypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseScalarType"><span class="hs-identifier hs-var">traverseScalarType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519136"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dims
</span><a href="#local-6989586621684519135"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">als1 -&gt; f als2
</span><a href="#local-6989586621684519134"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim1 als1
</span><a href="#local-6989586621684519132"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span id="local-6989586621684520154"><span id="local-6989586621684520155"><span id="local-6989586621684520156"><span class="annot"><a href="Language.Futhark.Traversals.html#traverseTypeArg"><span class="hs-identifier hs-type">traverseTypeArg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-299"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621684520156"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-300"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520156"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeName"><span class="hs-identifier hs-type">TypeName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621684520155"><span class="hs-identifier hs-type">dim1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684520156"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520154"><span class="hs-identifier hs-type">dim2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-302"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArg"><span class="hs-identifier hs-type">TypeArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520155"><span class="hs-identifier hs-type">dim1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-303"></span><span>  </span><span class="annot"><a href="#local-6989586621684520156"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArg"><span class="hs-identifier hs-type">TypeArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520154"><span class="hs-identifier hs-type">dim2</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-304"></span><span id="traverseTypeArg"><span class="annot"><span class="annottext">traverseTypeArg :: forall (f :: * -&gt; *) dim1 dim2.
Applicative f =&gt;
(TypeName -&gt; f TypeName)
-&gt; (dim1 -&gt; f dim2) -&gt; TypeArg dim1 -&gt; f (TypeArg dim2)
</span><a href="Language.Futhark.Traversals.html#traverseTypeArg"><span class="hs-identifier hs-var hs-var">traverseTypeArg</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684519121"><span class="annot"><span class="annottext">dim1 -&gt; f dim2
</span><a href="#local-6989586621684519121"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgDim"><span class="hs-identifier hs-type">TypeArgDim</span></a></span><span> </span><span id="local-6989586621684519119"><span class="annot"><span class="annottext">dim1
</span><a href="#local-6989586621684519119"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621684519118"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519118"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><span class="annottext">dim2 -&gt; SrcLoc -&gt; TypeArg dim2
forall dim. dim -&gt; SrcLoc -&gt; TypeArg dim
</span><a href="Language.Futhark.Syntax.html#TypeArgDim"><span class="hs-identifier hs-var">TypeArgDim</span></a></span><span> </span><span class="annot"><span class="annottext">(dim2 -&gt; SrcLoc -&gt; TypeArg dim2)
-&gt; f dim2 -&gt; f (SrcLoc -&gt; TypeArg dim2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dim2
</span><a href="#local-6989586621684519121"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">dim1
</span><a href="#local-6989586621684519119"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">f (SrcLoc -&gt; TypeArg dim2) -&gt; f SrcLoc -&gt; f (TypeArg dim2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; f SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519118"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-306"></span><span class="annot"><a href="Language.Futhark.Traversals.html#traverseTypeArg"><span class="hs-identifier hs-var">traverseTypeArg</span></a></span><span> </span><span id="local-6989586621684519117"><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519117"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684519116"><span class="annot"><span class="annottext">dim1 -&gt; f dim2
</span><a href="#local-6989586621684519116"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span id="local-6989586621684519114"><span class="annot"><span class="annottext">TypeBase dim1 ()
</span><a href="#local-6989586621684519114"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684519113"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519113"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><span class="annottext">TypeBase dim2 () -&gt; SrcLoc -&gt; TypeArg dim2
forall dim. TypeBase dim () -&gt; SrcLoc -&gt; TypeArg dim
</span><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-var">TypeArgType</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim2 () -&gt; SrcLoc -&gt; TypeArg dim2)
-&gt; f (TypeBase dim2 ()) -&gt; f (SrcLoc -&gt; TypeArg dim2)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeTraverser f TypeBase dim1 () dim2 ()
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; f TypeName
</span><a href="#local-6989586621684519117"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">dim1 -&gt; f dim2
</span><a href="#local-6989586621684519116"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; f ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim1 ()
</span><a href="#local-6989586621684519114"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">f (SrcLoc -&gt; TypeArg dim2) -&gt; f SrcLoc -&gt; f (TypeArg dim2)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; f SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519113"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructType"><span class="hs-identifier hs-type">StructType</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621684519103"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="#local-6989586621684519103"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519102"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519102"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeTraverser m TypeBase (DimDecl VName) () (DimDecl VName) ()
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; m TypeName
</span><a href="#local-6989586621684519101"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; DimDecl VName -&gt; m (DimDecl VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519102"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-312"></span><span>      </span><span id="local-6989586621684519101"><span class="annot"><span class="annottext">f :: TypeName -&gt; m TypeName
</span><a href="#local-6989586621684519101"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; TypeName) -&gt; m (QualName VName) -&gt; m TypeName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; TypeName
</span><a href="Language.Futhark.Syntax.html#typeNameFromQualName"><span class="hs-identifier hs-var">typeNameFromQualName</span></a></span><span> </span><span class="annot"><span class="annottext">(m (QualName VName) -&gt; m TypeName)
-&gt; (TypeName -&gt; m (QualName VName)) -&gt; TypeName -&gt; m TypeName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519102"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; m (QualName VName))
-&gt; (TypeName -&gt; QualName VName) -&gt; TypeName -&gt; m (QualName VName)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; QualName VName
</span><a href="Language.Futhark.Syntax.html#qualNameFromTypeName"><span class="hs-identifier hs-var">qualNameFromTypeName</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatType"><span class="hs-identifier hs-type">PatType</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>  </span><span id="local-6989586621684519087"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="#local-6989586621684519087"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519086"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519086"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeTraverser
  m TypeBase (DimDecl VName) Aliasing (DimDecl VName) Aliasing
forall (f :: * -&gt; *) dim1 als1 dims als2.
Applicative f =&gt;
TypeTraverser f TypeBase dim1 als1 dims als2
</span><a href="Language.Futhark.Traversals.html#traverseType"><span class="hs-identifier hs-var">traverseType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; m TypeName
</span><a href="#local-6989586621684519085"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; DimDecl VName -&gt; m (DimDecl VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519086"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; Aliasing -&gt; m Aliasing
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519086"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-317"></span><span>      </span><span id="local-6989586621684519085"><span class="annot"><span class="annottext">f :: TypeName -&gt; m TypeName
</span><a href="#local-6989586621684519085"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; TypeName) -&gt; m (QualName VName) -&gt; m TypeName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; TypeName
</span><a href="Language.Futhark.Syntax.html#typeNameFromQualName"><span class="hs-identifier hs-var">typeNameFromQualName</span></a></span><span> </span><span class="annot"><span class="annottext">(m (QualName VName) -&gt; m TypeName)
-&gt; (TypeName -&gt; m (QualName VName)) -&gt; TypeName -&gt; m TypeName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; QualName VName -&gt; m (QualName VName)
</span><a href="Language.Futhark.Traversals.html#mapOnQualName"><span class="hs-identifier hs-var hs-var">mapOnQualName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519086"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName -&gt; m (QualName VName))
-&gt; (TypeName -&gt; QualName VName) -&gt; TypeName -&gt; m (QualName VName)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypeName -&gt; QualName VName
</span><a href="Language.Futhark.Syntax.html#qualNameFromTypeName"><span class="hs-identifier hs-var">qualNameFromTypeName</span></a></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#StructRetType"><span class="hs-identifier hs-type">StructRetType</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-320"></span><span>  </span><span id="local-6989586621684519075"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; StructRetType -&gt; m StructRetType
</span><a href="#local-6989586621684519075"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519074"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519074"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684519073"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519073"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span id="local-6989586621684519072"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519072"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; StructType -&gt; StructRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519073"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; StructRetType) -&gt; m StructType -&gt; m StructRetType
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519074"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519072"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatRetType"><span class="hs-identifier hs-type">PatRetType</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-323"></span><span>  </span><span id="local-6989586621684519063"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; PatRetType -&gt; m PatRetType
</span><a href="#local-6989586621684519063"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519062"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519062"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684519061"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519061"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span id="local-6989586621684519060"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519060"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VName] -&gt; PatType -&gt; PatRetType
forall dim as. [VName] -&gt; TypeBase dim as -&gt; RetTypeBase dim as
</span><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-var">RetType</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684519061"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; PatRetType) -&gt; m PatType -&gt; m PatRetType
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519062"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519060"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDeclBase"><span class="hs-identifier hs-type">TypeDeclBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621684519050"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m
-&gt; TypeDeclBase Info VName -&gt; m (TypeDeclBase Info VName)
</span><a href="#local-6989586621684519050"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519049"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519049"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDecl"><span class="hs-identifier hs-type">TypeDecl</span></a></span><span> </span><span id="local-6989586621684519047"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519047"><span class="hs-identifier hs-var">dt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684519046"><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519046"><span class="hs-identifier hs-var">et</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><span class="annottext">TypeExp VName -&gt; Info StructType -&gt; TypeDeclBase Info VName
forall (f :: * -&gt; *) vn.
TypeExp vn -&gt; f StructType -&gt; TypeDeclBase f vn
</span><a href="Language.Futhark.Syntax.html#TypeDecl"><span class="hs-identifier hs-var">TypeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeExp VName -&gt; Info StructType -&gt; TypeDeclBase Info VName)
-&gt; m (TypeExp VName)
-&gt; m (Info StructType -&gt; TypeDeclBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; TypeExp VName -&gt; m (TypeExp VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519049"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684519047"><span class="hs-identifier hs-var">dt</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info StructType -&gt; TypeDeclBase Info VName)
-&gt; m (Info StructType) -&gt; m (TypeDeclBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StructType -&gt; Info StructType
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">(StructType -&gt; Info StructType)
-&gt; m StructType -&gt; m (Info StructType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; StructType -&gt; m StructType
forall (m :: * -&gt; *). ASTMapper m -&gt; StructType -&gt; m StructType
</span><a href="Language.Futhark.Traversals.html#mapOnStructType"><span class="hs-identifier hs-var hs-var">mapOnStructType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519049"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">StructType
</span><a href="#local-6989586621684519046"><span class="hs-identifier hs-var">et</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>
</span><span id="line-329"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IdentBase"><span class="hs-identifier hs-type">IdentBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-330"></span><span>  </span><span id="local-6989586621684519036"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; IdentBase Info VName -&gt; m (IdentBase Info VName)
</span><a href="#local-6989586621684519036"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519035"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519035"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-type">Ident</span></a></span><span> </span><span id="local-6989586621684519033"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519033"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684519032"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519032"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684519031"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519031"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-331"></span><span>    </span><span class="annot"><span class="annottext">VName -&gt; Info PatType -&gt; SrcLoc -&gt; IdentBase Info VName
forall (f :: * -&gt; *) vn.
vn -&gt; f PatType -&gt; SrcLoc -&gt; IdentBase f vn
</span><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-var">Ident</span></a></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; Info PatType -&gt; SrcLoc -&gt; IdentBase Info VName)
-&gt; m VName -&gt; m (Info PatType -&gt; SrcLoc -&gt; IdentBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519035"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519033"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; IdentBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; IdentBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatType -&gt; Info PatType
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Info PatType) -&gt; m PatType -&gt; m (Info PatType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519035"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684519032"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; IdentBase Info VName)
-&gt; m SrcLoc -&gt; m (IdentBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519031"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SizeBinder"><span class="hs-identifier hs-type">SizeBinder</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-334"></span><span>  </span><span id="local-6989586621684519023"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; SizeBinder VName -&gt; m (SizeBinder VName)
</span><a href="#local-6989586621684519023"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684519022"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519022"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SizeBinder"><span class="hs-identifier hs-type">SizeBinder</span></a></span><span> </span><span id="local-6989586621684519020"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519020"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684519019"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519019"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><span class="annottext">VName -&gt; SrcLoc -&gt; SizeBinder VName
forall vn. vn -&gt; SrcLoc -&gt; SizeBinder vn
</span><a href="Language.Futhark.Syntax.html#SizeBinder"><span class="hs-identifier hs-var">SizeBinder</span></a></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; SrcLoc -&gt; SizeBinder VName)
-&gt; m VName -&gt; m (SrcLoc -&gt; SizeBinder VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684519022"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684519020"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; SizeBinder VName) -&gt; m SrcLoc -&gt; m (SizeBinder VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684519019"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-338"></span><span>  </span><span id="local-6989586621684518958"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
</span><a href="#local-6989586621684518958"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518957"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518957"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621684518955"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518955"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684518954"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518954"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518953"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518953"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><span class="annottext">VName -&gt; Info PatType -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn. vn -&gt; f PatType -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; Info PatType -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m VName -&gt; m (Info PatType -&gt; SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518957"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518955"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatType -&gt; Info PatType
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Info PatType) -&gt; m PatType -&gt; m (Info PatType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518957"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518954"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518953"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-340"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518952"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518952"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684518950"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518950"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621684518949"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518949"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><span class="annottext">[PatBase Info VName] -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn. [PatBase f vn] -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-var">TuplePat</span></a></span><span> </span><span class="annot"><span class="annottext">([PatBase Info VName] -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m [PatBase Info VName] -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; m (PatBase Info VName))
-&gt; [PatBase Info VName] -&gt; m [PatBase Info VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518952"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518950"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518949"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-342"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518948"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518948"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684518946"><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684518946"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621684518945"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518945"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><span class="annottext">[(Name, PatBase Info VName)] -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn.
[(Name, PatBase f vn)] -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-var">RecordPat</span></a></span><span> </span><span class="annot"><span class="annottext">([(Name, PatBase Info VName)] -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m [(Name, PatBase Info VName)]
-&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Name, PatBase Info VName) -&gt; m (Name, PatBase Info VName))
-&gt; [(Name, PatBase Info VName)] -&gt; m [(Name, PatBase Info VName)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; m (PatBase Info VName))
-&gt; (Name, PatBase Info VName) -&gt; m (Name, PatBase Info VName)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((PatBase Info VName -&gt; m (PatBase Info VName))
 -&gt; (Name, PatBase Info VName) -&gt; m (Name, PatBase Info VName))
-&gt; (PatBase Info VName -&gt; m (PatBase Info VName))
-&gt; (Name, PatBase Info VName)
-&gt; m (Name, PatBase Info VName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518948"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684518946"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518945"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-344"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518944"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518944"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684518942"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518942"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684518941"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518941"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-345"></span><span>    </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn. PatBase f vn -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-var">PatParens</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (PatBase Info VName) -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518944"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518942"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518941"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-346"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518940"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518940"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684518938"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518938"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684518937"><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684518937"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684518936"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518936"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><span class="annottext">PatBase Info VName
-&gt; TypeDeclBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn.
PatBase f vn -&gt; TypeDeclBase f vn -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-var">PatAscription</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName
 -&gt; TypeDeclBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (PatBase Info VName)
-&gt; m (TypeDeclBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518940"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518938"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">m (TypeDeclBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (TypeDeclBase Info VName) -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
-&gt; TypeDeclBase Info VName -&gt; m (TypeDeclBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518940"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684518937"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518936"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-348"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518935"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518935"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684518933"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518933"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518932"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518932"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-349"></span><span>    </span><span class="annot"><span class="annottext">Info PatType -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn. f PatType -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-var">Wildcard</span></a></span><span> </span><span class="annot"><span class="annottext">(Info PatType -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatType -&gt; Info PatType
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Info PatType) -&gt; m PatType -&gt; m (Info PatType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518935"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518933"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518932"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-350"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518931"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518931"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span id="local-6989586621684518929"><span class="annot"><span class="annottext">PatLit
</span><a href="#local-6989586621684518929"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684518928"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518928"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518927"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518927"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">PatLit -&gt; Info PatType -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn.
PatLit -&gt; f PatType -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-var">PatLit</span></a></span><span> </span><span class="annot"><span class="annottext">PatLit
</span><a href="#local-6989586621684518929"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">(Info PatType -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatType -&gt; Info PatType
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Info PatType) -&gt; m PatType -&gt; m (Info PatType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518931"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518928"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518927"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-352"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518926"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518926"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span id="local-6989586621684518924"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518924"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span id="local-6989586621684518923"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518923"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518922"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518922"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621684518921"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518921"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-353"></span><span>    </span><span class="annot"><span class="annottext">Name
-&gt; Info PatType
-&gt; [PatBase Info VName]
-&gt; SrcLoc
-&gt; PatBase Info VName
forall (f :: * -&gt; *) vn.
Name -&gt; f PatType -&gt; [PatBase f vn] -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-var">PatConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518924"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Info PatType
 -&gt; [PatBase Info VName] -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (Info PatType)
-&gt; m ([PatBase Info VName] -&gt; SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatType -&gt; Info PatType
forall a. a -&gt; Info a
</span><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-var">Info</span></a></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; Info PatType) -&gt; m PatType -&gt; m (Info PatType)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518926"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684518923"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m ([PatBase Info VName] -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m [PatBase Info VName] -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; m (PatBase Info VName))
-&gt; [PatBase Info VName] -&gt; m [PatBase Info VName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518926"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518922"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518921"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-354"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518920"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518920"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span id="local-6989586621684518918"><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684518918"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span id="local-6989586621684518917"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518917"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684518916"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518916"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-355"></span><span>    </span><span class="annot"><span class="annottext">AttrInfo VName
-&gt; PatBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName
forall (f :: * -&gt; *) vn.
AttrInfo vn -&gt; PatBase f vn -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-var">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684518918"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; SrcLoc -&gt; PatBase Info VName)
-&gt; m (PatBase Info VName) -&gt; m (SrcLoc -&gt; PatBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518920"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518917"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; PatBase Info VName)
-&gt; m SrcLoc -&gt; m (PatBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518916"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FieldBase"><span class="hs-identifier hs-type">FieldBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-358"></span><span>  </span><span id="local-6989586621684518902"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; FieldBase Info VName -&gt; m (FieldBase Info VName)
</span><a href="#local-6989586621684518902"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518901"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518901"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldExplicit"><span class="hs-identifier hs-type">RecordFieldExplicit</span></a></span><span> </span><span id="local-6989586621684518899"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518899"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684518898"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518898"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518897"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518897"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-359"></span><span>    </span><span class="annot"><span class="annottext">Name -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; FieldBase Info VName
forall (f :: * -&gt; *) vn.
Name -&gt; ExpBase f vn -&gt; SrcLoc -&gt; FieldBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordFieldExplicit"><span class="hs-identifier hs-var">RecordFieldExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518899"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; SrcLoc -&gt; FieldBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; FieldBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518901"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518898"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; FieldBase Info VName)
-&gt; m SrcLoc -&gt; m (FieldBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518897"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-360"></span><span>  </span><span class="annot"><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span id="local-6989586621684518896"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518896"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldImplicit"><span class="hs-identifier hs-type">RecordFieldImplicit</span></a></span><span> </span><span id="local-6989586621684518894"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518894"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684518893"><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684518893"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684518892"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518892"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">VName -&gt; Info PatType -&gt; SrcLoc -&gt; FieldBase Info VName
forall (f :: * -&gt; *) vn.
vn -&gt; f PatType -&gt; SrcLoc -&gt; FieldBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordFieldImplicit"><span class="hs-identifier hs-var">RecordFieldImplicit</span></a></span><span> </span><span class="annot"><span class="annottext">(VName -&gt; Info PatType -&gt; SrcLoc -&gt; FieldBase Info VName)
-&gt; m VName -&gt; m (Info PatType -&gt; SrcLoc -&gt; FieldBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; VName -&gt; m VName
forall (m :: * -&gt; *). ASTMapper m -&gt; VName -&gt; m VName
</span><a href="Language.Futhark.Traversals.html#mapOnName"><span class="hs-identifier hs-var hs-var">mapOnName</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518896"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518894"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-362"></span><span>      </span><span class="annot"><span class="annottext">m (Info PatType -&gt; SrcLoc -&gt; FieldBase Info VName)
-&gt; m (Info PatType) -&gt; m (SrcLoc -&gt; FieldBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PatType -&gt; m PatType) -&gt; Info PatType -&gt; m (Info PatType)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatType -&gt; m PatType
forall (m :: * -&gt; *). ASTMapper m -&gt; PatType -&gt; m PatType
</span><a href="Language.Futhark.Traversals.html#mapOnPatType"><span class="hs-identifier hs-var hs-var">mapOnPatType</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518896"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><a href="#local-6989586621684518893"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-363"></span><span>      </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; FieldBase Info VName)
-&gt; m SrcLoc -&gt; m (FieldBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518892"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#CaseBase"><span class="hs-identifier hs-type">CaseBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621684518881"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; CaseBase Info VName -&gt; m (CaseBase Info VName)
</span><a href="#local-6989586621684518881"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518880"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518880"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#CasePat"><span class="hs-identifier hs-type">CasePat</span></a></span><span> </span><span id="local-6989586621684518878"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518878"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684518877"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518877"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518876"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518876"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-367"></span><span>    </span><span class="annot"><span class="annottext">PatBase Info VName
-&gt; ExpBase Info VName -&gt; SrcLoc -&gt; CaseBase Info VName
forall (f :: * -&gt; *) vn.
PatBase f vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; CaseBase f vn
</span><a href="Language.Futhark.Syntax.html#CasePat"><span class="hs-identifier hs-var">CasePat</span></a></span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName
 -&gt; ExpBase Info VName -&gt; SrcLoc -&gt; CaseBase Info VName)
-&gt; m (PatBase Info VName)
-&gt; m (ExpBase Info VName -&gt; SrcLoc -&gt; CaseBase Info VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; PatBase Info VName -&gt; m (PatBase Info VName)
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518880"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518878"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">m (ExpBase Info VName -&gt; SrcLoc -&gt; CaseBase Info VName)
-&gt; m (ExpBase Info VName) -&gt; m (SrcLoc -&gt; CaseBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
forall (m :: * -&gt; *).
ASTMapper m -&gt; ExpBase Info VName -&gt; m (ExpBase Info VName)
</span><a href="Language.Futhark.Traversals.html#mapOnExp"><span class="hs-identifier hs-var hs-var">mapOnExp</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518880"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518877"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">m (SrcLoc -&gt; CaseBase Info VName)
-&gt; m SrcLoc -&gt; m (CaseBase Info VName)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; m SrcLoc
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518876"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span id="local-6989586621684520224"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520224"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520224"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-370"></span><span>  </span><span id="local-6989586621684518867"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; Info a -&gt; m (Info a)
</span><a href="#local-6989586621684518867"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518866"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518866"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m a) -&gt; Info a -&gt; m (Info a)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m a) -&gt; Info a -&gt; m (Info a))
-&gt; (a -&gt; m a) -&gt; Info a -&gt; m (Info a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; a -&gt; m a
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518866"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span id="local-6989586621684520254"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520254"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621684520254"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-373"></span><span>  </span><span id="local-6989586621684518857"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *). Monad m =&gt; ASTMapper m -&gt; [a] -&gt; m [a]
</span><a href="#local-6989586621684518857"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518856"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518856"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m a) -&gt; [a] -&gt; m [a]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m a) -&gt; [a] -&gt; m [a]) -&gt; (a -&gt; m a) -&gt; [a] -&gt; m [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; a -&gt; m a
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518856"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span id="local-6989586621684520255"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520255"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621684520255"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621684518846"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; NonEmpty a -&gt; m (NonEmpty a)
</span><a href="#local-6989586621684518846"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518845"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518845"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; m a) -&gt; NonEmpty a -&gt; m (NonEmpty a)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m a) -&gt; NonEmpty a -&gt; m (NonEmpty a))
-&gt; (a -&gt; m a) -&gt; NonEmpty a -&gt; m (NonEmpty a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; a -&gt; m a
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518845"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span id="local-6989586621684520107"><span id="local-6989586621684520108"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520108"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520107"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621684520108"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621684520107"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-379"></span><span>  </span><span id="local-6989586621684518831"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *). Monad m =&gt; ASTMapper m -&gt; (a, b) -&gt; m (a, b)
</span><a href="#local-6989586621684518831"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518830"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518830"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684518829"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684518829"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684518828"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621684518828"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; (a, b)) -&gt; m a -&gt; m (b -&gt; (a, b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; a -&gt; m a
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518830"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684518829"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">m (b -&gt; (a, b)) -&gt; m b -&gt; m (a, b)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; b -&gt; m b
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518830"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621684518828"><span class="hs-identifier hs-var">y</span></a></span></span></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span id="local-6989586621684520100"><span id="local-6989586621684520101"><span id="local-6989586621684520102"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520101"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684520100"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Traversals.html#ASTMappable"><span class="hs-identifier hs-type">ASTMappable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621684520102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621684520101"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621684520100"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>  </span><span id="local-6989586621684518810"><span class="annot"><span class="annottext">astMap :: forall (m :: * -&gt; *).
Monad m =&gt;
ASTMapper m -&gt; (a, b, c) -&gt; m (a, b, c)
</span><a href="#local-6989586621684518810"><span class="hs-identifier hs-var hs-var hs-var hs-var">astMap</span></a></span></span><span> </span><span id="local-6989586621684518809"><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518809"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684518808"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684518808"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684518807"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621684518807"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684518806"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621684518806"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; c -&gt; (a, b, c)) -&gt; m a -&gt; m (b -&gt; c -&gt; (a, b, c))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; a -&gt; m a
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518809"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684518808"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">m (b -&gt; c -&gt; (a, b, c)) -&gt; m b -&gt; m (c -&gt; (a, b, c))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; b -&gt; m b
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518809"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621684518807"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">m (c -&gt; (a, b, c)) -&gt; m c -&gt; m (a, b, c)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">ASTMapper m -&gt; c -&gt; m c
forall x (m :: * -&gt; *).
(ASTMappable x, Monad m) =&gt;
ASTMapper m -&gt; x -&gt; m x
</span><a href="Language.Futhark.Traversals.html#astMap"><span class="hs-identifier hs-var">astMap</span></a></span><span> </span><span class="annot"><span class="annottext">ASTMapper m
</span><a href="#local-6989586621684518809"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621684518806"><span class="hs-identifier hs-var">z</span></a></span></span></span></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-comment">-- It would be lovely if the following code would be written in terms</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- of ASTMappable, but unfortunately it involves changing the Info</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- functor.  For simplicity, the general traversals do not support</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- that.  Sometimes a little duplication is better than an overly</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- complex abstraction.  The types ensure that this will be correct</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- anyway, so it's just tedious, and not actually fragile.</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareTypeDecl"><span class="hs-identifier hs-type">bareTypeDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDeclBase"><span class="hs-identifier hs-type">TypeDeclBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDeclBase"><span class="hs-identifier hs-type">TypeDeclBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-392"></span><span id="bareTypeDecl"><span class="annot"><span class="annottext">bareTypeDecl :: TypeDeclBase Info VName -&gt; TypeDeclBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareTypeDecl"><span class="hs-identifier hs-var hs-var">bareTypeDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDecl"><span class="hs-identifier hs-type">TypeDecl</span></a></span><span> </span><span id="local-6989586621684518804"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684518804"><span class="hs-identifier hs-var">te</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info StructType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeExp VName -&gt; NoInfo StructType -&gt; TypeDeclBase NoInfo VName
forall (f :: * -&gt; *) vn.
TypeExp vn -&gt; f StructType -&gt; TypeDeclBase f vn
</span><a href="Language.Futhark.Syntax.html#TypeDecl"><span class="hs-identifier hs-var">TypeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684518804"><span class="hs-identifier hs-var">te</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo StructType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareField"><span class="hs-identifier hs-type">bareField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#FieldBase"><span class="hs-identifier hs-type">FieldBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#FieldBase"><span class="hs-identifier hs-type">FieldBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-395"></span><span id="bareField"><span class="annot"><span class="annottext">bareField :: FieldBase Info VName -&gt; FieldBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareField"><span class="hs-identifier hs-var hs-var">bareField</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldExplicit"><span class="hs-identifier hs-type">RecordFieldExplicit</span></a></span><span> </span><span id="local-6989586621684518801"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518801"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684518800"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518800"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518799"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518799"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-396"></span><span>  </span><span class="annot"><span class="annottext">Name -&gt; ExpBase NoInfo VName -&gt; SrcLoc -&gt; FieldBase NoInfo VName
forall (f :: * -&gt; *) vn.
Name -&gt; ExpBase f vn -&gt; SrcLoc -&gt; FieldBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordFieldExplicit"><span class="hs-identifier hs-var">RecordFieldExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518801"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518800"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518799"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-397"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareField"><span class="hs-identifier hs-var">bareField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldImplicit"><span class="hs-identifier hs-type">RecordFieldImplicit</span></a></span><span> </span><span id="local-6989586621684518798"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518798"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518797"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518797"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-398"></span><span>  </span><span class="annot"><span class="annottext">VName -&gt; NoInfo PatType -&gt; SrcLoc -&gt; FieldBase NoInfo VName
forall (f :: * -&gt; *) vn.
vn -&gt; f PatType -&gt; SrcLoc -&gt; FieldBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordFieldImplicit"><span class="hs-identifier hs-var">RecordFieldImplicit</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518798"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518797"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-type">barePat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-401"></span><span id="barePat"><span class="annot"><span class="annottext">barePat :: PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var hs-var">barePat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684518795"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518795"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621684518794"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518794"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PatBase NoInfo VName] -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn. [PatBase f vn] -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-var">TuplePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; PatBase NoInfo VName)
-&gt; [PatBase Info VName] -&gt; [PatBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518795"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518794"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-402"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684518793"><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684518793"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621684518792"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518792"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase NoInfo VName)] -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn.
[(Name, PatBase f vn)] -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-var">RecordPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Name, PatBase Info VName) -&gt; (Name, PatBase NoInfo VName))
-&gt; [(Name, PatBase Info VName)] -&gt; [(Name, PatBase NoInfo VName)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; PatBase NoInfo VName)
-&gt; (Name, PatBase Info VName) -&gt; (Name, PatBase NoInfo VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase Info VName)]
</span><a href="#local-6989586621684518793"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518792"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-403"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684518791"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518791"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684518790"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518790"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase NoInfo VName -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn. PatBase f vn -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-var">PatParens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518791"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518790"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-404"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621684518789"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518789"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518788"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518788"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VName -&gt; NoInfo PatType -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn. vn -&gt; f PatType -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518789"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518788"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-405"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518787"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518787"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoInfo PatType -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn. f PatType -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-var">Wildcard</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518787"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-406"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684518786"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518786"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDecl"><span class="hs-identifier hs-type">TypeDecl</span></a></span><span> </span><span id="local-6989586621684518785"><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684518785"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info StructType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518784"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518784"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-407"></span><span>  </span><span class="annot"><span class="annottext">PatBase NoInfo VName
-&gt; TypeDeclBase NoInfo VName -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn.
PatBase f vn -&gt; TypeDeclBase f vn -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-var">PatAscription</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518786"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeExp VName -&gt; NoInfo StructType -&gt; TypeDeclBase NoInfo VName
forall (f :: * -&gt; *) vn.
TypeExp vn -&gt; f StructType -&gt; TypeDeclBase f vn
</span><a href="Language.Futhark.Syntax.html#TypeDecl"><span class="hs-identifier hs-var">TypeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">TypeExp VName
</span><a href="#local-6989586621684518785"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo StructType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518784"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-408"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span id="local-6989586621684518783"><span class="annot"><span class="annottext">PatLit
</span><a href="#local-6989586621684518783"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518782"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518782"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatLit -&gt; NoInfo PatType -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn.
PatLit -&gt; f PatType -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-var">PatLit</span></a></span><span> </span><span class="annot"><span class="annottext">PatLit
</span><a href="#local-6989586621684518783"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518782"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-409"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span id="local-6989586621684518781"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518781"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518780"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518780"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621684518779"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518779"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; NoInfo PatType
-&gt; [PatBase NoInfo VName]
-&gt; SrcLoc
-&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn.
Name -&gt; f PatType -&gt; [PatBase f vn] -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-var">PatConstr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518781"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; PatBase NoInfo VName)
-&gt; [PatBase Info VName] -&gt; [PatBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518780"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518779"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-410"></span><span class="annot"><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span id="local-6989586621684518778"><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684518778"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span id="local-6989586621684518777"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518777"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684518776"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518776"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
-&gt; PatBase NoInfo VName -&gt; SrcLoc -&gt; PatBase NoInfo VName
forall (f :: * -&gt; *) vn.
AttrInfo vn -&gt; PatBase f vn -&gt; SrcLoc -&gt; PatBase f vn
</span><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-var">PatAttr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684518778"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518777"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518776"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareDimIndex"><span class="hs-identifier hs-type">bareDimIndex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#DimIndexBase"><span class="hs-identifier hs-type">DimIndexBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#DimIndexBase"><span class="hs-identifier hs-type">DimIndexBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-413"></span><span id="bareDimIndex"><span class="annot"><span class="annottext">bareDimIndex :: DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareDimIndex"><span class="hs-identifier hs-var hs-var">bareDimIndex</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimFix"><span class="hs-identifier hs-type">DimFix</span></a></span><span> </span><span id="local-6989586621684518774"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518774"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-414"></span><span>  </span><span class="annot"><span class="annottext">ExpBase NoInfo VName -&gt; DimIndexBase NoInfo VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; DimIndexBase f vn
</span><a href="Language.Futhark.Syntax.html#DimFix"><span class="hs-identifier hs-var">DimFix</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase NoInfo VName -&gt; DimIndexBase NoInfo VName)
-&gt; ExpBase NoInfo VName -&gt; DimIndexBase NoInfo VName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518774"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-415"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareDimIndex"><span class="hs-identifier hs-var">bareDimIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimSlice"><span class="hs-identifier hs-type">DimSlice</span></a></span><span> </span><span id="local-6989586621684518773"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518773"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684518772"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518772"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621684518771"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518771"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-416"></span><span>  </span><span class="annot"><span class="annottext">Maybe (ExpBase NoInfo VName)
-&gt; Maybe (ExpBase NoInfo VName)
-&gt; Maybe (ExpBase NoInfo VName)
-&gt; DimIndexBase NoInfo VName
forall (f :: * -&gt; *) vn.
Maybe (ExpBase f vn)
-&gt; Maybe (ExpBase f vn)
-&gt; Maybe (ExpBase f vn)
-&gt; DimIndexBase f vn
</span><a href="Language.Futhark.Syntax.html#DimSlice"><span class="hs-identifier hs-var">DimSlice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; Maybe (ExpBase Info VName) -&gt; Maybe (ExpBase NoInfo VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518773"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; Maybe (ExpBase Info VName) -&gt; Maybe (ExpBase NoInfo VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518772"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; Maybe (ExpBase Info VName) -&gt; Maybe (ExpBase NoInfo VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518771"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareLoopForm"><span class="hs-identifier hs-type">bareLoopForm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#LoopFormBase"><span class="hs-identifier hs-type">LoopFormBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#LoopFormBase"><span class="hs-identifier hs-type">LoopFormBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-419"></span><span id="bareLoopForm"><span class="annot"><span class="annottext">bareLoopForm :: LoopFormBase Info VName -&gt; LoopFormBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareLoopForm"><span class="hs-identifier hs-var hs-var">bareLoopForm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#For"><span class="hs-identifier hs-type">For</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-type">Ident</span></a></span><span> </span><span id="local-6989586621684518769"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518769"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518768"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518768"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518767"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518767"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdentBase NoInfo VName
-&gt; ExpBase NoInfo VName -&gt; LoopFormBase NoInfo VName
forall (f :: * -&gt; *) vn.
IdentBase f vn -&gt; ExpBase f vn -&gt; LoopFormBase f vn
</span><a href="Language.Futhark.Syntax.html#For"><span class="hs-identifier hs-var">For</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; NoInfo PatType -&gt; SrcLoc -&gt; IdentBase NoInfo VName
forall (f :: * -&gt; *) vn.
vn -&gt; f PatType -&gt; SrcLoc -&gt; IdentBase f vn
</span><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-var">Ident</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518769"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518768"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518767"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareLoopForm"><span class="hs-identifier hs-var">bareLoopForm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ForIn"><span class="hs-identifier hs-type">ForIn</span></a></span><span> </span><span id="local-6989586621684518766"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518766"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684518765"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518765"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase NoInfo VName
-&gt; ExpBase NoInfo VName -&gt; LoopFormBase NoInfo VName
forall (f :: * -&gt; *) vn.
PatBase f vn -&gt; ExpBase f vn -&gt; LoopFormBase f vn
</span><a href="Language.Futhark.Syntax.html#ForIn"><span class="hs-identifier hs-var">ForIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518766"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518765"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareLoopForm"><span class="hs-identifier hs-var">bareLoopForm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#While"><span class="hs-identifier hs-type">While</span></a></span><span> </span><span id="local-6989586621684518764"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518764"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase NoInfo VName -&gt; LoopFormBase NoInfo VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; LoopFormBase f vn
</span><a href="Language.Futhark.Syntax.html#While"><span class="hs-identifier hs-var">While</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518764"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareCase"><span class="hs-identifier hs-type">bareCase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#CaseBase"><span class="hs-identifier hs-type">CaseBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#CaseBase"><span class="hs-identifier hs-type">CaseBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-424"></span><span id="bareCase"><span class="annot"><span class="annottext">bareCase :: CaseBase Info VName -&gt; CaseBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareCase"><span class="hs-identifier hs-var hs-var">bareCase</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#CasePat"><span class="hs-identifier hs-type">CasePat</span></a></span><span> </span><span id="local-6989586621684518762"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518762"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684518761"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518761"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518760"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518760"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase NoInfo VName
-&gt; ExpBase NoInfo VName -&gt; SrcLoc -&gt; CaseBase NoInfo VName
forall (f :: * -&gt; *) vn.
PatBase f vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; CaseBase f vn
</span><a href="Language.Futhark.Syntax.html#CasePat"><span class="hs-identifier hs-var">CasePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518762"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518761"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518760"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="hs-comment">-- | Remove all annotations from an expression, but retain the</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- name/scope information.</span><span>
</span><span id="line-428"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-type">bareExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span>
</span><span id="line-429"></span><span id="bareExp"><span class="annot"><span class="annottext">bareExp :: ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var hs-var">bareExp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621684518759"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518759"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518758"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518758"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; NoInfo PatType -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
QualName vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518759"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518758"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-430"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span id="local-6989586621684518757"><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684518757"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684518756"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518756"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimValue -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn. PrimValue -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Literal"><span class="hs-identifier hs-var">Literal</span></a></span><span> </span><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684518757"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518756"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-431"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IntLit"><span class="hs-identifier hs-type">IntLit</span></a></span><span> </span><span id="local-6989586621684518755"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684518755"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518754"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518754"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; NoInfo PatType -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
Integer -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684518755"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518754"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-432"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FloatLit"><span class="hs-identifier hs-type">FloatLit</span></a></span><span> </span><span id="local-6989586621684518753"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684518753"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518752"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518752"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; NoInfo PatType -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
Double -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#FloatLit"><span class="hs-identifier hs-var">FloatLit</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684518753"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518752"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-433"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Parens"><span class="hs-identifier hs-type">Parens</span></a></span><span> </span><span id="local-6989586621684518751"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518751"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518750"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518750"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase NoInfo VName -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Parens"><span class="hs-identifier hs-var">Parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518751"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518750"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-434"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualParens"><span class="hs-identifier hs-type">QualParens</span></a></span><span> </span><span id="local-6989586621684518749"><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
</span><a href="#local-6989586621684518749"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684518748"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518748"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518747"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518747"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
-&gt; ExpBase NoInfo VName -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
(QualName vn, SrcLoc) -&gt; ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#QualParens"><span class="hs-identifier hs-var">QualParens</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
</span><a href="#local-6989586621684518749"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518748"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518747"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-435"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TupLit"><span class="hs-identifier hs-type">TupLit</span></a></span><span> </span><span id="local-6989586621684518746"><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684518746"><span class="hs-identifier hs-var">els</span></a></span></span><span> </span><span id="local-6989586621684518745"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518745"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ExpBase NoInfo VName] -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn. [ExpBase f vn] -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#TupLit"><span class="hs-identifier hs-var">TupLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; [ExpBase Info VName] -&gt; [ExpBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684518746"><span class="hs-identifier hs-var">els</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518745"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-436"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#StringLit"><span class="hs-identifier hs-type">StringLit</span></a></span><span> </span><span id="local-6989586621684518744"><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684518744"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621684518743"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518743"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Word8] -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn. [Word8] -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#StringLit"><span class="hs-identifier hs-var">StringLit</span></a></span><span> </span><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684518744"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518743"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordLit"><span class="hs-identifier hs-type">RecordLit</span></a></span><span> </span><span id="local-6989586621684518742"><span class="annot"><span class="annottext">[FieldBase Info VName]
</span><a href="#local-6989586621684518742"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621684518741"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518741"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldBase NoInfo VName] -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn. [FieldBase f vn] -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordLit"><span class="hs-identifier hs-var">RecordLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FieldBase Info VName -&gt; FieldBase NoInfo VName)
-&gt; [FieldBase Info VName] -&gt; [FieldBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldBase Info VName -&gt; FieldBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareField"><span class="hs-identifier hs-var">bareField</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldBase Info VName]
</span><a href="#local-6989586621684518742"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518741"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-438"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-type">ArrayLit</span></a></span><span> </span><span id="local-6989586621684518740"><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684518740"><span class="hs-identifier hs-var">els</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518739"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518739"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ExpBase NoInfo VName]
-&gt; NoInfo PatType -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
[ExpBase f vn] -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-var">ArrayLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; [ExpBase Info VName] -&gt; [ExpBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684518740"><span class="hs-identifier hs-var">els</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518739"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-439"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ascript"><span class="hs-identifier hs-type">Ascript</span></a></span><span> </span><span id="local-6989586621684518738"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518738"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518737"><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684518737"><span class="hs-identifier hs-var">tdecl</span></a></span></span><span> </span><span id="local-6989586621684518736"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518736"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; TypeDeclBase NoInfo VName -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; TypeDeclBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Ascript"><span class="hs-identifier hs-var">Ascript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518738"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDeclBase Info VName -&gt; TypeDeclBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareTypeDecl"><span class="hs-identifier hs-var">bareTypeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684518737"><span class="hs-identifier hs-var">tdecl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518736"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-441"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Negate"><span class="hs-identifier hs-type">Negate</span></a></span><span> </span><span id="local-6989586621684518735"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518735"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684518734"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518734"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase NoInfo VName -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Negate"><span class="hs-identifier hs-var">Negate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518735"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518734"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-442"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Not"><span class="hs-identifier hs-type">Not</span></a></span><span> </span><span id="local-6989586621684518733"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518733"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684518732"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518732"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase NoInfo VName -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn. ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Not"><span class="hs-identifier hs-var">Not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518733"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518732"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-443"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Update"><span class="hs-identifier hs-type">Update</span></a></span><span> </span><span id="local-6989586621684518731"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518731"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684518730"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518730"><span class="hs-identifier hs-var">slice</span></a></span></span><span> </span><span id="local-6989586621684518729"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518729"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684518728"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518728"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; SliceBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; SliceBase f vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Update"><span class="hs-identifier hs-var">Update</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518731"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName)
-&gt; SliceBase Info VName -&gt; SliceBase NoInfo VName
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareDimIndex"><span class="hs-identifier hs-var">bareDimIndex</span></a></span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518730"><span class="hs-identifier hs-var">slice</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518729"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518728"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-445"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordUpdate"><span class="hs-identifier hs-type">RecordUpdate</span></a></span><span> </span><span id="local-6989586621684518727"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518727"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684518726"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684518726"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621684518725"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518725"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518724"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518724"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-446"></span><span>  </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; [Name]
-&gt; ExpBase NoInfo VName
-&gt; NoInfo PatType
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; [Name] -&gt; ExpBase f vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#RecordUpdate"><span class="hs-identifier hs-var">RecordUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518727"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684518726"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518725"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518724"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-447"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Project"><span class="hs-identifier hs-type">Project</span></a></span><span> </span><span id="local-6989586621684518723"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518723"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span id="local-6989586621684518722"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518722"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518721"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518721"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-448"></span><span>  </span><span class="annot"><span class="annottext">Name
-&gt; ExpBase NoInfo VName
-&gt; NoInfo PatType
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
Name -&gt; ExpBase f vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Project"><span class="hs-identifier hs-var">Project</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518723"><span class="hs-identifier hs-var">field</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518722"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518721"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-449"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Assert"><span class="hs-identifier hs-type">Assert</span></a></span><span> </span><span id="local-6989586621684518720"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518720"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621684518719"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518719"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518718"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518718"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; NoInfo String
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; ExpBase f vn -&gt; f String -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Assert"><span class="hs-identifier hs-var">Assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518720"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518719"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo String
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518718"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-450"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span id="local-6989586621684518717"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518717"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621684518716"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518716"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684518715"><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684518715"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info (Aliasing, StructRetType)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518714"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518714"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-451"></span><span>  </span><span class="annot"><span class="annottext">[PatBase NoInfo VName]
-&gt; ExpBase NoInfo VName
-&gt; Maybe (TypeExp VName)
-&gt; NoInfo (Aliasing, StructRetType)
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
[PatBase f vn]
-&gt; ExpBase f vn
-&gt; Maybe (TypeExp vn)
-&gt; f (Aliasing, StructRetType)
-&gt; SrcLoc
-&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Lambda"><span class="hs-identifier hs-var">Lambda</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; PatBase NoInfo VName)
-&gt; [PatBase Info VName] -&gt; [PatBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518717"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518716"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684518715"><span class="hs-identifier hs-var">ret</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo (Aliasing, StructRetType)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518714"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-452"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSection"><span class="hs-identifier hs-type">OpSection</span></a></span><span> </span><span id="local-6989586621684518713"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518713"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518712"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518712"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; NoInfo PatType -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
QualName vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#OpSection"><span class="hs-identifier hs-var">OpSection</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518713"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518712"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-453"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionLeft"><span class="hs-identifier hs-type">OpSectionLeft</span></a></span><span> </span><span id="local-6989586621684518711"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518711"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518710"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518710"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="annot"><span class="annottext">(Info (PName, StructType, Maybe VName), Info (PName, StructType))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(Info PatRetType, Info [VName])
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518709"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518709"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-454"></span><span>  </span><span class="annot"><span class="annottext">QualName VName
-&gt; NoInfo PatType
-&gt; ExpBase NoInfo VName
-&gt; (NoInfo (PName, StructType, Maybe VName),
    NoInfo (PName, StructType))
-&gt; (NoInfo PatRetType, NoInfo [VName])
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
QualName vn
-&gt; f PatType
-&gt; ExpBase f vn
-&gt; (f (PName, StructType, Maybe VName), f (PName, StructType))
-&gt; (f PatRetType, f [VName])
-&gt; SrcLoc
-&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#OpSectionLeft"><span class="hs-identifier hs-var">OpSectionLeft</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518711"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518710"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NoInfo (PName, StructType, Maybe VName)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NoInfo (PName, StructType)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NoInfo PatRetType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NoInfo [VName]
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518709"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-455"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionRight"><span class="hs-identifier hs-type">OpSectionRight</span></a></span><span> </span><span id="local-6989586621684518708"><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518708"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518707"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518707"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="annot"><span class="annottext">(Info (PName, StructType), Info (PName, StructType, Maybe VName))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Info PatRetType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518706"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518706"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-456"></span><span>  </span><span class="annot"><span class="annottext">QualName VName
-&gt; NoInfo PatType
-&gt; ExpBase NoInfo VName
-&gt; (NoInfo (PName, StructType),
    NoInfo (PName, StructType, Maybe VName))
-&gt; NoInfo PatRetType
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
QualName vn
-&gt; f PatType
-&gt; ExpBase f vn
-&gt; (f (PName, StructType), f (PName, StructType, Maybe VName))
-&gt; f PatRetType
-&gt; SrcLoc
-&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#OpSectionRight"><span class="hs-identifier hs-var">OpSectionRight</span></a></span><span> </span><span class="annot"><span class="annottext">QualName VName
</span><a href="#local-6989586621684518708"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518707"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NoInfo (PName, StructType)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NoInfo (PName, StructType, Maybe VName)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo PatRetType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518706"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-457"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ProjectSection"><span class="hs-identifier hs-type">ProjectSection</span></a></span><span> </span><span id="local-6989586621684518705"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684518705"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518704"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518704"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; NoInfo PatType -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
[Name] -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#ProjectSection"><span class="hs-identifier hs-var">ProjectSection</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684518705"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518704"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-458"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IndexSection"><span class="hs-identifier hs-type">IndexSection</span></a></span><span> </span><span id="local-6989586621684518703"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518703"><span class="hs-identifier hs-var">slice</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518702"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518702"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-459"></span><span>  </span><span class="annot"><span class="annottext">SliceBase NoInfo VName
-&gt; NoInfo PatType -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
SliceBase f vn -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#IndexSection"><span class="hs-identifier hs-var">IndexSection</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName)
-&gt; SliceBase Info VName -&gt; SliceBase NoInfo VName
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareDimIndex"><span class="hs-identifier hs-var">bareDimIndex</span></a></span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518703"><span class="hs-identifier hs-var">slice</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518702"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-460"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Constr"><span class="hs-identifier hs-type">Constr</span></a></span><span> </span><span id="local-6989586621684518701"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518701"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684518700"><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684518700"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518699"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518699"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-461"></span><span>  </span><span class="annot"><span class="annottext">Name
-&gt; [ExpBase NoInfo VName]
-&gt; NoInfo PatType
-&gt; SrcLoc
-&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
Name -&gt; [ExpBase f vn] -&gt; f PatType -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Constr"><span class="hs-identifier hs-var">Constr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684518701"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; [ExpBase Info VName] -&gt; [ExpBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">[ExpBase Info VName]
</span><a href="#local-6989586621684518700"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518699"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-462"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-type">AppExp</span></a></span><span> </span><span id="local-6989586621684518698"><span class="annot"><span class="annottext">AppExpBase Info VName
</span><a href="#local-6989586621684518698"><span class="hs-identifier hs-var">appexp</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info AppRes
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-463"></span><span>  </span><span class="annot"><span class="annottext">AppExpBase NoInfo VName -&gt; NoInfo AppRes -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
AppExpBase f vn -&gt; f AppRes -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-var">AppExp</span></a></span><span> </span><span class="annot"><span class="annottext">AppExpBase NoInfo VName
</span><a href="#local-6989586621684518697"><span class="hs-identifier hs-var">appexp'</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo AppRes
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621684518697"><span class="annot"><span class="annottext">appexp' :: AppExpBase NoInfo VName
</span><a href="#local-6989586621684518697"><span class="hs-identifier hs-var hs-var">appexp'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-466"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AppExpBase Info VName
</span><a href="#local-6989586621684518698"><span class="hs-identifier hs-var">appexp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-467"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span id="local-6989586621684518691"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518691"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518690"><span class="annot"><span class="annottext">NonEmpty (CaseBase Info VName)
</span><a href="#local-6989586621684518690"><span class="hs-identifier hs-var">cases</span></a></span></span><span> </span><span id="local-6989586621684518689"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518689"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-468"></span><span>          </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; NonEmpty (CaseBase NoInfo VName)
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; NonEmpty (CaseBase f vn) -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Match"><span class="hs-identifier hs-var">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518691"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CaseBase Info VName -&gt; CaseBase NoInfo VName)
-&gt; NonEmpty (CaseBase Info VName)
-&gt; NonEmpty (CaseBase NoInfo VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">CaseBase Info VName -&gt; CaseBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareCase"><span class="hs-identifier hs-var">bareCase</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (CaseBase Info VName)
</span><a href="#local-6989586621684518690"><span class="hs-identifier hs-var">cases</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518689"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-469"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#DoLoop"><span class="hs-identifier hs-type">DoLoop</span></a></span><span> </span><span class="annot"><span class="annottext">[VName]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518688"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518688"><span class="hs-identifier hs-var">mergepat</span></a></span></span><span> </span><span id="local-6989586621684518687"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518687"><span class="hs-identifier hs-var">mergeexp</span></a></span></span><span> </span><span id="local-6989586621684518686"><span class="annot"><span class="annottext">LoopFormBase Info VName
</span><a href="#local-6989586621684518686"><span class="hs-identifier hs-var">form</span></a></span></span><span> </span><span id="local-6989586621684518685"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518685"><span class="hs-identifier hs-var">loopbody</span></a></span></span><span> </span><span id="local-6989586621684518684"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518684"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-470"></span><span>          </span><span class="annot"><span class="annottext">[VName]
-&gt; PatBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; LoopFormBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
[VName]
-&gt; PatBase f vn
-&gt; ExpBase f vn
-&gt; LoopFormBase f vn
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#DoLoop"><span class="hs-identifier hs-var">DoLoop</span></a></span><span>
</span><span id="line-471"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-472"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518688"><span class="hs-identifier hs-var">mergepat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518687"><span class="hs-identifier hs-var">mergeexp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LoopFormBase Info VName -&gt; LoopFormBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareLoopForm"><span class="hs-identifier hs-var">bareLoopForm</span></a></span><span> </span><span class="annot"><span class="annottext">LoopFormBase Info VName
</span><a href="#local-6989586621684518686"><span class="hs-identifier hs-var">form</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518685"><span class="hs-identifier hs-var">loopbody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span>            </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518684"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-477"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#LetWith"><span class="hs-identifier hs-type">LetWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-type">Ident</span></a></span><span> </span><span id="local-6989586621684518683"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518683"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518682"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518682"><span class="hs-identifier hs-var">destloc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-type">Ident</span></a></span><span> </span><span id="local-6989586621684518681"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518681"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518680"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518680"><span class="hs-identifier hs-var">srcloc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518679"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518679"><span class="hs-identifier hs-var">idxexps</span></a></span></span><span> </span><span id="local-6989586621684518678"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518678"><span class="hs-identifier hs-var">vexp</span></a></span></span><span> </span><span id="local-6989586621684518677"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518677"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684518676"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518676"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-478"></span><span>          </span><span class="annot"><span class="annottext">IdentBase NoInfo VName
-&gt; IdentBase NoInfo VName
-&gt; SliceBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
IdentBase f vn
-&gt; IdentBase f vn
-&gt; SliceBase f vn
-&gt; ExpBase f vn
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#LetWith"><span class="hs-identifier hs-var">LetWith</span></a></span><span>
</span><span id="line-479"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; NoInfo PatType -&gt; SrcLoc -&gt; IdentBase NoInfo VName
forall (f :: * -&gt; *) vn.
vn -&gt; f PatType -&gt; SrcLoc -&gt; IdentBase f vn
</span><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-var">Ident</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518683"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518682"><span class="hs-identifier hs-var">destloc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; NoInfo PatType -&gt; SrcLoc -&gt; IdentBase NoInfo VName
forall (f :: * -&gt; *) vn.
vn -&gt; f PatType -&gt; SrcLoc -&gt; IdentBase f vn
</span><a href="Language.Futhark.Syntax.html#Ident"><span class="hs-identifier hs-var">Ident</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518681"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518680"><span class="hs-identifier hs-var">srcloc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName)
-&gt; SliceBase Info VName -&gt; SliceBase NoInfo VName
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareDimIndex"><span class="hs-identifier hs-var">bareDimIndex</span></a></span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518679"><span class="hs-identifier hs-var">idxexps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518678"><span class="hs-identifier hs-var">vexp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518677"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>            </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518676"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-485"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-type">BinOp</span></a></span><span> </span><span id="local-6989586621684518675"><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
</span><a href="#local-6989586621684518675"><span class="hs-identifier hs-var">fname</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684518674"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518674"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Info (StructType, Maybe VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684518673"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518673"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Info (StructType, Maybe VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518672"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518672"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-486"></span><span>          </span><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
-&gt; NoInfo PatType
-&gt; (ExpBase NoInfo VName, NoInfo (StructType, Maybe VName))
-&gt; (ExpBase NoInfo VName, NoInfo (StructType, Maybe VName))
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
(QualName vn, SrcLoc)
-&gt; f PatType
-&gt; (ExpBase f vn, f (StructType, Maybe VName))
-&gt; (ExpBase f vn, f (StructType, Maybe VName))
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-var">BinOp</span></a></span><span> </span><span class="annot"><span class="annottext">(QualName VName, SrcLoc)
</span><a href="#local-6989586621684518675"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">NoInfo PatType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518674"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NoInfo (StructType, Maybe VName)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518673"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NoInfo (StructType, Maybe VName)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518672"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-487"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#If"><span class="hs-identifier hs-type">If</span></a></span><span> </span><span id="local-6989586621684518671"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518671"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621684518670"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518670"><span class="hs-identifier hs-var">texp</span></a></span></span><span> </span><span id="local-6989586621684518669"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518669"><span class="hs-identifier hs-var">fexp</span></a></span></span><span> </span><span id="local-6989586621684518668"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518668"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-488"></span><span>          </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; ExpBase f vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#If"><span class="hs-identifier hs-var">If</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518671"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518670"><span class="hs-identifier hs-var">texp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518669"><span class="hs-identifier hs-var">fexp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518668"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-489"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621684518667"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518667"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684518666"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518666"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="annot"><span class="annottext">Info (Diet, Maybe VName)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684518665"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518665"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-490"></span><span>          </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; NoInfo (Diet, Maybe VName)
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; ExpBase f vn
-&gt; f (Diet, Maybe VName)
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518667"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518666"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NoInfo (Diet, Maybe VName)
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518665"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-491"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#LetPat"><span class="hs-identifier hs-type">LetPat</span></a></span><span> </span><span id="local-6989586621684518664"><span class="annot"><span class="annottext">[SizeBinder VName]
</span><a href="#local-6989586621684518664"><span class="hs-identifier hs-var">sizes</span></a></span></span><span> </span><span id="local-6989586621684518663"><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518663"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684518662"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518662"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518661"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518661"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684518660"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518660"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-492"></span><span>          </span><span class="annot"><span class="annottext">[SizeBinder VName]
-&gt; PatBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; ExpBase NoInfo VName
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
[SizeBinder vn]
-&gt; PatBase f vn
-&gt; ExpBase f vn
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#LetPat"><span class="hs-identifier hs-var">LetPat</span></a></span><span> </span><span class="annot"><span class="annottext">[SizeBinder VName]
</span><a href="#local-6989586621684518664"><span class="hs-identifier hs-var">sizes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName
</span><a href="#local-6989586621684518663"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518662"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518661"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518660"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-493"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#LetFun"><span class="hs-identifier hs-type">LetFun</span></a></span><span> </span><span id="local-6989586621684518659"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518659"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684518658"><span class="annot"><span class="annottext">[TypeParamBase VName]
</span><a href="#local-6989586621684518658"><span class="hs-identifier hs-var">fparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684518657"><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518657"><span class="hs-identifier hs-var">params</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684518656"><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684518656"><span class="hs-identifier hs-var">ret</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Info StructRetType
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684518655"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518655"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684518654"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518654"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684518653"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518653"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-494"></span><span>          </span><span class="annot"><span class="annottext">VName
-&gt; ([TypeParamBase VName], [PatBase NoInfo VName],
    Maybe (TypeExp VName), NoInfo StructRetType, ExpBase NoInfo VName)
-&gt; ExpBase NoInfo VName
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
vn
-&gt; ([TypeParamBase vn], [PatBase f vn], Maybe (TypeExp vn),
    f StructRetType, ExpBase f vn)
-&gt; ExpBase f vn
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#LetFun"><span class="hs-identifier hs-var">LetFun</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684518659"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TypeParamBase VName]
</span><a href="#local-6989586621684518658"><span class="hs-identifier hs-var">fparams</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(PatBase Info VName -&gt; PatBase NoInfo VName)
-&gt; [PatBase Info VName] -&gt; [PatBase NoInfo VName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase Info VName -&gt; PatBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#barePat"><span class="hs-identifier hs-var">barePat</span></a></span><span> </span><span class="annot"><span class="annottext">[PatBase Info VName]
</span><a href="#local-6989586621684518657"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp VName)
</span><a href="#local-6989586621684518656"><span class="hs-identifier hs-var">ret</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NoInfo StructRetType
forall a. NoInfo a
</span><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-var">NoInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518655"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518654"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518653"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-495"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#Range"><span class="hs-identifier hs-type">Range</span></a></span><span> </span><span id="local-6989586621684518652"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518652"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621684518651"><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518651"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span id="local-6989586621684518650"><span class="annot"><span class="annottext">Inclusiveness (ExpBase Info VName)
</span><a href="#local-6989586621684518650"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span id="local-6989586621684518649"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518649"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-496"></span><span>          </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; Maybe (ExpBase NoInfo VName)
-&gt; Inclusiveness (ExpBase NoInfo VName)
-&gt; SrcLoc
-&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn
-&gt; Maybe (ExpBase f vn)
-&gt; Inclusiveness (ExpBase f vn)
-&gt; SrcLoc
-&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Range"><span class="hs-identifier hs-var">Range</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518652"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; Maybe (ExpBase Info VName) -&gt; Maybe (ExpBase NoInfo VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase Info VName)
</span><a href="#local-6989586621684518651"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase Info VName -&gt; ExpBase NoInfo VName)
-&gt; Inclusiveness (ExpBase Info VName)
-&gt; Inclusiveness (ExpBase NoInfo VName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">Inclusiveness (ExpBase Info VName)
</span><a href="#local-6989586621684518650"><span class="hs-identifier hs-var">end</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518649"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-497"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#Coerce"><span class="hs-identifier hs-type">Coerce</span></a></span><span> </span><span id="local-6989586621684518648"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518648"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518647"><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684518647"><span class="hs-identifier hs-var">tdecl</span></a></span></span><span> </span><span id="local-6989586621684518646"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518646"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-498"></span><span>          </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; TypeDeclBase NoInfo VName -&gt; SrcLoc -&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; TypeDeclBase f vn -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Coerce"><span class="hs-identifier hs-var">Coerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518648"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDeclBase Info VName -&gt; TypeDeclBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareTypeDecl"><span class="hs-identifier hs-var">bareTypeDecl</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase Info VName
</span><a href="#local-6989586621684518647"><span class="hs-identifier hs-var">tdecl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518646"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-499"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621684518645"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518645"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span id="local-6989586621684518644"><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518644"><span class="hs-identifier hs-var">slice</span></a></span></span><span> </span><span id="local-6989586621684518643"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518643"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-500"></span><span>          </span><span class="annot"><span class="annottext">ExpBase NoInfo VName
-&gt; SliceBase NoInfo VName -&gt; SrcLoc -&gt; AppExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
ExpBase f vn -&gt; SliceBase f vn -&gt; SrcLoc -&gt; AppExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Index"><span class="hs-identifier hs-var">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518645"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName)
-&gt; SliceBase Info VName -&gt; SliceBase NoInfo VName
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase Info VName -&gt; DimIndexBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareDimIndex"><span class="hs-identifier hs-var">bareDimIndex</span></a></span><span> </span><span class="annot"><span class="annottext">SliceBase Info VName
</span><a href="#local-6989586621684518644"><span class="hs-identifier hs-var">slice</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518643"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-501"></span><span class="annot"><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Attr"><span class="hs-identifier hs-type">Attr</span></a></span><span> </span><span id="local-6989586621684518642"><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684518642"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span id="local-6989586621684518641"><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518641"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684518640"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518640"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-502"></span><span>  </span><span class="annot"><span class="annottext">AttrInfo VName
-&gt; ExpBase NoInfo VName -&gt; SrcLoc -&gt; ExpBase NoInfo VName
forall (f :: * -&gt; *) vn.
AttrInfo vn -&gt; ExpBase f vn -&gt; SrcLoc -&gt; ExpBase f vn
</span><a href="Language.Futhark.Syntax.html#Attr"><span class="hs-identifier hs-var">Attr</span></a></span><span> </span><span class="annot"><span class="annottext">AttrInfo VName
</span><a href="#local-6989586621684518642"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase Info VName -&gt; ExpBase NoInfo VName
</span><a href="Language.Futhark.Traversals.html#bareExp"><span class="hs-identifier hs-var">bareExp</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase Info VName
</span><a href="#local-6989586621684518641"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621684518640"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-503"></span></pre></body></html>