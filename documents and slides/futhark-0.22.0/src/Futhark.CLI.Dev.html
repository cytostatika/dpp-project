<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- | Futhark Compiler Driver</span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Futhark.CLI.Dev</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#main"><span class="hs-identifier">main</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Category</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">id</span></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">intersperse</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.IO</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Actions.html"><span class="hs-identifier">Futhark.Actions</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.Analysis.Alias.html"><span class="hs-identifier">Futhark.Analysis.Alias</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Alias</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Analysis.Metrics.html"><span class="hs-identifier">Futhark.Analysis.Metrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Analysis.Metrics.html#OpMetrics"><span class="hs-identifier">OpMetrics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Compiler.CLI.html"><span class="hs-identifier">Futhark.Compiler.CLI</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Compiler.CLI.html#compilerMain"><span class="hs-identifier">compilerMain</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.html"><span class="hs-identifier">Futhark.IR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Prop.html#ASTRep"><span class="hs-identifier">ASTRep</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.IR.Rep.html#Op"><span class="hs-identifier">Op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier">Prog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier">pretty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.GPU.html"><span class="hs-identifier">Futhark.IR.GPU</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GPU</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.GPUMem.html"><span class="hs-identifier">Futhark.IR.GPUMem</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GPUMem</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.MC.html"><span class="hs-identifier">Futhark.IR.MC</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MC</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html"><span class="hs-identifier">Futhark.IR.MCMem</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MCMem</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.Parse.html"><span class="hs-identifier">Futhark.IR.Parse</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.Prop.Aliases.html"><span class="hs-identifier">Futhark.IR.Prop.Aliases</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Prop.Aliases.html#CanBeAliased"><span class="hs-identifier">CanBeAliased</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html"><span class="hs-identifier">Futhark.IR.SOACS</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SOACS</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.Seq.html"><span class="hs-identifier">Futhark.IR.Seq</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.IR.SeqMem.html"><span class="hs-identifier">Futhark.IR.SeqMem</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SeqMem</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.IR.TypeCheck.html"><span class="hs-identifier">Futhark.IR.TypeCheck</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.TypeCheck.html#Checkable"><span class="hs-identifier">Checkable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.IR.TypeCheck.html#checkProg"><span class="hs-identifier">checkProg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Internalise.Defunctionalise.html"><span class="hs-identifier">Futhark.Internalise.Defunctionalise</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Defunctionalise</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Internalise.Defunctorise.html"><span class="hs-identifier">Futhark.Internalise.Defunctorise</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Defunctorise</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Internalise.LiftLambdas.html"><span class="hs-identifier">Futhark.Internalise.LiftLambdas</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LiftLambdas</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Internalise.Monomorphise.html"><span class="hs-identifier">Futhark.Internalise.Monomorphise</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Monomorphise</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.CSE.html"><span class="hs-identifier">Futhark.Optimise.CSE</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.DoubleBuffer.html"><span class="hs-identifier">Futhark.Optimise.DoubleBuffer</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.Fusion.html"><span class="hs-identifier">Futhark.Optimise.Fusion</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.HistAccs.html"><span class="hs-identifier">Futhark.Optimise.HistAccs</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.InPlaceLowering.html"><span class="hs-identifier">Futhark.Optimise.InPlaceLowering</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.InliningDeadFun.html"><span class="hs-identifier">Futhark.Optimise.InliningDeadFun</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.Optimise.MemoryBlockMerging.html"><span class="hs-identifier">Futhark.Optimise.MemoryBlockMerging</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MemoryBlockMerging</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.Sink.html"><span class="hs-identifier">Futhark.Optimise.Sink</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.TileLoops.html"><span class="hs-identifier">Futhark.Optimise.TileLoops</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Optimise.Unstream.html"><span class="hs-identifier">Futhark.Optimise.Unstream</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.html"><span class="hs-identifier">Futhark.Pass</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.AD.html"><span class="hs-identifier">Futhark.Pass.AD</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.ExpandAllocations.html"><span class="hs-identifier">Futhark.Pass.ExpandAllocations</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.Pass.ExplicitAllocations.GPU.html"><span class="hs-identifier">Futhark.Pass.ExplicitAllocations.GPU</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GPU</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.Pass.ExplicitAllocations.Seq.html"><span class="hs-identifier">Futhark.Pass.ExplicitAllocations.Seq</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.ExtractKernels.html"><span class="hs-identifier">Futhark.Pass.ExtractKernels</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.ExtractMulticore.html"><span class="hs-identifier">Futhark.Pass.ExtractMulticore</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.FirstOrderTransform.html"><span class="hs-identifier">Futhark.Pass.FirstOrderTransform</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.KernelBabysitting.html"><span class="hs-identifier">Futhark.Pass.KernelBabysitting</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Pass.Simplify.html"><span class="hs-identifier">Futhark.Pass.Simplify</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Passes.html"><span class="hs-identifier">Futhark.Passes</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Util.Log.html"><span class="hs-identifier">Futhark.Util.Log</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Util.Options.html"><span class="hs-identifier">Futhark.Util.Options</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Futhark.Util.Pretty.html"><span class="hs-identifier">Futhark.Util.Pretty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PP</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Futhark.Core.html"><span class="hs-identifier">Language.Futhark.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier">nameFromString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Futhark.Parser.html"><span class="hs-identifier">Language.Futhark.Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Parser.html#parseFuthark"><span class="hs-identifier">parseFuthark</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Exit</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">id</span></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="hs-comment">-- | What to do with the program after it has been read.</span><span>
</span><span id="line-65"></span><span class="hs-keyword">data</span><span> </span><span id="FutharkPipeline"><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkPipeline"><span class="hs-identifier hs-var">FutharkPipeline</span></a></span></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Just print it.</span><span>
</span><span id="line-67"></span><span>    </span><span id="PrettyPrint"><span class="annot"><a href="Futhark.CLI.Dev.html#PrettyPrint"><span class="hs-identifier hs-var">PrettyPrint</span></a></span></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Run the type checker; print type errors.</span><span>
</span><span id="line-69"></span><span>    </span><span id="TypeCheck"><span class="annot"><a href="Futhark.CLI.Dev.html#TypeCheck"><span class="hs-identifier hs-var">TypeCheck</span></a></span></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Run this pipeline.</span><span>
</span><span id="line-71"></span><span>    </span><span id="Pipeline"><span class="annot"><a href="Futhark.CLI.Dev.html#Pipeline"><span class="hs-identifier hs-var">Pipeline</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-type">UntypedPass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Partially evaluate away the module language.</span><span>
</span><span id="line-73"></span><span>    </span><span id="Defunctorise"><span class="annot"><a href="Futhark.CLI.Dev.html#Defunctorise"><span class="hs-identifier hs-var">Defunctorise</span></a></span></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Defunctorise and monomorphise.</span><span>
</span><span id="line-75"></span><span>    </span><span id="Monomorphise"><span class="annot"><a href="Futhark.CLI.Dev.html#Monomorphise"><span class="hs-identifier hs-var">Monomorphise</span></a></span></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Defunctorise, monomorphise, and lambda-lift.</span><span>
</span><span id="line-77"></span><span>    </span><span id="LiftLambdas"><span class="annot"><a href="Futhark.CLI.Dev.html#LiftLambdas"><span class="hs-identifier hs-var">LiftLambdas</span></a></span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Defunctorise, monomorphise, lambda-lift, and defunctionalise.</span><span>
</span><span id="line-79"></span><span>    </span><span id="Defunctionalise"><span class="annot"><a href="Futhark.CLI.Dev.html#Defunctionalise"><span class="hs-identifier hs-var">Defunctionalise</span></a></span></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">data</span><span> </span><span id="Config"><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-var">Config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Config"><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-var">Config</span></a></span></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="futharkConfig"><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.Compiler.Config.html#FutharkConfig"><span class="hs-identifier hs-type">FutharkConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-comment">-- | Nothing is distinct from a empty pipeline -</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-comment">-- it means we don't even run the internaliser.</span><span>
</span><span id="line-85"></span><span>    </span><span id="futharkPipeline"><span class="annot"><span class="annottext">Config -&gt; FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var hs-var">futharkPipeline</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkPipeline"><span class="hs-identifier hs-type">FutharkPipeline</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span id="futharkCompilerMode"><span class="annot"><span class="annottext">Config -&gt; CompilerMode
</span><a href="Futhark.CLI.Dev.html#futharkCompilerMode"><span class="hs-identifier hs-var hs-var">futharkCompilerMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.Compiler.CLI.html#CompilerMode"><span class="hs-identifier hs-type">CompilerMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>    </span><span id="futharkAction"><span class="annot"><span class="annottext">Config -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var hs-var">futharkAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedAction"><span class="hs-identifier hs-type">UntypedAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-comment">-- | If true, prints programs as raw ASTs instead</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-comment">-- of their prettyprinted form.</span><span>
</span><span id="line-90"></span><span>    </span><span id="futharkPrintAST"><span class="annot"><span class="annottext">Config -&gt; Bool
</span><a href="Futhark.CLI.Dev.html#futharkPrintAST"><span class="hs-identifier hs-var hs-var">futharkPrintAST</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- | Get a Futhark pipeline from the configuration - an empty one if</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- none exists.</span><span>
</span><span id="line-95"></span><span class="annot"><a href="Futhark.CLI.Dev.html#getFutharkPipeline"><span class="hs-identifier hs-type">getFutharkPipeline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-type">UntypedPass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-96"></span><span id="getFutharkPipeline"><span class="annot"><span class="annottext">getFutharkPipeline :: Config -&gt; [UntypedPass]
</span><a href="Futhark.CLI.Dev.html#getFutharkPipeline"><span class="hs-identifier hs-var hs-var">getFutharkPipeline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkPipeline -&gt; [UntypedPass]
</span><a href="#local-6989586621684583704"><span class="hs-identifier hs-var">toPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">(FutharkPipeline -&gt; [UntypedPass])
-&gt; (Config -&gt; FutharkPipeline) -&gt; Config -&gt; [UntypedPass]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var hs-var">futharkPipeline</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-98"></span><span>    </span><span id="local-6989586621684583704"><span class="annot"><span class="annottext">toPipeline :: FutharkPipeline -&gt; [UntypedPass]
</span><a href="#local-6989586621684583704"><span class="hs-identifier hs-var hs-var">toPipeline</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Pipeline"><span class="hs-identifier hs-type">Pipeline</span></a></span><span> </span><span id="local-6989586621684583702"><span class="annot"><span class="annottext">[UntypedPass]
</span><a href="#local-6989586621684583702"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UntypedPass]
</span><a href="#local-6989586621684583702"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="#local-6989586621684583704"><span class="hs-identifier hs-var">toPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">FutharkPipeline
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">data</span><span> </span><span id="UntypedPassState"><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-var">UntypedPassState</span></a></span></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SOACS"><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-var">SOACS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GPU"><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPU.html#GPU"><span class="hs-identifier hs-type">GPU.GPU</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MC"><span class="annot"><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-var">MC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MC.html#MC"><span class="hs-identifier hs-type">MC.MC</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Seq"><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-var">Seq</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.Seq.html#Seq"><span class="hs-identifier hs-type">Seq.Seq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GPUMem"><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-var">GPUMem</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPUMem.html#GPUMem"><span class="hs-identifier hs-type">GPUMem.GPUMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCMem"><span class="annot"><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-var">MCMem</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem.MCMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SeqMem"><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-var">SeqMem</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SeqMem.html#SeqMem"><span class="hs-identifier hs-type">SeqMem.SeqMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="annot"><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-type">getSOACSProg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span id="getSOACSProg"><span class="annot"><span class="annottext">getSOACSProg :: UntypedPassState -&gt; Maybe (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var hs-var">getSOACSProg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span id="local-6989586621684583693"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583693"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog SOACS -&gt; Maybe (Prog SOACS)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583693"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-112"></span><span class="annot"><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var">getSOACSProg</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Prog SOACS)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-keyword">class</span><span> </span><span id="Representation"><span class="annot"><a href="Futhark.CLI.Dev.html#Representation"><span class="hs-identifier hs-var">Representation</span></a></span></span><span> </span><span id="local-6989586621684584037"><span class="annot"><a href="#local-6989586621684584037"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-comment">-- | A human-readable description of the representation expected or</span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-comment">-- contained, usable for error messages.</span><span>
</span><span id="line-117"></span><span>  </span><span id="representation"><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-type">representation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621684584037"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#Representation"><span class="hs-identifier hs-type">Representation</span></a></span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>  </span><span id="local-6989586621684583689"><span class="annot"><span class="annottext">representation :: UntypedPassState -&gt; String
</span><a href="#local-6989586621684583689"><span class="hs-identifier hs-var hs-var hs-var hs-var">representation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SOACS&quot;</span></span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GPU&quot;</span></span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-type">MC</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MC
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MC&quot;</span></span><span>
</span><span id="line-123"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Seq&quot;</span></span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-type">GPUMem</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GPUMem&quot;</span></span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MCMem
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCMem&quot;</span></span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-type">SeqMem</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SeqMem
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SeqMem&quot;</span></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684583684"><span id="local-6989586621684583686"><span class="annot"><span class="hs-identifier hs-type">PP.Pretty</span></span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621684583660"><span class="annot"><span class="annottext">ppr :: UntypedPassState -&gt; Doc
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span id="local-6989586621684583658"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583658"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog SOACS -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">PP.ppr</span></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583658"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583657"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583657"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog GPU -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">PP.ppr</span></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583657"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-type">MC</span></a></span><span> </span><span id="local-6989586621684583656"><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583656"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog MC -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">PP.ppr</span></span><span> </span><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583656"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span id="local-6989586621684583655"><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583655"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog Seq -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">PP.ppr</span></span><span> </span><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583655"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-type">SeqMem</span></a></span><span> </span><span id="local-6989586621684583654"><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583654"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog SeqMem -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">PP.ppr</span></span><span> </span><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583654"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span id="local-6989586621684583653"><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583653"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog MCMem -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">PP.ppr</span></span><span> </span><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583653"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-135"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-type">GPUMem</span></a></span><span> </span><span id="local-6989586621684583652"><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583652"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">PP.ppr</span></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583652"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-keyword">newtype</span><span> </span><span id="UntypedPass"><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UntypedPass"><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span></span><span>
</span><span id="line-139"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><a href="Futhark.Pipeline.html#PipelineConfig"><span class="hs-identifier hs-type">PipelineConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><a href="Futhark.Pipeline.html#FutharkM"><span class="hs-identifier hs-type">FutharkM</span></a></span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span>
</span><span id="line-142"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="hs-keyword">type</span><span> </span><span id="BackendAction"><span class="annot"><a href="Futhark.CLI.Dev.html#BackendAction"><span class="hs-identifier hs-var">BackendAction</span></a></span></span><span> </span><span id="local-6989586621684583650"><span class="annot"><a href="#local-6989586621684583650"><span class="hs-identifier hs-type">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.Compiler.Config.html#FutharkConfig"><span class="hs-identifier hs-type">FutharkConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Compiler.CLI.html#CompilerMode"><span class="hs-identifier hs-type">CompilerMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Pipeline.html#Action"><span class="hs-identifier hs-type">Action</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684583650"><span class="hs-identifier hs-type">rep</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-keyword">data</span><span> </span><span id="UntypedAction"><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedAction"><span class="hs-identifier hs-var">UntypedAction</span></a></span></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SOACSAction"><span class="annot"><a href="Futhark.CLI.Dev.html#SOACSAction"><span class="hs-identifier hs-var">SOACSAction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Pipeline.html#Action"><span class="hs-identifier hs-type">Action</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GPUAction"><span class="annot"><a href="Futhark.CLI.Dev.html#GPUAction"><span class="hs-identifier hs-var">GPUAction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Pipeline.html#Action"><span class="hs-identifier hs-type">Action</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPU.html#GPU"><span class="hs-identifier hs-type">GPU.GPU</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GPUMemAction"><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#BackendAction"><span class="hs-identifier hs-type">BackendAction</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPUMem.html#GPUMem"><span class="hs-identifier hs-type">GPUMem.GPUMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCMemAction"><span class="annot"><a href="Futhark.CLI.Dev.html#MCMemAction"><span class="hs-identifier hs-var">MCMemAction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#BackendAction"><span class="hs-identifier hs-type">BackendAction</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.MCMem.html#MCMem"><span class="hs-identifier hs-type">MCMem.MCMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SeqMemAction"><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMemAction"><span class="hs-identifier hs-var">SeqMemAction</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#BackendAction"><span class="hs-identifier hs-type">BackendAction</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SeqMem.html#SeqMem"><span class="hs-identifier hs-type">SeqMem.SeqMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PolyAction"><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-var">PolyAction</span></a></span></span><span>
</span><span id="line-153"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621684584030"><span class="annot"><a href="#local-6989586621684584030"><span class="hs-identifier hs-type">rep</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-154"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Futhark.IR.Prop.html#ASTRep"><span class="hs-identifier hs-type">ASTRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584030"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-155"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Prop.Aliases.html#CanBeAliased"><span class="hs-identifier hs-type">CanBeAliased</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Rep.html#Op"><span class="hs-identifier hs-type">Op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584030"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Analysis.Metrics.html#OpMetrics"><span class="hs-identifier hs-type">OpMetrics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Rep.html#Op"><span class="hs-identifier hs-type">Op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584030"><span class="hs-identifier hs-type">rep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><a href="Futhark.Pipeline.html#Action"><span class="hs-identifier hs-type">Action</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584030"><span class="hs-identifier hs-type">rep</span></a></span><span>
</span><span id="line-159"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#Representation"><span class="hs-identifier hs-type">Representation</span></a></span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedAction"><span class="hs-identifier hs-type">UntypedAction</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-162"></span><span>  </span><span id="local-6989586621684583641"><span class="annot"><span class="annottext">representation :: UntypedAction -&gt; String
</span><a href="#local-6989586621684583641"><span class="hs-identifier hs-var hs-var hs-var hs-var">representation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACSAction"><span class="hs-identifier hs-type">SOACSAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action SOACS
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SOACS&quot;</span></span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUAction"><span class="hs-identifier hs-type">GPUAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action GPU
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GPU&quot;</span></span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-type">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GPUMem&quot;</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMemAction"><span class="hs-identifier hs-type">MCMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction MCMem
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCMem&quot;</span></span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMemAction"><span class="hs-identifier hs-type">SeqMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SeqMem&quot;</span></span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;any&gt;&quot;</span></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="annot"><a href="Futhark.CLI.Dev.html#newConfig"><span class="hs-identifier hs-type">newConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-170"></span><span id="newConfig"><span class="annot"><span class="annottext">newConfig :: Config
</span><a href="Futhark.CLI.Dev.html#newConfig"><span class="hs-identifier hs-var hs-var">newConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkConfig
-&gt; FutharkPipeline
-&gt; CompilerMode
-&gt; UntypedAction
-&gt; Bool
-&gt; Config
</span><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-var">Config</span></a></span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="Futhark.Compiler.Config.html#newFutharkConfig"><span class="hs-identifier hs-var">newFutharkConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[UntypedPass] -&gt; FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Pipeline"><span class="hs-identifier hs-var">Pipeline</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><a href="Futhark.Compiler.CLI.html#ToExecutable"><span class="hs-identifier hs-var">ToExecutable</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedAction
</span><a href="#local-6989586621684583637"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621684583637"><span class="annot"><span class="annottext">action :: UntypedAction
</span><a href="#local-6989586621684583637"><span class="hs-identifier hs-var hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall rep.
 (ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
 Action rep)
-&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-var">PolyAction</span></a></span><span> </span><span class="annot"><span class="annottext">forall rep. ASTRep rep =&gt; Action rep
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="Futhark.Actions.html#printAction"><span class="hs-identifier hs-var">printAction</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-type">changeFutharkConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.Compiler.Config.html#FutharkConfig"><span class="hs-identifier hs-type">FutharkConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Compiler.Config.html#FutharkConfig"><span class="hs-identifier hs-type">FutharkConfig</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-178"></span><span id="changeFutharkConfig"><span class="annot"><span class="annottext">changeFutharkConfig :: (FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
</span><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-var hs-var">changeFutharkConfig</span></a></span></span><span> </span><span id="local-6989586621684583630"><span class="annot"><span class="annottext">FutharkConfig -&gt; FutharkConfig
</span><a href="#local-6989586621684583630"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684583629"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583629"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583629"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkConfig :: FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var">futharkConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkConfig -&gt; FutharkConfig
</span><a href="#local-6989586621684583630"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; FutharkConfig) -&gt; FutharkConfig -&gt; FutharkConfig
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583629"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-keyword">type</span><span> </span><span id="FutharkOption"><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-var">FutharkOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Futhark.Util.Options.html#FunOptDescr"><span class="hs-identifier hs-type">FunOptDescr</span></a></span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="annot"><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-type">passOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-type">UntypedPass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-183"></span><span id="passOption"><span class="annot"><span class="annottext">passOption :: String -&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-var hs-var">passOption</span></a></span></span><span> </span><span id="local-6989586621684583627"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583627"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621684583626"><span class="annot"><span class="annottext">UntypedPass
</span><a href="#local-6989586621684583626"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621684583625"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583625"><span class="hs-identifier hs-var">short</span></a></span></span><span> </span><span id="local-6989586621684583624"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621684583624"><span class="hs-identifier hs-var">long</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583625"><span class="hs-identifier hs-var">short</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621684583624"><span class="hs-identifier hs-var">long</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-188"></span><span>        </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583621"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583621"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-189"></span><span>          </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583621"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPipeline :: FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var">futharkPipeline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UntypedPass] -&gt; FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Pipeline"><span class="hs-identifier hs-var">Pipeline</span></a></span><span> </span><span class="annot"><span class="annottext">([UntypedPass] -&gt; FutharkPipeline)
-&gt; [UntypedPass] -&gt; FutharkPipeline
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; [UntypedPass]
</span><a href="Futhark.CLI.Dev.html#getFutharkPipeline"><span class="hs-identifier hs-var">getFutharkPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583621"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">[UntypedPass] -&gt; [UntypedPass] -&gt; [UntypedPass]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">UntypedPass
</span><a href="#local-6989586621684583626"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">]</span><span class="hs-special">}</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583627"><span class="hs-identifier hs-var">desc</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="annot"><a href="Futhark.CLI.Dev.html#kernelsMemProg"><span class="hs-identifier hs-type">kernelsMemProg</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="Futhark.Pipeline.html#FutharkM"><span class="hs-identifier hs-type">FutharkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPUMem.html#GPUMem"><span class="hs-identifier hs-type">GPUMem.GPUMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span id="kernelsMemProg"><span class="annot"><span class="annottext">kernelsMemProg :: String -&gt; UntypedPassState -&gt; FutharkM (Prog GPUMem)
</span><a href="Futhark.CLI.Dev.html#kernelsMemProg"><span class="hs-identifier hs-var hs-var">kernelsMemProg</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-type">GPUMem</span></a></span><span> </span><span id="local-6989586621684583619"><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583619"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; FutharkM (Prog GPUMem)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583619"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-199"></span><span class="annot"><a href="Futhark.CLI.Dev.html#kernelsMemProg"><span class="hs-identifier hs-var">kernelsMemProg</span></a></span><span> </span><span id="local-6989586621684583618"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583618"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684583617"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583617"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; FutharkM (Prog GPUMem)
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM (Prog GPUMem))
-&gt; String -&gt; FutharkM (Prog GPUMem)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pass &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583618"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-202"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; expects GPUMem representation, but got &quot;</span></span><span>
</span><span id="line-203"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583617"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="annot"><a href="Futhark.CLI.Dev.html#soacsProg"><span class="hs-identifier hs-type">soacsProg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Pipeline.html#FutharkM"><span class="hs-identifier hs-type">FutharkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span id="soacsProg"><span class="annot"><span class="annottext">soacsProg :: String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#soacsProg"><span class="hs-identifier hs-var hs-var">soacsProg</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span id="local-6989586621684583614"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583614"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-207"></span><span>  </span><span class="annot"><span class="annottext">Prog SOACS -&gt; FutharkM (Prog SOACS)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583614"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-208"></span><span class="annot"><a href="Futhark.CLI.Dev.html#soacsProg"><span class="hs-identifier hs-var">soacsProg</span></a></span><span> </span><span id="local-6989586621684583613"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583613"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684583612"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583612"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; FutharkM (Prog SOACS)
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM (Prog SOACS))
-&gt; String -&gt; FutharkM (Prog SOACS)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pass &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583613"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-211"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; expects SOACS representation, but got &quot;</span></span><span>
</span><span id="line-212"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583612"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><a href="Futhark.CLI.Dev.html#kernelsProg"><span class="hs-identifier hs-type">kernelsProg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Pipeline.html#FutharkM"><span class="hs-identifier hs-type">FutharkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPU.html#GPU"><span class="hs-identifier hs-type">GPU.GPU</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span id="kernelsProg"><span class="annot"><span class="annottext">kernelsProg :: String -&gt; UntypedPassState -&gt; FutharkM (Prog GPU)
</span><a href="Futhark.CLI.Dev.html#kernelsProg"><span class="hs-identifier hs-var hs-var">kernelsProg</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583610"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583610"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><span class="annottext">Prog GPU -&gt; FutharkM (Prog GPU)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583610"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-217"></span><span class="annot"><a href="Futhark.CLI.Dev.html#kernelsProg"><span class="hs-identifier hs-var">kernelsProg</span></a></span><span> </span><span id="local-6989586621684583609"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583609"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684583608"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583608"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-218"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; FutharkM (Prog GPU)
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM (Prog GPU)) -&gt; String -&gt; FutharkM (Prog GPU)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pass &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583609"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; expects GPU representation, but got &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583608"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span id="local-6989586621684584011"><span id="local-6989586621684584012"><span class="annot"><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-type">typedPassOption</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><a href="Futhark.IR.TypeCheck.html#Checkable"><span class="hs-identifier hs-type">Checkable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584012"><span class="hs-identifier hs-type">torep</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Pipeline.html#FutharkM"><span class="hs-identifier hs-type">FutharkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584011"><span class="hs-identifier hs-type">fromrep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584012"><span class="hs-identifier hs-type">torep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-225"></span><span>  </span><span class="annot"><a href="Futhark.Pass.html#Pass"><span class="hs-identifier hs-type">Pass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584011"><span class="hs-identifier hs-type">fromrep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684584012"><span class="hs-identifier hs-type">torep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span></span></span><span>
</span><span id="line-228"></span><span id="typedPassOption"><span class="annot"><span class="annottext">typedPassOption :: forall torep fromrep.
Checkable torep =&gt;
(String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep))
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; Pass fromrep torep
-&gt; String
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-var hs-var">typedPassOption</span></a></span></span><span> </span><span id="local-6989586621684583605"><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep)
</span><a href="#local-6989586621684583605"><span class="hs-identifier hs-var">getProg</span></a></span></span><span> </span><span id="local-6989586621684583604"><span class="annot"><span class="annottext">Prog torep -&gt; UntypedPassState
</span><a href="#local-6989586621684583604"><span class="hs-identifier hs-var">putProg</span></a></span></span><span> </span><span id="local-6989586621684583603"><span class="annot"><span class="annottext">Pass fromrep torep
</span><a href="#local-6989586621684583603"><span class="hs-identifier hs-var">pass</span></a></span></span><span> </span><span id="local-6989586621684583602"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583602"><span class="hs-identifier hs-var">short</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-var">passOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass fromrep torep -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passDescription"><span class="hs-identifier hs-var hs-var">passDescription</span></a></span><span> </span><span class="annot"><span class="annottext">Pass fromrep torep
</span><a href="#local-6989586621684583603"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState)
-&gt; UntypedPass
</span><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583600"><span class="hs-identifier hs-var">perform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583602"><span class="hs-identifier hs-var">short</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621684583599"><span class="hs-identifier hs-var">long</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-231"></span><span>    </span><span id="local-6989586621684583600"><span class="annot"><span class="annottext">perform :: UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583600"><span class="hs-identifier hs-var hs-var">perform</span></a></span></span><span> </span><span id="local-6989586621684583594"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583594"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621684583593"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583593"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-232"></span><span>      </span><span id="local-6989586621684583592"><span class="annot"><span class="annottext">Prog fromrep
</span><a href="#local-6989586621684583592"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep)
</span><a href="#local-6989586621684583605"><span class="hs-identifier hs-var">getProg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass fromrep torep -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passName"><span class="hs-identifier hs-var hs-var">passName</span></a></span><span> </span><span class="annot"><span class="annottext">Pass fromrep torep
</span><a href="#local-6989586621684583603"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583594"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-233"></span><span>      </span><span class="annot"><span class="annottext">Prog torep -&gt; UntypedPassState
</span><a href="#local-6989586621684583604"><span class="hs-identifier hs-var">putProg</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog torep -&gt; UntypedPassState)
-&gt; FutharkM (Prog torep) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass fromrep torep -&gt; Pipeline fromrep torep
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass fromrep torep
</span><a href="#local-6989586621684583603"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583593"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog fromrep
</span><a href="#local-6989586621684583592"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621684583599"><span class="annot"><span class="annottext">long :: [String]
</span><a href="#local-6989586621684583599"><span class="hs-identifier hs-var hs-var">long</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pass fromrep torep -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passLongOption"><span class="hs-identifier hs-var">passLongOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass fromrep torep
</span><a href="#local-6989586621684583603"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><a href="Futhark.CLI.Dev.html#soacsPassOption"><span class="hs-identifier hs-type">soacsPassOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.Pass.html#Pass"><span class="hs-identifier hs-type">Pass</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-238"></span><span id="soacsPassOption"><span class="annot"><span class="annottext">soacsPassOption :: Pass SOACS SOACS -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPassOption"><span class="hs-identifier hs-var hs-var">soacsPassOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><span class="annottext">(String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS))
-&gt; (Prog SOACS -&gt; UntypedPassState)
-&gt; Pass SOACS SOACS
-&gt; String
-&gt; FutharkOption
forall torep fromrep.
Checkable torep =&gt;
(String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep))
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; Pass fromrep torep
-&gt; String
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-var">typedPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#soacsProg"><span class="hs-identifier hs-var">soacsProg</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-var">SOACS</span></a></span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="annot"><a href="Futhark.CLI.Dev.html#kernelsPassOption"><span class="hs-identifier hs-type">kernelsPassOption</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-242"></span><span>  </span><span class="annot"><a href="Futhark.Pass.html#Pass"><span class="hs-identifier hs-type">Pass</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPU.html#GPU"><span class="hs-identifier hs-type">GPU.GPU</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPU.html#GPU"><span class="hs-identifier hs-type">GPU.GPU</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-245"></span><span id="kernelsPassOption"><span class="annot"><span class="annottext">kernelsPassOption :: Pass GPU GPU -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsPassOption"><span class="hs-identifier hs-var hs-var">kernelsPassOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-246"></span><span>  </span><span class="annot"><span class="annottext">(String -&gt; UntypedPassState -&gt; FutharkM (Prog GPU))
-&gt; (Prog GPU -&gt; UntypedPassState)
-&gt; Pass GPU GPU
-&gt; String
-&gt; FutharkOption
forall torep fromrep.
Checkable torep =&gt;
(String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep))
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; Pass fromrep torep
-&gt; String
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-var">typedPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog GPU)
</span><a href="Futhark.CLI.Dev.html#kernelsProg"><span class="hs-identifier hs-var">kernelsProg</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><a href="Futhark.CLI.Dev.html#kernelsMemPassOption"><span class="hs-identifier hs-type">kernelsMemPassOption</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-249"></span><span>  </span><span class="annot"><a href="Futhark.Pass.html#Pass"><span class="hs-identifier hs-type">Pass</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPUMem.html#GPUMem"><span class="hs-identifier hs-type">GPUMem.GPUMem</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.GPUMem.html#GPUMem"><span class="hs-identifier hs-type">GPUMem.GPUMem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-252"></span><span id="kernelsMemPassOption"><span class="annot"><span class="annottext">kernelsMemPassOption :: Pass GPUMem GPUMem -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsMemPassOption"><span class="hs-identifier hs-var hs-var">kernelsMemPassOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>  </span><span class="annot"><span class="annottext">(String -&gt; UntypedPassState -&gt; FutharkM (Prog GPUMem))
-&gt; (Prog GPUMem -&gt; UntypedPassState)
-&gt; Pass GPUMem GPUMem
-&gt; String
-&gt; FutharkOption
forall torep fromrep.
Checkable torep =&gt;
(String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep))
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; Pass fromrep torep
-&gt; String
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-var">typedPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog GPUMem)
</span><a href="Futhark.CLI.Dev.html#kernelsMemProg"><span class="hs-identifier hs-var">kernelsMemProg</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-var">GPUMem</span></a></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="annot"><a href="Futhark.CLI.Dev.html#simplifyOption"><span class="hs-identifier hs-type">simplifyOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-256"></span><span id="simplifyOption"><span class="annot"><span class="annottext">simplifyOption :: String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#simplifyOption"><span class="hs-identifier hs-var hs-var">simplifyOption</span></a></span></span><span> </span><span id="local-6989586621684583582"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583582"><span class="hs-identifier hs-var">short</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-257"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-var">passOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passDescription"><span class="hs-identifier hs-var hs-var">passDescription</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="#local-6989586621684583581"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState)
-&gt; UntypedPass
</span><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583580"><span class="hs-identifier hs-var">perform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583582"><span class="hs-identifier hs-var">short</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621684583579"><span class="hs-identifier hs-var">long</span></a></span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>    </span><span id="local-6989586621684583580"><span class="annot"><span class="annottext">perform :: UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583580"><span class="hs-identifier hs-var hs-var">perform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span id="local-6989586621684583562"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583562"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583561"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583561"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-260"></span><span>      </span><span class="annot"><span class="annottext">Prog SOACS -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-var">SOACS</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog SOACS -&gt; UntypedPassState)
-&gt; FutharkM (Prog SOACS) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline SOACS SOACS
-&gt; PipelineConfig -&gt; Prog SOACS -&gt; FutharkM (Prog SOACS)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; Pipeline SOACS SOACS
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="Futhark.Pass.Simplify.html#simplifySOACS"><span class="hs-identifier hs-var">simplifySOACS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583561"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583562"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="#local-6989586621684583580"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583559"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583559"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583558"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583558"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-262"></span><span>      </span><span class="annot"><span class="annottext">Prog GPU -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog GPU -&gt; UntypedPassState)
-&gt; FutharkM (Prog GPU) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline GPU GPU
-&gt; PipelineConfig -&gt; Prog GPU -&gt; FutharkM (Prog GPU)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; Pipeline GPU GPU
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPU
</span><a href="Futhark.Pass.Simplify.html#simplifyGPU"><span class="hs-identifier hs-var">simplifyGPU</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583558"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583559"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><a href="#local-6989586621684583580"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-type">MC</span></a></span><span> </span><span id="local-6989586621684583556"><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583556"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583555"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583555"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-264"></span><span>      </span><span class="annot"><span class="annottext">Prog MC -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-var">MC</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog MC -&gt; UntypedPassState)
-&gt; FutharkM (Prog MC) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline MC MC -&gt; PipelineConfig -&gt; Prog MC -&gt; FutharkM (Prog MC)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass MC MC -&gt; Pipeline MC MC
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass MC MC
</span><a href="Futhark.Pass.Simplify.html#simplifyMC"><span class="hs-identifier hs-var">simplifyMC</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583555"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583556"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><a href="#local-6989586621684583580"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span id="local-6989586621684583553"><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583553"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583552"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583552"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-266"></span><span>      </span><span class="annot"><span class="annottext">Prog Seq -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-var">Seq</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog Seq -&gt; UntypedPassState)
-&gt; FutharkM (Prog Seq) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline Seq Seq
-&gt; PipelineConfig -&gt; Prog Seq -&gt; FutharkM (Prog Seq)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass Seq Seq -&gt; Pipeline Seq Seq
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq Seq
</span><a href="Futhark.Pass.Simplify.html#simplifySeq"><span class="hs-identifier hs-var">simplifySeq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583552"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583553"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><a href="#local-6989586621684583580"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-type">SeqMem</span></a></span><span> </span><span id="local-6989586621684583550"><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583550"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583549"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583549"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-268"></span><span>      </span><span class="annot"><span class="annottext">Prog SeqMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-var">SeqMem</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog SeqMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog SeqMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline SeqMem SeqMem
-&gt; PipelineConfig -&gt; Prog SeqMem -&gt; FutharkM (Prog SeqMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass SeqMem SeqMem -&gt; Pipeline SeqMem SeqMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SeqMem SeqMem
</span><a href="Futhark.Pass.Simplify.html#simplifySeqMem"><span class="hs-identifier hs-var">simplifySeqMem</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583549"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583550"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><a href="#local-6989586621684583580"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-type">GPUMem</span></a></span><span> </span><span id="local-6989586621684583547"><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583547"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583546"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583546"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-270"></span><span>      </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-var">GPUMem</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog GPUMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog GPUMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline GPUMem GPUMem
-&gt; PipelineConfig -&gt; Prog GPUMem -&gt; FutharkM (Prog GPUMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass GPUMem GPUMem -&gt; Pipeline GPUMem GPUMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPUMem GPUMem
</span><a href="Futhark.Pass.Simplify.html#simplifyGPUMem"><span class="hs-identifier hs-var">simplifyGPUMem</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583546"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583547"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><a href="#local-6989586621684583580"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span id="local-6989586621684583544"><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583544"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583543"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583543"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-272"></span><span>      </span><span class="annot"><span class="annottext">Prog MCMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-var">MCMem</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog MCMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog MCMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline MCMem MCMem
-&gt; PipelineConfig -&gt; Prog MCMem -&gt; FutharkM (Prog MCMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass MCMem MCMem -&gt; Pipeline MCMem MCMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass MCMem MCMem
</span><a href="Futhark.Pass.Simplify.html#simplifyMCMem"><span class="hs-identifier hs-var">simplifyMCMem</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583543"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583544"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span>    </span><span id="local-6989586621684583579"><span class="annot"><span class="annottext">long :: [String]
</span><a href="#local-6989586621684583579"><span class="hs-identifier hs-var hs-var">long</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passLongOption"><span class="hs-identifier hs-var">passLongOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="#local-6989586621684583581"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-275"></span><span>    </span><span id="local-6989586621684583581"><span class="annot"><span class="annottext">pass :: Pass SOACS SOACS
</span><a href="#local-6989586621684583581"><span class="hs-identifier hs-var hs-var">pass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="Futhark.Pass.Simplify.html#simplifySOACS"><span class="hs-identifier hs-var">simplifySOACS</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="annot"><a href="Futhark.CLI.Dev.html#allocateOption"><span class="hs-identifier hs-type">allocateOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-278"></span><span id="allocateOption"><span class="annot"><span class="annottext">allocateOption :: String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#allocateOption"><span class="hs-identifier hs-var hs-var">allocateOption</span></a></span></span><span> </span><span id="local-6989586621684583540"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583540"><span class="hs-identifier hs-var">short</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-var">passOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass Seq SeqMem -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passDescription"><span class="hs-identifier hs-var hs-var">passDescription</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq SeqMem
</span><a href="#local-6989586621684583539"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState)
-&gt; UntypedPass
</span><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583538"><span class="hs-identifier hs-var">perform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583540"><span class="hs-identifier hs-var">short</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621684583537"><span class="hs-identifier hs-var">long</span></a></span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>    </span><span id="local-6989586621684583538"><span class="annot"><span class="annottext">perform :: UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583538"><span class="hs-identifier hs-var hs-var">perform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583530"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583530"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583529"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583529"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>      </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-var">GPUMem</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">(Prog GPUMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog GPUMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline GPU GPUMem
-&gt; PipelineConfig -&gt; Prog GPU -&gt; FutharkM (Prog GPUMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass GPU GPUMem -&gt; Pipeline GPU GPUMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPUMem
</span><a href="Futhark.Pass.ExplicitAllocations.GPU.html#explicitAllocations"><span class="hs-identifier hs-var">GPU.explicitAllocations</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583529"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583530"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><a href="#local-6989586621684583538"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span id="local-6989586621684583527"><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583527"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583526"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583526"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>      </span><span class="annot"><span class="annottext">Prog SeqMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-var">SeqMem</span></a></span><span>
</span><span id="line-286"></span><span>        </span><span class="annot"><span class="annottext">(Prog SeqMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog SeqMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline Seq SeqMem
-&gt; PipelineConfig -&gt; Prog Seq -&gt; FutharkM (Prog SeqMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass Seq SeqMem -&gt; Pipeline Seq SeqMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq SeqMem
</span><a href="Futhark.Pass.ExplicitAllocations.Seq.html#explicitAllocations"><span class="hs-identifier hs-var">Seq.explicitAllocations</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583526"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583527"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><a href="#local-6989586621684583538"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span id="local-6989586621684583524"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583524"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-288"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; FutharkM UntypedPassState
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM UntypedPassState)
-&gt; String -&gt; FutharkM UntypedPassState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-289"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pass '&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Pass Seq SeqMem -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passDescription"><span class="hs-identifier hs-var hs-var">passDescription</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq SeqMem
</span><a href="#local-6989586621684583539"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;' cannot operate on &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583524"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span>    </span><span id="local-6989586621684583537"><span class="annot"><span class="annottext">long :: [String]
</span><a href="#local-6989586621684583537"><span class="hs-identifier hs-var hs-var">long</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pass Seq SeqMem -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passLongOption"><span class="hs-identifier hs-var">passLongOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq SeqMem
</span><a href="#local-6989586621684583539"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-292"></span><span>    </span><span id="local-6989586621684583539"><span class="annot"><span class="annottext">pass :: Pass Seq SeqMem
</span><a href="#local-6989586621684583539"><span class="hs-identifier hs-var hs-var">pass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pass Seq SeqMem
</span><a href="Futhark.Pass.ExplicitAllocations.Seq.html#explicitAllocations"><span class="hs-identifier hs-var">Seq.explicitAllocations</span></a></span><span>
</span><span id="line-293"></span><span>
</span><span id="line-294"></span><span class="annot"><a href="Futhark.CLI.Dev.html#iplOption"><span class="hs-identifier hs-type">iplOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-295"></span><span id="iplOption"><span class="annot"><span class="annottext">iplOption :: String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#iplOption"><span class="hs-identifier hs-var hs-var">iplOption</span></a></span></span><span> </span><span id="local-6989586621684583522"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583522"><span class="hs-identifier hs-var">short</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-296"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-var">passOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass Seq Seq -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passDescription"><span class="hs-identifier hs-var hs-var">passDescription</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq Seq
</span><a href="#local-6989586621684583521"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState)
-&gt; UntypedPass
</span><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583520"><span class="hs-identifier hs-var">perform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583522"><span class="hs-identifier hs-var">short</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621684583519"><span class="hs-identifier hs-var">long</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-298"></span><span>    </span><span id="local-6989586621684583520"><span class="annot"><span class="annottext">perform :: UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583520"><span class="hs-identifier hs-var hs-var">perform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583512"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583512"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583511"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583511"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>      </span><span class="annot"><span class="annottext">Prog GPU -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span><span>
</span><span id="line-300"></span><span>        </span><span class="annot"><span class="annottext">(Prog GPU -&gt; UntypedPassState)
-&gt; FutharkM (Prog GPU) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline GPU GPU
-&gt; PipelineConfig -&gt; Prog GPU -&gt; FutharkM (Prog GPU)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; Pipeline GPU GPU
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPU
</span><a href="Futhark.Optimise.InPlaceLowering.html#inPlaceLoweringGPU"><span class="hs-identifier hs-var">inPlaceLoweringGPU</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583511"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583512"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><a href="#local-6989586621684583520"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span id="local-6989586621684583509"><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583509"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583508"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583508"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-302"></span><span>      </span><span class="annot"><span class="annottext">Prog Seq -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-var">Seq</span></a></span><span>
</span><span id="line-303"></span><span>        </span><span class="annot"><span class="annottext">(Prog Seq -&gt; UntypedPassState)
-&gt; FutharkM (Prog Seq) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline Seq Seq
-&gt; PipelineConfig -&gt; Prog Seq -&gt; FutharkM (Prog Seq)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass Seq Seq -&gt; Pipeline Seq Seq
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq Seq
</span><a href="Futhark.Optimise.InPlaceLowering.html#inPlaceLoweringSeq"><span class="hs-identifier hs-var">inPlaceLoweringSeq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583508"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583509"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-304"></span><span>    </span><span class="annot"><a href="#local-6989586621684583520"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span id="local-6989586621684583506"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583506"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; FutharkM UntypedPassState
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM UntypedPassState)
-&gt; String -&gt; FutharkM UntypedPassState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-306"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pass '&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Pass Seq Seq -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passDescription"><span class="hs-identifier hs-var hs-var">passDescription</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq Seq
</span><a href="#local-6989586621684583521"><span class="hs-identifier hs-var">pass</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;' cannot operate on &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583506"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span>    </span><span id="local-6989586621684583519"><span class="annot"><span class="annottext">long :: [String]
</span><a href="#local-6989586621684583519"><span class="hs-identifier hs-var hs-var">long</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pass Seq Seq -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passLongOption"><span class="hs-identifier hs-var">passLongOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass Seq Seq
</span><a href="#local-6989586621684583521"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-309"></span><span>    </span><span id="local-6989586621684583521"><span class="annot"><span class="annottext">pass :: Pass Seq Seq
</span><a href="#local-6989586621684583521"><span class="hs-identifier hs-var hs-var">pass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pass Seq Seq
</span><a href="Futhark.Optimise.InPlaceLowering.html#inPlaceLoweringSeq"><span class="hs-identifier hs-var">inPlaceLoweringSeq</span></a></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="annot"><a href="Futhark.CLI.Dev.html#cseOption"><span class="hs-identifier hs-type">cseOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-312"></span><span id="cseOption"><span class="annot"><span class="annottext">cseOption :: String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#cseOption"><span class="hs-identifier hs-var hs-var">cseOption</span></a></span></span><span> </span><span id="local-6989586621684583504"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583504"><span class="hs-identifier hs-var">short</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-var">passOption</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passDescription"><span class="hs-identifier hs-var hs-var">passDescription</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="#local-6989586621684583503"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState)
-&gt; UntypedPass
</span><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583502"><span class="hs-identifier hs-var">perform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583504"><span class="hs-identifier hs-var">short</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621684583501"><span class="hs-identifier hs-var">long</span></a></span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-315"></span><span>    </span><span id="local-6989586621684583502"><span class="annot"><span class="annottext">perform :: UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583502"><span class="hs-identifier hs-var hs-var">perform</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span id="local-6989586621684583402"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583402"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583401"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583401"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-316"></span><span>      </span><span class="annot"><span class="annottext">Prog SOACS -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-var">SOACS</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog SOACS -&gt; UntypedPassState)
-&gt; FutharkM (Prog SOACS) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline SOACS SOACS
-&gt; PipelineConfig -&gt; Prog SOACS -&gt; FutharkM (Prog SOACS)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; Pipeline SOACS SOACS
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">(Pass SOACS SOACS -&gt; Pipeline SOACS SOACS)
-&gt; Pass SOACS SOACS -&gt; Pipeline SOACS SOACS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass SOACS SOACS
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583401"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583402"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-317"></span><span>    </span><span class="annot"><a href="#local-6989586621684583502"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583399"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583399"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583398"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583398"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-318"></span><span>      </span><span class="annot"><span class="annottext">Prog GPU -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog GPU -&gt; UntypedPassState)
-&gt; FutharkM (Prog GPU) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline GPU GPU
-&gt; PipelineConfig -&gt; Prog GPU -&gt; FutharkM (Prog GPU)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; Pipeline GPU GPU
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">(Pass GPU GPU -&gt; Pipeline GPU GPU)
-&gt; Pass GPU GPU -&gt; Pipeline GPU GPU
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass GPU GPU
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583398"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583399"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><a href="#local-6989586621684583502"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-type">MC</span></a></span><span> </span><span id="local-6989586621684583397"><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583397"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583396"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583396"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-320"></span><span>      </span><span class="annot"><span class="annottext">Prog MC -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-var">MC</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog MC -&gt; UntypedPassState)
-&gt; FutharkM (Prog MC) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline MC MC -&gt; PipelineConfig -&gt; Prog MC -&gt; FutharkM (Prog MC)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass MC MC -&gt; Pipeline MC MC
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">(Pass MC MC -&gt; Pipeline MC MC) -&gt; Pass MC MC -&gt; Pipeline MC MC
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass MC MC
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583396"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583397"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><a href="#local-6989586621684583502"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span id="local-6989586621684583395"><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583395"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583394"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583394"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-322"></span><span>      </span><span class="annot"><span class="annottext">Prog Seq -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-var">Seq</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog Seq -&gt; UntypedPassState)
-&gt; FutharkM (Prog Seq) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline Seq Seq
-&gt; PipelineConfig -&gt; Prog Seq -&gt; FutharkM (Prog Seq)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass Seq Seq -&gt; Pipeline Seq Seq
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">(Pass Seq Seq -&gt; Pipeline Seq Seq)
-&gt; Pass Seq Seq -&gt; Pipeline Seq Seq
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass Seq Seq
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583394"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583395"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><a href="#local-6989586621684583502"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-type">SeqMem</span></a></span><span> </span><span id="local-6989586621684583393"><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583393"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583392"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583392"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-324"></span><span>      </span><span class="annot"><span class="annottext">Prog SeqMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-var">SeqMem</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog SeqMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog SeqMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline SeqMem SeqMem
-&gt; PipelineConfig -&gt; Prog SeqMem -&gt; FutharkM (Prog SeqMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass SeqMem SeqMem -&gt; Pipeline SeqMem SeqMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">(Pass SeqMem SeqMem -&gt; Pipeline SeqMem SeqMem)
-&gt; Pass SeqMem SeqMem -&gt; Pipeline SeqMem SeqMem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass SeqMem SeqMem
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583392"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583393"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-325"></span><span>    </span><span class="annot"><a href="#local-6989586621684583502"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-type">GPUMem</span></a></span><span> </span><span id="local-6989586621684583391"><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583391"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583390"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583390"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-326"></span><span>      </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-var">GPUMem</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog GPUMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog GPUMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline GPUMem GPUMem
-&gt; PipelineConfig -&gt; Prog GPUMem -&gt; FutharkM (Prog GPUMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass GPUMem GPUMem -&gt; Pipeline GPUMem GPUMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">(Pass GPUMem GPUMem -&gt; Pipeline GPUMem GPUMem)
-&gt; Pass GPUMem GPUMem -&gt; Pipeline GPUMem GPUMem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass GPUMem GPUMem
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583390"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583391"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><a href="#local-6989586621684583502"><span class="hs-identifier hs-var">perform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span id="local-6989586621684583389"><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583389"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684583388"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583388"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-328"></span><span>      </span><span class="annot"><span class="annottext">Prog MCMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-var">MCMem</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog MCMem -&gt; UntypedPassState)
-&gt; FutharkM (Prog MCMem) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline MCMem MCMem
-&gt; PipelineConfig -&gt; Prog MCMem -&gt; FutharkM (Prog MCMem)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pass MCMem MCMem -&gt; Pipeline MCMem MCMem
forall torep fromrep.
Checkable torep =&gt;
Pass fromrep torep -&gt; Pipeline fromrep torep
</span><a href="Futhark.Pipeline.html#onePass"><span class="hs-identifier hs-var">onePass</span></a></span><span> </span><span class="annot"><span class="annottext">(Pass MCMem MCMem -&gt; Pipeline MCMem MCMem)
-&gt; Pass MCMem MCMem -&gt; Pipeline MCMem MCMem
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass MCMem MCMem
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583388"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583389"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span>    </span><span id="local-6989586621684583501"><span class="annot"><span class="annottext">long :: [String]
</span><a href="#local-6989586621684583501"><span class="hs-identifier hs-var hs-var">long</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String
forall fromrep torep. Pass fromrep torep -&gt; String
</span><a href="Futhark.Pass.html#passLongOption"><span class="hs-identifier hs-var">passLongOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="#local-6989586621684583503"><span class="hs-identifier hs-var">pass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-331"></span><span>    </span><span id="local-6989586621684583503"><span class="annot"><span class="annottext">pass :: Pass SOACS SOACS
</span><a href="#local-6989586621684583503"><span class="hs-identifier hs-var hs-var">pass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Pass SOACS SOACS
forall rep.
(ASTRep rep, CanBeAliased (Op rep),
 CSEInOp (OpWithAliases (Op rep))) =&gt;
Bool -&gt; Pass rep rep
</span><a href="Futhark.Optimise.CSE.html#performCSE"><span class="hs-identifier hs-var">performCSE</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.Pass.html#Pass"><span class="hs-identifier hs-type">Pass</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span id="local-6989586621684583984"><span id="local-6989586621684583985"><span class="annot"><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-type">pipelineOption</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684583985"><span class="hs-identifier hs-type">fromrep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-335"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Syntax.html#Prog"><span class="hs-identifier hs-type">Prog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684583984"><span class="hs-identifier hs-type">torep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-338"></span><span>  </span><span class="annot"><a href="Futhark.Pipeline.html#Pipeline"><span class="hs-identifier hs-type">Pipeline</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684583985"><span class="hs-identifier hs-type">fromrep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684583984"><span class="hs-identifier hs-type">torep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-339"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-341"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span></span></span><span>
</span><span id="line-342"></span><span id="pipelineOption"><span class="annot"><span class="annottext">pipelineOption :: forall fromrep torep.
(UntypedPassState -&gt; Maybe (Prog fromrep))
-&gt; String
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline fromrep torep
-&gt; String
-&gt; [String]
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-var hs-var">pipelineOption</span></a></span></span><span> </span><span id="local-6989586621684583376"><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog fromrep)
</span><a href="#local-6989586621684583376"><span class="hs-identifier hs-var">getprog</span></a></span></span><span> </span><span id="local-6989586621684583375"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583375"><span class="hs-identifier hs-var">repdesc</span></a></span></span><span> </span><span id="local-6989586621684583374"><span class="annot"><span class="annottext">Prog torep -&gt; UntypedPassState
</span><a href="#local-6989586621684583374"><span class="hs-identifier hs-var">repf</span></a></span></span><span> </span><span id="local-6989586621684583373"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583373"><span class="hs-identifier hs-var">desc</span></a></span></span><span> </span><span id="local-6989586621684583372"><span class="annot"><span class="annottext">Pipeline fromrep torep
</span><a href="#local-6989586621684583372"><span class="hs-identifier hs-var">pipeline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#passOption"><span class="hs-identifier hs-var">passOption</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583373"><span class="hs-identifier hs-var">desc</span></a></span><span> </span><span class="annot"><span class="annottext">(UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption)
-&gt; UntypedPass -&gt; String -&gt; [String] -&gt; FutharkOption
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState)
-&gt; UntypedPass
</span><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-var">UntypedPass</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583371"><span class="hs-identifier hs-var">pipelinePass</span></a></span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621684583371"><span class="annot"><span class="annottext">pipelinePass :: UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583371"><span class="hs-identifier hs-var hs-var">pipelinePass</span></a></span></span><span> </span><span id="local-6989586621684583367"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583367"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span id="local-6989586621684583366"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583366"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-346"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog fromrep)
</span><a href="#local-6989586621684583376"><span class="hs-identifier hs-var">getprog</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583367"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-347"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684583365"><span class="annot"><span class="annottext">Prog fromrep
</span><a href="#local-6989586621684583365"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-348"></span><span>          </span><span class="annot"><span class="annottext">Prog torep -&gt; UntypedPassState
</span><a href="#local-6989586621684583374"><span class="hs-identifier hs-var">repf</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog torep -&gt; UntypedPassState)
-&gt; FutharkM (Prog torep) -&gt; FutharkM UntypedPassState
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
forall fromrep torep.
Pipeline fromrep torep
-&gt; PipelineConfig -&gt; Prog fromrep -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Pipeline.html#runPipeline"><span class="hs-identifier hs-var">runPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">Pipeline fromrep torep
</span><a href="#local-6989586621684583372"><span class="hs-identifier hs-var">pipeline</span></a></span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583366"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">Prog fromrep
</span><a href="#local-6989586621684583365"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Prog fromrep)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-350"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; FutharkM UntypedPassState
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM UntypedPassState)
-&gt; String -&gt; FutharkM UntypedPassState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-351"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583375"><span class="hs-identifier hs-var">repdesc</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; representation, but got &quot;</span></span><span>
</span><span id="line-352"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583367"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="annot"><a href="Futhark.CLI.Dev.html#soacsPipelineOption"><span class="hs-identifier hs-type">soacsPipelineOption</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-355"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-356"></span><span>  </span><span class="annot"><a href="Futhark.Pipeline.html#Pipeline"><span class="hs-identifier hs-type">Pipeline</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span> </span><span class="annot"><a href="Futhark.IR.SOACS.html#SOACS"><span class="hs-identifier hs-type">SOACS.SOACS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span>
</span><span id="line-360"></span><span id="soacsPipelineOption"><span class="annot"><span class="annottext">soacsPipelineOption :: String
-&gt; Pipeline SOACS SOACS -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPipelineOption"><span class="hs-identifier hs-var hs-var">soacsPipelineOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; Maybe (Prog SOACS))
-&gt; String
-&gt; (Prog SOACS -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline SOACS SOACS
-&gt; String
-&gt; [String]
-&gt; FutharkOption
forall fromrep torep.
(UntypedPassState -&gt; Maybe (Prog fromrep))
-&gt; String
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline fromrep torep
-&gt; String
-&gt; [String]
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-var">pipelineOption</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var">getSOACSProg</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SOACS&quot;</span></span><span> </span><span class="annot"><span class="annottext">Prog SOACS -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-var">SOACS</span></a></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="annot"><a href="Futhark.CLI.Dev.html#commandLineOptions"><span class="hs-identifier hs-type">commandLineOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Futhark.CLI.Dev.html#FutharkOption"><span class="hs-identifier hs-type">FutharkOption</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-363"></span><span id="commandLineOptions"><span class="annot"><span class="annottext">commandLineOptions :: [FutharkOption]
</span><a href="Futhark.CLI.Dev.html#commandLineOptions"><span class="hs-identifier hs-var hs-var">commandLineOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-365"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;v&quot;</span></span><span>
</span><span id="line-366"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;verbose&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-367"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Maybe String -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; String -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. (Maybe String -&gt; a) -&gt; String -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">OptArg</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Maybe String -&gt; Config -&gt; Config)
-&gt; Maybe String
-&gt; Either (IO ()) (Config -&gt; Config)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
</span><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-var">changeFutharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config)
-&gt; (Maybe String -&gt; FutharkConfig -&gt; FutharkConfig)
-&gt; Maybe String
-&gt; Config
-&gt; Config
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe String -&gt; FutharkConfig -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#incVerbosity"><span class="hs-identifier hs-var">incVerbosity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FILE&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print verbose output on standard error; wrong program to FILE.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-369"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-370"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-371"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Werror&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-372"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
</span><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-var">changeFutharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config)
-&gt; (FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583360"><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583360"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583360"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkWerror :: Bool
</span><a href="Futhark.Compiler.Config.html#futharkWerror"><span class="hs-identifier hs-var">futharkWerror</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Treat warnings as errors.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-375"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;w&quot;</span></span><span>
</span><span id="line-376"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-377"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
</span><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-var">changeFutharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config)
-&gt; (FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583358"><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583358"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583358"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkWarn :: Bool
</span><a href="Futhark.Compiler.Config.html#futharkWarn"><span class="hs-identifier hs-var">futharkWarn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Disable all warnings.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-380"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;t&quot;</span></span><span>
</span><span id="line-381"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type-check&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-382"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-383"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583356"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583356"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-384"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583356"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPipeline :: FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var">futharkPipeline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#TypeCheck"><span class="hs-identifier hs-var">TypeCheck</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-385"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print on standard output the type-checked program.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-388"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-389"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;no-check&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-390"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-391"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
</span><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-var">changeFutharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config)
-&gt; (FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583355"><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583355"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583355"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkTypeCheck :: Bool
</span><a href="Futhark.Compiler.Config.html#futharkTypeCheck"><span class="hs-identifier hs-var">futharkTypeCheck</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">}</span><span>
</span><span id="line-392"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Disable type-checking.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-395"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pretty-print&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-397"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-398"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583353"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583353"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-399"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583353"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPipeline :: FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var">futharkPipeline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#PrettyPrint"><span class="hs-identifier hs-var">PrettyPrint</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-400"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Parse and pretty-print the AST of the given program.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-402"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-403"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-404"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;backend&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-405"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; String -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. (String -&gt; a) -&gt; String -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">ReqArg</span></span><span>
</span><span id="line-406"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583351"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583351"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-407"></span><span>              </span><span id="local-6989586621684583350"><span class="annot"><span class="annottext">UntypedAction
</span><a href="#local-6989586621684583350"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583351"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-408"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;c&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#SeqMemAction"><span class="hs-identifier hs-var">SeqMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem
</span><a href="Futhark.Actions.html#compileCAction"><span class="hs-identifier hs-var">compileCAction</span></a></span><span>
</span><span id="line-409"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;multicore&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction MCMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#MCMemAction"><span class="hs-identifier hs-var">MCMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction MCMem
</span><a href="Futhark.Actions.html#compileMulticoreAction"><span class="hs-identifier hs-var">compileMulticoreAction</span></a></span><span>
</span><span id="line-410"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;opencl&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem
</span><a href="Futhark.Actions.html#compileOpenCLAction"><span class="hs-identifier hs-var">compileOpenCLAction</span></a></span><span>
</span><span id="line-411"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cuda&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem
</span><a href="Futhark.Actions.html#compileCUDAAction"><span class="hs-identifier hs-var">compileCUDAAction</span></a></span><span>
</span><span id="line-412"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wasm&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#SeqMemAction"><span class="hs-identifier hs-var">SeqMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem
</span><a href="Futhark.Actions.html#compileCtoWASMAction"><span class="hs-identifier hs-var">compileCtoWASMAction</span></a></span><span>
</span><span id="line-413"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wasm-multicore&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction MCMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#MCMemAction"><span class="hs-identifier hs-var">MCMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction MCMem
</span><a href="Futhark.Actions.html#compileMulticoreToWASMAction"><span class="hs-identifier hs-var">compileMulticoreToWASMAction</span></a></span><span>
</span><span id="line-414"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;python&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#SeqMemAction"><span class="hs-identifier hs-var">SeqMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem
</span><a href="Futhark.Actions.html#compilePythonAction"><span class="hs-identifier hs-var">compilePythonAction</span></a></span><span>
</span><span id="line-415"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pyopencl&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UntypedAction -&gt; Either (IO ()) UntypedAction)
-&gt; UntypedAction -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem
</span><a href="Futhark.Actions.html#compilePyOpenCLAction"><span class="hs-identifier hs-var">compilePyOpenCLAction</span></a></span><span>
</span><span id="line-416"></span><span>                </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; Either (IO ()) UntypedAction
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Either (IO ()) UntypedAction)
-&gt; IO () -&gt; Either (IO ()) UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid backend: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583351"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span>              </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583340"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583340"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583340"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UntypedAction
</span><a href="#local-6989586621684583350"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-419"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>          </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;c|multicore|opencl|cuda|python|pyopencl&quot;</span></span><span>
</span><span id="line-421"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run this compiler backend on pipeline result.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-423"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-424"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-425"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;compile-imperative&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-426"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-427"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583339"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583339"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-428"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583339"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#SeqMemAction"><span class="hs-identifier hs-var">SeqMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendAction SeqMem -&gt; UntypedAction)
-&gt; BackendAction SeqMem -&gt; UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">FutharkConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Action SeqMem
</span><a href="Futhark.Actions.html#impCodeGenAction"><span class="hs-identifier hs-var">impCodeGenAction</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-429"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Translate program into the imperative IL and write it on standard output.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-431"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-432"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-433"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;compile-imperative-kernels&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-434"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-435"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583337"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583337"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-436"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583337"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendAction GPUMem -&gt; UntypedAction)
-&gt; BackendAction GPUMem -&gt; UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">FutharkConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Action GPUMem
</span><a href="Futhark.Actions.html#kernelImpCodeGenAction"><span class="hs-identifier hs-var">kernelImpCodeGenAction</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-437"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Translate program into the imperative IL with kernels and write it on standard output.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-439"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-440"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-441"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;compile-imperative-multicore&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-442"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-443"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583335"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583335"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-444"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583335"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendAction MCMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#MCMemAction"><span class="hs-identifier hs-var">MCMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendAction MCMem -&gt; UntypedAction)
-&gt; BackendAction MCMem -&gt; UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">FutharkConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Action MCMem
</span><a href="Futhark.Actions.html#multicoreImpCodeGenAction"><span class="hs-identifier hs-var">multicoreImpCodeGenAction</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-445"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Translate program into the imperative IL with kernels and write it on standard output.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-447"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-448"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;p&quot;</span></span><span>
</span><span id="line-449"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;print&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-450"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583333"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583333"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583333"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall rep.
 (ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
 Action rep)
-&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-var">PolyAction</span></a></span><span> </span><span class="annot"><span class="annottext">forall rep. ASTRep rep =&gt; Action rep
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="Futhark.Actions.html#printAction"><span class="hs-identifier hs-var">printAction</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print the resulting IR (default action).&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-452"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-453"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-454"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;print-aliases&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-455"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583328"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583328"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583328"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall rep.
 (ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
 Action rep)
-&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-var">PolyAction</span></a></span><span> </span><span class="annot"><span class="annottext">forall rep. (ASTRep rep, CanBeAliased (Op rep)) =&gt; Action rep
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="Futhark.Actions.html#printAliasesAction"><span class="hs-identifier hs-var">printAliasesAction</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print the resulting IR with aliases.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-457"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-458"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-459"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;print-last-use-gpu&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-460"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-461"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583319"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583319"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-462"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583319"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendAction GPUMem -&gt; UntypedAction)
-&gt; BackendAction GPUMem -&gt; UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">FutharkConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Action GPUMem
</span><a href="Futhark.Actions.html#printLastUseGPU"><span class="hs-identifier hs-var">printLastUseGPU</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-463"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print last use information.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-465"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-466"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-467"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;print-interference-gpu&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-468"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-469"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583317"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583317"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-470"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583317"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendAction GPUMem -&gt; UntypedAction)
-&gt; BackendAction GPUMem -&gt; UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">FutharkConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Action GPUMem
</span><a href="Futhark.Actions.html#printInterferenceGPU"><span class="hs-identifier hs-var">printInterferenceGPU</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-471"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print interference information.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-473"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-474"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-475"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;print-mem-alias-gpu&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-476"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-477"></span><span>          </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583315"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583315"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-478"></span><span>            </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583315"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-var">GPUMemAction</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendAction GPUMem -&gt; UntypedAction)
-&gt; BackendAction GPUMem -&gt; UntypedAction
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">FutharkConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Action GPUMem
</span><a href="Futhark.Actions.html#printMemAliasGPU"><span class="hs-identifier hs-var">printMemAliasGPU</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-479"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print memory alias information.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-481"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-482"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-483"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;call-graph&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-484"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583313"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583313"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583313"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Action SOACS -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#SOACSAction"><span class="hs-identifier hs-var">SOACSAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action SOACS
</span><a href="Futhark.Actions.html#callGraphAction"><span class="hs-identifier hs-var">callGraphAction</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print the resulting call graph.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-486"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-487"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;m&quot;</span></span><span>
</span><span id="line-488"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;metrics&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-489"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583311"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583311"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583311"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkAction :: UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var">futharkAction</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall rep.
 (ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
 Action rep)
-&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-var">PolyAction</span></a></span><span> </span><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
forall rep. OpMetrics (Op rep) =&gt; Action rep
</span><a href="Futhark.Actions.html#metricsAction"><span class="hs-identifier hs-var">metricsAction</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Print AST metrics of the resulting internal representation on standard output.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-491"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-492"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-493"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;defunctorise&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-494"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583303"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583303"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583303"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPipeline :: FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var">futharkPipeline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Defunctorise"><span class="hs-identifier hs-var">Defunctorise</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-495"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Partially evaluate all module constructs and print the residual program.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-497"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-498"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;monomorphise&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-499"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583302"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583302"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583302"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPipeline :: FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var">futharkPipeline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Monomorphise"><span class="hs-identifier hs-var">Monomorphise</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Monomorphise the program.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-501"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-502"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-503"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lift-lambdas&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-504"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583301"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583301"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583301"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPipeline :: FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var">futharkPipeline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#LiftLambdas"><span class="hs-identifier hs-var">LiftLambdas</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Lambda-lift the program.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-506"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-507"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-508"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;defunctionalise&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-509"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583300"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583300"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583300"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPipeline :: FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var">futharkPipeline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Defunctionalise"><span class="hs-identifier hs-var">Defunctionalise</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defunctionalise the program.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-511"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-512"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-513"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ast&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-514"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583299"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583299"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583299"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkPrintAST :: Bool
</span><a href="Futhark.CLI.Dev.html#futharkPrintAST"><span class="hs-identifier hs-var">futharkPrintAST</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Output ASTs instead of prettyprinted programs.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-516"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-517"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-518"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;safe&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-519"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
</span><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-var">changeFutharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config)
-&gt; (FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583298"><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583298"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583298"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkSafe :: Bool
</span><a href="#local-6989586621684583297"><span class="hs-identifier hs-var">futharkSafe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ignore 'unsafe'.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-521"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-522"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-523"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;entry-points&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-524"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; String -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. (String -&gt; a) -&gt; String -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">ReqArg</span></span><span>
</span><span id="line-525"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583296"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583296"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-526"></span><span>              </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
</span><a href="Futhark.CLI.Dev.html#changeFutharkConfig"><span class="hs-identifier hs-var">changeFutharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">((FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config)
-&gt; (FutharkConfig -&gt; FutharkConfig) -&gt; Config -&gt; Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583295"><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583295"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-527"></span><span>                </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583295"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-528"></span><span>                  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">futharkEntryPoints :: [Name]
</span><a href="Futhark.Compiler.Config.html#futharkEntryPoints"><span class="hs-identifier hs-var">futharkEntryPoints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier hs-var">nameFromString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583296"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; [Name]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">FutharkConfig -&gt; [Name]
</span><a href="Futhark.Compiler.Config.html#futharkEntryPoints"><span class="hs-identifier hs-var hs-var">futharkEntryPoints</span></a></span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583295"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-529"></span><span>                  </span><span class="hs-special">}</span><span>
</span><span id="line-530"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>          </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NAME&quot;</span></span><span>
</span><span id="line-532"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Treat this function as an additional entry point.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-534"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-535"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-536"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;library&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-537"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583293"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583293"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583293"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkCompilerMode :: CompilerMode
</span><a href="Futhark.CLI.Dev.html#futharkCompilerMode"><span class="hs-identifier hs-var">futharkCompilerMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><a href="Futhark.Compiler.CLI.html#ToLibrary"><span class="hs-identifier hs-var">ToLibrary</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Generate a library instead of an executable.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-539"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-540"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-541"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;executable&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-542"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583291"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583291"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583291"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkCompilerMode :: CompilerMode
</span><a href="Futhark.CLI.Dev.html#futharkCompilerMode"><span class="hs-identifier hs-var">futharkCompilerMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><a href="Futhark.Compiler.CLI.html#ToExecutable"><span class="hs-identifier hs-var">ToExecutable</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Generate an executable instead of a library (set by default).&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-544"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
-&gt; String
-&gt; FutharkOption
forall a. String -&gt; [String] -&gt; ArgDescr a -&gt; String -&gt; OptDescr a
</span><span class="hs-identifier hs-var">Option</span></span><span>
</span><span id="line-545"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-546"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;server&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-547"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a. a -&gt; ArgDescr a
</span><span class="hs-identifier hs-var">NoArg</span></span><span> </span><span class="annot"><span class="annottext">(Either (IO ()) (Config -&gt; Config)
 -&gt; ArgDescr (Either (IO ()) (Config -&gt; Config)))
-&gt; Either (IO ()) (Config -&gt; Config)
-&gt; ArgDescr (Either (IO ()) (Config -&gt; Config))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">((Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config))
-&gt; (Config -&gt; Config) -&gt; Either (IO ()) (Config -&gt; Config)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583290"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583290"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583290"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkCompilerMode :: CompilerMode
</span><a href="Futhark.CLI.Dev.html#futharkCompilerMode"><span class="hs-identifier hs-var">futharkCompilerMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CompilerMode
</span><a href="Futhark.Compiler.CLI.html#ToServer"><span class="hs-identifier hs-var">ToServer</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Generate a server executable.&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-549"></span><span>    </span><span class="annot"><span class="annottext">(String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS))
-&gt; (Prog Seq -&gt; UntypedPassState)
-&gt; Pass SOACS Seq
-&gt; String
-&gt; FutharkOption
forall torep fromrep.
Checkable torep =&gt;
(String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep))
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; Pass fromrep torep
-&gt; String
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-var">typedPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#soacsProg"><span class="hs-identifier hs-var">soacsProg</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-var">Seq</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS Seq
forall rep. FirstOrderRep rep =&gt; Pass SOACS rep
</span><a href="Futhark.Pass.FirstOrderTransform.html#firstOrderTransform"><span class="hs-identifier hs-var">firstOrderTransform</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;f&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-550"></span><span>    </span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPassOption"><span class="hs-identifier hs-var">soacsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="Futhark.Optimise.Fusion.html#fuseSOACs"><span class="hs-identifier hs-var">fuseSOACs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;o&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-551"></span><span>    </span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPassOption"><span class="hs-identifier hs-var">soacsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="Futhark.Optimise.InliningDeadFun.html#inlineAggressively"><span class="hs-identifier hs-var">inlineAggressively</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-552"></span><span>    </span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPassOption"><span class="hs-identifier hs-var">soacsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="Futhark.Optimise.InliningDeadFun.html#inlineConservatively"><span class="hs-identifier hs-var">inlineConservatively</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-553"></span><span>    </span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPassOption"><span class="hs-identifier hs-var">soacsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="Futhark.Optimise.InliningDeadFun.html#removeDeadFunctions"><span class="hs-identifier hs-var">removeDeadFunctions</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-554"></span><span>    </span><span class="annot"><span class="annottext">Pass SOACS SOACS -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPassOption"><span class="hs-identifier hs-var">soacsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS SOACS
</span><a href="Futhark.Pass.AD.html#algebraicDifferentiation"><span class="hs-identifier hs-var">algebraicDifferentiation</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-555"></span><span>    </span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsPassOption"><span class="hs-identifier hs-var">kernelsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPU
</span><a href="Futhark.Pass.KernelBabysitting.html#babysitKernels"><span class="hs-identifier hs-var">babysitKernels</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-556"></span><span>    </span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsPassOption"><span class="hs-identifier hs-var">kernelsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPU
</span><a href="Futhark.Optimise.TileLoops.html#tileLoops"><span class="hs-identifier hs-var">tileLoops</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-557"></span><span>    </span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsPassOption"><span class="hs-identifier hs-var">kernelsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPU
</span><a href="Futhark.Optimise.HistAccs.html#histAccsGPU"><span class="hs-identifier hs-var">histAccsGPU</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-558"></span><span>    </span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsPassOption"><span class="hs-identifier hs-var">kernelsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPU
</span><a href="Futhark.Optimise.Unstream.html#unstreamGPU"><span class="hs-identifier hs-var">unstreamGPU</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-559"></span><span>    </span><span class="annot"><span class="annottext">Pass GPU GPU -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsPassOption"><span class="hs-identifier hs-var">kernelsPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPU GPU
</span><a href="Futhark.Optimise.Sink.html#sinkGPU"><span class="hs-identifier hs-var">sinkGPU</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-560"></span><span>    </span><span class="annot"><span class="annottext">(String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS))
-&gt; (Prog GPU -&gt; UntypedPassState)
-&gt; Pass SOACS GPU
-&gt; String
-&gt; FutharkOption
forall torep fromrep.
Checkable torep =&gt;
(String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep))
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; Pass fromrep torep
-&gt; String
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-var">typedPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#soacsProg"><span class="hs-identifier hs-var">soacsProg</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS GPU
</span><a href="Futhark.Pass.ExtractKernels.html#extractKernels"><span class="hs-identifier hs-var">extractKernels</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-561"></span><span>    </span><span class="annot"><span class="annottext">(String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS))
-&gt; (Prog MC -&gt; UntypedPassState)
-&gt; Pass SOACS MC
-&gt; String
-&gt; FutharkOption
forall torep fromrep.
Checkable torep =&gt;
(String -&gt; UntypedPassState -&gt; FutharkM (Prog fromrep))
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; Pass fromrep torep
-&gt; String
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#typedPassOption"><span class="hs-identifier hs-var">typedPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; UntypedPassState -&gt; FutharkM (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#soacsProg"><span class="hs-identifier hs-var">soacsProg</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MC -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-var">MC</span></a></span><span> </span><span class="annot"><span class="annottext">Pass SOACS MC
</span><a href="Futhark.Pass.ExtractMulticore.html#extractMulticore"><span class="hs-identifier hs-var">extractMulticore</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-562"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#iplOption"><span class="hs-identifier hs-var">iplOption</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-563"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#allocateOption"><span class="hs-identifier hs-var">allocateOption</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-564"></span><span>    </span><span class="annot"><span class="annottext">Pass GPUMem GPUMem -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsMemPassOption"><span class="hs-identifier hs-var">kernelsMemPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPUMem GPUMem
</span><a href="Futhark.Optimise.DoubleBuffer.html#doubleBufferGPU"><span class="hs-identifier hs-var">doubleBufferGPU</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-565"></span><span>    </span><span class="annot"><span class="annottext">Pass GPUMem GPUMem -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsMemPassOption"><span class="hs-identifier hs-var">kernelsMemPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPUMem GPUMem
</span><a href="Futhark.Pass.ExpandAllocations.html#expandAllocations"><span class="hs-identifier hs-var">expandAllocations</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><span class="annottext">Pass GPUMem GPUMem -&gt; String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#kernelsMemPassOption"><span class="hs-identifier hs-var">kernelsMemPassOption</span></a></span><span> </span><span class="annot"><span class="annottext">Pass GPUMem GPUMem
</span><a href="Futhark.Optimise.MemoryBlockMerging.html#optimise"><span class="hs-identifier hs-var">MemoryBlockMerging.optimise</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-567"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#cseOption"><span class="hs-identifier hs-var">cseOption</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-568"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#simplifyOption"><span class="hs-identifier hs-var">simplifyOption</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;e&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-569"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; Pipeline SOACS SOACS -&gt; String -&gt; [String] -&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#soacsPipelineOption"><span class="hs-identifier hs-var">soacsPipelineOption</span></a></span><span>
</span><span id="line-570"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run the default optimised pipeline&quot;</span></span><span>
</span><span id="line-571"></span><span>      </span><span class="annot"><span class="annottext">Pipeline SOACS SOACS
</span><a href="Futhark.Passes.html#standardPipeline"><span class="hs-identifier hs-var">standardPipeline</span></a></span><span>
</span><span id="line-572"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;s&quot;</span></span><span>
</span><span id="line-573"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;standard&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-574"></span><span>    </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; Maybe (Prog SOACS))
-&gt; String
-&gt; (Prog GPU -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline SOACS GPU
-&gt; String
-&gt; [String]
-&gt; FutharkOption
forall fromrep torep.
(UntypedPassState -&gt; Maybe (Prog fromrep))
-&gt; String
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline fromrep torep
-&gt; String
-&gt; [String]
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-var">pipelineOption</span></a></span><span>
</span><span id="line-575"></span><span>      </span><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var">getSOACSProg</span></a></span><span>
</span><span id="line-576"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GPU&quot;</span></span><span>
</span><span id="line-577"></span><span>      </span><span class="annot"><span class="annottext">Prog GPU -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span><span>
</span><span id="line-578"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run the default optimised kernels pipeline&quot;</span></span><span>
</span><span id="line-579"></span><span>      </span><span class="annot"><span class="annottext">Pipeline SOACS GPU
</span><a href="Futhark.Passes.html#kernelsPipeline"><span class="hs-identifier hs-var">kernelsPipeline</span></a></span><span>
</span><span id="line-580"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-581"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gpu&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-582"></span><span>    </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; Maybe (Prog SOACS))
-&gt; String
-&gt; (Prog GPUMem -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline SOACS GPUMem
-&gt; String
-&gt; [String]
-&gt; FutharkOption
forall fromrep torep.
(UntypedPassState -&gt; Maybe (Prog fromrep))
-&gt; String
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline fromrep torep
-&gt; String
-&gt; [String]
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-var">pipelineOption</span></a></span><span>
</span><span id="line-583"></span><span>      </span><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var">getSOACSProg</span></a></span><span>
</span><span id="line-584"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GPUMem&quot;</span></span><span>
</span><span id="line-585"></span><span>      </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-var">GPUMem</span></a></span><span>
</span><span id="line-586"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run the full GPU compilation pipeline&quot;</span></span><span>
</span><span id="line-587"></span><span>      </span><span class="annot"><span class="annottext">Pipeline SOACS GPUMem
</span><a href="Futhark.Passes.html#gpuPipeline"><span class="hs-identifier hs-var">gpuPipeline</span></a></span><span>
</span><span id="line-588"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-589"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gpu-mem&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-590"></span><span>    </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; Maybe (Prog SOACS))
-&gt; String
-&gt; (Prog Seq -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline SOACS Seq
-&gt; String
-&gt; [String]
-&gt; FutharkOption
forall fromrep torep.
(UntypedPassState -&gt; Maybe (Prog fromrep))
-&gt; String
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline fromrep torep
-&gt; String
-&gt; [String]
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-var">pipelineOption</span></a></span><span>
</span><span id="line-591"></span><span>      </span><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var">getSOACSProg</span></a></span><span>
</span><span id="line-592"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Seq&quot;</span></span><span>
</span><span id="line-593"></span><span>      </span><span class="annot"><span class="annottext">Prog Seq -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-var">Seq</span></a></span><span>
</span><span id="line-594"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run the sequential CPU compilation pipeline&quot;</span></span><span>
</span><span id="line-595"></span><span>      </span><span class="annot"><span class="annottext">Pipeline SOACS Seq
</span><a href="Futhark.Passes.html#sequentialPipeline"><span class="hs-identifier hs-var">sequentialPipeline</span></a></span><span>
</span><span id="line-596"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-597"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;seq&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; Maybe (Prog SOACS))
-&gt; String
-&gt; (Prog SeqMem -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline SOACS SeqMem
-&gt; String
-&gt; [String]
-&gt; FutharkOption
forall fromrep torep.
(UntypedPassState -&gt; Maybe (Prog fromrep))
-&gt; String
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline fromrep torep
-&gt; String
-&gt; [String]
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-var">pipelineOption</span></a></span><span>
</span><span id="line-599"></span><span>      </span><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var">getSOACSProg</span></a></span><span>
</span><span id="line-600"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SeqMem&quot;</span></span><span>
</span><span id="line-601"></span><span>      </span><span class="annot"><span class="annottext">Prog SeqMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-var">SeqMem</span></a></span><span>
</span><span id="line-602"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run the sequential CPU+memory compilation pipeline&quot;</span></span><span>
</span><span id="line-603"></span><span>      </span><span class="annot"><span class="annottext">Pipeline SOACS SeqMem
</span><a href="Futhark.Passes.html#sequentialCpuPipeline"><span class="hs-identifier hs-var">sequentialCpuPipeline</span></a></span><span>
</span><span id="line-604"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-605"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;seq-mem&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-606"></span><span>    </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; Maybe (Prog SOACS))
-&gt; String
-&gt; (Prog MCMem -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline SOACS MCMem
-&gt; String
-&gt; [String]
-&gt; FutharkOption
forall fromrep torep.
(UntypedPassState -&gt; Maybe (Prog fromrep))
-&gt; String
-&gt; (Prog torep -&gt; UntypedPassState)
-&gt; String
-&gt; Pipeline fromrep torep
-&gt; String
-&gt; [String]
-&gt; FutharkOption
</span><a href="Futhark.CLI.Dev.html#pipelineOption"><span class="hs-identifier hs-var">pipelineOption</span></a></span><span>
</span><span id="line-607"></span><span>      </span><span class="annot"><span class="annottext">UntypedPassState -&gt; Maybe (Prog SOACS)
</span><a href="Futhark.CLI.Dev.html#getSOACSProg"><span class="hs-identifier hs-var">getSOACSProg</span></a></span><span>
</span><span id="line-608"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCMem&quot;</span></span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="annottext">Prog MCMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-var">MCMem</span></a></span><span>
</span><span id="line-610"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Run the multicore compilation pipeline&quot;</span></span><span>
</span><span id="line-611"></span><span>      </span><span class="annot"><span class="annottext">Pipeline SOACS MCMem
</span><a href="Futhark.Passes.html#multicorePipeline"><span class="hs-identifier hs-var">multicorePipeline</span></a></span><span>
</span><span id="line-612"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-613"></span><span>      </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mc-mem&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="annot"><a href="Futhark.CLI.Dev.html#incVerbosity"><span class="hs-identifier hs-type">incVerbosity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Compiler.Config.html#FutharkConfig"><span class="hs-identifier hs-type">FutharkConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Compiler.Config.html#FutharkConfig"><span class="hs-identifier hs-type">FutharkConfig</span></a></span><span>
</span><span id="line-617"></span><span id="incVerbosity"><span class="annot"><span class="annottext">incVerbosity :: Maybe String -&gt; FutharkConfig -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#incVerbosity"><span class="hs-identifier hs-var hs-var">incVerbosity</span></a></span></span><span> </span><span id="local-6989586621684583266"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621684583266"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span id="local-6989586621684583265"><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583265"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-618"></span><span>  </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583265"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">futharkVerbose :: (Verbosity, Maybe String)
</span><a href="Futhark.Compiler.Config.html#futharkVerbose"><span class="hs-identifier hs-var">futharkVerbose</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Verbosity
</span><a href="#local-6989586621684583263"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621684583266"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String -&gt; Maybe String -&gt; Maybe String
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a -&gt; m a -&gt; m a
</span><span class="hs-operator hs-var">`mplus`</span></span><span> </span><span class="annot"><span class="annottext">(Verbosity, Maybe String) -&gt; Maybe String
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FutharkConfig -&gt; (Verbosity, Maybe String)
</span><a href="Futhark.Compiler.Config.html#futharkVerbose"><span class="hs-identifier hs-var hs-var">futharkVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583265"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-620"></span><span>    </span><span id="local-6989586621684583263"><span class="annot"><span class="annottext">v :: Verbosity
</span><a href="#local-6989586621684583263"><span class="hs-identifier hs-var hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Verbosity, Maybe String) -&gt; Verbosity
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Verbosity, Maybe String) -&gt; Verbosity)
-&gt; (Verbosity, Maybe String) -&gt; Verbosity
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FutharkConfig -&gt; (Verbosity, Maybe String)
</span><a href="Futhark.Compiler.Config.html#futharkVerbose"><span class="hs-identifier hs-var hs-var">futharkVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">FutharkConfig
</span><a href="#local-6989586621684583265"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-621"></span><span>      </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Futhark.Pipeline.html#NotVerbose"><span class="hs-identifier hs-var">NotVerbose</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Futhark.Pipeline.html#Verbose"><span class="hs-identifier hs-var">Verbose</span></a></span><span>
</span><span id="line-622"></span><span>      </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Futhark.Pipeline.html#Verbose"><span class="hs-identifier hs-var">Verbose</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Futhark.Pipeline.html#VeryVerbose"><span class="hs-identifier hs-var">VeryVerbose</span></a></span><span>
</span><span id="line-623"></span><span>      </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Futhark.Pipeline.html#VeryVerbose"><span class="hs-identifier hs-var">VeryVerbose</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Futhark.Pipeline.html#VeryVerbose"><span class="hs-identifier hs-var">VeryVerbose</span></a></span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="hs-comment">-- | Entry point.  Non-interactive, except when reading interpreter</span><span>
</span><span id="line-626"></span><span class="hs-comment">-- input from standard input.</span><span>
</span><span id="line-627"></span><span class="annot"><a href="Futhark.CLI.Dev.html#main"><span class="hs-identifier hs-type">main</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-628"></span><span id="main"><span class="annot"><span class="annottext">main :: String -&gt; [String] -&gt; IO ()
</span><a href="Futhark.CLI.Dev.html#main"><span class="hs-identifier hs-var hs-var">main</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Config
-&gt; [FutharkOption]
-&gt; String
-&gt; ([String] -&gt; Config -&gt; Maybe (IO ()))
-&gt; String
-&gt; [String]
-&gt; IO ()
forall cfg.
cfg
-&gt; [FunOptDescr cfg]
-&gt; String
-&gt; ([String] -&gt; cfg -&gt; Maybe (IO ()))
-&gt; String
-&gt; [String]
-&gt; IO ()
</span><a href="Futhark.Util.Options.html#mainWithOptions"><span class="hs-identifier hs-var">mainWithOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="Futhark.CLI.Dev.html#newConfig"><span class="hs-identifier hs-var">newConfig</span></a></span><span> </span><span class="annot"><span class="annottext">[FutharkOption]
</span><a href="Futhark.CLI.Dev.html#commandLineOptions"><span class="hs-identifier hs-var">commandLineOptions</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;options... program&quot;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Config -&gt; Maybe (IO ())
</span><a href="#local-6989586621684583257"><span class="hs-identifier hs-var">compile</span></a></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-630"></span><span>    </span><span id="local-6989586621684583257"><span class="annot"><span class="annottext">compile :: [String] -&gt; Config -&gt; Maybe (IO ())
</span><a href="#local-6989586621684583257"><span class="hs-identifier hs-var hs-var">compile</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621684583252"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583252"><span class="hs-identifier hs-var">file</span></a></span></span><span class="hs-special">]</span><span> </span><span id="local-6989586621684583251"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583251"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-631"></span><span>      </span><span class="annot"><span class="annottext">IO () -&gt; Maybe (IO ())
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Maybe (IO ())) -&gt; IO () -&gt; Maybe (IO ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-632"></span><span>        </span><span id="local-6989586621684583250"><span class="annot"><span class="annottext">Either CompilerError ()
</span><a href="#local-6989586621684583250"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-633"></span><span>          </span><span class="annot"><span class="annottext">FutharkM () -&gt; Verbosity -&gt; IO (Either CompilerError ())
forall a. FutharkM a -&gt; Verbosity -&gt; IO (Either CompilerError a)
</span><a href="Futhark.Pipeline.html#runFutharkM"><span class="hs-identifier hs-var">runFutharkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Config -&gt; FutharkM ()
</span><a href="#local-6989586621684583248"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583252"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583251"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Verbosity -&gt; IO (Either CompilerError ()))
-&gt; Verbosity -&gt; IO (Either CompilerError ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-634"></span><span>            </span><span class="annot"><span class="annottext">(Verbosity, Maybe String) -&gt; Verbosity
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Verbosity, Maybe String) -&gt; Verbosity)
-&gt; (Verbosity, Maybe String) -&gt; Verbosity
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FutharkConfig -&gt; (Verbosity, Maybe String)
</span><a href="Futhark.Compiler.Config.html#futharkVerbose"><span class="hs-identifier hs-var hs-var">futharkVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; (Verbosity, Maybe String))
-&gt; FutharkConfig -&gt; (Verbosity, Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583251"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-635"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either CompilerError ()
</span><a href="#local-6989586621684583250"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-636"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621684583247"><span class="annot"><span class="annottext">CompilerError
</span><a href="#local-6989586621684583247"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-637"></span><span>            </span><span class="annot"><span class="annottext">FutharkConfig -&gt; CompilerError -&gt; IO ()
</span><a href="Futhark.Compiler.html#dumpError"><span class="hs-identifier hs-var">dumpError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583251"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CompilerError
</span><a href="#local-6989586621684583247"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-638"></span><span>            </span><span class="annot"><span class="annottext">ExitCode -&gt; IO ()
forall a. ExitCode -&gt; IO a
</span><span class="hs-identifier hs-var">exitWith</span></span><span> </span><span class="annot"><span class="annottext">(ExitCode -&gt; IO ()) -&gt; ExitCode -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExitCode
</span><span class="hs-identifier hs-var">ExitFailure</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-639"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span>    </span><span class="annot"><a href="#local-6989586621684583257"><span class="hs-identifier hs-var">compile</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Config
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-641"></span><span>      </span><span class="annot"><span class="annottext">Maybe (IO ())
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-642"></span><span>    </span><span id="local-6989586621684583248"><span class="annot"><span class="annottext">m :: String -&gt; Config -&gt; FutharkM ()
</span><a href="#local-6989586621684583248"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span id="local-6989586621684583153"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span></span><span> </span><span id="local-6989586621684583152"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-643"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621684583921"><span class="annot"><a href="#local-6989586621684583151"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621684583921"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PP.Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621684583921"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621684583921"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-644"></span><span>          </span><span id="local-6989586621684583151"><span class="annot"><span class="annottext">p :: forall a. (Show a, Pretty a) =&gt; [a] -&gt; IO ()
</span><a href="#local-6989586621684583151"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-645"></span><span>            </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; [String] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span>
</span><span id="line-646"></span><span>              </span><span class="annot"><span class="annottext">([String] -&gt; IO ()) -&gt; ([a] -&gt; [String]) -&gt; [a] -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">intersperse</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-647"></span><span>              </span><span class="annot"><span class="annottext">([String] -&gt; [String]) -&gt; ([a] -&gt; [String]) -&gt; [a] -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; String) -&gt; [a] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Config -&gt; Bool
</span><a href="Futhark.CLI.Dev.html#futharkPrintAST"><span class="hs-identifier hs-var hs-var">futharkPrintAST</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-648"></span><span>
</span><span id="line-649"></span><span>          </span><span id="local-6989586621684583139"><span class="annot"><span class="annottext">readProgram' :: FutharkM (Warnings, Imports, VNameSource)
</span><a href="#local-6989586621684583139"><span class="hs-identifier hs-var hs-var">readProgram'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; String -&gt; FutharkM (Warnings, Imports, VNameSource)
forall (m :: * -&gt; *).
(MonadError CompilerError m, MonadIO m) =&gt;
[Name] -&gt; String -&gt; m (Warnings, Imports, VNameSource)
</span><a href="Futhark.Compiler.html#readProgram"><span class="hs-identifier hs-var">readProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FutharkConfig -&gt; [Name]
</span><a href="Futhark.Compiler.Config.html#futharkEntryPoints"><span class="hs-identifier hs-var hs-var">futharkEntryPoints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Config -&gt; FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#futharkPipeline"><span class="hs-identifier hs-var hs-var">futharkPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-652"></span><span>        </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#PrettyPrint"><span class="hs-identifier hs-var">PrettyPrint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; FutharkM ()) -&gt; IO () -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-653"></span><span>          </span><span id="local-6989586621684583136"><span class="annot"><span class="annottext">Either ParseError UncheckedProg
</span><a href="#local-6989586621684583136"><span class="hs-identifier hs-var">maybe_prog</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either ParseError UncheckedProg
</span><a href="Language.Futhark.Parser.html#parseFuthark"><span class="hs-identifier hs-var">parseFuthark</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Either ParseError UncheckedProg)
-&gt; IO Text -&gt; IO (Either ParseError UncheckedProg)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Text
</span><span class="hs-identifier hs-var">T.readFile</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-654"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ParseError UncheckedProg
</span><a href="#local-6989586621684583136"><span class="hs-identifier hs-var">maybe_prog</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-655"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621684583134"><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621684583134"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ParseError -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ParseError
</span><a href="#local-6989586621684583134"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-656"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621684583133"><span class="annot"><span class="annottext">UncheckedProg
</span><a href="#local-6989586621684583133"><span class="hs-identifier hs-var">prog</span></a></span></span><span>
</span><span id="line-657"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Config -&gt; Bool
</span><a href="Futhark.CLI.Dev.html#futharkPrintAST"><span class="hs-identifier hs-var hs-var">futharkPrintAST</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UncheckedProg -&gt; IO ()
forall a. Show a =&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">print</span></span><span> </span><span class="annot"><span class="annottext">UncheckedProg
</span><a href="#local-6989586621684583133"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-658"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UncheckedProg -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">UncheckedProg
</span><a href="#local-6989586621684583133"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-659"></span><span>        </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#TypeCheck"><span class="hs-identifier hs-var">TypeCheck</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-660"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Warnings
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583132"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583132"><span class="hs-identifier hs-var">imports</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">VNameSource
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FutharkM (Warnings, Imports, VNameSource)
</span><a href="#local-6989586621684583139"><span class="hs-identifier hs-var">readProgram'</span></a></span><span>
</span><span id="line-661"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; FutharkM ()) -&gt; IO () -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-662"></span><span>            </span><span class="annot"><span class="annottext">[FileModule] -&gt; (FileModule -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((String, FileModule) -&gt; FileModule) -&gt; Imports -&gt; [FileModule]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(String, FileModule) -&gt; FileModule
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583132"><span class="hs-identifier hs-var">imports</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((FileModule -&gt; IO ()) -&gt; IO ()) -&gt; (FileModule -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621684583130"><span class="annot"><span class="annottext">FileModule
</span><a href="#local-6989586621684583130"><span class="hs-identifier hs-var">fm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-663"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><span class="hs-identifier hs-var">putStrLn</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-664"></span><span>                </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Config -&gt; Bool
</span><a href="Futhark.CLI.Dev.html#futharkPrintAST"><span class="hs-identifier hs-var hs-var">futharkPrintAST</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-665"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Prog -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(Prog -&gt; String) -&gt; Prog -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileModule -&gt; Prog
</span><a href="Language.Futhark.Semantic.html#fileProg"><span class="hs-identifier hs-var hs-var">fileProg</span></a></span><span> </span><span class="annot"><span class="annottext">FileModule
</span><a href="#local-6989586621684583130"><span class="hs-identifier hs-var">fm</span></a></span><span>
</span><span id="line-666"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Prog -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog -&gt; String) -&gt; Prog -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FileModule -&gt; Prog
</span><a href="Language.Futhark.Semantic.html#fileProg"><span class="hs-identifier hs-var hs-var">fileProg</span></a></span><span> </span><span class="annot"><span class="annottext">FileModule
</span><a href="#local-6989586621684583130"><span class="hs-identifier hs-var">fm</span></a></span><span>
</span><span id="line-667"></span><span>        </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Defunctorise"><span class="hs-identifier hs-var">Defunctorise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-668"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Warnings
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583128"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583128"><span class="hs-identifier hs-var">imports</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583127"><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583127"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FutharkM (Warnings, Imports, VNameSource)
</span><a href="#local-6989586621684583139"><span class="hs-identifier hs-var">readProgram'</span></a></span><span>
</span><span id="line-669"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; FutharkM ()) -&gt; IO () -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Dec] -&gt; IO ()
forall a. (Show a, Pretty a) =&gt; [a] -&gt; IO ()
</span><a href="#local-6989586621684583151"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">([Dec] -&gt; IO ()) -&gt; [Dec] -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">State VNameSource [Dec] -&gt; VNameSource -&gt; [Dec]
forall s a. State s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">evalState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imports -&gt; State VNameSource [Dec]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; Imports -&gt; m [Dec]
</span><a href="Futhark.Internalise.Defunctorise.html#transformProg"><span class="hs-identifier hs-var">Defunctorise.transformProg</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583128"><span class="hs-identifier hs-var">imports</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583127"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-670"></span><span>        </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Monomorphise"><span class="hs-identifier hs-var">Monomorphise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-671"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Warnings
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583124"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583124"><span class="hs-identifier hs-var">imports</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583123"><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583123"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FutharkM (Warnings, Imports, VNameSource)
</span><a href="#local-6989586621684583139"><span class="hs-identifier hs-var">readProgram'</span></a></span><span>
</span><span id="line-672"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; FutharkM ()) -&gt; IO () -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-673"></span><span>            </span><span class="annot"><span class="annottext">[ValBind] -&gt; IO ()
forall a. (Show a, Pretty a) =&gt; [a] -&gt; IO ()
</span><a href="#local-6989586621684583151"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">([ValBind] -&gt; IO ()) -&gt; [ValBind] -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-674"></span><span>              </span><span class="annot"><span class="annottext">(State VNameSource [ValBind] -&gt; VNameSource -&gt; [ValBind])
-&gt; VNameSource -&gt; State VNameSource [ValBind] -&gt; [ValBind]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">State VNameSource [ValBind] -&gt; VNameSource -&gt; [ValBind]
forall s a. State s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">evalState</span></span><span> </span><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583123"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">(State VNameSource [ValBind] -&gt; [ValBind])
-&gt; State VNameSource [ValBind] -&gt; [ValBind]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-675"></span><span>                </span><span class="annot"><span class="annottext">Imports -&gt; State VNameSource [Dec]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; Imports -&gt; m [Dec]
</span><a href="Futhark.Internalise.Defunctorise.html#transformProg"><span class="hs-identifier hs-var">Defunctorise.transformProg</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583124"><span class="hs-identifier hs-var">imports</span></a></span><span>
</span><span id="line-676"></span><span>                  </span><span class="annot"><span class="annottext">State VNameSource [Dec]
-&gt; ([Dec] -&gt; State VNameSource [ValBind])
-&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[Dec] -&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; [Dec] -&gt; m [ValBind]
</span><a href="Futhark.Internalise.Monomorphise.html#transformProg"><span class="hs-identifier hs-var">Monomorphise.transformProg</span></a></span><span>
</span><span id="line-677"></span><span>        </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#LiftLambdas"><span class="hs-identifier hs-var">LiftLambdas</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-678"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Warnings
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583120"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583120"><span class="hs-identifier hs-var">imports</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583119"><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583119"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FutharkM (Warnings, Imports, VNameSource)
</span><a href="#local-6989586621684583139"><span class="hs-identifier hs-var">readProgram'</span></a></span><span>
</span><span id="line-679"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; FutharkM ()) -&gt; IO () -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-680"></span><span>            </span><span class="annot"><span class="annottext">[ValBind] -&gt; IO ()
forall a. (Show a, Pretty a) =&gt; [a] -&gt; IO ()
</span><a href="#local-6989586621684583151"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">([ValBind] -&gt; IO ()) -&gt; [ValBind] -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-681"></span><span>              </span><span class="annot"><span class="annottext">(State VNameSource [ValBind] -&gt; VNameSource -&gt; [ValBind])
-&gt; VNameSource -&gt; State VNameSource [ValBind] -&gt; [ValBind]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">State VNameSource [ValBind] -&gt; VNameSource -&gt; [ValBind]
forall s a. State s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">evalState</span></span><span> </span><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583119"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">(State VNameSource [ValBind] -&gt; [ValBind])
-&gt; State VNameSource [ValBind] -&gt; [ValBind]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-682"></span><span>                </span><span class="annot"><span class="annottext">Imports -&gt; State VNameSource [Dec]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; Imports -&gt; m [Dec]
</span><a href="Futhark.Internalise.Defunctorise.html#transformProg"><span class="hs-identifier hs-var">Defunctorise.transformProg</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583120"><span class="hs-identifier hs-var">imports</span></a></span><span>
</span><span id="line-683"></span><span>                  </span><span class="annot"><span class="annottext">State VNameSource [Dec]
-&gt; ([Dec] -&gt; State VNameSource [ValBind])
-&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[Dec] -&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; [Dec] -&gt; m [ValBind]
</span><a href="Futhark.Internalise.Monomorphise.html#transformProg"><span class="hs-identifier hs-var">Monomorphise.transformProg</span></a></span><span>
</span><span id="line-684"></span><span>                  </span><span class="annot"><span class="annottext">State VNameSource [ValBind]
-&gt; ([ValBind] -&gt; State VNameSource [ValBind])
-&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[ValBind] -&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; [ValBind] -&gt; m [ValBind]
</span><a href="Futhark.Internalise.LiftLambdas.html#transformProg"><span class="hs-identifier hs-var">LiftLambdas.transformProg</span></a></span><span>
</span><span id="line-685"></span><span>        </span><span class="annot"><span class="annottext">FutharkPipeline
</span><a href="Futhark.CLI.Dev.html#Defunctionalise"><span class="hs-identifier hs-var">Defunctionalise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-686"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Warnings
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583117"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583117"><span class="hs-identifier hs-var">imports</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583116"><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583116"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FutharkM (Warnings, Imports, VNameSource)
</span><a href="#local-6989586621684583139"><span class="hs-identifier hs-var">readProgram'</span></a></span><span>
</span><span id="line-687"></span><span>          </span><span class="annot"><span class="annottext">IO () -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; FutharkM ()) -&gt; IO () -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-688"></span><span>            </span><span class="annot"><span class="annottext">[ValBind] -&gt; IO ()
forall a. (Show a, Pretty a) =&gt; [a] -&gt; IO ()
</span><a href="#local-6989586621684583151"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">([ValBind] -&gt; IO ()) -&gt; [ValBind] -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-689"></span><span>              </span><span class="annot"><span class="annottext">(State VNameSource [ValBind] -&gt; VNameSource -&gt; [ValBind])
-&gt; VNameSource -&gt; State VNameSource [ValBind] -&gt; [ValBind]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">State VNameSource [ValBind] -&gt; VNameSource -&gt; [ValBind]
forall s a. State s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">evalState</span></span><span> </span><span class="annot"><span class="annottext">VNameSource
</span><a href="#local-6989586621684583116"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">(State VNameSource [ValBind] -&gt; [ValBind])
-&gt; State VNameSource [ValBind] -&gt; [ValBind]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-690"></span><span>                </span><span class="annot"><span class="annottext">Imports -&gt; State VNameSource [Dec]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; Imports -&gt; m [Dec]
</span><a href="Futhark.Internalise.Defunctorise.html#transformProg"><span class="hs-identifier hs-var">Defunctorise.transformProg</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621684583117"><span class="hs-identifier hs-var">imports</span></a></span><span>
</span><span id="line-691"></span><span>                  </span><span class="annot"><span class="annottext">State VNameSource [Dec]
-&gt; ([Dec] -&gt; State VNameSource [ValBind])
-&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[Dec] -&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; [Dec] -&gt; m [ValBind]
</span><a href="Futhark.Internalise.Monomorphise.html#transformProg"><span class="hs-identifier hs-var">Monomorphise.transformProg</span></a></span><span>
</span><span id="line-692"></span><span>                  </span><span class="annot"><span class="annottext">State VNameSource [ValBind]
-&gt; ([ValBind] -&gt; State VNameSource [ValBind])
-&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[ValBind] -&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; [ValBind] -&gt; m [ValBind]
</span><a href="Futhark.Internalise.LiftLambdas.html#transformProg"><span class="hs-identifier hs-var">LiftLambdas.transformProg</span></a></span><span>
</span><span id="line-693"></span><span>                  </span><span class="annot"><span class="annottext">State VNameSource [ValBind]
-&gt; ([ValBind] -&gt; State VNameSource [ValBind])
-&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[ValBind] -&gt; State VNameSource [ValBind]
forall (m :: * -&gt; *). MonadFreshNames m =&gt; [ValBind] -&gt; m [ValBind]
</span><a href="Futhark.Internalise.Defunctionalise.html#transformProg"><span class="hs-identifier hs-var">Defunctionalise.transformProg</span></a></span><span>
</span><span id="line-694"></span><span>        </span><span class="annot"><a href="Futhark.CLI.Dev.html#Pipeline"><span class="hs-identifier hs-type">Pipeline</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-695"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684583114"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583114"><span class="hs-identifier hs-var">base</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583113"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583113"><span class="hs-identifier hs-var">ext</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (String, String)
</span><span class="hs-identifier hs-var">splitExtension</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span>              </span><span id="local-6989586621684583092"><span class="annot"><span class="annottext">readCore :: (String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var hs-var">readCore</span></a></span></span><span> </span><span id="local-6989586621684583091"><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog rep)
</span><a href="#local-6989586621684583091"><span class="hs-identifier hs-var">parse</span></a></span></span><span> </span><span id="local-6989586621684583090"><span class="annot"><span class="annottext">Prog rep -&gt; UntypedPassState
</span><a href="#local-6989586621684583090"><span class="hs-identifier hs-var">construct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-698"></span><span>                </span><span id="local-6989586621684583089"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621684583089"><span class="hs-identifier hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Text -&gt; FutharkM Text
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Text -&gt; FutharkM Text) -&gt; IO Text -&gt; FutharkM Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Text
</span><span class="hs-identifier hs-var">T.readFile</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-699"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog rep)
</span><a href="#local-6989586621684583091"><span class="hs-identifier hs-var">parse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621684583089"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-700"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621684583088"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621684583088"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM ()) -&gt; String -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621684583088"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-701"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621684583086"><span class="annot"><span class="annottext">Prog rep
</span><a href="#local-6989586621684583086"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-702"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Prog (Aliases rep) -&gt; Either (TypeError rep) ()
forall rep.
Checkable rep =&gt;
Prog (Aliases rep) -&gt; Either (TypeError rep) ()
</span><a href="Futhark.IR.TypeCheck.html#checkProg"><span class="hs-identifier hs-var">checkProg</span></a></span><span> </span><span class="annot"><span class="annottext">(Prog (Aliases rep) -&gt; Either (TypeError rep) ())
-&gt; Prog (Aliases rep) -&gt; Either (TypeError rep) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Prog rep -&gt; Prog (Aliases rep)
forall rep.
(ASTRep rep, CanBeAliased (Op rep)) =&gt;
Prog rep -&gt; Prog (Aliases rep)
</span><a href="Futhark.Analysis.Alias.html#aliasAnalysis"><span class="hs-identifier hs-var">Alias.aliasAnalysis</span></a></span><span> </span><span class="annot"><span class="annottext">Prog rep
</span><a href="#local-6989586621684583086"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-703"></span><span>                      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621684583084"><span class="annot"><span class="annottext">TypeError rep
</span><a href="#local-6989586621684583084"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM ()) -&gt; String -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TypeError rep -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">TypeError rep
</span><a href="#local-6989586621684583084"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-704"></span><span>                      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Config -&gt; String -&gt; UntypedPassState -&gt; FutharkM ()
</span><a href="Futhark.CLI.Dev.html#runPolyPasses"><span class="hs-identifier hs-var">runPolyPasses</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583114"><span class="hs-identifier hs-var">base</span></a></span><span> </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; FutharkM ())
-&gt; UntypedPassState -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Prog rep -&gt; UntypedPassState
</span><a href="#local-6989586621684583090"><span class="hs-identifier hs-var">construct</span></a></span><span> </span><span class="annot"><span class="annottext">Prog rep
</span><a href="#local-6989586621684583086"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span>              </span><span id="local-6989586621684583072"><span class="annot"><span class="annottext">handlers :: [(String, FutharkM ())]
</span><a href="#local-6989586621684583072"><span class="hs-identifier hs-var hs-var">handlers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-707"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-708"></span><span>                    </span><span class="hs-keyword">do</span><span>
</span><span id="line-709"></span><span>                      </span><span id="local-6989586621684583071"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583071"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FutharkConfig
-&gt; Pipeline SOACS SOACS -&gt; String -&gt; FutharkM (Prog SOACS)
forall torep.
FutharkConfig
-&gt; Pipeline SOACS torep -&gt; String -&gt; FutharkM (Prog torep)
</span><a href="Futhark.Compiler.html#runPipelineOnProgram"><span class="hs-identifier hs-var">runPipelineOnProgram</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pipeline SOACS SOACS
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k). Category cat =&gt; cat a a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583153"><span class="hs-identifier hs-var">file</span></a></span><span>
</span><span id="line-710"></span><span>                      </span><span class="annot"><span class="annottext">Config -&gt; String -&gt; UntypedPassState -&gt; FutharkM ()
</span><a href="Futhark.CLI.Dev.html#runPolyPasses"><span class="hs-identifier hs-var">runPolyPasses</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583152"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583114"><span class="hs-identifier hs-var">base</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prog SOACS -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-var">SOACS</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583071"><span class="hs-identifier hs-var">prog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-711"></span><span>                  </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-712"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut_soacs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text -&gt; Either Text (Prog SOACS))
-&gt; (Prog SOACS -&gt; UntypedPassState) -&gt; FutharkM ()
forall {rep}.
Checkable rep =&gt;
(String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var">readCore</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog SOACS)
</span><a href="Futhark.IR.Parse.html#parseSOACS"><span class="hs-identifier hs-var">parseSOACS</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-var">SOACS</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-713"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut_seq&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text -&gt; Either Text (Prog Seq))
-&gt; (Prog Seq -&gt; UntypedPassState) -&gt; FutharkM ()
forall {rep}.
Checkable rep =&gt;
(String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var">readCore</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog Seq)
</span><a href="Futhark.IR.Parse.html#parseSeq"><span class="hs-identifier hs-var">parseSeq</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-var">Seq</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-714"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut_seq_mem&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text -&gt; Either Text (Prog SeqMem))
-&gt; (Prog SeqMem -&gt; UntypedPassState) -&gt; FutharkM ()
forall {rep}.
Checkable rep =&gt;
(String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var">readCore</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog SeqMem)
</span><a href="Futhark.IR.Parse.html#parseSeqMem"><span class="hs-identifier hs-var">parseSeqMem</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SeqMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-var">SeqMem</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-715"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut_gpu&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text -&gt; Either Text (Prog GPU))
-&gt; (Prog GPU -&gt; UntypedPassState) -&gt; FutharkM ()
forall {rep}.
Checkable rep =&gt;
(String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var">readCore</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog GPU)
</span><a href="Futhark.IR.Parse.html#parseGPU"><span class="hs-identifier hs-var">parseGPU</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-var">GPU</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-716"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut_gpu_mem&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text -&gt; Either Text (Prog GPUMem))
-&gt; (Prog GPUMem -&gt; UntypedPassState) -&gt; FutharkM ()
forall {rep}.
Checkable rep =&gt;
(String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var">readCore</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog GPUMem)
</span><a href="Futhark.IR.Parse.html#parseGPUMem"><span class="hs-identifier hs-var">parseGPUMem</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-var">GPUMem</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-717"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut_mc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text -&gt; Either Text (Prog MC))
-&gt; (Prog MC -&gt; UntypedPassState) -&gt; FutharkM ()
forall {rep}.
Checkable rep =&gt;
(String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var">readCore</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog MC)
</span><a href="Futhark.IR.Parse.html#parseMC"><span class="hs-identifier hs-var">parseMC</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MC -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-var">MC</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-718"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.fut_mc_mem&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text -&gt; Either Text (Prog MCMem))
-&gt; (Prog MCMem -&gt; UntypedPassState) -&gt; FutharkM ()
forall {rep}.
Checkable rep =&gt;
(String -&gt; Text -&gt; Either Text (Prog rep))
-&gt; (Prog rep -&gt; UntypedPassState) -&gt; FutharkM ()
</span><a href="#local-6989586621684583092"><span class="hs-identifier hs-var">readCore</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; Either Text (Prog MCMem)
</span><a href="Futhark.IR.Parse.html#parseMCMem"><span class="hs-identifier hs-var">parseMCMem</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MCMem -&gt; UntypedPassState
</span><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-var">MCMem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-719"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-720"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; [(String, FutharkM ())] -&gt; Maybe (FutharkM ())
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583113"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, FutharkM ())]
</span><a href="#local-6989586621684583072"><span class="hs-identifier hs-var">handlers</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-721"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684583061"><span class="annot"><span class="annottext">FutharkM ()
</span><a href="#local-6989586621684583061"><span class="hs-identifier hs-var">handler</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FutharkM ()
</span><a href="#local-6989586621684583061"><span class="hs-identifier hs-var">handler</span></a></span><span>
</span><span id="line-722"></span><span>            </span><span class="annot"><span class="annottext">Maybe (FutharkM ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-723"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM ()) -&gt; String -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-724"></span><span>                </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unwords</span></span><span>
</span><span id="line-725"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unsupported extension&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-726"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583113"><span class="hs-identifier hs-var">ext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-727"></span><span>                    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;. Supported extensions:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-728"></span><span>                    </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unwords</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((String, FutharkM ()) -&gt; String)
-&gt; [(String, FutharkM ())] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(String, FutharkM ()) -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(String, FutharkM ())]
</span><a href="#local-6989586621684583072"><span class="hs-identifier hs-var">handlers</span></a></span><span>
</span><span id="line-729"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-730"></span><span>
</span><span id="line-731"></span><span class="annot"><a href="Futhark.CLI.Dev.html#runPolyPasses"><span class="hs-identifier hs-type">runPolyPasses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Futhark.Pipeline.html#FutharkM"><span class="hs-identifier hs-type">FutharkM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span id="runPolyPasses"><span class="annot"><span class="annottext">runPolyPasses :: Config -&gt; String -&gt; UntypedPassState -&gt; FutharkM ()
</span><a href="Futhark.CLI.Dev.html#runPolyPasses"><span class="hs-identifier hs-var hs-var">runPolyPasses</span></a></span></span><span> </span><span id="local-6989586621684583059"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583059"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span id="local-6989586621684583058"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583058"><span class="hs-identifier hs-var">base</span></a></span></span><span> </span><span id="local-6989586621684583057"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583057"><span class="hs-identifier hs-var">initial_prog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-733"></span><span>  </span><span id="local-6989586621684583056"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583056"><span class="hs-identifier hs-var">end_prog</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-734"></span><span>    </span><span class="annot"><span class="annottext">(UntypedPassState -&gt; UntypedPass -&gt; FutharkM UntypedPassState)
-&gt; UntypedPassState -&gt; [UntypedPass] -&gt; FutharkM UntypedPassState
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span>
</span><span id="line-735"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PipelineConfig
-&gt; UntypedPassState -&gt; UntypedPass -&gt; FutharkM UntypedPassState
</span><a href="Futhark.CLI.Dev.html#runPolyPass"><span class="hs-identifier hs-var">runPolyPass</span></a></span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583053"><span class="hs-identifier hs-var">pipeline_config</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-736"></span><span>      </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583057"><span class="hs-identifier hs-var">initial_prog</span></a></span><span>
</span><span id="line-737"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; [UntypedPass]
</span><a href="Futhark.CLI.Dev.html#getFutharkPipeline"><span class="hs-identifier hs-var">getFutharkPipeline</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583059"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583056"><span class="hs-identifier hs-var">end_prog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Config -&gt; UntypedAction
</span><a href="Futhark.CLI.Dev.html#futharkAction"><span class="hs-identifier hs-var hs-var">futharkAction</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583059"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-739"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span id="local-6989586621684583052"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583052"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACSAction"><span class="hs-identifier hs-type">SOACSAction</span></a></span><span> </span><span id="local-6989586621684583051"><span class="annot"><span class="annottext">Action SOACS
</span><a href="#local-6989586621684583051"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-740"></span><span>      </span><span class="annot"><span class="annottext">Action SOACS -&gt; Prog SOACS -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action SOACS
</span><a href="#local-6989586621684583051"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583052"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-741"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583049"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583049"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUAction"><span class="hs-identifier hs-type">GPUAction</span></a></span><span> </span><span id="local-6989586621684583048"><span class="annot"><span class="annottext">Action GPU
</span><a href="#local-6989586621684583048"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-742"></span><span>      </span><span class="annot"><span class="annottext">Action GPU -&gt; Prog GPU -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action GPU
</span><a href="#local-6989586621684583048"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583049"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-743"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-type">SeqMem</span></a></span><span> </span><span id="local-6989586621684583047"><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583047"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMemAction"><span class="hs-identifier hs-type">SeqMemAction</span></a></span><span> </span><span id="local-6989586621684583046"><span class="annot"><span class="annottext">BackendAction SeqMem
</span><a href="#local-6989586621684583046"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-744"></span><span>      </span><span class="annot"><span class="annottext">Prog SeqMem -&gt; BackendAction SeqMem -&gt; FutharkM ()
forall {rep}.
Prog rep
-&gt; (FutharkConfig -&gt; CompilerMode -&gt; String -&gt; Action rep)
-&gt; FutharkM ()
</span><a href="#local-6989586621684583045"><span class="hs-identifier hs-var">backendAction</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583047"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction SeqMem
</span><a href="#local-6989586621684583046"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-745"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-type">GPUMem</span></a></span><span> </span><span id="local-6989586621684583044"><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583044"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMemAction"><span class="hs-identifier hs-type">GPUMemAction</span></a></span><span> </span><span id="local-6989586621684583043"><span class="annot"><span class="annottext">BackendAction GPUMem
</span><a href="#local-6989586621684583043"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-746"></span><span>      </span><span class="annot"><span class="annottext">Prog GPUMem -&gt; BackendAction GPUMem -&gt; FutharkM ()
forall {rep}.
Prog rep
-&gt; (FutharkConfig -&gt; CompilerMode -&gt; String -&gt; Action rep)
-&gt; FutharkM ()
</span><a href="#local-6989586621684583045"><span class="hs-identifier hs-var">backendAction</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583044"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction GPUMem
</span><a href="#local-6989586621684583043"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-747"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span id="local-6989586621684583042"><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583042"><span class="hs-identifier hs-var">prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMemAction"><span class="hs-identifier hs-type">MCMemAction</span></a></span><span> </span><span id="local-6989586621684583041"><span class="annot"><span class="annottext">BackendAction MCMem
</span><a href="#local-6989586621684583041"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-748"></span><span>      </span><span class="annot"><span class="annottext">Prog MCMem -&gt; BackendAction MCMem -&gt; FutharkM ()
forall {rep}.
Prog rep
-&gt; (FutharkConfig -&gt; CompilerMode -&gt; String -&gt; Action rep)
-&gt; FutharkM ()
</span><a href="#local-6989586621684583045"><span class="hs-identifier hs-var">backendAction</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583042"><span class="hs-identifier hs-var">prog</span></a></span><span> </span><span class="annot"><span class="annottext">BackendAction MCMem
</span><a href="#local-6989586621684583041"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-749"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SOACS"><span class="hs-identifier hs-type">SOACS</span></a></span><span> </span><span id="local-6989586621684583040"><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583040"><span class="hs-identifier hs-var">soacs_prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span id="local-6989586621684583039"><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583039"><span class="hs-identifier hs-var">acs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-750"></span><span>      </span><span class="annot"><span class="annottext">Action SOACS -&gt; Prog SOACS -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action SOACS
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583039"><span class="hs-identifier hs-var">acs</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SOACS
</span><a href="#local-6989586621684583040"><span class="hs-identifier hs-var">soacs_prog</span></a></span><span>
</span><span id="line-751"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPU"><span class="hs-identifier hs-type">GPU</span></a></span><span> </span><span id="local-6989586621684583038"><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583038"><span class="hs-identifier hs-var">kernels_prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span id="local-6989586621684583037"><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583037"><span class="hs-identifier hs-var">acs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-752"></span><span>      </span><span class="annot"><span class="annottext">Action GPU -&gt; Prog GPU -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action GPU
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583037"><span class="hs-identifier hs-var">acs</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPU
</span><a href="#local-6989586621684583038"><span class="hs-identifier hs-var">kernels_prog</span></a></span><span>
</span><span id="line-753"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MC"><span class="hs-identifier hs-type">MC</span></a></span><span> </span><span id="local-6989586621684583036"><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583036"><span class="hs-identifier hs-var">mc_prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span id="local-6989586621684583035"><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583035"><span class="hs-identifier hs-var">acs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-754"></span><span>      </span><span class="annot"><span class="annottext">Action MC -&gt; Prog MC -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action MC
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583035"><span class="hs-identifier hs-var">acs</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MC
</span><a href="#local-6989586621684583036"><span class="hs-identifier hs-var">mc_prog</span></a></span><span>
</span><span id="line-755"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#Seq"><span class="hs-identifier hs-type">Seq</span></a></span><span> </span><span id="local-6989586621684583034"><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583034"><span class="hs-identifier hs-var">seq_prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span id="local-6989586621684583033"><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583033"><span class="hs-identifier hs-var">acs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-756"></span><span>      </span><span class="annot"><span class="annottext">Action Seq -&gt; Prog Seq -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action Seq
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583033"><span class="hs-identifier hs-var">acs</span></a></span><span> </span><span class="annot"><span class="annottext">Prog Seq
</span><a href="#local-6989586621684583034"><span class="hs-identifier hs-var">seq_prog</span></a></span><span>
</span><span id="line-757"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#GPUMem"><span class="hs-identifier hs-type">GPUMem</span></a></span><span> </span><span id="local-6989586621684583032"><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583032"><span class="hs-identifier hs-var">mem_prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span id="local-6989586621684583031"><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583031"><span class="hs-identifier hs-var">acs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-758"></span><span>      </span><span class="annot"><span class="annottext">Action GPUMem -&gt; Prog GPUMem -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action GPUMem
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583031"><span class="hs-identifier hs-var">acs</span></a></span><span> </span><span class="annot"><span class="annottext">Prog GPUMem
</span><a href="#local-6989586621684583032"><span class="hs-identifier hs-var">mem_prog</span></a></span><span>
</span><span id="line-759"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#SeqMem"><span class="hs-identifier hs-type">SeqMem</span></a></span><span> </span><span id="local-6989586621684583030"><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583030"><span class="hs-identifier hs-var">mem_prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span id="local-6989586621684583029"><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583029"><span class="hs-identifier hs-var">acs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-760"></span><span>      </span><span class="annot"><span class="annottext">Action SeqMem -&gt; Prog SeqMem -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action SeqMem
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583029"><span class="hs-identifier hs-var">acs</span></a></span><span> </span><span class="annot"><span class="annottext">Prog SeqMem
</span><a href="#local-6989586621684583030"><span class="hs-identifier hs-var">mem_prog</span></a></span><span>
</span><span id="line-761"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#MCMem"><span class="hs-identifier hs-type">MCMem</span></a></span><span> </span><span id="local-6989586621684583028"><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583028"><span class="hs-identifier hs-var">mem_prog</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#PolyAction"><span class="hs-identifier hs-type">PolyAction</span></a></span><span> </span><span id="local-6989586621684583027"><span class="annot"><span class="annottext">forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583027"><span class="hs-identifier hs-var">acs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-762"></span><span>      </span><span class="annot"><span class="annottext">Action MCMem -&gt; Prog MCMem -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action MCMem
forall rep.
(ASTRep rep, CanBeAliased (Op rep), OpMetrics (Op rep)) =&gt;
Action rep
</span><a href="#local-6989586621684583027"><span class="hs-identifier hs-var">acs</span></a></span><span> </span><span class="annot"><span class="annottext">Prog MCMem
</span><a href="#local-6989586621684583028"><span class="hs-identifier hs-var">mem_prog</span></a></span><span>
</span><span id="line-763"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UntypedPassState
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684583026"><span class="annot"><span class="annottext">UntypedAction
</span><a href="#local-6989586621684583026"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-764"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; FutharkM ()
forall (m :: * -&gt; *) a. MonadError CompilerError m =&gt; String -&gt; m a
</span><a href="Futhark.Error.html#externalErrorS"><span class="hs-identifier hs-var">externalErrorS</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM ()) -&gt; String -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-765"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Action expects &quot;</span></span><span>
</span><span id="line-766"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedAction -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedAction
</span><a href="#local-6989586621684583026"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-767"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; representation, but got &quot;</span></span><span>
</span><span id="line-768"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">UntypedPassState -&gt; String
forall s. Representation s =&gt; s -&gt; String
</span><a href="Futhark.CLI.Dev.html#representation"><span class="hs-identifier hs-var">representation</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583056"><span class="hs-identifier hs-var">end_prog</span></a></span><span>
</span><span id="line-769"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-770"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; FutharkM ()
forall (m :: * -&gt; *) a. (MonadLogger m, ToLog a) =&gt; a -&gt; m ()
</span><a href="Futhark.Util.Log.html#logMsg"><span class="hs-identifier hs-var">logMsg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Done.&quot;</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-772"></span><span>    </span><span id="local-6989586621684583045"><span class="annot"><span class="annottext">backendAction :: Prog rep
-&gt; (FutharkConfig -&gt; CompilerMode -&gt; String -&gt; Action rep)
-&gt; FutharkM ()
</span><a href="#local-6989586621684583045"><span class="hs-identifier hs-var hs-var">backendAction</span></a></span></span><span> </span><span id="local-6989586621684583024"><span class="annot"><span class="annottext">Prog rep
</span><a href="#local-6989586621684583024"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span id="local-6989586621684583023"><span class="annot"><span class="annottext">FutharkConfig -&gt; CompilerMode -&gt; String -&gt; Action rep
</span><a href="#local-6989586621684583023"><span class="hs-identifier hs-var">actionf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-773"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621684583022"><span class="annot"><span class="annottext">action :: Action rep
</span><a href="#local-6989586621684583022"><span class="hs-identifier hs-var hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkConfig -&gt; CompilerMode -&gt; String -&gt; Action rep
</span><a href="#local-6989586621684583023"><span class="hs-identifier hs-var">actionf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583059"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Config -&gt; CompilerMode
</span><a href="Futhark.CLI.Dev.html#futharkCompilerMode"><span class="hs-identifier hs-var hs-var">futharkCompilerMode</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583059"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684583058"><span class="hs-identifier hs-var">base</span></a></span><span>
</span><span id="line-774"></span><span>      </span><span class="annot"><span class="annottext">Action rep -&gt; Prog rep -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var">otherAction</span></a></span><span> </span><span class="annot"><span class="annottext">Action rep
</span><a href="#local-6989586621684583022"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">Prog rep
</span><a href="#local-6989586621684583024"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span>    </span><span id="local-6989586621684583050"><span class="annot"><span class="annottext">otherAction :: Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="#local-6989586621684583050"><span class="hs-identifier hs-var hs-var">otherAction</span></a></span></span><span> </span><span id="local-6989586621684583018"><span class="annot"><span class="annottext">Action rep
</span><a href="#local-6989586621684583018"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span id="local-6989586621684583017"><span class="annot"><span class="annottext">Prog rep
</span><a href="#local-6989586621684583017"><span class="hs-identifier hs-var">prog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-777"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; FutharkM ()
forall (m :: * -&gt; *) a. (MonadLogger m, ToLog a) =&gt; a -&gt; m ()
</span><a href="Futhark.Util.Log.html#logMsg"><span class="hs-identifier hs-var">logMsg</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; FutharkM ()) -&gt; String -&gt; FutharkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Running action &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Action rep -&gt; String
forall rep. Action rep -&gt; String
</span><a href="Futhark.Pipeline.html#actionName"><span class="hs-identifier hs-var hs-var">actionName</span></a></span><span> </span><span class="annot"><span class="annottext">Action rep
</span><a href="#local-6989586621684583018"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-778"></span><span>      </span><span class="annot"><span class="annottext">Action rep -&gt; Prog rep -&gt; FutharkM ()
forall {rep}. Action rep -&gt; Prog rep -&gt; FutharkM ()
</span><a href="Futhark.Pipeline.html#actionProcedure"><span class="hs-identifier hs-var hs-var">actionProcedure</span></a></span><span> </span><span class="annot"><span class="annottext">Action rep
</span><a href="#local-6989586621684583018"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">Prog rep
</span><a href="#local-6989586621684583017"><span class="hs-identifier hs-var">prog</span></a></span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span>    </span><span id="local-6989586621684583053"><span class="annot"><span class="annottext">pipeline_config :: PipelineConfig
</span><a href="#local-6989586621684583053"><span class="hs-identifier hs-var hs-var">pipeline_config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-781"></span><span>      </span><span class="annot"><span class="annottext">PipelineConfig :: Bool -&gt; Bool -&gt; PipelineConfig
</span><a href="Futhark.Pipeline.html#PipelineConfig"><span class="hs-identifier hs-type">PipelineConfig</span></a></span><span>
</span><span id="line-782"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pipelineVerbose :: Bool
</span><a href="Futhark.Pipeline.html#pipelineVerbose"><span class="hs-identifier hs-var">pipelineVerbose</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Verbosity, Maybe String) -&gt; Verbosity
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FutharkConfig -&gt; (Verbosity, Maybe String)
</span><a href="Futhark.Compiler.Config.html#futharkVerbose"><span class="hs-identifier hs-var hs-var">futharkVerbose</span></a></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; (Verbosity, Maybe String))
-&gt; FutharkConfig -&gt; (Verbosity, Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583059"><span class="hs-identifier hs-var">config</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Verbosity -&gt; Verbosity -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Verbosity
</span><a href="Futhark.Pipeline.html#NotVerbose"><span class="hs-identifier hs-var">NotVerbose</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-783"></span><span>          </span><span class="annot"><span class="annottext">pipelineValidate :: Bool
</span><a href="Futhark.Pipeline.html#pipelineValidate"><span class="hs-identifier hs-var">pipelineValidate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FutharkConfig -&gt; Bool
</span><a href="Futhark.Compiler.Config.html#futharkTypeCheck"><span class="hs-identifier hs-var hs-var">futharkTypeCheck</span></a></span><span> </span><span class="annot"><span class="annottext">(FutharkConfig -&gt; Bool) -&gt; FutharkConfig -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; FutharkConfig
</span><a href="Futhark.CLI.Dev.html#futharkConfig"><span class="hs-identifier hs-var hs-var">futharkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621684583059"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-784"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-785"></span><span>
</span><span id="line-786"></span><span class="annot"><a href="Futhark.CLI.Dev.html#runPolyPass"><span class="hs-identifier hs-type">runPolyPass</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-787"></span><span>  </span><span class="annot"><a href="Futhark.Pipeline.html#PipelineConfig"><span class="hs-identifier hs-type">PipelineConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-788"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-789"></span><span>  </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-type">UntypedPass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-790"></span><span>  </span><span class="annot"><a href="Futhark.Pipeline.html#FutharkM"><span class="hs-identifier hs-type">FutharkM</span></a></span><span> </span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPassState"><span class="hs-identifier hs-type">UntypedPassState</span></a></span><span>
</span><span id="line-791"></span><span id="runPolyPass"><span class="annot"><span class="annottext">runPolyPass :: PipelineConfig
-&gt; UntypedPassState -&gt; UntypedPass -&gt; FutharkM UntypedPassState
</span><a href="Futhark.CLI.Dev.html#runPolyPass"><span class="hs-identifier hs-var hs-var">runPolyPass</span></a></span></span><span> </span><span id="local-6989586621684583008"><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583008"><span class="hs-identifier hs-var">pipeline_config</span></a></span></span><span> </span><span id="local-6989586621684583007"><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583007"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.CLI.Dev.html#UntypedPass"><span class="hs-identifier hs-type">UntypedPass</span></a></span><span> </span><span id="local-6989586621684583006"><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583006"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-792"></span><span>  </span><span class="annot"><span class="annottext">UntypedPassState -&gt; PipelineConfig -&gt; FutharkM UntypedPassState
</span><a href="#local-6989586621684583006"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">UntypedPassState
</span><a href="#local-6989586621684583007"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">PipelineConfig
</span><a href="#local-6989586621684583008"><span class="hs-identifier hs-var">pipeline_config</span></a></span><span>
</span><span id="line-793"></span></pre></body></html>