<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-orphans #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">-- | Futhark prettyprinter.  This module defines 'Pretty' instances</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- for the AST defined in &quot;Language.Futhark.Syntax&quot;.</span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language.Futhark.Pretty</span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier">pretty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Futhark.Util.Pretty.html#prettyTuple"><span class="hs-identifier">prettyTuple</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Language.Futhark.Prop.html#leadingOperator"><span class="hs-identifier">leadingOperator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier">IsName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Language.Futhark.Pretty.html#prettyName"><span class="hs-identifier">prettyName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier">Annot</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">where</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Array</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">chr</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">intersperse</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Sum</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Ord</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Util.html"><span class="hs-identifier">Futhark.Util</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Futhark.Util.Pretty.html"><span class="hs-identifier">Futhark.Util.Pretty</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Futhark.Prop.html"><span class="hs-identifier">Language.Futhark.Prop</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html"><span class="hs-identifier">Language.Futhark.Syntax</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-comment">-- | A class for types that are variable names in the Futhark source</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- language.  This is used instead of a mere 'Pretty' instance because</span><span>
</span><span id="line-37"></span><span class="hs-comment">-- in the compiler frontend we want to print VNames differently</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- depending on whether the FUTHARK_COMPILER_DEBUGGING environment</span><span>
</span><span id="line-39"></span><span class="hs-comment">-- variable is set, yet in the backend we want to always print VNames</span><span>
</span><span id="line-40"></span><span class="hs-comment">-- with the tag.  To avoid erroneously using the 'Pretty' instance for</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- VNames, we in fact only define it inside the modules for the core</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- language (as an orphan instance).</span><span>
</span><span id="line-43"></span><span class="hs-keyword">class</span><span> </span><span id="IsName"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-var">IsName</span></a></span></span><span> </span><span id="local-6989586621684494514"><span class="annot"><a href="#local-6989586621684494514"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>  </span><span id="pprName"><span class="annot"><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-type">pprName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621684494514"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">-- | Depending on the environment variable FUTHARK_COMPILER_DEBUGGING,</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- VNames are printed as either the name with an internal tag, or just</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- the base name.</span><span>
</span><span id="line-49"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-50"></span><span>  </span><span id="local-6989586621684494131"><span class="annot"><span class="annottext">pprName :: VName -&gt; Doc
</span><a href="#local-6989586621684494131"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprName</span></a></span></span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Bool
</span><a href="Futhark.Util.html#isEnvVarAtLeast"><span class="hs-identifier hs-var">isEnvVarAtLeast</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FUTHARK_COMPILER_DEBUGGING&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-52"></span><span>      </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Core.html#VName"><span class="hs-identifier hs-type">VName</span></a></span><span> </span><span id="local-6989586621684494128"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684494128"><span class="hs-identifier hs-var">vn</span></a></span></span><span> </span><span id="local-6989586621684494127"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684494127"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684494128"><span class="hs-identifier hs-var">vn</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684494127"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Doc) -&gt; (VName -&gt; Name) -&gt; VName -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; Name
</span><a href="Language.Futhark.Core.html#baseName"><span class="hs-identifier hs-var">baseName</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Core.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-56"></span><span>  </span><span id="local-6989586621684494118"><span class="annot"><span class="annottext">pprName :: Name -&gt; Doc
</span><a href="#local-6989586621684494118"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-comment">-- | Prettyprint a name to a string.</span><span>
</span><span id="line-59"></span><span id="local-6989586621684494506"><span class="annot"><a href="Language.Futhark.Pretty.html#prettyName"><span class="hs-identifier hs-type">prettyName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494506"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684494506"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-60"></span><span id="prettyName"><span class="annot"><span class="annottext">prettyName :: forall v. IsName v =&gt; v -&gt; String
</span><a href="Language.Futhark.Pretty.html#prettyName"><span class="hs-identifier hs-var hs-var">prettyName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; String
</span><a href="Futhark.Util.Pretty.html#prettyDoc"><span class="hs-identifier hs-var">prettyDoc</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">80</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; String) -&gt; (v -&gt; Doc) -&gt; v -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-comment">-- | Class for type constructors that represent annotations.  Used in</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- the prettyprinter to either print the original AST, or the computed</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- decoration.</span><span>
</span><span id="line-65"></span><span class="hs-keyword">class</span><span> </span><span id="Annot"><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-var">Annot</span></a></span></span><span> </span><span id="local-6989586621684494502"><span class="annot"><a href="#local-6989586621684494502"><span class="hs-identifier hs-type">f</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-comment">-- | Extract value, if any.</span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621684494504"><span id="unAnnot"><span class="annot"><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-type">unAnnot</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621684494502"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494504"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621684494504"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#NoInfo"><span class="hs-identifier hs-type">NoInfo</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>  </span><span id="local-6989586621684494110"><span class="annot"><span class="annottext">unAnnot :: forall a. NoInfo a -&gt; Maybe a
</span><a href="#local-6989586621684494110"><span class="hs-identifier hs-var hs-var hs-var hs-var">unAnnot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; NoInfo a -&gt; Maybe a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Info"><span class="hs-identifier hs-type">Info</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-73"></span><span>  </span><span id="local-6989586621684494106"><span class="annot"><span class="annottext">unAnnot :: forall a. Info a -&gt; Maybe a
</span><a href="#local-6989586621684494106"><span class="hs-identifier hs-var hs-var hs-var hs-var">unAnnot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Maybe a) -&gt; (Info a -&gt; a) -&gt; Info a -&gt; Maybe a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Info a -&gt; a
forall a. Info a -&gt; a
</span><a href="Language.Futhark.Syntax.html#unInfo"><span class="hs-identifier hs-var hs-var">unInfo</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621684494492"><span id="local-6989586621684494493"><span id="local-6989586621684494494"><span class="annot"><a href="Language.Futhark.Pretty.html#pprAnnot"><span class="hs-identifier hs-type">pprAnnot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494494"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621684494493"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621684494492"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684494493"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621684494494"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494492"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span></span></span><span>
</span><span id="line-76"></span><span id="pprAnnot"><span class="annot"><span class="annottext">pprAnnot :: forall (f :: * -&gt; *) a b.
(Annot f, Pretty a, Pretty b) =&gt;
a -&gt; f b -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprAnnot"><span class="hs-identifier hs-var hs-var">pprAnnot</span></a></span></span><span> </span><span id="local-6989586621684494097"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684494097"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621684494096"><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621684494096"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; (b -&gt; Doc) -&gt; Maybe b -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684494097"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">b -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">(Maybe b -&gt; Doc) -&gt; Maybe b -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">f b -&gt; Maybe b
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f b
</span><a href="#local-6989586621684494096"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684494090"><span id="local-6989586621684494092"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Value"><span class="hs-identifier hs-type">Value</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-79"></span><span>  </span><span id="local-6989586621684494082"><span class="annot"><span class="annottext">ppr :: Value -&gt; Doc
</span><a href="#local-6989586621684494082"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimValue"><span class="hs-identifier hs-type">PrimValue</span></a></span><span> </span><span id="local-6989586621684494080"><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684494080"><span class="hs-identifier hs-var">bv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimValue -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684494080"><span class="hs-identifier hs-var">bv</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayValue"><span class="hs-identifier hs-type">ArrayValue</span></a></span><span> </span><span id="local-6989586621684494078"><span class="annot"><span class="annottext">Array Int Value
</span><a href="#local-6989586621684494078"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621684494077"><span class="annot"><span class="annottext">ValueType
</span><a href="#local-6989586621684494077"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Array Int Value -&gt; [Value]
forall i e. Array i e -&gt; [e]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Array Int Value
</span><a href="#local-6989586621684494078"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;empty&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValueType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ValueType
</span><a href="#local-6989586621684494077"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ValueType
</span><a href="#local-6989586621684494077"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#commastack"><span class="hs-identifier hs-var">commastack</span></a></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Doc) -&gt; [Value] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; [Doc]) -&gt; [Value] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Array Int Value -&gt; [Value]
forall i e. Array i e -&gt; [e]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Array Int Value
</span><a href="#local-6989586621684494078"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Doc) -&gt; [Value] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; [Doc]) -&gt; [Value] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Array Int Value -&gt; [Value]
forall i e. Array i e -&gt; [e]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Array Int Value
</span><a href="#local-6989586621684494078"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684494066"><span id="local-6989586621684494068"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PrimValue"><span class="hs-identifier hs-type">PrimValue</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-86"></span><span>  </span><span id="local-6989586621684494033"><span class="annot"><span class="annottext">ppr :: PrimValue -&gt; Doc
</span><a href="#local-6989586621684494033"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#UnsignedValue"><span class="hs-identifier hs-type">UnsignedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Primitive.html#Int8Value"><span class="hs-identifier hs-type">Int8Value</span></a></span><span> </span><span id="local-6989586621684494030"><span class="annot"><span class="annottext">Int8
</span><a href="#local-6989586621684494030"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int8 -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int8
</span><a href="#local-6989586621684494030"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;u8&quot;</span></span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#UnsignedValue"><span class="hs-identifier hs-type">UnsignedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Primitive.html#Int16Value"><span class="hs-identifier hs-type">Int16Value</span></a></span><span> </span><span id="local-6989586621684494028"><span class="annot"><span class="annottext">Int16
</span><a href="#local-6989586621684494028"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word16 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int16 -&gt; Word16
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int16
</span><a href="#local-6989586621684494028"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word16</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;u16&quot;</span></span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#UnsignedValue"><span class="hs-identifier hs-type">UnsignedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Primitive.html#Int32Value"><span class="hs-identifier hs-type">Int32Value</span></a></span><span> </span><span id="local-6989586621684494026"><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621684494026"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int32 -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int32
</span><a href="#local-6989586621684494026"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;u32&quot;</span></span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#UnsignedValue"><span class="hs-identifier hs-type">UnsignedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Futhark.IR.Primitive.html#Int64Value"><span class="hs-identifier hs-type">Int64Value</span></a></span><span> </span><span id="local-6989586621684494024"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621684494024"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621684494024"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;u64&quot;</span></span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SignedValue"><span class="hs-identifier hs-type">SignedValue</span></a></span><span> </span><span id="local-6989586621684494022"><span class="annot"><span class="annottext">IntValue
</span><a href="#local-6989586621684494022"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntValue -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">IntValue
</span><a href="#local-6989586621684494022"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#BoolValue"><span class="hs-identifier hs-type">BoolValue</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;true&quot;</span></span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#BoolValue"><span class="hs-identifier hs-type">BoolValue</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;false&quot;</span></span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FloatValue"><span class="hs-identifier hs-type">FloatValue</span></a></span><span> </span><span id="local-6989586621684494019"><span class="annot"><span class="annottext">FloatValue
</span><a href="#local-6989586621684494019"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FloatValue -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">FloatValue
</span><a href="#local-6989586621684494019"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span id="local-6989586621684494471"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684494014"><span id="local-6989586621684494016"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494471"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494471"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-100"></span><span>  </span><span id="local-6989586621684494006"><span class="annot"><span class="annottext">ppr :: DimDecl vn -&gt; Doc
</span><a href="#local-6989586621684494006"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AnyDim"><span class="hs-identifier hs-type">AnyDim</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe vn
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AnyDim"><span class="hs-identifier hs-type">AnyDim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684494004"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684494004"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684494004"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#NamedDim"><span class="hs-identifier hs-type">NamedDim</span></a></span><span> </span><span id="local-6989586621684494002"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684494002"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684494002"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ConstDim"><span class="hs-identifier hs-type">ConstDim</span></a></span><span> </span><span id="local-6989586621684494000"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684494000"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684494000"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621684494468"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493995"><span id="local-6989586621684493997"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494468"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimExp"><span class="hs-identifier hs-type">DimExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494468"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621684493991"><span class="annot"><span class="annottext">ppr :: DimExp vn -&gt; Doc
</span><a href="#local-6989586621684493991"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">DimExp vn
</span><a href="Language.Futhark.Syntax.html#DimExpAny"><span class="hs-identifier hs-var">DimExpAny</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-107"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimExpNamed"><span class="hs-identifier hs-type">DimExpNamed</span></a></span><span> </span><span id="local-6989586621684493988"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493988"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493988"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimExpConst"><span class="hs-identifier hs-type">DimExpConst</span></a></span><span> </span><span id="local-6989586621684493986"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493986"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493986"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span id="local-6989586621684494466"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493981"><span id="local-6989586621684493983"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494466"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimDecl"><span class="hs-identifier hs-type">DimDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494466"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-111"></span><span>  </span><span id="local-6989586621684493978"><span class="annot"><span class="annottext">ppr :: ShapeDecl (DimDecl vn) -&gt; Doc
</span><a href="#local-6989586621684493978"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span id="local-6989586621684493976"><span class="annot"><span class="annottext">[DimDecl vn]
</span><a href="#local-6989586621684493976"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimDecl vn -&gt; Doc) -&gt; [DimDecl vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (DimDecl vn -&gt; Doc) -&gt; DimDecl vn -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">DimDecl vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[DimDecl vn]
</span><a href="#local-6989586621684493976"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493971"><span id="local-6989586621684493973"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-114"></span><span>  </span><span id="local-6989586621684493967"><span class="annot"><span class="annottext">ppr :: ShapeDecl () -&gt; Doc
</span><a href="#local-6989586621684493967"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span id="local-6989586621684493966"><span class="annot"><span class="annottext">[()]
</span><a href="#local-6989586621684493966"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; [Doc]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[()] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[()]
</span><a href="#local-6989586621684493966"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; [Doc]) -&gt; Doc -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[]&quot;</span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493959"><span id="local-6989586621684493961"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621684493955"><span class="annot"><span class="annottext">ppr :: ShapeDecl Int64 -&gt; Doc
</span><a href="#local-6989586621684493955"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span id="local-6989586621684493954"><span class="annot"><span class="annottext">[Int64]
</span><a href="#local-6989586621684493954"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int64 -&gt; Doc) -&gt; [Int64] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (Int64 -&gt; Doc) -&gt; Int64 -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Int64]
</span><a href="#local-6989586621684493954"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493949"><span id="local-6989586621684493951"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>  </span><span id="local-6989586621684493945"><span class="annot"><span class="annottext">ppr :: ShapeDecl Bool -&gt; Doc
</span><a href="#local-6989586621684493945"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span id="local-6989586621684493944"><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621684493944"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Bool -&gt; Doc) -&gt; [Bool] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (Bool -&gt; Doc) -&gt; Bool -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621684493944"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span id="local-6989586621684494461"><span id="local-6989586621684494462"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493940"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494462"><span class="hs-identifier hs-type">dim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetTypeBase"><span class="hs-identifier hs-type">RetTypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494462"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494461"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621684493938"><span class="annot"><span class="annottext">ppr :: RetTypeBase dim as -&gt; Doc
</span><a href="#local-6989586621684493938"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; RetTypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621684493929"><span class="annot"><span class="annottext">pprPrec :: Int -&gt; RetTypeBase dim as -&gt; Doc
</span><a href="#local-6989586621684493929"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprPrec</span></a></span></span><span> </span><span id="local-6989586621684493928"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493928"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621684493926"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493926"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493928"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493926"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RetType"><span class="hs-identifier hs-type">RetType</span></a></span><span> </span><span id="local-6989586621684493925"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684493925"><span class="hs-identifier hs-var">dims</span></a></span></span><span> </span><span id="local-6989586621684493924"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493924"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VName -&gt; Doc) -&gt; [VName] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (VName -&gt; Doc) -&gt; VName -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684493925"><span class="hs-identifier hs-var">dims</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493924"><span class="hs-identifier hs-var">t</span></a></span></span></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span id="local-6989586621684494459"><span id="local-6989586621684494460"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493920"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494460"><span class="hs-identifier hs-type">dim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ScalarTypeBase"><span class="hs-identifier hs-type">ScalarTypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494460"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494459"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621684493918"><span class="annot"><span class="annottext">ppr :: ScalarTypeBase dim as -&gt; Doc
</span><a href="#local-6989586621684493918"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621684493883"><span class="annot"><span class="annottext">pprPrec :: Int -&gt; ScalarTypeBase dim as -&gt; Doc
</span><a href="#local-6989586621684493883"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprPrec</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Prim"><span class="hs-identifier hs-type">Prim</span></a></span><span> </span><span id="local-6989586621684493881"><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684493881"><span class="hs-identifier hs-var">et</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PrimType
</span><a href="#local-6989586621684493881"><span class="hs-identifier hs-var">et</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493880"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493880"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeVar"><span class="hs-identifier hs-type">TypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684493878"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684493878"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684493877"><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684493877"><span class="hs-identifier hs-var">et</span></a></span></span><span> </span><span id="local-6989586621684493876"><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684493876"><span class="hs-identifier hs-var">targs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TypeArg dim] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684493876"><span class="hs-identifier hs-var">targs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493880"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-133"></span><span>      </span><span class="annot"><span class="annottext">Uniqueness -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684493878"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">QualName VName -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeName -&gt; QualName VName
</span><a href="Language.Futhark.Syntax.html#qualNameFromTypeName"><span class="hs-identifier hs-var">qualNameFromTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">TypeName
</span><a href="#local-6989586621684493877"><span class="hs-identifier hs-var">et</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeArg dim -&gt; Doc) -&gt; [TypeArg dim] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; TypeArg dim -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeArg dim]
</span><a href="#local-6989586621684493876"><span class="hs-identifier hs-var">targs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Record"><span class="hs-identifier hs-type">Record</span></a></span><span> </span><span id="local-6989586621684493866"><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684493866"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493865"><span class="annot"><span class="annottext">[TypeBase dim as]
</span><a href="#local-6989586621684493865"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; Maybe [TypeBase dim as]
forall a. Map Name a -&gt; Maybe [a]
</span><a href="Language.Futhark.Prop.html#areTupleFields"><span class="hs-identifier hs-var">areTupleFields</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684493866"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#oneLine"><span class="hs-identifier hs-var">oneLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; Doc) -&gt; [TypeBase dim as] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeBase dim as]
</span><a href="#local-6989586621684493865"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">line</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; [Doc]) -&gt; [Doc] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeBase dim as -&gt; Doc) -&gt; [TypeBase dim as] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeBase dim as]
</span><a href="#local-6989586621684493865"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-139"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#oneLine"><span class="hs-identifier hs-var">oneLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">braces</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621684493857"><span class="hs-identifier hs-var">fs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">braces</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">line</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621684493857"><span class="hs-identifier hs-var">fs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-142"></span><span>      </span><span id="local-6989586621684493853"><span class="annot"><span class="annottext">ppField :: (Name, a) -&gt; Doc
</span><a href="#local-6989586621684493853"><span class="hs-identifier hs-var hs-var">ppField</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493852"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493852"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493851"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493851"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><a href="Language.Futhark.Core.html#nameToString"><span class="hs-identifier hs-var">nameToString</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493852"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493851"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>      </span><span id="local-6989586621684493857"><span class="annot"><span class="annottext">fs' :: [Doc]
</span><a href="#local-6989586621684493857"><span class="hs-identifier hs-var hs-var">fs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, TypeBase dim as) -&gt; Doc)
-&gt; [(Name, TypeBase dim as)] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, TypeBase dim as) -&gt; Doc
forall {a}. Pretty a =&gt; (Name, a) -&gt; Doc
</span><a href="#local-6989586621684493853"><span class="hs-identifier hs-var">ppField</span></a></span><span> </span><span class="annot"><span class="annottext">([(Name, TypeBase dim as)] -&gt; [Doc])
-&gt; [(Name, TypeBase dim as)] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as) -&gt; [(Name, TypeBase dim as)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map Name (TypeBase dim as)
</span><a href="#local-6989586621684493866"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-144"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493845"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493845"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span id="local-6989586621684493842"><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684493842"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684493841"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493841"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684493840"><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684493840"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493845"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-146"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VName -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">VName
</span><a href="#local-6989586621684493842"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493841"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; RetTypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684493840"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493838"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493838"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Arrow"><span class="hs-identifier hs-type">Arrow</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PName
</span><a href="Language.Futhark.Syntax.html#Unnamed"><span class="hs-identifier hs-var">Unnamed</span></a></span><span> </span><span id="local-6989586621684493836"><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493836"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684493835"><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684493835"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493838"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; TypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">TypeBase dim as
</span><a href="#local-6989586621684493836"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; RetTypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">RetTypeBase dim as
</span><a href="#local-6989586621684493835"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493834"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493834"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621684493832"><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684493832"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493834"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-151"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#oneLine"><span class="hs-identifier hs-var">oneLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; | &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621684493831"><span class="hs-identifier hs-var">cs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; |&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">line</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621684493831"><span class="hs-identifier hs-var">cs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>      </span><span id="local-6989586621684493825"><span class="annot"><span class="annottext">ppConstr :: (a, [a]) -&gt; Doc
</span><a href="#local-6989586621684493825"><span class="hs-identifier hs-var hs-var">ppConstr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493824"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493824"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493823"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621684493823"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493824"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Doc) -&gt; [a] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; a -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621684493823"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-155"></span><span>      </span><span id="local-6989586621684493831"><span class="annot"><span class="annottext">cs' :: [Doc]
</span><a href="#local-6989586621684493831"><span class="hs-identifier hs-var hs-var">cs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, [TypeBase dim as]) -&gt; Doc)
-&gt; [(Name, [TypeBase dim as])] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, [TypeBase dim as]) -&gt; Doc
forall {a} {a}. (Pretty a, Pretty a) =&gt; (a, [a]) -&gt; Doc
</span><a href="#local-6989586621684493825"><span class="hs-identifier hs-var">ppConstr</span></a></span><span> </span><span class="annot"><span class="annottext">([(Name, [TypeBase dim as])] -&gt; [Doc])
-&gt; [(Name, [TypeBase dim as])] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as] -&gt; [(Name, [TypeBase dim as])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toList</span></span><span> </span><span class="annot"><span class="annottext">Map Name [TypeBase dim as]
</span><a href="#local-6989586621684493832"><span class="hs-identifier hs-var">cs</span></a></span></span></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span id="local-6989586621684494481"><span id="local-6989586621684494482"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493815"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494482"><span class="hs-identifier hs-type">dim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBase"><span class="hs-identifier hs-type">TypeBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494482"><span class="hs-identifier hs-type">dim</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494481"><span class="hs-keyword hs-type">as</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>  </span><span id="local-6989586621684493813"><span class="annot"><span class="annottext">ppr :: TypeBase dim as -&gt; Doc
</span><a href="#local-6989586621684493813"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-159"></span><span>  </span><span id="local-6989586621684493806"><span class="annot"><span class="annottext">pprPrec :: Int -&gt; TypeBase dim as -&gt; Doc
</span><a href="#local-6989586621684493806"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprPrec</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><span class="annottext">as
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684493805"><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684493805"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621684493804"><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684493804"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621684493803"><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684493803"><span class="hs-identifier hs-var">shape</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Uniqueness -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Uniqueness
</span><a href="#local-6989586621684493805"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim
</span><a href="#local-6989586621684493803"><span class="hs-identifier hs-var">shape</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase dim () -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim ()
</span><a href="#local-6989586621684493804"><span class="hs-identifier hs-var">at</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493802"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493802"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Scalar"><span class="hs-identifier hs-type">Scalar</span></a></span><span> </span><span id="local-6989586621684493800"><span class="annot"><span class="annottext">ScalarTypeBase dim as
</span><a href="#local-6989586621684493800"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ScalarTypeBase dim as -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493802"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ScalarTypeBase dim as
</span><a href="#local-6989586621684493800"><span class="hs-identifier hs-var">t</span></a></span></span></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span id="local-6989586621684494456"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493796"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-type">ShapeDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494456"><span class="hs-identifier hs-type">dim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArg"><span class="hs-identifier hs-type">TypeArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494456"><span class="hs-identifier hs-type">dim</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621684493794"><span class="annot"><span class="annottext">ppr :: TypeArg dim -&gt; Doc
</span><a href="#local-6989586621684493794"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TypeArg dim -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-164"></span><span>  </span><span id="local-6989586621684493791"><span class="annot"><span class="annottext">pprPrec :: Int -&gt; TypeArg dim -&gt; Doc
</span><a href="#local-6989586621684493791"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprPrec</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgDim"><span class="hs-identifier hs-type">TypeArgDim</span></a></span><span> </span><span id="local-6989586621684493789"><span class="annot"><span class="annottext">dim
</span><a href="#local-6989586621684493789"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShapeDecl dim -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">(ShapeDecl dim -&gt; Doc) -&gt; ShapeDecl dim -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[dim] -&gt; ShapeDecl dim
forall dim. [dim] -&gt; ShapeDecl dim
</span><a href="Language.Futhark.Syntax.html#ShapeDecl"><span class="hs-identifier hs-var">ShapeDecl</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">dim
</span><a href="#local-6989586621684493789"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493788"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493788"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgType"><span class="hs-identifier hs-type">TypeArgType</span></a></span><span> </span><span id="local-6989586621684493786"><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684493786"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TypeBase dim () -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493788"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">TypeBase dim ()
</span><a href="#local-6989586621684493786"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span id="local-6989586621684494443"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493781"><span id="local-6989586621684493783"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494443"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494443"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeExp"><span class="hs-identifier hs-type">TypeExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494443"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>  </span><span id="local-6989586621684493758"><span class="annot"><span class="annottext">ppr :: TypeExp vn -&gt; Doc
</span><a href="#local-6989586621684493758"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEUnique"><span class="hs-identifier hs-type">TEUnique</span></a></span><span> </span><span id="local-6989586621684493756"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493756"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493756"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEArray"><span class="hs-identifier hs-type">TEArray</span></a></span><span> </span><span id="local-6989586621684493754"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493754"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621684493753"><span class="annot"><span class="annottext">DimExp vn
</span><a href="#local-6989586621684493753"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DimExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">DimExp vn
</span><a href="#local-6989586621684493753"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493754"><span class="hs-identifier hs-var">at</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TETuple"><span class="hs-identifier hs-type">TETuple</span></a></span><span> </span><span id="local-6989586621684493751"><span class="annot"><span class="annottext">[TypeExp vn]
</span><a href="#local-6989586621684493751"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TypeExp vn -&gt; Doc) -&gt; [TypeExp vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeExp vn]
</span><a href="#local-6989586621684493751"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TERecord"><span class="hs-identifier hs-type">TERecord</span></a></span><span> </span><span id="local-6989586621684493749"><span class="annot"><span class="annottext">[(Name, TypeExp vn)]
</span><a href="#local-6989586621684493749"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">braces</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Name, TypeExp vn) -&gt; Doc) -&gt; [(Name, TypeExp vn)] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, TypeExp vn) -&gt; Doc
forall {a}. Pretty a =&gt; (Name, a) -&gt; Doc
</span><a href="#local-6989586621684493748"><span class="hs-identifier hs-var">ppField</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, TypeExp vn)]
</span><a href="#local-6989586621684493749"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-173"></span><span>      </span><span id="local-6989586621684493748"><span class="annot"><span class="annottext">ppField :: (Name, a) -&gt; Doc
</span><a href="#local-6989586621684493748"><span class="hs-identifier hs-var hs-var">ppField</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493744"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493744"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493743"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493743"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><a href="Language.Futhark.Core.html#nameToString"><span class="hs-identifier hs-var">nameToString</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493744"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493743"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEVar"><span class="hs-identifier hs-type">TEVar</span></a></span><span> </span><span id="local-6989586621684493741"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493741"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493741"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEApply"><span class="hs-identifier hs-type">TEApply</span></a></span><span> </span><span id="local-6989586621684493739"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493739"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684493738"><span class="annot"><span class="annottext">TypeArgExp vn
</span><a href="#local-6989586621684493738"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493739"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeArgExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeArgExp vn
</span><a href="#local-6989586621684493738"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEArrow"><span class="hs-identifier hs-type">TEArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493736"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493736"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684493735"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493735"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684493734"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493734"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684493733"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493734"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-178"></span><span>      </span><span id="local-6989586621684493733"><span class="annot"><span class="annottext">v' :: Doc
</span><a href="#local-6989586621684493733"><span class="hs-identifier hs-var hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493736"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493735"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEArrow"><span class="hs-identifier hs-type">TEArrow</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe vn
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621684493728"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493728"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621684493727"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493727"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493728"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493727"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-180"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TESum"><span class="hs-identifier hs-type">TESum</span></a></span><span> </span><span id="local-6989586621684493725"><span class="annot"><span class="annottext">[(Name, [TypeExp vn])]
</span><a href="#local-6989586621684493725"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">cat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; |&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">softline</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; [Doc]) -&gt; [Doc] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Name, [TypeExp vn]) -&gt; Doc) -&gt; [(Name, [TypeExp vn])] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, [TypeExp vn]) -&gt; Doc
forall {a} {a}. (Pretty a, Pretty a) =&gt; (a, [a]) -&gt; Doc
</span><a href="#local-6989586621684493722"><span class="hs-identifier hs-var">ppConstr</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [TypeExp vn])]
</span><a href="#local-6989586621684493725"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-183"></span><span>      </span><span id="local-6989586621684493722"><span class="annot"><span class="annottext">ppConstr :: (a, [a]) -&gt; Doc
</span><a href="#local-6989586621684493722"><span class="hs-identifier hs-var hs-var">ppConstr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493716"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493716"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493715"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621684493715"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493716"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; Doc) -&gt; [a] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621684493715"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TEDim"><span class="hs-identifier hs-type">TEDim</span></a></span><span> </span><span id="local-6989586621684493713"><span class="annot"><span class="annottext">[vn]
</span><a href="#local-6989586621684493713"><span class="hs-identifier hs-var">dims</span></a></span></span><span> </span><span id="local-6989586621684493712"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493712"><span class="hs-identifier hs-var">te</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(vn -&gt; Doc) -&gt; [vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (vn -&gt; Doc) -&gt; vn -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[vn]
</span><a href="#local-6989586621684493713"><span class="hs-identifier hs-var">dims</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493712"><span class="hs-identifier hs-var">te</span></a></span></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span id="local-6989586621684494442"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493707"><span id="local-6989586621684493709"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494442"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494442"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgExp"><span class="hs-identifier hs-type">TypeArgExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494442"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>  </span><span id="local-6989586621684493704"><span class="annot"><span class="annottext">ppr :: TypeArgExp vn -&gt; Doc
</span><a href="#local-6989586621684493704"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgExpDim"><span class="hs-identifier hs-type">TypeArgExpDim</span></a></span><span> </span><span id="local-6989586621684493702"><span class="annot"><span class="annottext">DimExp vn
</span><a href="#local-6989586621684493702"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DimExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">DimExp vn
</span><a href="#local-6989586621684493702"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeArgExpType"><span class="hs-identifier hs-type">TypeArgExpType</span></a></span><span> </span><span id="local-6989586621684493700"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493700"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684493700"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span id="local-6989586621684494437"><span id="local-6989586621684494438"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493695"><span id="local-6989586621684493697"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494438"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494438"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494437"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDeclBase"><span class="hs-identifier hs-type">TypeDeclBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494437"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494438"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>  </span><span id="local-6989586621684493689"><span class="annot"><span class="annottext">ppr :: TypeDeclBase f vn -&gt; Doc
</span><a href="#local-6989586621684493689"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621684493688"><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493688"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeExp vn -&gt; f StructType -&gt; Doc
forall (f :: * -&gt; *) a b.
(Annot f, Pretty a, Pretty b) =&gt;
a -&gt; f b -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprAnnot"><span class="hs-identifier hs-var">pprAnnot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDeclBase f vn -&gt; TypeExp vn
forall (f :: * -&gt; *) vn. TypeDeclBase f vn -&gt; TypeExp vn
</span><a href="Language.Futhark.Syntax.html#declaredType"><span class="hs-identifier hs-var hs-var">declaredType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493688"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDeclBase f vn -&gt; f StructType
forall (f :: * -&gt; *) vn. TypeDeclBase f vn -&gt; f StructType
</span><a href="Language.Futhark.Syntax.html#expandedType"><span class="hs-identifier hs-var hs-var">expandedType</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493688"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span id="local-6989586621684494470"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493681"><span id="local-6989586621684493683"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494470"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494470"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621684493677"><span class="annot"><span class="annottext">ppr :: QualName vn -&gt; Doc
</span><a href="#local-6989586621684493677"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span id="local-6989586621684493675"><span class="annot"><span class="annottext">[vn]
</span><a href="#local-6989586621684493675"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621684493674"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493674"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; [Doc]) -&gt; [Doc] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(vn -&gt; Doc) -&gt; [vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">[vn]
</span><a href="#local-6989586621684493675"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; [Doc] -&gt; [Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493674"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span id="local-6989586621684494431"><span id="local-6989586621684494432"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493669"><span id="local-6989586621684493671"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494432"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IdentBase"><span class="hs-identifier hs-type">IdentBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494431"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494432"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-199"></span><span>  </span><span id="local-6989586621684493667"><span class="annot"><span class="annottext">ppr :: IdentBase f vn -&gt; Doc
</span><a href="#local-6989586621684493667"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">(vn -&gt; Doc) -&gt; (IdentBase f vn -&gt; vn) -&gt; IdentBase f vn -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn -&gt; vn
forall (f :: * -&gt; *) vn. IdentBase f vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#identName"><span class="hs-identifier hs-var hs-var">identName</span></a></span></span></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span id="local-6989586621684494427"><span id="local-6989586621684494428"><span class="annot"><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-type">hasArrayLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494428"><span class="hs-identifier hs-type">ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494427"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-202"></span><span id="hasArrayLit"><span class="annot"><span class="annottext">hasArrayLit :: forall (ty :: * -&gt; *) vn. ExpBase ty vn -&gt; Bool
</span><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-var hs-var">hasArrayLit</span></a></span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-type">ArrayLit</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-203"></span><span class="annot"><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-var">hasArrayLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TupLit"><span class="hs-identifier hs-type">TupLit</span></a></span><span> </span><span id="local-6989586621684493661"><span class="annot"><span class="annottext">[ExpBase ty vn]
</span><a href="#local-6989586621684493661"><span class="hs-identifier hs-var">es2</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ExpBase ty vn -&gt; Bool) -&gt; [ExpBase ty vn] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">ExpBase ty vn -&gt; Bool
forall (ty :: * -&gt; *) vn. ExpBase ty vn -&gt; Bool
</span><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-var">hasArrayLit</span></a></span><span> </span><span class="annot"><span class="annottext">[ExpBase ty vn]
</span><a href="#local-6989586621684493661"><span class="hs-identifier hs-var">es2</span></a></span><span>
</span><span id="line-204"></span><span class="annot"><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-var">hasArrayLit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase ty vn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span id="local-6989586621684494421"><span id="local-6989586621684494422"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493655"><span id="local-6989586621684493657"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494422"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494422"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494421"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimIndexBase"><span class="hs-identifier hs-type">DimIndexBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494421"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494422"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-207"></span><span>  </span><span id="local-6989586621684493632"><span class="annot"><span class="annottext">ppr :: DimIndexBase f vn -&gt; Doc
</span><a href="#local-6989586621684493632"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimFix"><span class="hs-identifier hs-type">DimFix</span></a></span><span> </span><span id="local-6989586621684493630"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493630"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493630"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimSlice"><span class="hs-identifier hs-type">DimSlice</span></a></span><span> </span><span id="local-6989586621684493628"><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493628"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621684493627"><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493627"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493626"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493626"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; (ExpBase f vn -&gt; Doc) -&gt; Maybe (ExpBase f vn) -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493628"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span>
</span><span id="line-210"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; (ExpBase f vn -&gt; Doc) -&gt; Maybe (ExpBase f vn) -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493627"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-211"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span>
</span><span id="line-212"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493626"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimSlice"><span class="hs-identifier hs-type">DimSlice</span></a></span><span> </span><span id="local-6989586621684493625"><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493625"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493624"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493624"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684493623"><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493623"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; (ExpBase f vn -&gt; Doc) -&gt; Maybe (ExpBase f vn) -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493625"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span>
</span><span id="line-215"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493624"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; (ExpBase f vn -&gt; Doc) -&gt; Maybe (ExpBase f vn) -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (ExpBase f vn -&gt; Doc) -&gt; ExpBase f vn -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493623"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DimSlice"><span class="hs-identifier hs-type">DimSlice</span></a></span><span> </span><span id="local-6989586621684493622"><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493622"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; (ExpBase f vn -&gt; Doc) -&gt; Maybe (ExpBase f vn) -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493622"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span></span></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span id="local-6989586621684494418"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493617"><span id="local-6989586621684493619"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494418"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SizeBinder"><span class="hs-identifier hs-type">SizeBinder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494418"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-221"></span><span>  </span><span id="local-6989586621684493615"><span class="annot"><span class="annottext">ppr :: SizeBinder vn -&gt; Doc
</span><a href="#local-6989586621684493615"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SizeBinder"><span class="hs-identifier hs-type">SizeBinder</span></a></span><span> </span><span id="local-6989586621684493613"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493613"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493613"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span id="local-6989586621684494416"><span id="local-6989586621684494417"><span class="annot"><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-type">letBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494417"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494417"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494416"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494416"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494417"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span></span><span>
</span><span id="line-224"></span><span id="letBody"><span class="annot"><span class="annottext">letBody :: forall vn (f :: * -&gt; *).
(Eq vn, IsName vn, Annot f) =&gt;
ExpBase f vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-var hs-var">letBody</span></a></span></span><span> </span><span id="local-6989586621684493605"><span class="annot"><span class="annottext">body :: ExpBase f vn
</span><a href="#local-6989586621684493605"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-type">AppExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#LetPat"><span class="hs-identifier hs-type">LetPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">f AppRes
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493605"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-225"></span><span class="annot"><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-var">letBody</span></a></span><span> </span><span id="local-6989586621684493602"><span class="annot"><span class="annottext">body :: ExpBase f vn
</span><a href="#local-6989586621684493602"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-type">AppExp</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#LetFun"><span class="hs-identifier hs-type">LetFun</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">f AppRes
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493602"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-226"></span><span class="annot"><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-var">letBody</span></a></span><span> </span><span id="local-6989586621684493600"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493600"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493600"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span id="local-6989586621684494411"><span id="local-6989586621684494412"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493596"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494412"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494412"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494411"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExpBase"><span class="hs-identifier hs-type">AppExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494411"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494412"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621684493592"><span class="annot"><span class="annottext">ppr :: AppExpBase f vn -&gt; Doc
</span><a href="#local-6989586621684493592"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; AppExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>  </span><span id="local-6989586621684493516"><span class="annot"><span class="annottext">pprPrec :: Int -&gt; AppExpBase f vn -&gt; Doc
</span><a href="#local-6989586621684493516"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprPrec</span></a></span></span><span> </span><span id="local-6989586621684493515"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493515"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Coerce"><span class="hs-identifier hs-type">Coerce</span></a></span><span> </span><span id="local-6989586621684493513"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493513"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684493512"><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493512"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-231"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493515"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493513"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; TypeDeclBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493512"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493510"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493510"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#BinOp"><span class="hs-identifier hs-type">BinOp</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493508"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493508"><span class="hs-identifier hs-var">bop</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493507"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493507"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">f (StructType, Maybe VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493506"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493506"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">f (StructType, Maybe VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; QualName vn -&gt; ExpBase f vn -&gt; ExpBase f vn -&gt; Doc
forall vn (f :: * -&gt; *).
(Eq vn, IsName vn, Annot f) =&gt;
Int -&gt; QualName vn -&gt; ExpBase f vn -&gt; ExpBase f vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#prettyBinOp"><span class="hs-identifier hs-var">prettyBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493510"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493508"><span class="hs-identifier hs-var">bop</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493507"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493506"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span id="local-6989586621684493503"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493503"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684493502"><span class="annot"><span class="annottext">NonEmpty (CaseBase f vn)
</span><a href="#local-6989586621684493502"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493503"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">stack</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc)
-&gt; ([CaseBase f vn] -&gt; [Doc]) -&gt; [CaseBase f vn] -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(CaseBase f vn -&gt; Doc) -&gt; [CaseBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CaseBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (CaseBase f vn) -&gt; [CaseBase f vn]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (CaseBase f vn)
</span><a href="#local-6989586621684493502"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DoLoop"><span class="hs-identifier hs-type">DoLoop</span></a></span><span> </span><span id="local-6989586621684493497"><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684493497"><span class="hs-identifier hs-var">sizeparams</span></a></span></span><span> </span><span id="local-6989586621684493496"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493496"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684493495"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493495"><span class="hs-identifier hs-var">initexp</span></a></span></span><span> </span><span id="local-6989586621684493494"><span class="annot"><span class="annottext">LoopFormBase f vn
</span><a href="#local-6989586621684493494"><span class="hs-identifier hs-var">form</span></a></span></span><span> </span><span id="local-6989586621684493493"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493493"><span class="hs-identifier hs-var">loopbody</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;loop&quot;</span></span><span>
</span><span id="line-236"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span>
</span><span id="line-237"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(VName -&gt; Doc) -&gt; [VName] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (VName -&gt; Doc) -&gt; VName -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">VName -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VName]
</span><a href="#local-6989586621684493497"><span class="hs-identifier hs-var">sizeparams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>            </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493496"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span>
</span><span id="line-239"></span><span>            </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493495"><span class="hs-identifier hs-var">initexp</span></a></span><span>
</span><span id="line-240"></span><span>            </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">LoopFormBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">LoopFormBase f vn
</span><a href="#local-6989586621684493494"><span class="hs-identifier hs-var">form</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;do&quot;</span></span><span>
</span><span id="line-241"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">indent</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493493"><span class="hs-identifier hs-var">loopbody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span id="local-6989586621684493489"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493489"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684493488"><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493488"><span class="hs-identifier hs-var">idxs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493489"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase f vn -&gt; Doc) -&gt; SliceBase f vn -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493488"><span class="hs-identifier hs-var">idxs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493487"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493487"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LetPat"><span class="hs-identifier hs-type">LetPat</span></a></span><span> </span><span id="local-6989586621684493486"><span class="annot"><span class="annottext">[SizeBinder vn]
</span><a href="#local-6989586621684493486"><span class="hs-identifier hs-var">sizes</span></a></span></span><span> </span><span id="local-6989586621684493485"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493485"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621684493484"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493484"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684493483"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493483"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493487"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-247"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-248"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;let&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SizeBinder vn -&gt; Doc) -&gt; [SizeBinder vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">SizeBinder vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[SizeBinder vn]
</span><a href="#local-6989586621684493486"><span class="hs-identifier hs-var">sizes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493485"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>          </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621684493482"><span class="hs-identifier hs-var">linebreak</span></a></span><span>
</span><span id="line-250"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">indent</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493484"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493484"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>          </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall vn (f :: * -&gt; *).
(Eq vn, IsName vn, Annot f) =&gt;
ExpBase f vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-var">letBody</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493483"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>      </span><span id="local-6989586621684493482"><span class="annot"><span class="annottext">linebreak :: Bool
</span><a href="#local-6989586621684493482"><span class="hs-identifier hs-var hs-var">linebreak</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493484"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-256"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-type">AppExp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-257"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#Attr"><span class="hs-identifier hs-type">Attr</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-258"></span><span>        </span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-type">ArrayLit</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-259"></span><span>        </span><span class="annot"><span class="annottext">ExpBase f vn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Bool
forall (ty :: * -&gt; *) vn. ExpBase ty vn -&gt; Bool
</span><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-var">hasArrayLit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493484"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LetFun"><span class="hs-identifier hs-type">LetFun</span></a></span><span> </span><span id="local-6989586621684493480"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493480"><span class="hs-identifier hs-var">fname</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493479"><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684493479"><span class="hs-identifier hs-var">tparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493478"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493478"><span class="hs-identifier hs-var">params</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493477"><span class="annot"><span class="annottext">Maybe (TypeExp vn)
</span><a href="#local-6989586621684493477"><span class="hs-identifier hs-var">retdecl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493476"><span class="annot"><span class="annottext">f StructRetType
</span><a href="#local-6989586621684493476"><span class="hs-identifier hs-var">rettype</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493475"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493475"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684493474"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493474"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;let&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493480"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeParamBase vn -&gt; Doc) -&gt; [TypeParamBase vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeParamBase vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684493479"><span class="hs-identifier hs-var">tparams</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; [Doc] -&gt; [Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Doc) -&gt; [PatBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493478"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684493473"><span class="hs-identifier hs-var">retdecl'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span>
</span><span id="line-263"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">indent</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493475"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall vn (f :: * -&gt; *).
(Eq vn, IsName vn, Annot f) =&gt;
ExpBase f vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-var">letBody</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493474"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-266"></span><span>      </span><span id="local-6989586621684493473"><span class="annot"><span class="annottext">retdecl' :: Doc
</span><a href="#local-6989586621684493473"><span class="hs-identifier hs-var hs-var">retdecl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StructRetType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">(StructRetType -&gt; Doc) -&gt; Maybe StructRetType -&gt; Maybe Doc
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f StructRetType -&gt; Maybe StructRetType
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f StructRetType
</span><a href="#local-6989586621684493476"><span class="hs-identifier hs-var">rettype</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Doc -&gt; Maybe Doc -&gt; Maybe Doc
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a -&gt; m a -&gt; m a
</span><span class="hs-operator hs-var">`mplus`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">(TypeExp vn -&gt; Doc) -&gt; Maybe (TypeExp vn) -&gt; Maybe Doc
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp vn)
</span><a href="#local-6989586621684493477"><span class="hs-identifier hs-var">retdecl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-267"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493457"><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684493457"><span class="hs-identifier hs-var">rettype'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684493457"><span class="hs-identifier hs-var">rettype'</span></a></span><span>
</span><span id="line-268"></span><span>        </span><span class="annot"><span class="annottext">Maybe Doc
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-269"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LetWith"><span class="hs-identifier hs-type">LetWith</span></a></span><span> </span><span id="local-6989586621684493455"><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493455"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span id="local-6989586621684493454"><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493454"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684493453"><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493453"><span class="hs-identifier hs-var">idxs</span></a></span></span><span> </span><span id="local-6989586621684493452"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493452"><span class="hs-identifier hs-var">ve</span></a></span></span><span> </span><span id="local-6989586621684493451"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493451"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493455"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn -&gt; IdentBase f vn -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493454"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-271"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;let&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493455"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">list</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase f vn -&gt; Doc) -&gt; SliceBase f vn -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493453"><span class="hs-identifier hs-var">idxs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span>
</span><span id="line-273"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493452"><span class="hs-identifier hs-var">ve</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall vn (f :: * -&gt; *).
(Eq vn, IsName vn, Annot f) =&gt;
ExpBase f vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-var">letBody</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493451"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-276"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;let&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493455"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493454"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-277"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with&quot;</span></span><span>
</span><span id="line-278"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase f vn -&gt; Doc) -&gt; SliceBase f vn -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493453"><span class="hs-identifier hs-var">idxs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&quot;</span></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493452"><span class="hs-identifier hs-var">ve</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall vn (f :: * -&gt; *).
(Eq vn, IsName vn, Annot f) =&gt;
ExpBase f vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#letBody"><span class="hs-identifier hs-var">letBody</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493451"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493449"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493449"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Range"><span class="hs-identifier hs-type">Range</span></a></span><span> </span><span id="local-6989586621684493447"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493447"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621684493446"><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493446"><span class="hs-identifier hs-var">maybe_step</span></a></span></span><span> </span><span id="local-6989586621684493445"><span class="annot"><span class="annottext">Inclusiveness (ExpBase f vn)
</span><a href="#local-6989586621684493445"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493449"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-284"></span><span>      </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493447"><span class="hs-identifier hs-var">start</span></a></span><span>
</span><span id="line-285"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; (ExpBase f vn -&gt; Doc) -&gt; Maybe (ExpBase f vn) -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;..&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (ExpBase f vn -&gt; Doc) -&gt; ExpBase f vn -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (ExpBase f vn)
</span><a href="#local-6989586621684493446"><span class="hs-identifier hs-var">maybe_step</span></a></span><span>
</span><span id="line-286"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Inclusiveness (ExpBase f vn)
</span><a href="#local-6989586621684493445"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-287"></span><span>          </span><span class="annot"><a href="Language.Futhark.Syntax.html#DownToExclusive"><span class="hs-identifier hs-type">DownToExclusive</span></a></span><span> </span><span id="local-6989586621684493443"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493443"><span class="hs-identifier hs-var">end'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;..&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493443"><span class="hs-identifier hs-var">end'</span></a></span><span>
</span><span id="line-288"></span><span>          </span><span class="annot"><a href="Language.Futhark.Syntax.html#ToInclusive"><span class="hs-identifier hs-type">ToInclusive</span></a></span><span> </span><span id="local-6989586621684493441"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493441"><span class="hs-identifier hs-var">end'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;...&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493441"><span class="hs-identifier hs-var">end'</span></a></span><span>
</span><span id="line-289"></span><span>          </span><span class="annot"><a href="Language.Futhark.Syntax.html#UpToExclusive"><span class="hs-identifier hs-type">UpToExclusive</span></a></span><span> </span><span id="local-6989586621684493439"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493439"><span class="hs-identifier hs-var">end'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;..&lt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493439"><span class="hs-identifier hs-var">end'</span></a></span><span>
</span><span id="line-290"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#If"><span class="hs-identifier hs-type">If</span></a></span><span> </span><span id="local-6989586621684493437"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493437"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621684493436"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493436"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621684493435"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493435"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;if&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493437"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-292"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;then&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493436"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;else&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493435"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493434"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493434"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621684493432"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493432"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684493431"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493431"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Diet, Maybe VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493434"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493432"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493431"><span class="hs-identifier hs-var">arg</span></a></span></span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span id="local-6989586621684494419"><span id="local-6989586621684494420"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493427"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494420"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494420"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494419"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494419"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494420"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621684493423"><span class="annot"><span class="annottext">ppr :: ExpBase f vn -&gt; Doc
</span><a href="#local-6989586621684493423"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>  </span><span id="local-6989586621684493346"><span class="annot"><span class="annottext">pprPrec :: Int -&gt; ExpBase f vn -&gt; Doc
</span><a href="#local-6989586621684493346"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprPrec</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621684493344"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493344"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684493343"><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493343"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493344"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684493342"><span class="hs-identifier hs-var">inst</span></a></span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-301"></span><span>      </span><span id="local-6989586621684493342"><span class="annot"><span class="annottext">inst :: Doc
</span><a href="#local-6989586621684493342"><span class="hs-identifier hs-var hs-var">inst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">f PatType -&gt; Maybe PatType
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493343"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-302"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493335"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493335"><span class="hs-identifier hs-var">t'</span></a></span></span><span>
</span><span id="line-303"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Bool
</span><a href="Futhark.Util.html#isEnvVarAtLeast"><span class="hs-identifier hs-var">isEnvVarAtLeast</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FUTHARK_COMPILER_DEBUGGING&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-304"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493335"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>        </span><span class="annot"><span class="annottext">Maybe PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Parens"><span class="hs-identifier hs-type">Parens</span></a></span><span> </span><span id="local-6989586621684493333"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493333"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493333"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-307"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#QualParens"><span class="hs-identifier hs-type">QualParens</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493331"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493331"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684493330"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493330"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493331"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493330"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493329"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493329"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Ascript"><span class="hs-identifier hs-type">Ascript</span></a></span><span> </span><span id="local-6989586621684493327"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493327"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621684493326"><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493326"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-309"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493329"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493327"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; TypeDeclBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493326"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span id="local-6989586621684493324"><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684493324"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimValue -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684493324"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-311"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IntLit"><span class="hs-identifier hs-type">IntLit</span></a></span><span> </span><span id="local-6989586621684493322"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684493322"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684493322"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-312"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FloatLit"><span class="hs-identifier hs-type">FloatLit</span></a></span><span> </span><span id="local-6989586621684493320"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684493320"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684493320"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TupLit"><span class="hs-identifier hs-type">TupLit</span></a></span><span> </span><span id="local-6989586621684493319"><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493319"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(ExpBase f vn -&gt; Bool) -&gt; [ExpBase f vn] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Bool
forall (ty :: * -&gt; *) vn. ExpBase ty vn -&gt; Bool
</span><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-var">hasArrayLit</span></a></span><span> </span><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493319"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#commastack"><span class="hs-identifier hs-var">commastack</span></a></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase f vn -&gt; Doc) -&gt; [ExpBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493319"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase f vn -&gt; Doc) -&gt; [ExpBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493319"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-316"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordLit"><span class="hs-identifier hs-type">RecordLit</span></a></span><span> </span><span id="local-6989586621684493317"><span class="annot"><span class="annottext">[FieldBase f vn]
</span><a href="#local-6989586621684493317"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(FieldBase f vn -&gt; Bool) -&gt; [FieldBase f vn] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">FieldBase f vn -&gt; Bool
forall {ty :: * -&gt; *} {vn}. FieldBase ty vn -&gt; Bool
</span><a href="#local-6989586621684493316"><span class="hs-identifier hs-var">fieldArray</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldBase f vn]
</span><a href="#local-6989586621684493317"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">braces</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#commastack"><span class="hs-identifier hs-var">commastack</span></a></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldBase f vn -&gt; Doc) -&gt; [FieldBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[FieldBase f vn]
</span><a href="#local-6989586621684493317"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-318"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">braces</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldBase f vn -&gt; Doc) -&gt; [FieldBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[FieldBase f vn]
</span><a href="#local-6989586621684493317"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-320"></span><span>      </span><span id="local-6989586621684493316"><span class="annot"><span class="annottext">fieldArray :: FieldBase ty vn -&gt; Bool
</span><a href="#local-6989586621684493316"><span class="hs-identifier hs-var hs-var">fieldArray</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldExplicit"><span class="hs-identifier hs-type">RecordFieldExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684493314"><span class="annot"><span class="annottext">ExpBase ty vn
</span><a href="#local-6989586621684493314"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase ty vn -&gt; Bool
forall (ty :: * -&gt; *) vn. ExpBase ty vn -&gt; Bool
</span><a href="Language.Futhark.Pretty.html#hasArrayLit"><span class="hs-identifier hs-var">hasArrayLit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase ty vn
</span><a href="#local-6989586621684493314"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-321"></span><span>      </span><span class="annot"><a href="#local-6989586621684493316"><span class="hs-identifier hs-var">fieldArray</span></a></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldImplicit"><span class="hs-identifier hs-type">RecordFieldImplicit</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-322"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ArrayLit"><span class="hs-identifier hs-type">ArrayLit</span></a></span><span> </span><span id="local-6989586621684493312"><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493312"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621684493311"><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493311"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-323"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ExpBase f vn -&gt; Doc) -&gt; [ExpBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493312"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684493310"><span class="hs-identifier hs-var">info'</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-325"></span><span>      </span><span id="local-6989586621684493310"><span class="annot"><span class="annottext">info' :: Doc
</span><a href="#local-6989586621684493310"><span class="hs-identifier hs-var hs-var">info'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">f PatType -&gt; Maybe PatType
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493311"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-326"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493303"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493303"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-327"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Bool
</span><a href="Futhark.Util.html#isEnvVarAtLeast"><span class="hs-identifier hs-var">isEnvVarAtLeast</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;FUTHARK_COMPILER_DEBUGGING&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-328"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493303"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>        </span><span class="annot"><span class="annottext">Maybe PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-330"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#StringLit"><span class="hs-identifier hs-type">StringLit</span></a></span><span> </span><span id="local-6989586621684493301"><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684493301"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-331"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Doc) -&gt; String -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; String) -&gt; String -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; Char) -&gt; [Word8] -&gt; String
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Char
</span><span class="hs-identifier hs-var">chr</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Char) -&gt; (Word8 -&gt; Int) -&gt; Word8 -&gt; Char
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Word8]
</span><a href="#local-6989586621684493301"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-332"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Project"><span class="hs-identifier hs-type">Project</span></a></span><span> </span><span id="local-6989586621684493299"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493299"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621684493298"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493298"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493298"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493299"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Negate"><span class="hs-identifier hs-type">Negate</span></a></span><span> </span><span id="local-6989586621684493296"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493296"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493296"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Not"><span class="hs-identifier hs-type">Not</span></a></span><span> </span><span id="local-6989586621684493294"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493294"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493294"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-335"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Update"><span class="hs-identifier hs-type">Update</span></a></span><span> </span><span id="local-6989586621684493292"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493292"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684493291"><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493291"><span class="hs-identifier hs-var">idxs</span></a></span></span><span> </span><span id="local-6989586621684493290"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493290"><span class="hs-identifier hs-var">ve</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493292"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with&quot;</span></span><span>
</span><span id="line-337"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase f vn -&gt; Doc) -&gt; SliceBase f vn -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493291"><span class="hs-identifier hs-var">idxs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&quot;</span></span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493290"><span class="hs-identifier hs-var">ve</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordUpdate"><span class="hs-identifier hs-type">RecordUpdate</span></a></span><span> </span><span id="local-6989586621684493288"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493288"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621684493287"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684493287"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621684493286"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493286"><span class="hs-identifier hs-var">ve</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493288"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with&quot;</span></span><span>
</span><span id="line-342"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">intersperse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Doc) -&gt; [Name] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684493287"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&quot;</span></span><span>
</span><span id="line-344"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493286"><span class="hs-identifier hs-var">ve</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Assert"><span class="hs-identifier hs-type">Assert</span></a></span><span> </span><span id="local-6989586621684493284"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493284"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621684493283"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493283"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="annot"><span class="annottext">f String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;assert&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493284"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493283"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-346"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493282"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493282"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Lambda"><span class="hs-identifier hs-type">Lambda</span></a></span><span> </span><span id="local-6989586621684493280"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493280"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621684493279"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493279"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621684493278"><span class="annot"><span class="annottext">Maybe (TypeExp vn)
</span><a href="#local-6989586621684493278"><span class="hs-identifier hs-var">rettype</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Aliasing, StructRetType)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493282"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-348"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Doc) -&gt; [PatBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493280"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp vn) -&gt; Doc
forall t. Pretty t =&gt; Maybe t -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#ppAscription"><span class="hs-identifier hs-var">ppAscription</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp vn)
</span><a href="#local-6989586621684493278"><span class="hs-identifier hs-var">rettype</span></a></span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">indent</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493279"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSection"><span class="hs-identifier hs-type">OpSection</span></a></span><span> </span><span id="local-6989586621684493275"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493275"><span class="hs-identifier hs-var">binop</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493275"><span class="hs-identifier hs-var">binop</span></a></span><span>
</span><span id="line-352"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionLeft"><span class="hs-identifier hs-type">OpSectionLeft</span></a></span><span> </span><span id="local-6989586621684493273"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493273"><span class="hs-identifier hs-var">binop</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684493272"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493272"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">(f (PName, StructType, Maybe VName), f (PName, StructType))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(f PatRetType, f [VName])
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-353"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493272"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall vn. IsName vn =&gt; QualName vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#ppBinOp"><span class="hs-identifier hs-var">ppBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493273"><span class="hs-identifier hs-var">binop</span></a></span><span>
</span><span id="line-354"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpSectionRight"><span class="hs-identifier hs-type">OpSectionRight</span></a></span><span> </span><span id="local-6989586621684493269"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493269"><span class="hs-identifier hs-var">binop</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684493268"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493268"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">(f (PName, StructType), f (PName, StructType, Maybe VName))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">f PatRetType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-355"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall vn. IsName vn =&gt; QualName vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#ppBinOp"><span class="hs-identifier hs-var">ppBinOp</span></a></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493269"><span class="hs-identifier hs-var">binop</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493268"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-356"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ProjectSection"><span class="hs-identifier hs-type">ProjectSection</span></a></span><span> </span><span id="local-6989586621684493266"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684493266"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-357"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Doc) -&gt; [Name] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><a href="#local-6989586621684493265"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621684493266"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-359"></span><span>      </span><span id="local-6989586621684493265"><span class="annot"><span class="annottext">p :: a -&gt; Doc
</span><a href="#local-6989586621684493265"><span class="hs-identifier hs-var hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684493261"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493261"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493261"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-360"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IndexSection"><span class="hs-identifier hs-type">IndexSection</span></a></span><span> </span><span id="local-6989586621684493259"><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493259"><span class="hs-identifier hs-var">idxs</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-361"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(DimIndexBase f vn -&gt; Doc) -&gt; SliceBase f vn -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DimIndexBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SliceBase f vn
</span><a href="#local-6989586621684493259"><span class="hs-identifier hs-var">idxs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Constr"><span class="hs-identifier hs-type">Constr</span></a></span><span> </span><span id="local-6989586621684493257"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493257"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621684493256"><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493256"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493257"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ExpBase f vn -&gt; Doc) -&gt; [ExpBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[ExpBase f vn]
</span><a href="#local-6989586621684493256"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Attr"><span class="hs-identifier hs-type">Attr</span></a></span><span> </span><span id="local-6989586621684493255"><span class="annot"><span class="annottext">AttrInfo vn
</span><a href="#local-6989586621684493255"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span id="local-6989586621684493254"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493254"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-364"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#[&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn
</span><a href="#local-6989586621684493255"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493254"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-365"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span id="local-6989586621684493253"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493253"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AppExp"><span class="hs-identifier hs-type">AppExp</span></a></span><span> </span><span id="local-6989586621684493252"><span class="annot"><span class="annottext">AppExpBase f vn
</span><a href="#local-6989586621684493252"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">f AppRes
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; AppExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684493253"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">AppExpBase f vn
</span><a href="#local-6989586621684493252"><span class="hs-identifier hs-var">e</span></a></span></span></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span id="local-6989586621684494375"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493247"><span id="local-6989586621684493249"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494375"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AttrAtom"><span class="hs-identifier hs-type">AttrAtom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494375"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-368"></span><span>  </span><span id="local-6989586621684493244"><span class="annot"><span class="annottext">ppr :: AttrAtom vn -&gt; Doc
</span><a href="#local-6989586621684493244"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AtomName"><span class="hs-identifier hs-type">AtomName</span></a></span><span> </span><span id="local-6989586621684493242"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493242"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493242"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-369"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AtomInt"><span class="hs-identifier hs-type">AtomInt</span></a></span><span> </span><span id="local-6989586621684493240"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684493240"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684493240"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span id="local-6989586621684494384"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493235"><span id="local-6989586621684493237"><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494384"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AttrInfo"><span class="hs-identifier hs-type">AttrInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494384"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621684493230"><span class="annot"><span class="annottext">ppr :: AttrInfo vn -&gt; Doc
</span><a href="#local-6989586621684493230"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AttrAtom"><span class="hs-identifier hs-type">AttrAtom</span></a></span><span> </span><span id="local-6989586621684493228"><span class="annot"><span class="annottext">AttrAtom vn
</span><a href="#local-6989586621684493228"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrAtom vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">AttrAtom vn
</span><a href="#local-6989586621684493228"><span class="hs-identifier hs-var">attr</span></a></span><span>
</span><span id="line-373"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#AttrComp"><span class="hs-identifier hs-type">AttrComp</span></a></span><span> </span><span id="local-6989586621684493226"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493226"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684493225"><span class="annot"><span class="annottext">[AttrInfo vn]
</span><a href="#local-6989586621684493225"><span class="hs-identifier hs-var">attrs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493226"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(AttrInfo vn -&gt; Doc) -&gt; [AttrInfo vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[AttrInfo vn]
</span><a href="#local-6989586621684493225"><span class="hs-identifier hs-var">attrs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span id="local-6989586621684494382"><span id="local-6989586621684494383"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493220"><span id="local-6989586621684493222"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494383"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494383"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494382"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#FieldBase"><span class="hs-identifier hs-type">FieldBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494382"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494383"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621684493214"><span class="annot"><span class="annottext">ppr :: FieldBase f vn -&gt; Doc
</span><a href="#local-6989586621684493214"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldExplicit"><span class="hs-identifier hs-type">RecordFieldExplicit</span></a></span><span> </span><span id="local-6989586621684493213"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493213"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684493212"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493212"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493213"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493212"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordFieldImplicit"><span class="hs-identifier hs-type">RecordFieldImplicit</span></a></span><span> </span><span id="local-6989586621684493211"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493211"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493211"><span class="hs-identifier hs-var">name</span></a></span></span></span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span id="local-6989586621684494402"><span id="local-6989586621684494403"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493206"><span id="local-6989586621684493208"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494403"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494403"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494402"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#CaseBase"><span class="hs-identifier hs-type">CaseBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494402"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494403"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>  </span><span id="local-6989586621684493203"><span class="annot"><span class="annottext">ppr :: CaseBase f vn -&gt; Doc
</span><a href="#local-6989586621684493203"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#CasePat"><span class="hs-identifier hs-type">CasePat</span></a></span><span> </span><span id="local-6989586621684493201"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493201"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684493200"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493200"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;case&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493201"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">indent</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493200"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span id="local-6989586621684494404"><span id="local-6989586621684494405"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493195"><span id="local-6989586621684493197"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494405"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494405"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494404"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LoopFormBase"><span class="hs-identifier hs-type">LoopFormBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494404"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494405"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-383"></span><span>  </span><span id="local-6989586621684493189"><span class="annot"><span class="annottext">ppr :: LoopFormBase f vn -&gt; Doc
</span><a href="#local-6989586621684493189"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#For"><span class="hs-identifier hs-type">For</span></a></span><span> </span><span id="local-6989586621684493187"><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493187"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621684493186"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493186"><span class="hs-identifier hs-var">ubound</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-384"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;for&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">IdentBase f vn
</span><a href="#local-6989586621684493187"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493186"><span class="hs-identifier hs-var">ubound</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ForIn"><span class="hs-identifier hs-type">ForIn</span></a></span><span> </span><span id="local-6989586621684493184"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493184"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684493183"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493183"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;for&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493184"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;in&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493183"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-387"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#While"><span class="hs-identifier hs-type">While</span></a></span><span> </span><span id="local-6989586621684493181"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493181"><span class="hs-identifier hs-var">cond</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-388"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;while&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684493181"><span class="hs-identifier hs-var">cond</span></a></span></span></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493176"><span id="local-6989586621684493178"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-391"></span><span>  </span><span id="local-6989586621684493172"><span class="annot"><span class="annottext">ppr :: PatLit -&gt; Doc
</span><a href="#local-6989586621684493172"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLitInt"><span class="hs-identifier hs-type">PatLitInt</span></a></span><span> </span><span id="local-6989586621684493170"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684493170"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621684493170"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-392"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLitFloat"><span class="hs-identifier hs-type">PatLitFloat</span></a></span><span> </span><span id="local-6989586621684493168"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684493168"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621684493168"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-393"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLitPrim"><span class="hs-identifier hs-type">PatLitPrim</span></a></span><span> </span><span id="local-6989586621684493166"><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684493166"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrimValue -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PrimValue
</span><a href="#local-6989586621684493166"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span id="local-6989586621684494406"><span id="local-6989586621684494407"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493161"><span id="local-6989586621684493163"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494407"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494407"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494406"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatBase"><span class="hs-identifier hs-type">PatBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494406"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494407"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>  </span><span id="local-6989586621684493136"><span class="annot"><span class="annottext">ppr :: PatBase f vn -&gt; Doc
</span><a href="#local-6989586621684493136"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAscription"><span class="hs-identifier hs-type">PatAscription</span></a></span><span> </span><span id="local-6989586621684493134"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493134"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684493133"><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493133"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493134"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeDeclBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684493133"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatParens"><span class="hs-identifier hs-type">PatParens</span></a></span><span> </span><span id="local-6989586621684493131"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493131"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493131"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-398"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621684493129"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493129"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684493128"><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493128"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">f PatType -&gt; Maybe PatType
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493128"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-399"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493127"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493127"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493129"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493127"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><span class="annottext">Maybe PatType
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684493129"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-401"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621684493125"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493125"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Doc) -&gt; [PatBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493125"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-402"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#RecordPat"><span class="hs-identifier hs-type">RecordPat</span></a></span><span> </span><span id="local-6989586621684493123"><span class="annot"><span class="annottext">[(Name, PatBase f vn)]
</span><a href="#local-6989586621684493123"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">braces</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">commasep</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Name, PatBase f vn) -&gt; Doc) -&gt; [(Name, PatBase f vn)] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, PatBase f vn) -&gt; Doc
forall {a}. Pretty a =&gt; (Name, a) -&gt; Doc
</span><a href="#local-6989586621684493122"><span class="hs-identifier hs-var">ppField</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, PatBase f vn)]
</span><a href="#local-6989586621684493123"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-403"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>      </span><span id="local-6989586621684493122"><span class="annot"><span class="annottext">ppField :: (Name, a) -&gt; Doc
</span><a href="#local-6989586621684493122"><span class="hs-identifier hs-var hs-var">ppField</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493117"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493117"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621684493116"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493116"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><a href="Language.Futhark.Core.html#nameToString"><span class="hs-identifier hs-var">nameToString</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493117"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621684493116"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-405"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#Wildcard"><span class="hs-identifier hs-type">Wildcard</span></a></span><span> </span><span id="local-6989586621684493114"><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493114"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">f PatType -&gt; Maybe PatType
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><a href="#local-6989586621684493114"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-406"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493113"><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493113"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">PatType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatType
</span><a href="#local-6989586621684493113"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><span class="annottext">Maybe PatType
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span>
</span><span id="line-408"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatLit"><span class="hs-identifier hs-type">PatLit</span></a></span><span> </span><span id="local-6989586621684493111"><span class="annot"><span class="annottext">PatLit
</span><a href="#local-6989586621684493111"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatLit -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatLit
</span><a href="#local-6989586621684493111"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-409"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatConstr"><span class="hs-identifier hs-type">PatConstr</span></a></span><span> </span><span id="local-6989586621684493109"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493109"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">f PatType
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684493108"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493108"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621684493109"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Doc) -&gt; [PatBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684493108"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#PatAttr"><span class="hs-identifier hs-type">PatAttr</span></a></span><span> </span><span id="local-6989586621684493106"><span class="annot"><span class="annottext">AttrInfo vn
</span><a href="#local-6989586621684493106"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span id="local-6989586621684493105"><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493105"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#[&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn
</span><a href="#local-6989586621684493106"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn
</span><a href="#local-6989586621684493105"><span class="hs-identifier hs-var">p</span></a></span></span></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span id="local-6989586621684494378"><span class="annot"><a href="Language.Futhark.Pretty.html#ppAscription"><span class="hs-identifier hs-type">ppAscription</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="#local-6989586621684494378"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621684494378"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span><span>
</span><span id="line-413"></span><span id="ppAscription"><span class="annot"><span class="annottext">ppAscription :: forall t. Pretty t =&gt; Maybe t -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#ppAscription"><span class="hs-identifier hs-var hs-var">ppAscription</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe t
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-414"></span><span class="annot"><a href="Language.Futhark.Pretty.html#ppAscription"><span class="hs-identifier hs-var">ppAscription</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684493100"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621684493100"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621684493100"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span id="local-6989586621684494371"><span id="local-6989586621684494372"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493095"><span id="local-6989586621684493097"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494372"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494372"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494371"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ProgBase"><span class="hs-identifier hs-type">ProgBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494371"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494372"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-417"></span><span>  </span><span id="local-6989586621684493093"><span class="annot"><span class="annottext">ppr :: ProgBase f vn -&gt; Doc
</span><a href="#local-6989586621684493093"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">stack</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; (ProgBase f vn -&gt; [Doc]) -&gt; ProgBase f vn -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">line</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; [Doc])
-&gt; (ProgBase f vn -&gt; [Doc]) -&gt; ProgBase f vn -&gt; [Doc]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DecBase f vn -&gt; Doc) -&gt; [DecBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">([DecBase f vn] -&gt; [Doc])
-&gt; (ProgBase f vn -&gt; [DecBase f vn]) -&gt; ProgBase f vn -&gt; [Doc]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProgBase f vn -&gt; [DecBase f vn]
forall (f :: * -&gt; *) vn. ProgBase f vn -&gt; [DecBase f vn]
</span><a href="Language.Futhark.Syntax.html#progDecs"><span class="hs-identifier hs-var hs-var">progDecs</span></a></span></span></span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span id="local-6989586621684494369"><span id="local-6989586621684494370"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493087"><span id="local-6989586621684493089"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494370"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494370"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494369"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#DecBase"><span class="hs-identifier hs-type">DecBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494369"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494370"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-420"></span><span>  </span><span id="local-6989586621684493076"><span class="annot"><span class="annottext">ppr :: DecBase f vn -&gt; Doc
</span><a href="#local-6989586621684493076"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ValDec"><span class="hs-identifier hs-type">ValDec</span></a></span><span> </span><span id="local-6989586621684493074"><span class="annot"><span class="annottext">ValBindBase f vn
</span><a href="#local-6989586621684493074"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ValBindBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ValBindBase f vn
</span><a href="#local-6989586621684493074"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-421"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeDec"><span class="hs-identifier hs-type">TypeDec</span></a></span><span> </span><span id="local-6989586621684493072"><span class="annot"><span class="annottext">TypeBindBase f vn
</span><a href="#local-6989586621684493072"><span class="hs-identifier hs-var">dec</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBindBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeBindBase f vn
</span><a href="#local-6989586621684493072"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-422"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigDec"><span class="hs-identifier hs-type">SigDec</span></a></span><span> </span><span id="local-6989586621684493070"><span class="annot"><span class="annottext">SigBindBase f vn
</span><a href="#local-6989586621684493070"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SigBindBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigBindBase f vn
</span><a href="#local-6989586621684493070"><span class="hs-identifier hs-var">sig</span></a></span><span>
</span><span id="line-423"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModDec"><span class="hs-identifier hs-type">ModDec</span></a></span><span> </span><span id="local-6989586621684493068"><span class="annot"><span class="annottext">ModBindBase f vn
</span><a href="#local-6989586621684493068"><span class="hs-identifier hs-var">sd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModBindBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModBindBase f vn
</span><a href="#local-6989586621684493068"><span class="hs-identifier hs-var">sd</span></a></span><span>
</span><span id="line-424"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#OpenDec"><span class="hs-identifier hs-type">OpenDec</span></a></span><span> </span><span id="local-6989586621684493066"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493066"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;open&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493066"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-425"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#LocalDec"><span class="hs-identifier hs-type">LocalDec</span></a></span><span> </span><span id="local-6989586621684493064"><span class="annot"><span class="annottext">DecBase f vn
</span><a href="#local-6989586621684493064"><span class="hs-identifier hs-var">dec</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;local&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn
</span><a href="#local-6989586621684493064"><span class="hs-identifier hs-var">dec</span></a></span><span>
</span><span id="line-426"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ImportDec"><span class="hs-identifier hs-type">ImportDec</span></a></span><span> </span><span id="local-6989586621684493062"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684493062"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">f String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;import&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684493062"><span class="hs-identifier hs-var">x</span></a></span></span></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span id="local-6989586621684494356"><span id="local-6989586621684494357"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493057"><span id="local-6989586621684493059"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494357"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494357"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494356"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModExpBase"><span class="hs-identifier hs-type">ModExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494356"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494357"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-429"></span><span>  </span><span id="local-6989586621684493040"><span class="annot"><span class="annottext">ppr :: ModExpBase f vn -&gt; Doc
</span><a href="#local-6989586621684493040"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModVar"><span class="hs-identifier hs-type">ModVar</span></a></span><span> </span><span id="local-6989586621684493038"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493038"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684493038"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-430"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModParens"><span class="hs-identifier hs-type">ModParens</span></a></span><span> </span><span id="local-6989586621684493036"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493036"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493036"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-431"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModImport"><span class="hs-identifier hs-type">ModImport</span></a></span><span> </span><span id="local-6989586621684493034"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684493034"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">f String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;import&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684493034"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModDecs"><span class="hs-identifier hs-type">ModDecs</span></a></span><span> </span><span id="local-6989586621684493032"><span class="annot"><span class="annottext">[DecBase f vn]
</span><a href="#local-6989586621684493032"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Doc -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#nestedBlock"><span class="hs-identifier hs-var">nestedBlock</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">stack</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">line</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; [Doc]) -&gt; [Doc] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(DecBase f vn -&gt; Doc) -&gt; [DecBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">DecBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[DecBase f vn]
</span><a href="#local-6989586621684493032"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-433"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModApply"><span class="hs-identifier hs-type">ModApply</span></a></span><span> </span><span id="local-6989586621684493029"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493029"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621684493028"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493028"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493029"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493028"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModAscript"><span class="hs-identifier hs-type">ModAscript</span></a></span><span> </span><span id="local-6989586621684493026"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493026"><span class="hs-identifier hs-var">me</span></a></span></span><span> </span><span id="local-6989586621684493025"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684493025"><span class="hs-identifier hs-var">se</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493026"><span class="hs-identifier hs-var">me</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684493025"><span class="hs-identifier hs-var">se</span></a></span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModLambda"><span class="hs-identifier hs-type">ModLambda</span></a></span><span> </span><span id="local-6989586621684493023"><span class="annot"><span class="annottext">ModParamBase f vn
</span><a href="#local-6989586621684493023"><span class="hs-identifier hs-var">param</span></a></span></span><span> </span><span id="local-6989586621684493022"><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><a href="#local-6989586621684493022"><span class="hs-identifier hs-var">maybe_sig</span></a></span></span><span> </span><span id="local-6989586621684493021"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493021"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-436"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ModParamBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModParamBase f vn
</span><a href="#local-6989586621684493023"><span class="hs-identifier hs-var">param</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684493020"><span class="hs-identifier hs-var">maybe_sig'</span></a></span><span>
</span><span id="line-437"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">indent</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684493021"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-439"></span><span>      </span><span id="local-6989586621684493020"><span class="annot"><span class="annottext">maybe_sig' :: Doc
</span><a href="#local-6989586621684493020"><span class="hs-identifier hs-var hs-var">maybe_sig'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><a href="#local-6989586621684493022"><span class="hs-identifier hs-var">maybe_sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-440"></span><span>        </span><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-441"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684493014"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684493014"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684493014"><span class="hs-identifier hs-var">sig</span></a></span></span></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493009"><span id="local-6989586621684493011"><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#Liftedness"><span class="hs-identifier hs-type">Liftedness</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-444"></span><span>  </span><span id="local-6989586621684493008"><span class="annot"><span class="annottext">ppr :: Liftedness -&gt; Doc
</span><a href="#local-6989586621684493008"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#Unlifted"><span class="hs-identifier hs-var">Unlifted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-445"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#SizeLifted"><span class="hs-identifier hs-var">SizeLifted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;~&quot;</span></span><span>
</span><span id="line-446"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="Language.Futhark.Syntax.html#Lifted"><span class="hs-identifier hs-var">Lifted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;^&quot;</span></span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span id="local-6989586621684494358"><span id="local-6989586621684494359"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684493000"><span id="local-6989586621684493002"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494359"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494359"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494358"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBindBase"><span class="hs-identifier hs-type">TypeBindBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494358"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494359"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-449"></span><span>  </span><span id="local-6989586621684492990"><span class="annot"><span class="annottext">ppr :: TypeBindBase f vn -&gt; Doc
</span><a href="#local-6989586621684492990"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeBind"><span class="hs-identifier hs-type">TypeBind</span></a></span><span> </span><span id="local-6989586621684492988"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492988"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684492987"><span class="annot"><span class="annottext">Liftedness
</span><a href="#local-6989586621684492987"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621684492986"><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492986"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621684492985"><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684492985"><span class="hs-identifier hs-var">te</span></a></span></span><span> </span><span id="local-6989586621684492984"><span class="annot"><span class="annottext">f StructRetType
</span><a href="#local-6989586621684492984"><span class="hs-identifier hs-var">rt</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe DocComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-450"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Liftedness -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="#local-6989586621684492987"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492988"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-451"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeParamBase vn -&gt; Doc) -&gt; [TypeParamBase vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeParamBase vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492986"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-452"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span>
</span><span id="line-453"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; (StructRetType -&gt; Doc) -&gt; Maybe StructRetType -&gt; Doc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeExp vn
</span><a href="#local-6989586621684492985"><span class="hs-identifier hs-var">te</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StructRetType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">f StructRetType -&gt; Maybe StructRetType
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f StructRetType
</span><a href="#local-6989586621684492984"><span class="hs-identifier hs-var">rt</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span id="local-6989586621684494408"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684492979"><span id="local-6989586621684492981"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494408"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494408"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamBase"><span class="hs-identifier hs-type">TypeParamBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494408"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-456"></span><span>  </span><span id="local-6989586621684492973"><span class="annot"><span class="annottext">ppr :: TypeParamBase vn -&gt; Doc
</span><a href="#local-6989586621684492973"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamDim"><span class="hs-identifier hs-type">TypeParamDim</span></a></span><span> </span><span id="local-6989586621684492971"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492971"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">brackets</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492971"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-457"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeParamType"><span class="hs-identifier hs-type">TypeParamType</span></a></span><span> </span><span id="local-6989586621684492969"><span class="annot"><span class="annottext">Liftedness
</span><a href="#local-6989586621684492969"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621684492968"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492968"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;'&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Liftedness -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="#local-6989586621684492969"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492968"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span id="local-6989586621684494360"><span id="local-6989586621684494361"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684492963"><span id="local-6989586621684492965"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494361"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494361"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494360"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ValBindBase"><span class="hs-identifier hs-type">ValBindBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494360"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494361"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>  </span><span id="local-6989586621684492952"><span class="annot"><span class="annottext">ppr :: ValBindBase f vn -&gt; Doc
</span><a href="#local-6989586621684492952"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ValBind"><span class="hs-identifier hs-type">ValBind</span></a></span><span> </span><span id="local-6989586621684492950"><span class="annot"><span class="annottext">Maybe (f EntryPoint)
</span><a href="#local-6989586621684492950"><span class="hs-identifier hs-var">entry</span></a></span></span><span> </span><span id="local-6989586621684492949"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492949"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684492948"><span class="annot"><span class="annottext">Maybe (TypeExp vn)
</span><a href="#local-6989586621684492948"><span class="hs-identifier hs-var">retdecl</span></a></span></span><span> </span><span id="local-6989586621684492947"><span class="annot"><span class="annottext">f StructRetType
</span><a href="#local-6989586621684492947"><span class="hs-identifier hs-var">rettype</span></a></span></span><span> </span><span id="local-6989586621684492946"><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492946"><span class="hs-identifier hs-var">tparams</span></a></span></span><span> </span><span id="local-6989586621684492945"><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684492945"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621684492944"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684492944"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe DocComment
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621684492943"><span class="annot"><span class="annottext">[AttrInfo vn]
</span><a href="#local-6989586621684492943"><span class="hs-identifier hs-var">attrs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(AttrInfo vn -&gt; Doc) -&gt; [AttrInfo vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">line</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; (AttrInfo vn -&gt; Doc) -&gt; AttrInfo vn -&gt; Doc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">AttrInfo vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[AttrInfo vn]
</span><a href="#local-6989586621684492943"><span class="hs-identifier hs-var">attrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621684492942"><span class="hs-identifier hs-var">fun</span></a></span><span>
</span><span id="line-463"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492949"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-464"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">sep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeParamBase vn -&gt; Doc) -&gt; [TypeParamBase vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeParamBase vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492946"><span class="hs-identifier hs-var">tparams</span></a></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; [Doc] -&gt; [Doc]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(PatBase f vn -&gt; Doc) -&gt; [PatBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">PatBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[PatBase f vn]
</span><a href="#local-6989586621684492945"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684492941"><span class="hs-identifier hs-var">retdecl'</span></a></span><span>
</span><span id="line-466"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; =&quot;</span></span><span>
</span><span id="line-467"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">indent</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684492944"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-469"></span><span>      </span><span id="local-6989586621684492942"><span class="annot"><span class="annottext">fun :: String
</span><a href="#local-6989586621684492942"><span class="hs-identifier hs-var hs-var">fun</span></a></span></span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Maybe (f EntryPoint) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe (f EntryPoint)
</span><a href="#local-6989586621684492950"><span class="hs-identifier hs-var">entry</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;entry&quot;</span></span><span>
</span><span id="line-471"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;def&quot;</span></span><span>
</span><span id="line-472"></span><span>      </span><span id="local-6989586621684492941"><span class="annot"><span class="annottext">retdecl' :: Doc
</span><a href="#local-6989586621684492941"><span class="hs-identifier hs-var hs-var">retdecl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StructRetType -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">(StructRetType -&gt; Doc) -&gt; Maybe StructRetType -&gt; Maybe Doc
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">f StructRetType -&gt; Maybe StructRetType
forall (f :: * -&gt; *) a. Annot f =&gt; f a -&gt; Maybe a
</span><a href="Language.Futhark.Pretty.html#unAnnot"><span class="hs-identifier hs-var">unAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">f StructRetType
</span><a href="#local-6989586621684492947"><span class="hs-identifier hs-var">rettype</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Doc -&gt; Maybe Doc -&gt; Maybe Doc
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a -&gt; m a -&gt; m a
</span><span class="hs-operator hs-var">`mplus`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeExp vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">(TypeExp vn -&gt; Doc) -&gt; Maybe (TypeExp vn) -&gt; Maybe Doc
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (TypeExp vn)
</span><a href="#local-6989586621684492948"><span class="hs-identifier hs-var">retdecl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-473"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684492928"><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684492928"><span class="hs-identifier hs-var">rettype'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">align</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684492928"><span class="hs-identifier hs-var">rettype'</span></a></span><span>
</span><span id="line-474"></span><span>        </span><span class="annot"><span class="annottext">Maybe Doc
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span></span></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span id="local-6989586621684494347"><span id="local-6989586621684494348"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684492923"><span id="local-6989586621684492925"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494348"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494348"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494347"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SpecBase"><span class="hs-identifier hs-type">SpecBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494347"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494348"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-477"></span><span>  </span><span id="local-6989586621684492909"><span class="annot"><span class="annottext">ppr :: SpecBase f vn -&gt; Doc
</span><a href="#local-6989586621684492909"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeAbbrSpec"><span class="hs-identifier hs-type">TypeAbbrSpec</span></a></span><span> </span><span id="local-6989586621684492907"><span class="annot"><span class="annottext">TypeBindBase f vn
</span><a href="#local-6989586621684492907"><span class="hs-identifier hs-var">tpsig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeBindBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeBindBase f vn
</span><a href="#local-6989586621684492907"><span class="hs-identifier hs-var">tpsig</span></a></span><span>
</span><span id="line-478"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeSpec"><span class="hs-identifier hs-type">TypeSpec</span></a></span><span> </span><span id="local-6989586621684492905"><span class="annot"><span class="annottext">Liftedness
</span><a href="#local-6989586621684492905"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621684492904"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492904"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684492903"><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492903"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe DocComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-479"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Liftedness -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">Liftedness
</span><a href="#local-6989586621684492905"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492904"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeParamBase vn -&gt; Doc) -&gt; [TypeParamBase vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeParamBase vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492903"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ValSpec"><span class="hs-identifier hs-type">ValSpec</span></a></span><span> </span><span id="local-6989586621684492901"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492901"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684492900"><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492900"><span class="hs-identifier hs-var">tparams</span></a></span></span><span> </span><span id="local-6989586621684492899"><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684492899"><span class="hs-identifier hs-var">vtype</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe DocComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-481"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;val&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492901"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeParamBase vn -&gt; Doc) -&gt; [TypeParamBase vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeParamBase vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492900"><span class="hs-identifier hs-var">tparams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684492899"><span class="hs-identifier hs-var">vtype</span></a></span><span>
</span><span id="line-482"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModSpec"><span class="hs-identifier hs-type">ModSpec</span></a></span><span> </span><span id="local-6989586621684492897"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492897"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684492896"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492896"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe DocComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-483"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;module&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492897"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492896"><span class="hs-identifier hs-var">sig</span></a></span><span>
</span><span id="line-484"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#IncludeSpec"><span class="hs-identifier hs-type">IncludeSpec</span></a></span><span> </span><span id="local-6989586621684492894"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492894"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-485"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;include&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492894"><span class="hs-identifier hs-var">e</span></a></span></span></span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span id="local-6989586621684494352"><span id="local-6989586621684494353"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684492889"><span id="local-6989586621684492891"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494353"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494353"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494352"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigExpBase"><span class="hs-identifier hs-type">SigExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494352"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494353"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-488"></span><span>  </span><span id="local-6989586621684492874"><span class="annot"><span class="annottext">ppr :: SigExpBase f vn -&gt; Doc
</span><a href="#local-6989586621684492874"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigVar"><span class="hs-identifier hs-type">SigVar</span></a></span><span> </span><span id="local-6989586621684492872"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492872"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492872"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-489"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigParens"><span class="hs-identifier hs-type">SigParens</span></a></span><span> </span><span id="local-6989586621684492870"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492870"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492870"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-490"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigSpecs"><span class="hs-identifier hs-type">SigSpecs</span></a></span><span> </span><span id="local-6989586621684492868"><span class="annot"><span class="annottext">[SpecBase f vn]
</span><a href="#local-6989586621684492868"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Doc -&gt; Doc
</span><a href="Futhark.Util.Pretty.html#nestedBlock"><span class="hs-identifier hs-var">nestedBlock</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">stack</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; Doc) -&gt; [Doc] -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; [Doc] -&gt; [Doc]
</span><span class="hs-identifier hs-var">punctuate</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">line</span></span><span> </span><span class="annot"><span class="annottext">([Doc] -&gt; [Doc]) -&gt; [Doc] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SpecBase f vn -&gt; Doc) -&gt; [SpecBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">SpecBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[SpecBase f vn]
</span><a href="#local-6989586621684492868"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigWith"><span class="hs-identifier hs-type">SigWith</span></a></span><span> </span><span id="local-6989586621684492866"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492866"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#TypeRef"><span class="hs-identifier hs-type">TypeRef</span></a></span><span> </span><span id="local-6989586621684492864"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492864"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621684492863"><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492863"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621684492862"><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684492862"><span class="hs-identifier hs-var">td</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-492"></span><span>    </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492866"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492864"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TypeParamBase vn -&gt; Doc) -&gt; [TypeParamBase vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TypeParamBase vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[TypeParamBase vn]
</span><a href="#local-6989586621684492863"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; =&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">TypeDeclBase f vn
</span><a href="#local-6989586621684492862"><span class="hs-identifier hs-var">td</span></a></span><span>
</span><span id="line-493"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigArrow"><span class="hs-identifier hs-type">SigArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621684492860"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492860"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621684492859"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492859"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621684492858"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492858"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-494"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492860"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492859"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492858"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-495"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigArrow"><span class="hs-identifier hs-type">SigArrow</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe vn
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621684492857"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492857"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621684492856"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492856"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492857"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492856"><span class="hs-identifier hs-var">e2</span></a></span></span></span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span id="local-6989586621684494362"><span id="local-6989586621684494363"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684492851"><span id="local-6989586621684492853"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494363"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494363"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494362"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigBindBase"><span class="hs-identifier hs-type">SigBindBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494362"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494363"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-499"></span><span>  </span><span id="local-6989586621684492848"><span class="annot"><span class="annottext">ppr :: SigBindBase f vn -&gt; Doc
</span><a href="#local-6989586621684492848"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#SigBind"><span class="hs-identifier hs-type">SigBind</span></a></span><span> </span><span id="local-6989586621684492846"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492846"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684492845"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492845"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe DocComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-500"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;module type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492846"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">equals</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492845"><span class="hs-identifier hs-var">e</span></a></span></span></span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span id="local-6989586621684494354"><span id="local-6989586621684494355"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684492840"><span id="local-6989586621684492842"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494355"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494355"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494354"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModParamBase"><span class="hs-identifier hs-type">ModParamBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494354"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494355"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-503"></span><span>  </span><span id="local-6989586621684492836"><span class="annot"><span class="annottext">ppr :: ModParamBase f vn -&gt; Doc
</span><a href="#local-6989586621684492836"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModParam"><span class="hs-identifier hs-type">ModParam</span></a></span><span> </span><span id="local-6989586621684492834"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492834"><span class="hs-identifier hs-var">pname</span></a></span></span><span> </span><span id="local-6989586621684492833"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492833"><span class="hs-identifier hs-var">psig</span></a></span></span><span> </span><span class="annot"><span class="annottext">f [VName]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><span class="annottext">Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parens</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492834"><span class="hs-identifier hs-var">pname</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492833"><span class="hs-identifier hs-var">psig</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span id="local-6989586621684494364"><span id="local-6989586621684494365"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621684492828"><span id="local-6989586621684492830"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494365"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494365"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494364"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pretty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModBindBase"><span class="hs-identifier hs-type">ModBindBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494364"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494365"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-507"></span><span>  </span><span id="local-6989586621684492823"><span class="annot"><span class="annottext">ppr :: ModBindBase f vn -&gt; Doc
</span><a href="#local-6989586621684492823"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Futhark.Syntax.html#ModBind"><span class="hs-identifier hs-type">ModBind</span></a></span><span> </span><span id="local-6989586621684492821"><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492821"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621684492820"><span class="annot"><span class="annottext">[ModParamBase f vn]
</span><a href="#local-6989586621684492820"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621684492819"><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><a href="#local-6989586621684492819"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span id="local-6989586621684492818"><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684492818"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe DocComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-508"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;module&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">vn
</span><a href="#local-6989586621684492821"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Doc] -&gt; Doc
</span><span class="hs-identifier hs-var">spread</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ModParamBase f vn -&gt; Doc) -&gt; [ModParamBase f vn] -&gt; [Doc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ModParamBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">[ModParamBase f vn]
</span><a href="#local-6989586621684492820"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684492817"><span class="hs-identifier hs-var">sig'</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; =&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">ModExpBase f vn
</span><a href="#local-6989586621684492818"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-509"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-510"></span><span>      </span><span id="local-6989586621684492817"><span class="annot"><span class="annottext">sig' :: Doc
</span><a href="#local-6989586621684492817"><span class="hs-identifier hs-var hs-var">sig'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><a href="#local-6989586621684492819"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-511"></span><span>        </span><span class="annot"><span class="annottext">Maybe (SigExpBase f vn, f (Map VName VName))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-512"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621684492810"><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492810"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">f (Map VName VName)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Doc
</span><span class="hs-identifier hs-var">colon</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">SigExpBase f vn
</span><a href="#local-6989586621684492810"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span></span></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span id="local-6989586621684492809"><span class="annot"><a href="Language.Futhark.Pretty.html#ppBinOp"><span class="hs-identifier hs-type">ppBinOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492809"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684492809"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span><span>
</span><span id="line-515"></span><span id="ppBinOp"><span class="annot"><span class="annottext">ppBinOp :: forall vn. IsName vn =&gt; QualName vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#ppBinOp"><span class="hs-identifier hs-var hs-var">ppBinOp</span></a></span></span><span> </span><span id="local-6989586621684492803"><span class="annot"><span class="annottext">QualName v
</span><a href="#local-6989586621684492803"><span class="hs-identifier hs-var">bop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-516"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684492802"><span class="hs-identifier hs-var">leading</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-517"></span><span>    </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Backtick"><span class="hs-identifier hs-var">Backtick</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;`&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">QualName v -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName v
</span><a href="#local-6989586621684492803"><span class="hs-identifier hs-var">bop</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;`&quot;</span></span><span>
</span><span id="line-518"></span><span>    </span><span class="annot"><span class="annottext">BinOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QualName v -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName v
</span><a href="#local-6989586621684492803"><span class="hs-identifier hs-var">bop</span></a></span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-520"></span><span>    </span><span id="local-6989586621684492802"><span class="annot"><span class="annottext">leading :: BinOp
</span><a href="#local-6989586621684492802"><span class="hs-identifier hs-var hs-var">leading</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-521"></span><span>      </span><span class="annot"><span class="annottext">Name -&gt; BinOp
</span><a href="Language.Futhark.Prop.html#leadingOperator"><span class="hs-identifier hs-var">leadingOperator</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; BinOp) -&gt; Name -&gt; BinOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier hs-var">nameFromString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Name) -&gt; String -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; String) -&gt; Doc -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">(v -&gt; Doc) -&gt; v -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualName v -&gt; v
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName v
</span><a href="#local-6989586621684492803"><span class="hs-identifier hs-var">bop</span></a></span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span id="local-6989586621684494398"><span id="local-6989586621684494399"><span class="annot"><a href="Language.Futhark.Pretty.html#prettyBinOp"><span class="hs-identifier hs-type">prettyBinOp</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621684494399"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#IsName"><span class="hs-identifier hs-type">IsName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494399"><span class="hs-identifier hs-type">vn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Futhark.Pretty.html#Annot"><span class="hs-identifier hs-type">Annot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494398"><span class="hs-identifier hs-type">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-525"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-526"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#QualName"><span class="hs-identifier hs-type">QualName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494399"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-527"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494398"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494399"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-528"></span><span>  </span><span class="annot"><a href="Language.Futhark.Syntax.html#ExpBase"><span class="hs-identifier hs-type">ExpBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494398"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621684494399"><span class="hs-identifier hs-type">vn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-529"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Doc</span></span></span></span><span>
</span><span id="line-530"></span><span id="prettyBinOp"><span class="annot"><span class="annottext">prettyBinOp :: forall vn (f :: * -&gt; *).
(Eq vn, IsName vn, Annot f) =&gt;
Int -&gt; QualName vn -&gt; ExpBase f vn -&gt; ExpBase f vn -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#prettyBinOp"><span class="hs-identifier hs-var hs-var">prettyBinOp</span></a></span></span><span> </span><span id="local-6989586621684492789"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684492789"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621684492788"><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492788"><span class="hs-identifier hs-var">bop</span></a></span></span><span> </span><span id="local-6989586621684492787"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684492787"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621684492786"><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684492786"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-531"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Doc -&gt; Doc
</span><span class="hs-identifier hs-var">parensIf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684492789"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684492785"><span class="hs-identifier hs-var">symPrecedence</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; Doc) -&gt; Doc -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-532"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684492785"><span class="hs-identifier hs-var">symPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684492787"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-533"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+/&gt;</span></span><span> </span><span class="annot"><span class="annottext">Doc
</span><a href="#local-6989586621684492784"><span class="hs-identifier hs-var">bop'</span></a></span><span>
</span><span id="line-534"></span><span>      </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
</span><span class="hs-operator hs-var">&lt;+&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ExpBase f vn -&gt; Doc
forall a. Pretty a =&gt; Int -&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">pprPrec</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621684492783"><span class="hs-identifier hs-var">symRPrecedence</span></a></span><span> </span><span class="annot"><span class="annottext">ExpBase f vn
</span><a href="#local-6989586621684492786"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-536"></span><span>    </span><span id="local-6989586621684492784"><span class="annot"><span class="annottext">bop' :: Doc
</span><a href="#local-6989586621684492784"><span class="hs-identifier hs-var hs-var">bop'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684492777"><span class="hs-identifier hs-var">leading</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-537"></span><span>      </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Backtick"><span class="hs-identifier hs-var">Backtick</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;`&quot;</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492788"><span class="hs-identifier hs-var">bop</span></a></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; Doc -&gt; Doc
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Doc
</span><span class="hs-identifier hs-var">text</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;`&quot;</span></span><span>
</span><span id="line-538"></span><span>      </span><span class="annot"><span class="annottext">BinOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; Doc
forall a. Pretty a =&gt; a -&gt; Doc
</span><span class="hs-identifier hs-var">ppr</span></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492788"><span class="hs-identifier hs-var">bop</span></a></span><span>
</span><span id="line-539"></span><span>    </span><span id="local-6989586621684492777"><span class="annot"><span class="annottext">leading :: BinOp
</span><a href="#local-6989586621684492777"><span class="hs-identifier hs-var hs-var">leading</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; BinOp
</span><a href="Language.Futhark.Prop.html#leadingOperator"><span class="hs-identifier hs-var">leadingOperator</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; BinOp) -&gt; Name -&gt; BinOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
</span><a href="Language.Futhark.Core.html#nameFromString"><span class="hs-identifier hs-var">nameFromString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Name) -&gt; String -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Doc -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Futhark.Util.Pretty.html#pretty"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; String) -&gt; Doc -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">vn -&gt; Doc
forall v. IsName v =&gt; v -&gt; Doc
</span><a href="Language.Futhark.Pretty.html#pprName"><span class="hs-identifier hs-var">pprName</span></a></span><span> </span><span class="annot"><span class="annottext">(vn -&gt; Doc) -&gt; vn -&gt; Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualName vn -&gt; vn
forall vn. QualName vn -&gt; vn
</span><a href="Language.Futhark.Syntax.html#qualLeaf"><span class="hs-identifier hs-var hs-var">qualLeaf</span></a></span><span> </span><span class="annot"><span class="annottext">QualName vn
</span><a href="#local-6989586621684492788"><span class="hs-identifier hs-var">bop</span></a></span><span>
</span><span id="line-540"></span><span>    </span><span id="local-6989586621684492785"><span class="annot"><span class="annottext">symPrecedence :: Int
</span><a href="#local-6989586621684492785"><span class="hs-identifier hs-var hs-var">symPrecedence</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; Int
forall {a}. Num a =&gt; BinOp -&gt; a
</span><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684492777"><span class="hs-identifier hs-var">leading</span></a></span><span>
</span><span id="line-541"></span><span>    </span><span id="local-6989586621684492783"><span class="annot"><span class="annottext">symRPrecedence :: Int
</span><a href="#local-6989586621684492783"><span class="hs-identifier hs-var hs-var">symRPrecedence</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; Int
forall {a}. Num a =&gt; BinOp -&gt; a
</span><a href="#local-6989586621684492771"><span class="hs-identifier hs-var">rprecedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684492777"><span class="hs-identifier hs-var">leading</span></a></span><span>
</span><span id="line-542"></span><span>    </span><span id="local-6989586621684492773"><span class="annot"><span class="annottext">precedence :: BinOp -&gt; a
</span><a href="#local-6989586621684492773"><span class="hs-identifier hs-var hs-var">precedence</span></a></span></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#PipeRight"><span class="hs-identifier hs-var">PipeRight</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span>
</span><span id="line-543"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#PipeLeft"><span class="hs-identifier hs-var">PipeLeft</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span>
</span><span id="line-544"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#LogAnd"><span class="hs-identifier hs-var">LogAnd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span>
</span><span id="line-545"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#LogOr"><span class="hs-identifier hs-var">LogOr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">0</span></span><span>
</span><span id="line-546"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Band"><span class="hs-identifier hs-var">Band</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span>
</span><span id="line-547"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Bor"><span class="hs-identifier hs-var">Bor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span>
</span><span id="line-548"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Xor"><span class="hs-identifier hs-var">Xor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">1</span></span><span>
</span><span id="line-549"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Equal"><span class="hs-identifier hs-var">Equal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">2</span></span><span>
</span><span id="line-550"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#NotEqual"><span class="hs-identifier hs-var">NotEqual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">2</span></span><span>
</span><span id="line-551"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Less"><span class="hs-identifier hs-var">Less</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">2</span></span><span>
</span><span id="line-552"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Leq"><span class="hs-identifier hs-var">Leq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">2</span></span><span>
</span><span id="line-553"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Greater"><span class="hs-identifier hs-var">Greater</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">2</span></span><span>
</span><span id="line-554"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Geq"><span class="hs-identifier hs-var">Geq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">2</span></span><span>
</span><span id="line-555"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#ShiftL"><span class="hs-identifier hs-var">ShiftL</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">3</span></span><span>
</span><span id="line-556"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#ShiftR"><span class="hs-identifier hs-var">ShiftR</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">3</span></span><span>
</span><span id="line-557"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Plus"><span class="hs-identifier hs-var">Plus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">4</span></span><span>
</span><span id="line-558"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Minus"><span class="hs-identifier hs-var">Minus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">4</span></span><span>
</span><span id="line-559"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Times"><span class="hs-identifier hs-var">Times</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">5</span></span><span>
</span><span id="line-560"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Divide"><span class="hs-identifier hs-var">Divide</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">5</span></span><span>
</span><span id="line-561"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Mod"><span class="hs-identifier hs-var">Mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">5</span></span><span>
</span><span id="line-562"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Quot"><span class="hs-identifier hs-var">Quot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">5</span></span><span>
</span><span id="line-563"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Rem"><span class="hs-identifier hs-var">Rem</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">5</span></span><span>
</span><span id="line-564"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Pow"><span class="hs-identifier hs-var">Pow</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">6</span></span><span>
</span><span id="line-565"></span><span>    </span><span class="annot"><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Backtick"><span class="hs-identifier hs-var">Backtick</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-number">9</span></span><span>
</span><span id="line-566"></span><span>    </span><span id="local-6989586621684492771"><span class="annot"><span class="annottext">rprecedence :: BinOp -&gt; p
</span><a href="#local-6989586621684492771"><span class="hs-identifier hs-var hs-var">rprecedence</span></a></span></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Minus"><span class="hs-identifier hs-var">Minus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-number">10</span></span><span>
</span><span id="line-567"></span><span>    </span><span class="annot"><a href="#local-6989586621684492771"><span class="hs-identifier hs-var">rprecedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="Language.Futhark.Syntax.html#Divide"><span class="hs-identifier hs-var">Divide</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">p
</span><span class="hs-number">10</span></span><span>
</span><span id="line-568"></span><span>    </span><span class="annot"><a href="#local-6989586621684492771"><span class="hs-identifier hs-var">rprecedence</span></a></span><span> </span><span id="local-6989586621684492716"><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684492716"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinOp -&gt; p
forall {a}. Num a =&gt; BinOp -&gt; a
</span><a href="#local-6989586621684492773"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="annot"><span class="annottext">BinOp
</span><a href="#local-6989586621684492716"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-569"></span></pre></body></html>