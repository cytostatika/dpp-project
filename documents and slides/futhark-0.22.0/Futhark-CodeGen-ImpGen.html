<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Futhark.CodeGen.ImpGen</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">futhark-0.22.0: An optimising compiler for a functional, array-oriented language.</span><ul class="links" id="page-menu"><li><a href="src/Futhark.CodeGen.ImpGen.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Futhark.CodeGen.ImpGen</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Entry Points</a></li><li><a href="#g:2">Pluggable Compiler</a></li><li><a href="#g:3">Monadic Compiler Interface</a></li><li><a href="#g:4">Lookups</a></li><li><a href="#g:5">Building Blocks</a></li><li><a href="#g:6">Constructing code.</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:compileProg">compileProg</a> :: (<a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner, <a href="Futhark-IR-Prop-Names.html#t:FreeIn" title="Futhark.IR.Prop.Names">FreeIn</a> op, <a href="Futhark-MonadFreshNames.html#t:MonadFreshNames" title="Futhark.MonadFreshNames">MonadFreshNames</a> m) =&gt; r -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r op -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Prog" title="Futhark.IR.Syntax">Prog</a> rep -&gt; m (<a href="Language-Futhark-Warnings.html#t:Warnings" title="Language.Futhark.Warnings">Warnings</a>, <a href="Futhark-CodeGen-ImpCode.html#t:Definitions" title="Futhark.CodeGen.ImpCode">Definitions</a> op)</li><li class="src short"><span class="keyword">type</span> <a href="#t:OpCompiler">OpCompiler</a> rep r op = <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Rep.html#t:Op" title="Futhark.IR.Rep">Op</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:ExpCompiler">ExpCompiler</a> rep r op = <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:CopyCompiler">CopyCompiler</a> rep r op = <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:StmsCompiler">StmsCompiler</a> rep r op = <a href="Futhark-IR-Prop-Names.html#t:Names" title="Futhark.IR.Prop.Names">Names</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:AllocCompiler">AllocCompiler</a> rep r op = <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Operations">Operations</a> rep r op = <a href="#v:Operations">Operations</a> {<ul class="subs"><li><a href="#v:opsExpCompiler">opsExpCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ExpCompiler" title="Futhark.CodeGen.ImpGen">ExpCompiler</a> rep r op</li><li><a href="#v:opsOpCompiler">opsOpCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:OpCompiler" title="Futhark.CodeGen.ImpGen">OpCompiler</a> rep r op</li><li><a href="#v:opsStmsCompiler">opsStmsCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:StmsCompiler" title="Futhark.CodeGen.ImpGen">StmsCompiler</a> rep r op</li><li><a href="#v:opsCopyCompiler">opsCopyCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:CopyCompiler" title="Futhark.CodeGen.ImpGen">CopyCompiler</a> rep r op</li><li><a href="#v:opsAllocCompilers">opsAllocCompilers</a> :: Map <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> (<a href="Futhark-CodeGen-ImpGen.html#t:AllocCompiler" title="Futhark.CodeGen.ImpGen">AllocCompiler</a> rep r op)</li></ul>}</li><li class="src short"><a href="#v:defaultOperations">defaultOperations</a> :: (<a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner, <a href="Futhark-IR-Prop-Names.html#t:FreeIn" title="Futhark.IR.Prop.Names">FreeIn</a> op) =&gt; <a href="Futhark-CodeGen-ImpGen.html#t:OpCompiler" title="Futhark.CodeGen.ImpGen">OpCompiler</a> rep r op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r op</li><li class="src short"><span class="keyword">data</span> <a href="#t:MemLoc">MemLoc</a> = <a href="#v:MemLoc">MemLoc</a> {<ul class="subs"><li><a href="#v:memLocName">memLocName</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li><a href="#v:memLocShape">memLocShape</a> :: [<a href="Futhark-CodeGen-ImpCode.html#t:DimSize" title="Futhark.CodeGen.ImpCode">DimSize</a>]</li><li><a href="#v:memLocIxFun">memLocIxFun</a> :: <a href="Futhark-IR-Mem-IxFun.html#t:IxFun" title="Futhark.IR.Mem.IxFun">IxFun</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)</li></ul>}</li><li class="src short"><a href="#v:sliceMemLoc">sliceMemLoc</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Slice" title="Futhark.IR.Syntax.Core">Slice</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:MemEntry">MemEntry</a> = <a href="#v:MemEntry">MemEntry</a> {<ul class="subs"><li><a href="#v:entryMemSpace">entryMemSpace</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a></li></ul>}</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ScalarEntry">ScalarEntry</a> = <a href="#v:ScalarEntry">ScalarEntry</a> {<ul class="subs"><li><a href="#v:entryScalarType">entryScalarType</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ImpM">ImpM</a> rep r op a</li><li class="src short"><a href="#v:localDefaultSpace">localDefaultSpace</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a</li><li class="src short"><a href="#v:askFunction">askFunction</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (Maybe <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a>)</li><li class="src short"><a href="#v:newVNameForFun">newVNameForFun</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:nameForFun">nameForFun</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a></li><li class="src short"><a href="#v:askEnv">askEnv</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op r</li><li class="src short"><a href="#v:localEnv">localEnv</a> :: (r -&gt; r) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a</li><li class="src short"><a href="#v:localOps">localOps</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a</li><li class="src short"><span class="keyword">type</span> <a href="#t:VTable">VTable</a> rep = Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> (<a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep)</li><li class="src short"><a href="#v:getVTable">getVTable</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:VTable" title="Futhark.CodeGen.ImpGen">VTable</a> rep)</li><li class="src short"><a href="#v:localVTable">localVTable</a> :: (<a href="Futhark-CodeGen-ImpGen.html#t:VTable" title="Futhark.CodeGen.ImpGen">VTable</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:VTable" title="Futhark.CodeGen.ImpGen">VTable</a> rep) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a</li><li class="src short"><a href="#v:subImpM">subImpM</a> :: r' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r' op' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r' op' a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (a, <a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op')</li><li class="src short"><a href="#v:subImpM_">subImpM_</a> :: r' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r' op' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r' op' a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op')</li><li class="src short"><a href="#v:emit">emit</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:emitFunction">emitFunction</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Function" title="Futhark.CodeGen.ImpCode">Function</a> op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:hasFunction">hasFunction</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op Bool</li><li class="src short"><a href="#v:collect">collect</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op)</li><li class="src short"><a href="#v:collect-39-">collect'</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (a, <a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op)</li><li class="src short"><a href="#v:comment">comment</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:VarEntry">VarEntry</a> rep<ul class="subs"><li>= <a href="#v:ArrayVar">ArrayVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) <a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a></li><li>| <a href="#v:ScalarVar">ScalarVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) <a href="Futhark-CodeGen-ImpGen.html#t:ScalarEntry" title="Futhark.CodeGen.ImpGen">ScalarEntry</a></li><li>| <a href="#v:MemVar">MemVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) <a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a></li><li>| <a href="#v:AccVar">AccVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Shape" title="Futhark.IR.Syntax.Core">Shape</a>, [<a href="Futhark-IR-Syntax-Core.html#t:Type" title="Futhark.IR.Syntax.Core">Type</a>])</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ArrayEntry">ArrayEntry</a> = <a href="#v:ArrayEntry">ArrayEntry</a> {<ul class="subs"><li><a href="#v:entryArrayLoc">entryArrayLoc</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a></li><li><a href="#v:entryArrayElemType">entryArrayElemType</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a></li></ul>}</li><li class="src short"><a href="#v:lookupVar">lookupVar</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep)</li><li class="src short"><a href="#v:lookupArray">lookupArray</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a></li><li class="src short"><a href="#v:lookupMemory">lookupMemory</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a></li><li class="src short"><a href="#v:lookupAcc">lookupAcc</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>], [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>], Maybe (<a href="Futhark-IR-Syntax.html#t:Lambda" title="Futhark.IR.Syntax">Lambda</a> rep))</li><li class="src short"><span class="keyword">data</span> <a href="#t:TV">TV</a> t</li><li class="src short"><a href="#v:mkTV">mkTV</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t</li><li class="src short"><a href="#v:tvSize">tvSize</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:DimSize" title="Futhark.CodeGen.ImpCode">DimSize</a></li><li class="src short"><a href="#v:tvExp">tvExp</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t</li><li class="src short"><a href="#v:tvVar">tvVar</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:ToExp">ToExp</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:toExp">toExp</a> :: a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a></li><li><a href="#v:toExp-39-">toExp'</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; a -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a></li><li><a href="#v:toInt64Exp">toInt64Exp</a> :: a -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a></li><li><a href="#v:toBoolExp">toBoolExp</a> :: a -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool</li></ul></li><li class="src short"><a href="#v:compileAlloc">compileAlloc</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:everythingVolatile">everythingVolatile</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a</li><li class="src short"><a href="#v:compileBody">compileBody</a> :: <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Body" title="Futhark.IR.Syntax">Body</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:compileBody-39-">compileBody'</a> :: [<a href="Futhark-IR-Syntax-Core.html#t:Param" title="Futhark.IR.Syntax.Core">Param</a> dec] -&gt; <a href="Futhark-IR-Syntax.html#t:Body" title="Futhark.IR.Syntax">Body</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:compileLoopBody">compileLoopBody</a> :: <a href="Futhark-IR-Prop-Types.html#t:Typed" title="Futhark.IR.Prop.Types">Typed</a> dec =&gt; [<a href="Futhark-IR-Syntax-Core.html#t:Param" title="Futhark.IR.Syntax.Core">Param</a> dec] -&gt; <a href="Futhark-IR-Syntax.html#t:Body" title="Futhark.IR.Syntax">Body</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:defCompileStms">defCompileStms</a> :: (<a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner, <a href="Futhark-IR-Prop-Names.html#t:FreeIn" title="Futhark.IR.Prop.Names">FreeIn</a> op) =&gt; <a href="Futhark-IR-Prop-Names.html#t:Names" title="Futhark.IR.Prop.Names">Names</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:compileStms">compileStms</a> :: <a href="Futhark-IR-Prop-Names.html#t:Names" title="Futhark.IR.Prop.Names">Names</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:compileExp">compileExp</a> :: <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:defCompileExp">defCompileExp</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:fullyIndexArray">fullyIndexArray</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a>, <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Elements" title="Futhark.CodeGen.ImpCode">Elements</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>))</li><li class="src short"><a href="#v:fullyIndexArray-39-">fullyIndexArray'</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a>, <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Elements" title="Futhark.CodeGen.ImpCode">Elements</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>))</li><li class="src short"><a href="#v:copy">copy</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:CopyCompiler" title="Futhark.CodeGen.ImpGen">CopyCompiler</a> rep r op</li><li class="src short"><a href="#v:copyDWIM">copyDWIM</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-IR-Syntax-Core.html#t:DimIndex" title="Futhark.IR.Syntax.Core">DimIndex</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)] -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; [<a href="Futhark-IR-Syntax-Core.html#t:DimIndex" title="Futhark.IR.Syntax.Core">DimIndex</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:copyDWIMFix">copyDWIMFix</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:copyElementWise">copyElementWise</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:CopyCompiler" title="Futhark.CodeGen.ImpGen">CopyCompiler</a> rep r op</li><li class="src short"><a href="#v:typeSize">typeSize</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Type" title="Futhark.IR.Syntax.Core">Type</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)</li><li class="src short"><a href="#v:inBounds">inBounds</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Slice" title="Futhark.IR.Syntax.Core">Slice</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool</li><li class="src short"><a href="#v:isMapTransposeCopy">isMapTransposeCopy</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; Maybe (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)</li><li class="src short"><a href="#v:dLParams">dLParams</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; [<a href="Futhark-IR-Syntax.html#t:LParam" title="Futhark.IR.Syntax">LParam</a> rep] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:dFParams">dFParams</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; [<a href="Futhark-IR-Syntax.html#t:FParam" title="Futhark.IR.Syntax">FParam</a> rep] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:dScope">dScope</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep) -&gt; <a href="Futhark-IR-Prop-Scope.html#t:Scope" title="Futhark.IR.Prop.Scope">Scope</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:dArray">dArray</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Mem.html#t:IxFun" title="Futhark.IR.Mem">IxFun</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:dPrim">dPrim</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t)</li><li class="src short"><a href="#v:dPrimVol">dPrimVol</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t)</li><li class="src short"><a href="#v:dPrim_">dPrim_</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:dPrimV_">dPrimV_</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:dPrimV">dPrimV</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t)</li><li class="src short"><a href="#v:dPrimVE">dPrimVE</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t)</li><li class="src short"><a href="#v:dIndexSpace">dIndexSpace</a> :: [(<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:dIndexSpace-39-">dIndexSpace'</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>]</li><li class="src short"><a href="#v:sFor">sFor</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sWhile">sWhile</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sComment">sComment</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sIf">sIf</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sWhen">sWhen</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sUnless">sUnless</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sOp">sOp</a> :: op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sDeclareMem">sDeclareMem</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:sAlloc">sAlloc</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:sAlloc_">sAlloc_</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sArray">sArray</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Mem.html#t:IxFun" title="Futhark.IR.Mem">IxFun</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:sArrayInMem">sArrayInMem</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:sAllocArray">sAllocArray</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:sAllocArrayPerm">sAllocArrayPerm</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; [Int] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:sStaticArray">sStaticArray</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:ArrayContents" title="Futhark.CodeGen.ImpCode">ArrayContents</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li class="src short"><a href="#v:sWrite">sWrite</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sUpdate">sUpdate</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Slice" title="Futhark.IR.Syntax.Core">Slice</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:sLoopNest">sLoopNest</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Shape" title="Futhark.IR.Syntax.Core">Shape</a> -&gt; ([<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:-60--45--45-">(&lt;--)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:-60--126--126-">(&lt;~~)</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:function">function</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:Param" title="Futhark.CodeGen.ImpCode">Param</a>] -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:Param" title="Futhark.CodeGen.ImpCode">Param</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short"><a href="#v:warn">warn</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; [loc] -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()</li><li class="src short">module <a href="Language-Futhark-Warnings.html">Language.Futhark.Warnings</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Entry Points</h1></a><div class="top"><p class="src"><a id="v:compileProg" class="def">compileProg</a> :: (<a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner, <a href="Futhark-IR-Prop-Names.html#t:FreeIn" title="Futhark.IR.Prop.Names">FreeIn</a> op, <a href="Futhark-MonadFreshNames.html#t:MonadFreshNames" title="Futhark.MonadFreshNames">MonadFreshNames</a> m) =&gt; r -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r op -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Prog" title="Futhark.IR.Syntax">Prog</a> rep -&gt; m (<a href="Language-Futhark-Warnings.html#t:Warnings" title="Language.Futhark.Warnings">Warnings</a>, <a href="Futhark-CodeGen-ImpCode.html#t:Definitions" title="Futhark.CodeGen.ImpCode">Definitions</a> op) <a href="src/Futhark.CodeGen.ImpGen.html#compileProg" class="link">Source</a> <a href="#v:compileProg" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Pluggable Compiler</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:OpCompiler" class="def">OpCompiler</a> rep r op = <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Rep.html#t:Op" title="Futhark.IR.Rep">Op</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#OpCompiler" class="link">Source</a> <a href="#t:OpCompiler" class="selflink">#</a></p><div class="doc"><p>How to compile an <code><a href="Futhark-IR-Rep.html#t:Op" title="Futhark.IR.Rep">Op</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ExpCompiler" class="def">ExpCompiler</a> rep r op = <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#ExpCompiler" class="link">Source</a> <a href="#t:ExpCompiler" class="selflink">#</a></p><div class="doc"><p>How to compile an <code><a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:CopyCompiler" class="def">CopyCompiler</a> rep r op = <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#CopyCompiler" class="link">Source</a> <a href="#t:CopyCompiler" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:StmsCompiler" class="def">StmsCompiler</a> rep r op = <a href="Futhark-IR-Prop-Names.html#t:Names" title="Futhark.IR.Prop.Names">Names</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#StmsCompiler" class="link">Source</a> <a href="#t:StmsCompiler" class="selflink">#</a></p><div class="doc"><p>How to compile some <code><a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:AllocCompiler" class="def">AllocCompiler</a> rep r op = <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#AllocCompiler" class="link">Source</a> <a href="#t:AllocCompiler" class="selflink">#</a></p><div class="doc"><p>An alternate way of compiling an allocation.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Operations" class="def">Operations</a> rep r op <a href="src/Futhark.CodeGen.ImpGen.html#Operations" class="link">Source</a> <a href="#t:Operations" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Operations" class="def">Operations</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:opsExpCompiler" class="def">opsExpCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ExpCompiler" title="Futhark.CodeGen.ImpGen">ExpCompiler</a> rep r op</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:opsOpCompiler" class="def">opsOpCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:OpCompiler" title="Futhark.CodeGen.ImpGen">OpCompiler</a> rep r op</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:opsStmsCompiler" class="def">opsStmsCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:StmsCompiler" title="Futhark.CodeGen.ImpGen">StmsCompiler</a> rep r op</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:opsCopyCompiler" class="def">opsCopyCompiler</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:CopyCompiler" title="Futhark.CodeGen.ImpGen">CopyCompiler</a> rep r op</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:opsAllocCompilers" class="def">opsAllocCompilers</a> :: Map <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> (<a href="Futhark-CodeGen-ImpGen.html#t:AllocCompiler" title="Futhark.CodeGen.ImpGen">AllocCompiler</a> rep r op)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultOperations" class="def">defaultOperations</a> :: (<a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner, <a href="Futhark-IR-Prop-Names.html#t:FreeIn" title="Futhark.IR.Prop.Names">FreeIn</a> op) =&gt; <a href="Futhark-CodeGen-ImpGen.html#t:OpCompiler" title="Futhark.CodeGen.ImpGen">OpCompiler</a> rep r op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r op <a href="src/Futhark.CodeGen.ImpGen.html#defaultOperations" class="link">Source</a> <a href="#v:defaultOperations" class="selflink">#</a></p><div class="doc"><p>An operations set for which the expression compiler always
 returns <code><a href="Futhark-CodeGen-ImpGen.html#v:defCompileExp" title="Futhark.CodeGen.ImpGen">defCompileExp</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MemLoc" class="def">MemLoc</a> <a href="src/Futhark.CodeGen.ImpGen.html#MemLoc" class="link">Source</a> <a href="#t:MemLoc" class="selflink">#</a></p><div class="doc"><p>When an array is declared, this is where it is stored.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MemLoc" class="def">MemLoc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:memLocName" class="def">memLocName</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:memLocShape" class="def">memLocShape</a> :: [<a href="Futhark-CodeGen-ImpCode.html#t:DimSize" title="Futhark.CodeGen.ImpCode">DimSize</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:memLocIxFun" class="def">memLocIxFun</a> :: <a href="Futhark-IR-Mem-IxFun.html#t:IxFun" title="Futhark.IR.Mem.IxFun">IxFun</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MemLoc">Instances</h4><details id="i:MemLoc" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MemLoc:Eq:1"></span> Eq <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a></span> <a href="src/Futhark.CodeGen.ImpGen.html#line-203" class="link">Source</a> <a href="#t:MemLoc" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MemLoc:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MemLoc:Show:2"></span> Show <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a></span> <a href="src/Futhark.CodeGen.ImpGen.html#line-203" class="link">Source</a> <a href="#t:MemLoc" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MemLoc:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:sliceMemLoc" class="def">sliceMemLoc</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Slice" title="Futhark.IR.Syntax.Core">Slice</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> <a href="src/Futhark.CodeGen.ImpGen.html#sliceMemLoc" class="link">Source</a> <a href="#v:sliceMemLoc" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:MemEntry" class="def">MemEntry</a> <a href="src/Futhark.CodeGen.ImpGen.html#MemEntry" class="link">Source</a> <a href="#t:MemEntry" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MemEntry" class="def">MemEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:entryMemSpace" class="def">entryMemSpace</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MemEntry">Instances</h4><details id="i:MemEntry" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MemEntry:Show:1"></span> Show <a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a></span> <a href="src/Futhark.CodeGen.ImpGen.html#line-223" class="link">Source</a> <a href="#t:MemEntry" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MemEntry:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ScalarEntry" class="def">ScalarEntry</a> <a href="src/Futhark.CodeGen.ImpGen.html#ScalarEntry" class="link">Source</a> <a href="#t:ScalarEntry" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ScalarEntry" class="def">ScalarEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:entryScalarType" class="def">entryScalarType</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ScalarEntry">Instances</h4><details id="i:ScalarEntry" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScalarEntry:Show:1"></span> Show <a href="Futhark-CodeGen-ImpGen.html#t:ScalarEntry" title="Futhark.CodeGen.ImpGen">ScalarEntry</a></span> <a href="src/Futhark.CodeGen.ImpGen.html#line-228" class="link">Source</a> <a href="#t:ScalarEntry" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScalarEntry:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ScalarEntry" title="Futhark.CodeGen.ImpGen">ScalarEntry</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ScalarEntry" title="Futhark.CodeGen.ImpGen">ScalarEntry</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-CodeGen-ImpGen.html#t:ScalarEntry" title="Futhark.CodeGen.ImpGen">ScalarEntry</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><a href="#g:3" id="g:3"><h1>Monadic Compiler Interface</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ImpM" class="def">ImpM</a> rep r op a <a href="src/Futhark.CodeGen.ImpGen.html#ImpM" class="link">Source</a> <a href="#t:ImpM" class="selflink">#</a></p><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ImpM">Instances</h4><details id="i:ImpM" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ImpM:HasScope:1"></span> <a href="Futhark-IR-Prop-Scope.html#t:HasScope" title="Futhark.IR.Prop.Scope">HasScope</a> <a href="Futhark-IR-SOACS.html#t:SOACS" title="Futhark.IR.SOACS">SOACS</a> (<a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op)</span> <a href="src/Futhark.CodeGen.ImpGen.html#line-317" class="link">Source</a> <a href="#t:ImpM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ImpM:HasScope:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lookupType">lookupType</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-IR-Syntax-Core.html#t:Type" title="Futhark.IR.Syntax.Core">Type</a> <a href="src/Futhark.IR.Prop.Scope.html#lookupType" class="link">Source</a> <a href="#v:lookupType" class="selflink">#</a></p><p class="src"><a href="#v:lookupInfo">lookupInfo</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-IR-Prop-Scope.html#t:NameInfo" title="Futhark.IR.Prop.Scope">NameInfo</a> <a href="Futhark-IR-SOACS.html#t:SOACS" title="Futhark.IR.SOACS">SOACS</a>) <a href="src/Futhark.IR.Prop.Scope.html#lookupInfo" class="link">Source</a> <a href="#v:lookupInfo" class="selflink">#</a></p><p class="src"><a href="#v:askScope">askScope</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-IR-Prop-Scope.html#t:Scope" title="Futhark.IR.Prop.Scope">Scope</a> <a href="Futhark-IR-SOACS.html#t:SOACS" title="Futhark.IR.SOACS">SOACS</a>) <a href="src/Futhark.IR.Prop.Scope.html#askScope" class="link">Source</a> <a href="#v:askScope" class="selflink">#</a></p><p class="src"><a href="#v:asksScope">asksScope</a> :: (<a href="Futhark-IR-Prop-Scope.html#t:Scope" title="Futhark.IR.Prop.Scope">Scope</a> <a href="Futhark-IR-SOACS.html#t:SOACS" title="Futhark.IR.SOACS">SOACS</a> -&gt; a) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="src/Futhark.IR.Prop.Scope.html#asksScope" class="link">Source</a> <a href="#v:asksScope" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ImpM:Monad:2"></span> <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> (<a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op)</span> <a href="src/Futhark.CodeGen.ImpGen.html#line-306" class="link">Source</a> <a href="#t:ImpM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ImpM:Monad:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; (a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ImpM:Functor:3"></span> <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Functor" title="Control.Monad.Compat">Functor</a> (<a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op)</span> <a href="src/Futhark.CodeGen.ImpGen.html#line-304" class="link">Source</a> <a href="#t:ImpM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ImpM:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ImpM:Applicative:4"></span> Applicative (<a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op)</span> <a href="src/Futhark.CodeGen.ImpGen.html#line-305" class="link">Source</a> <a href="#t:ImpM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ImpM:Applicative:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a</p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (a -&gt; b) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b</p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op c</p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b</p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op b -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ImpM:MonadFreshNames:5"></span> <a href="Futhark-MonadFreshNames.html#t:MonadFreshNames" title="Futhark.MonadFreshNames">MonadFreshNames</a> (<a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op)</span> <a href="src/Futhark.CodeGen.ImpGen.html#line-311" class="link">Source</a> <a href="#t:ImpM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ImpM:MonadFreshNames:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNameSource">getNameSource</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-FreshNames.html#t:VNameSource" title="Futhark.FreshNames">VNameSource</a> <a href="src/Futhark.MonadFreshNames.html#getNameSource" class="link">Source</a> <a href="#v:getNameSource" class="selflink">#</a></p><p class="src"><a href="#v:putNameSource">putNameSource</a> :: <a href="Futhark-FreshNames.html#t:VNameSource" title="Futhark.FreshNames">VNameSource</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.MonadFreshNames.html#putNameSource" class="link">Source</a> <a href="#v:putNameSource" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:localDefaultSpace" class="def">localDefaultSpace</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="src/Futhark.CodeGen.ImpGen.html#localDefaultSpace" class="link">Source</a> <a href="#v:localDefaultSpace" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:askFunction" class="def">askFunction</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (Maybe <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a>) <a href="src/Futhark.CodeGen.ImpGen.html#askFunction" class="link">Source</a> <a href="#v:askFunction" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newVNameForFun" class="def">newVNameForFun</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#newVNameForFun" class="link">Source</a> <a href="#v:newVNameForFun" class="selflink">#</a></p><div class="doc"><p>Generate a <code><a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></code>, prefixed with <code><a href="Futhark-CodeGen-ImpGen.html#v:askFunction" title="Futhark.CodeGen.ImpGen">askFunction</a></code> if it exists.</p></div></div><div class="top"><p class="src"><a id="v:nameForFun" class="def">nameForFun</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> <a href="src/Futhark.CodeGen.ImpGen.html#nameForFun" class="link">Source</a> <a href="#v:nameForFun" class="selflink">#</a></p><div class="doc"><p>Generate a <code><a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a></code>, prefixed with <code><a href="Futhark-CodeGen-ImpGen.html#v:askFunction" title="Futhark.CodeGen.ImpGen">askFunction</a></code> if it exists.</p></div></div><div class="top"><p class="src"><a id="v:askEnv" class="def">askEnv</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op r <a href="src/Futhark.CodeGen.ImpGen.html#askEnv" class="link">Source</a> <a href="#v:askEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:localEnv" class="def">localEnv</a> :: (r -&gt; r) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="src/Futhark.CodeGen.ImpGen.html#localEnv" class="link">Source</a> <a href="#v:localEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:localOps" class="def">localOps</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="src/Futhark.CodeGen.ImpGen.html#localOps" class="link">Source</a> <a href="#v:localOps" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:VTable" class="def">VTable</a> rep = Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> (<a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep) <a href="src/Futhark.CodeGen.ImpGen.html#VTable" class="link">Source</a> <a href="#t:VTable" class="selflink">#</a></p><div class="doc"><p>The symbol table used during compilation.</p></div></div><div class="top"><p class="src"><a id="v:getVTable" class="def">getVTable</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:VTable" title="Futhark.CodeGen.ImpGen">VTable</a> rep) <a href="src/Futhark.CodeGen.ImpGen.html#getVTable" class="link">Source</a> <a href="#v:getVTable" class="selflink">#</a></p><div class="doc"><p>Get the current symbol table.</p></div></div><div class="top"><p class="src"><a id="v:localVTable" class="def">localVTable</a> :: (<a href="Futhark-CodeGen-ImpGen.html#t:VTable" title="Futhark.CodeGen.ImpGen">VTable</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:VTable" title="Futhark.CodeGen.ImpGen">VTable</a> rep) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="src/Futhark.CodeGen.ImpGen.html#localVTable" class="link">Source</a> <a href="#v:localVTable" class="selflink">#</a></p><div class="doc"><p>Run an action with a modified symbol table.  All changes to the
 symbol table will be reverted once the action is done!</p></div></div><div class="top"><p class="src"><a id="v:subImpM" class="def">subImpM</a> :: r' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r' op' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r' op' a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (a, <a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op') <a href="src/Futhark.CodeGen.ImpGen.html#subImpM" class="link">Source</a> <a href="#v:subImpM" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:subImpM_" class="def">subImpM_</a> :: r' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:Operations" title="Futhark.CodeGen.ImpGen">Operations</a> rep r' op' -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r' op' a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op') <a href="src/Futhark.CodeGen.ImpGen.html#subImpM_" class="link">Source</a> <a href="#v:subImpM_" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emit" class="def">emit</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#emit" class="link">Source</a> <a href="#v:emit" class="selflink">#</a></p><div class="doc"><p>Emit some generated imperative code.</p></div></div><div class="top"><p class="src"><a id="v:emitFunction" class="def">emitFunction</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Function" title="Futhark.CodeGen.ImpCode">Function</a> op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#emitFunction" class="link">Source</a> <a href="#v:emitFunction" class="selflink">#</a></p><div class="doc"><p>Emit a function in the generated code.</p></div></div><div class="top"><p class="src"><a id="v:hasFunction" class="def">hasFunction</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op Bool <a href="src/Futhark.CodeGen.ImpGen.html#hasFunction" class="link">Source</a> <a href="#v:hasFunction" class="selflink">#</a></p><div class="doc"><p>Check if a function of a given name exists.</p></div></div><div class="top"><p class="src"><a id="v:collect" class="def">collect</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op) <a href="src/Futhark.CodeGen.ImpGen.html#collect" class="link">Source</a> <a href="#v:collect" class="selflink">#</a></p><div class="doc"><p>Execute a code generation action, returning the code that was
 emitted.</p></div></div><div class="top"><p class="src"><a id="v:collect-39-" class="def">collect'</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (a, <a href="Futhark-CodeGen-ImpCode.html#t:Code" title="Futhark.CodeGen.ImpCode">Code</a> op) <a href="src/Futhark.CodeGen.ImpGen.html#collect%27" class="link">Source</a> <a href="#v:collect-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:comment" class="def">comment</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#comment" class="link">Source</a> <a href="#v:comment" class="selflink">#</a></p><div class="doc"><p>Execute a code generation action, wrapping the generated code
 within a <code><a href="Futhark-CodeGen-ImpCode.html#v:Comment" title="Futhark.CodeGen.ImpCode">Comment</a></code> with the given description.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:VarEntry" class="def">VarEntry</a> rep <a href="src/Futhark.CodeGen.ImpGen.html#VarEntry" class="link">Source</a> <a href="#t:VarEntry" class="selflink">#</a></p><div class="doc"><p>Every non-scalar variable must be associated with an entry.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ArrayVar" class="def">ArrayVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) <a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ScalarVar" class="def">ScalarVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) <a href="Futhark-CodeGen-ImpGen.html#t:ScalarEntry" title="Futhark.CodeGen.ImpGen">ScalarEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:MemVar" class="def">MemVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) <a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:AccVar" class="def">AccVar</a> (Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep)) (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Shape" title="Futhark.IR.Syntax.Core">Shape</a>, [<a href="Futhark-IR-Syntax-Core.html#t:Type" title="Futhark.IR.Syntax.Core">Type</a>])</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:VarEntry">Instances</h4><details id="i:VarEntry" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:VarEntry:Show:1"></span> <a href="Futhark-IR-Rep.html#t:RepTypes" title="Futhark.IR.Rep">RepTypes</a> rep =&gt; Show (<a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep)</span> <a href="src/Futhark.CodeGen.ImpGen.html#line-236" class="link">Source</a> <a href="#t:VarEntry" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:VarEntry:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ArrayEntry" class="def">ArrayEntry</a> <a href="src/Futhark.CodeGen.ImpGen.html#ArrayEntry" class="link">Source</a> <a href="#t:ArrayEntry" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ArrayEntry" class="def">ArrayEntry</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:entryArrayLoc" class="def">entryArrayLoc</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:entryArrayElemType" class="def">entryArrayElemType</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ArrayEntry">Instances</h4><details id="i:ArrayEntry" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ArrayEntry:Show:1"></span> Show <a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a></span> <a href="src/Futhark.CodeGen.ImpGen.html#line-217" class="link">Source</a> <a href="#t:ArrayEntry" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ArrayEntry:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><a href="#g:4" id="g:4"><h1>Lookups</h1></a><div class="top"><p class="src"><a id="v:lookupVar" class="def">lookupVar</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:VarEntry" title="Futhark.CodeGen.ImpGen">VarEntry</a> rep) <a href="src/Futhark.CodeGen.ImpGen.html#lookupVar" class="link">Source</a> <a href="#v:lookupVar" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupArray" class="def">lookupArray</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpGen.html#t:ArrayEntry" title="Futhark.CodeGen.ImpGen">ArrayEntry</a> <a href="src/Futhark.CodeGen.ImpGen.html#lookupArray" class="link">Source</a> <a href="#v:lookupArray" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupMemory" class="def">lookupMemory</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpGen.html#t:MemEntry" title="Futhark.CodeGen.ImpGen">MemEntry</a> <a href="src/Futhark.CodeGen.ImpGen.html#lookupMemory" class="link">Source</a> <a href="#v:lookupMemory" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupAcc" class="def">lookupAcc</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>], [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>], Maybe (<a href="Futhark-IR-Syntax.html#t:Lambda" title="Futhark.IR.Syntax">Lambda</a> rep)) <a href="src/Futhark.CodeGen.ImpGen.html#lookupAcc" class="link">Source</a> <a href="#v:lookupAcc" class="selflink">#</a></p><div class="doc"><p>In the case of a histogram-like accumulator, also sets the index
 parameters.</p></div></div><a href="#g:5" id="g:5"><h1>Building Blocks</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TV" class="def">TV</a> t <a href="src/Futhark.CodeGen.ImpGen.html#TV" class="link">Source</a> <a href="#t:TV" class="selflink">#</a></p><div class="doc"><p>A typed variable, which we can turn into a typed expression, or
 use as the target for an assignment.  This is used to aid in type
 safety when doing code generation, by keeping the types straight.
 It is still easy to cheat when you need to.</p></div></div><div class="top"><p class="src"><a id="v:mkTV" class="def">mkTV</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t <a href="src/Futhark.CodeGen.ImpGen.html#mkTV" class="link">Source</a> <a href="#v:mkTV" class="selflink">#</a></p><div class="doc"><p>Create a typed variable from a name and a dynamic type.  Note
 that there is no guarantee that the dynamic type corresponds to the
 inferred static type, but the latter will at least have to be used
 consistently.</p></div></div><div class="top"><p class="src"><a id="v:tvSize" class="def">tvSize</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:DimSize" title="Futhark.CodeGen.ImpCode">DimSize</a> <a href="src/Futhark.CodeGen.ImpGen.html#tvSize" class="link">Source</a> <a href="#v:tvSize" class="selflink">#</a></p><div class="doc"><p>Convert a typed variable to a size (a SubExp).</p></div></div><div class="top"><p class="src"><a id="v:tvExp" class="def">tvExp</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t <a href="src/Futhark.CodeGen.ImpGen.html#tvExp" class="link">Source</a> <a href="#v:tvExp" class="selflink">#</a></p><div class="doc"><p>Convert a typed variable to a similarly typed expression.</p></div></div><div class="top"><p class="src"><a id="v:tvVar" class="def">tvVar</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#tvVar" class="link">Source</a> <a href="#v:tvVar" class="selflink">#</a></p><div class="doc"><p>Extract the underlying variable name from a typed variable.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:ToExp" class="def">ToExp</a> a <span class="keyword">where</span> <a href="src/Futhark.CodeGen.ImpGen.html#ToExp" class="link">Source</a> <a href="#t:ToExp" class="selflink">#</a></p><div class="doc"><p>Compile things to <code><a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a></code>.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Futhark-CodeGen-ImpGen.html#v:toExp" title="Futhark.CodeGen.ImpGen">toExp</a>, <a href="Futhark-CodeGen-ImpGen.html#v:toExp-39-" title="Futhark.CodeGen.ImpGen">toExp'</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:toExp" class="def">toExp</a> :: a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> <a href="src/Futhark.CodeGen.ImpGen.html#toExp" class="link">Source</a> <a href="#v:toExp" class="selflink">#</a></p><div class="doc"><p>Compile to an <code><a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a></code>, where the type (must must still be a
 primitive) is deduced monadically.</p></div><p class="src"><a id="v:toExp-39-" class="def">toExp'</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; a -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> <a href="src/Futhark.CodeGen.ImpGen.html#toExp%27" class="link">Source</a> <a href="#v:toExp-39-" class="selflink">#</a></p><div class="doc"><p>Compile where we know the type in advance.</p></div><p class="src"><a id="v:toInt64Exp" class="def">toInt64Exp</a> :: a -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> <a href="src/Futhark.CodeGen.ImpGen.html#toInt64Exp" class="link">Source</a> <a href="#v:toInt64Exp" class="selflink">#</a></p><p class="src"><a id="v:toBoolExp" class="def">toBoolExp</a> :: a -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool <a href="src/Futhark.CodeGen.ImpGen.html#toBoolExp" class="link">Source</a> <a href="#v:toBoolExp" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ToExp">Instances</h4><details id="i:ToExp" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ToExp:ToExp:1"></span> <a href="Futhark-CodeGen-ImpGen.html#t:ToExp" title="Futhark.CodeGen.ImpGen">ToExp</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a></span> <a href="src/Futhark.CodeGen.ImpGen.html#line-1196" class="link">Source</a> <a href="#t:ToExp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ToExp:ToExp:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toExp">toExp</a> :: <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> <a href="src/Futhark.CodeGen.ImpGen.html#toExp" class="link">Source</a> <a href="#v:toExp" class="selflink">#</a></p><p class="src"><a href="#v:toExp-39-">toExp'</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> <a href="src/Futhark.CodeGen.ImpGen.html#toExp%27" class="link">Source</a> <a href="#v:toExp-39-" class="selflink">#</a></p><p class="src"><a href="#v:toInt64Exp">toInt64Exp</a> :: <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> <a href="src/Futhark.CodeGen.ImpGen.html#toInt64Exp" class="link">Source</a> <a href="#v:toInt64Exp" class="selflink">#</a></p><p class="src"><a href="#v:toBoolExp">toBoolExp</a> :: <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool <a href="src/Futhark.CodeGen.ImpGen.html#toBoolExp" class="link">Source</a> <a href="#v:toBoolExp" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:ToExp:ToExp:2"></span> <a href="Futhark-CodeGen-ImpGen.html#t:ToExp" title="Futhark.CodeGen.ImpGen">ToExp</a> (<a href="Futhark-Analysis-PrimExp.html#t:PrimExp" title="Futhark.Analysis.PrimExp">PrimExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)</span> <a href="src/Futhark.CodeGen.ImpGen.html#line-1208" class="link">Source</a> <a href="#t:ToExp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:ToExp:ToExp:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-CodeGen-ImpGen.html">Futhark.CodeGen.ImpGen</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toExp">toExp</a> :: <a href="Futhark-Analysis-PrimExp.html#t:PrimExp" title="Futhark.Analysis.PrimExp">PrimExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> <a href="src/Futhark.CodeGen.ImpGen.html#toExp" class="link">Source</a> <a href="#v:toExp" class="selflink">#</a></p><p class="src"><a href="#v:toExp-39-">toExp'</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-Analysis-PrimExp.html#t:PrimExp" title="Futhark.Analysis.PrimExp">PrimExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> <a href="src/Futhark.CodeGen.ImpGen.html#toExp%27" class="link">Source</a> <a href="#v:toExp-39-" class="selflink">#</a></p><p class="src"><a href="#v:toInt64Exp">toInt64Exp</a> :: <a href="Futhark-Analysis-PrimExp.html#t:PrimExp" title="Futhark.Analysis.PrimExp">PrimExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> <a href="src/Futhark.CodeGen.ImpGen.html#toInt64Exp" class="link">Source</a> <a href="#v:toInt64Exp" class="selflink">#</a></p><p class="src"><a href="#v:toBoolExp">toBoolExp</a> :: <a href="Futhark-Analysis-PrimExp.html#t:PrimExp" title="Futhark.Analysis.PrimExp">PrimExp</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool <a href="src/Futhark.CodeGen.ImpGen.html#toBoolExp" class="link">Source</a> <a href="#v:toBoolExp" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:compileAlloc" class="def">compileAlloc</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#compileAlloc" class="link">Source</a> <a href="#v:compileAlloc" class="selflink">#</a></p><div class="doc"><p><code>compileAlloc pat size space</code> allocates <code>n</code> bytes of memory in <code>space</code>,
 writing the result to <code>dest</code>, which must be a single
 <code>MemoryDestination</code>,</p></div></div><div class="top"><p class="src"><a id="v:everythingVolatile" class="def">everythingVolatile</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op a <a href="src/Futhark.CodeGen.ImpGen.html#everythingVolatile" class="link">Source</a> <a href="#v:everythingVolatile" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:compileBody" class="def">compileBody</a> :: <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Body" title="Futhark.IR.Syntax">Body</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#compileBody" class="link">Source</a> <a href="#v:compileBody" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:compileBody-39-" class="def">compileBody'</a> :: [<a href="Futhark-IR-Syntax-Core.html#t:Param" title="Futhark.IR.Syntax.Core">Param</a> dec] -&gt; <a href="Futhark-IR-Syntax.html#t:Body" title="Futhark.IR.Syntax">Body</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#compileBody%27" class="link">Source</a> <a href="#v:compileBody-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:compileLoopBody" class="def">compileLoopBody</a> :: <a href="Futhark-IR-Prop-Types.html#t:Typed" title="Futhark.IR.Prop.Types">Typed</a> dec =&gt; [<a href="Futhark-IR-Syntax-Core.html#t:Param" title="Futhark.IR.Syntax.Core">Param</a> dec] -&gt; <a href="Futhark-IR-Syntax.html#t:Body" title="Futhark.IR.Syntax">Body</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#compileLoopBody" class="link">Source</a> <a href="#v:compileLoopBody" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:defCompileStms" class="def">defCompileStms</a> :: (<a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner, <a href="Futhark-IR-Prop-Names.html#t:FreeIn" title="Futhark.IR.Prop.Names">FreeIn</a> op) =&gt; <a href="Futhark-IR-Prop-Names.html#t:Names" title="Futhark.IR.Prop.Names">Names</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#defCompileStms" class="link">Source</a> <a href="#v:defCompileStms" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:compileStms" class="def">compileStms</a> :: <a href="Futhark-IR-Prop-Names.html#t:Names" title="Futhark.IR.Prop.Names">Names</a> -&gt; <a href="Futhark-IR-Syntax.html#t:Stms" title="Futhark.IR.Syntax">Stms</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#compileStms" class="link">Source</a> <a href="#v:compileStms" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:compileExp" class="def">compileExp</a> :: <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#compileExp" class="link">Source</a> <a href="#v:compileExp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:defCompileExp" class="def">defCompileExp</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; <a href="Futhark-IR-Syntax.html#t:Pat" title="Futhark.IR.Syntax">Pat</a> rep -&gt; <a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#defCompileExp" class="link">Source</a> <a href="#v:defCompileExp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fullyIndexArray" class="def">fullyIndexArray</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a>, <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Elements" title="Futhark.CodeGen.ImpCode">Elements</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)) <a href="src/Futhark.CodeGen.ImpGen.html#fullyIndexArray" class="link">Source</a> <a href="#v:fullyIndexArray" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fullyIndexArray-39-" class="def">fullyIndexArray'</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a>, <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Elements" title="Futhark.CodeGen.ImpCode">Elements</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)) <a href="src/Futhark.CodeGen.ImpGen.html#fullyIndexArray%27" class="link">Source</a> <a href="#v:fullyIndexArray-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:copy" class="def">copy</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:CopyCompiler" title="Futhark.CodeGen.ImpGen">CopyCompiler</a> rep r op <a href="src/Futhark.CodeGen.ImpGen.html#copy" class="link">Source</a> <a href="#v:copy" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:copyDWIM" class="def">copyDWIM</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-IR-Syntax-Core.html#t:DimIndex" title="Futhark.IR.Syntax.Core">DimIndex</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)] -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; [<a href="Futhark-IR-Syntax-Core.html#t:DimIndex" title="Futhark.IR.Syntax.Core">DimIndex</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#copyDWIM" class="link">Source</a> <a href="#v:copyDWIM" class="selflink">#</a></p><div class="doc"><p>Copy from here to there; both destination and source be
 indexeded.  If so, they better be arrays of enough dimensions.
 This function will generally just Do What I Mean, and Do The Right
 Thing.  Both destination and source must be in scope.</p></div></div><div class="top"><p class="src"><a id="v:copyDWIMFix" class="def">copyDWIMFix</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#copyDWIMFix" class="link">Source</a> <a href="#v:copyDWIMFix" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Futhark-CodeGen-ImpGen.html#v:copyDWIM" title="Futhark.CodeGen.ImpGen">copyDWIM</a></code>, but implicitly <code><a href="Futhark-IR-Syntax-Core.html#v:DimFix" title="Futhark.IR.Syntax.Core">DimFix</a></code>es the indexes.</p></div></div><div class="top"><p class="src"><a id="v:copyElementWise" class="def">copyElementWise</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:CopyCompiler" title="Futhark.CodeGen.ImpGen">CopyCompiler</a> rep r op <a href="src/Futhark.CodeGen.ImpGen.html#copyElementWise" class="link">Source</a> <a href="#v:copyElementWise" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:typeSize" class="def">typeSize</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Type" title="Futhark.IR.Syntax.Core">Type</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) <a href="src/Futhark.CodeGen.ImpGen.html#typeSize" class="link">Source</a> <a href="#v:typeSize" class="selflink">#</a></p><div class="doc"><p>The number of bytes needed to represent the array in a
 straightforward contiguous format, as an <code><a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a></code> expression.</p></div></div><div class="top"><p class="src"><a id="v:inBounds" class="def">inBounds</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Slice" title="Futhark.IR.Syntax.Core">Slice</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool <a href="src/Futhark.CodeGen.ImpGen.html#inBounds" class="link">Source</a> <a href="#v:inBounds" class="selflink">#</a></p><div class="doc"><p>Is this indexing in-bounds for an array of the given shape?  This
 is useful for things like scatter, which ignores out-of-bounds
 writes.</p></div></div><div class="top"><p class="src"><a id="v:isMapTransposeCopy" class="def">isMapTransposeCopy</a> :: <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:MemLoc" title="Futhark.CodeGen.ImpGen">MemLoc</a> -&gt; Maybe (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) <a href="src/Futhark.CodeGen.ImpGen.html#isMapTransposeCopy" class="link">Source</a> <a href="#v:isMapTransposeCopy" class="selflink">#</a></p><div class="doc"><p>Is this copy really a mapping with transpose?</p></div></div><a href="#g:6" id="g:6"><h1>Constructing code.</h1></a><div class="top"><p class="src"><a id="v:dLParams" class="def">dLParams</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; [<a href="Futhark-IR-Syntax.html#t:LParam" title="Futhark.IR.Syntax">LParam</a> rep] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#dLParams" class="link">Source</a> <a href="#v:dLParams" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dFParams" class="def">dFParams</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; [<a href="Futhark-IR-Syntax.html#t:FParam" title="Futhark.IR.Syntax">FParam</a> rep] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#dFParams" class="link">Source</a> <a href="#v:dFParams" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dScope" class="def">dScope</a> :: <a href="Futhark-IR-Mem.html#t:Mem" title="Futhark.IR.Mem">Mem</a> rep inner =&gt; Maybe (<a href="Futhark-IR-Syntax.html#t:Exp" title="Futhark.IR.Syntax">Exp</a> rep) -&gt; <a href="Futhark-IR-Prop-Scope.html#t:Scope" title="Futhark.IR.Prop.Scope">Scope</a> rep -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#dScope" class="link">Source</a> <a href="#v:dScope" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dArray" class="def">dArray</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Mem.html#t:IxFun" title="Futhark.IR.Mem">IxFun</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#dArray" class="link">Source</a> <a href="#v:dArray" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dPrim" class="def">dPrim</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t) <a href="src/Futhark.CodeGen.ImpGen.html#dPrim" class="link">Source</a> <a href="#v:dPrim" class="selflink">#</a></p><div class="doc"><p>The return type is polymorphic, so there is no guarantee it
 actually matches the <code><a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a></code>, but at least we have to use it
 consistently.</p></div></div><div class="top"><p class="src"><a id="v:dPrimVol" class="def">dPrimVol</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t) <a href="src/Futhark.CodeGen.ImpGen.html#dPrimVol" class="link">Source</a> <a href="#v:dPrimVol" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dPrim_" class="def">dPrim_</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#dPrim_" class="link">Source</a> <a href="#v:dPrim_" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dPrimV_" class="def">dPrimV_</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#dPrimV_" class="link">Source</a> <a href="#v:dPrimV_" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dPrimV" class="def">dPrimV</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t) <a href="src/Futhark.CodeGen.ImpGen.html#dPrimV" class="link">Source</a> <a href="#v:dPrimV" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dPrimVE" class="def">dPrimVE</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t) <a href="src/Futhark.CodeGen.ImpGen.html#dPrimVE" class="link">Source</a> <a href="#v:dPrimVE" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:dIndexSpace" class="def">dIndexSpace</a> :: [(<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>, <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>)] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#dIndexSpace" class="link">Source</a> <a href="#v:dIndexSpace" class="selflink">#</a></p><div class="doc"><p><code>dIndexSpace f dims i</code> computes a list of indices into an
 array with dimension <code>dims</code> given the flat index <code>i</code>.  The
 resulting list will have the same size as <code>dims</code>.  Intermediate
 results are passed to <code>f</code>.</p></div></div><div class="top"><p class="src"><a id="v:dIndexSpace-39-" class="def">dIndexSpace'</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] <a href="src/Futhark.CodeGen.ImpGen.html#dIndexSpace%27" class="link">Source</a> <a href="#v:dIndexSpace-39-" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Futhark-CodeGen-ImpGen.html#v:dIndexSpace" title="Futhark.CodeGen.ImpGen">dIndexSpace</a></code>, but invent some new names for the indexes
 based on the given template.</p></div></div><div class="top"><p class="src"><a id="v:sFor" class="def">sFor</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sFor" class="link">Source</a> <a href="#v:sFor" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sWhile" class="def">sWhile</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sWhile" class="link">Source</a> <a href="#v:sWhile" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sComment" class="def">sComment</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sComment" class="link">Source</a> <a href="#v:sComment" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sIf" class="def">sIf</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sIf" class="link">Source</a> <a href="#v:sIf" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sWhen" class="def">sWhen</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sWhen" class="link">Source</a> <a href="#v:sWhen" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sUnless" class="def">sUnless</a> :: <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> Bool -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sUnless" class="link">Source</a> <a href="#v:sUnless" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sOp" class="def">sOp</a> :: op -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sOp" class="link">Source</a> <a href="#v:sOp" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sDeclareMem" class="def">sDeclareMem</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#sDeclareMem" class="link">Source</a> <a href="#v:sDeclareMem" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sAlloc" class="def">sAlloc</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#sAlloc" class="link">Source</a> <a href="#v:sAlloc" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sAlloc_" class="def">sAlloc_</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-GPU-Sizes.html#t:Count" title="Futhark.IR.GPU.Sizes">Count</a> <a href="Futhark-CodeGen-ImpCode.html#t:Bytes" title="Futhark.CodeGen.ImpCode">Bytes</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sAlloc_" class="link">Source</a> <a href="#v:sAlloc_" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sArray" class="def">sArray</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Mem.html#t:IxFun" title="Futhark.IR.Mem">IxFun</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#sArray" class="link">Source</a> <a href="#v:sArray" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sArrayInMem" class="def">sArrayInMem</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#sArrayInMem" class="link">Source</a> <a href="#v:sArrayInMem" class="selflink">#</a></p><div class="doc"><p>Declare an array in row-major order in the given memory block.</p></div></div><div class="top"><p class="src"><a id="v:sAllocArray" class="def">sAllocArray</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#sAllocArray" class="link">Source</a> <a href="#v:sAllocArray" class="selflink">#</a></p><div class="doc"><p>Uses linear/iota index function.</p></div></div><div class="top"><p class="src"><a id="v:sAllocArrayPerm" class="def">sAllocArrayPerm</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:ShapeBase" title="Futhark.IR.Syntax.Core">ShapeBase</a> <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; [Int] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#sAllocArrayPerm" class="link">Source</a> <a href="#v:sAllocArrayPerm" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Futhark-CodeGen-ImpGen.html#v:sAllocArray" title="Futhark.CodeGen.ImpGen">sAllocArray</a></code>, but permute the in-memory representation of the indices as specified.</p></div></div><div class="top"><p class="src"><a id="v:sStaticArray" class="def">sStaticArray</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Space" title="Futhark.IR.Syntax.Core">Space</a> -&gt; <a href="Futhark-IR-Primitive.html#t:PrimType" title="Futhark.IR.Primitive">PrimType</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:ArrayContents" title="Futhark.CodeGen.ImpCode">ArrayContents</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Futhark.CodeGen.ImpGen.html#sStaticArray" class="link">Source</a> <a href="#v:sStaticArray" class="selflink">#</a></p><div class="doc"><p>Uses linear/iota index function.</p></div></div><div class="top"><p class="src"><a id="v:sWrite" class="def">sWrite</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sWrite" class="link">Source</a> <a href="#v:sWrite" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sUpdate" class="def">sUpdate</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-IR-Syntax-Core.html#t:Slice" title="Futhark.IR.Syntax.Core">Slice</a> (<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>) -&gt; <a href="Futhark-IR-Syntax-Core.html#t:SubExp" title="Futhark.IR.Syntax.Core">SubExp</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sUpdate" class="link">Source</a> <a href="#v:sUpdate" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sLoopNest" class="def">sLoopNest</a> :: <a href="Futhark-IR-Syntax-Core.html#t:Shape" title="Futhark.IR.Syntax.Core">Shape</a> -&gt; ([<a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> <a href="Futhark-IR-Primitive.html#t:Int64" title="Futhark.IR.Primitive">Int64</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op ()) -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#sLoopNest" class="link">Source</a> <a href="#v:sLoopNest" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:-60--45--45-" class="def">(&lt;--)</a> :: <a href="Futhark-CodeGen-ImpGen.html#t:TV" title="Futhark.CodeGen.ImpGen">TV</a> t -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:TExp" title="Futhark.CodeGen.ImpCode">TExp</a> t -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <span class="fixity">infixl 3</span><span class="rightedge"></span> <a href="src/Futhark.CodeGen.ImpGen.html#%3C--" class="link">Source</a> <a href="#v:-60--45--45-" class="selflink">#</a></p><div class="doc"><p>Typed assignment.</p></div></div><div class="top"><p class="src"><a id="v:-60--126--126-" class="def">(&lt;~~)</a> :: <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; <a href="Futhark-CodeGen-ImpCode.html#t:Exp" title="Futhark.CodeGen.ImpCode">Exp</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <span class="fixity">infixl 3</span><span class="rightedge"></span> <a href="src/Futhark.CodeGen.ImpGen.html#%3C~~" class="link">Source</a> <a href="#v:-60--126--126-" class="selflink">#</a></p><div class="doc"><p>Untyped assignment.</p></div></div><div class="top"><p class="src"><a id="v:function" class="def">function</a> :: <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:Param" title="Futhark.CodeGen.ImpCode">Param</a>] -&gt; [<a href="Futhark-CodeGen-ImpCode.html#t:Param" title="Futhark.CodeGen.ImpCode">Param</a>] -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#function" class="link">Source</a> <a href="#v:function" class="selflink">#</a></p><div class="doc"><p>Constructing an ad-hoc function that does not
 correspond to any of the IR functions in the input program.</p></div></div><div class="top"><p class="src"><a id="v:warn" class="def">warn</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; [loc] -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Futhark-CodeGen-ImpGen.html#t:ImpM" title="Futhark.CodeGen.ImpGen">ImpM</a> rep r op () <a href="src/Futhark.CodeGen.ImpGen.html#warn" class="link">Source</a> <a href="#v:warn" class="selflink">#</a></p><div class="doc"><p>Emit a warning about something the user should be aware of.</p></div></div><div class="top"><p class="src">module <a href="Language-Futhark-Warnings.html">Language.Futhark.Warnings</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>