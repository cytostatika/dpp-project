<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Futhark.Script</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">futhark-0.22.0: An optimising compiler for a functional, array-oriented language.</span><ul class="links" id="page-menu"><li><a href="src/Futhark.Script.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Futhark.Script</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Server</a></li><li><a href="#g:2">Expressions, values, and types</a></li><li><a href="#g:3">Evaluation</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>FutharkScript is a (tiny) subset of Futhark used to write small
 expressions that are evaluated by server executables.  The <code>futhark
 literate</code> command is the main user.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:ScriptServer">ScriptServer</a></li><li class="src short"><a href="#v:withScriptServer">withScriptServer</a> :: <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:ServerCfg" title="Futhark.Server">ServerCfg</a> -&gt; (<a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; IO a) -&gt; IO a</li><li class="src short"><a href="#v:withScriptServer-39-">withScriptServer'</a> :: MonadIO m =&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a> -&gt; (<a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; m a) -&gt; m a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Func">Func</a><ul class="subs"><li>= <a href="#v:FuncFut">FuncFut</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:EntryName" title="Futhark.Server">EntryName</a></li><li>| <a href="#v:FuncBuiltin">FuncBuiltin</a> Text</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Exp">Exp</a><ul class="subs"><li>= <a href="#v:Call">Call</a> <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a> [<a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>]</li><li>| <a href="#v:Const">Const</a> <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></li><li>| <a href="#v:Tuple">Tuple</a> [<a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>]</li><li>| <a href="#v:Record">Record</a> [(Text, <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>)]</li><li>| <a href="#v:StringLit">StringLit</a> Text</li><li>| <a href="#v:Let">Let</a> [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a>] <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a></li><li>| <a href="#v:ServerVar">ServerVar</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a></li></ul></li><li class="src short"><a href="#v:parseExp">parseExp</a> :: Parser () -&gt; Parser <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a></li><li class="src short"><a href="#v:parseExpFromText">parseExpFromText</a> :: FilePath -&gt; Text -&gt; Either Text <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a></li><li class="src short"><a href="#v:varsInExp">varsInExp</a> :: <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; Set <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:EntryName" title="Futhark.Server">EntryName</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ScriptValueType">ScriptValueType</a><ul class="subs"><li>= <a href="#v:STValue">STValue</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a></li><li>| <a href="#v:STFun">STFun</a> [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>] [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ScriptValue">ScriptValue</a> v<ul class="subs"><li>= <a href="#v:SValue">SValue</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a> v</li><li>| <a href="#v:SFun">SFun</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:EntryName" title="Futhark.Server">EntryName</a> [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>] [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>] [<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v]</li></ul></li><li class="src short"><a href="#v:scriptValueType">scriptValueType</a> :: <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v -&gt; <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a></li><li class="src short"><a href="#v:serverVarsInValue">serverVarsInValue</a> :: <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; Set <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ValOrVar">ValOrVar</a><ul class="subs"><li>= <a href="#v:VVal">VVal</a> <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></li><li>| <a href="#v:VVar">VVar</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:ExpValue">ExpValue</a> = <a href="Futhark-Test-Values.html#t:Compound" title="Futhark.Test.Values">Compound</a> (<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> <a href="Futhark-Script.html#t:ValOrVar" title="Futhark.Script">ValOrVar</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:EvalBuiltin">EvalBuiltin</a> m = Text -&gt; [<a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a>] -&gt; m <a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a></li><li class="src short"><a href="#v:evalExp">evalExp</a> :: <span class="keyword">forall</span> m. (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:EvalBuiltin" title="Futhark.Script">EvalBuiltin</a> m -&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; m <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a></li><li class="src short"><a href="#v:getExpValue">getExpValue</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; m <a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a></li><li class="src short"><a href="#v:evalExpToGround">evalExpToGround</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:EvalBuiltin" title="Futhark.Script">EvalBuiltin</a> m -&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; m (Either (<a href="Futhark-Test-Values.html#t:Compound" title="Futhark.Test.Values">Compound</a> <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a>) <a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a>)</li><li class="src short"><a href="#v:valueToExp">valueToExp</a> :: <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a></li><li class="src short"><a href="#v:freeValue">freeValue</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; m ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Server</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ScriptServer" class="def">ScriptServer</a> <a href="src/Futhark.Script.html#ScriptServer" class="link">Source</a> <a href="#t:ScriptServer" class="selflink">#</a></p><div class="doc"><p>Like a <code><a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a></code>, but keeps a bit more state to make FutharkScript
 more convenient.</p></div></div><div class="top"><p class="src"><a id="v:withScriptServer" class="def">withScriptServer</a> :: <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:ServerCfg" title="Futhark.Server">ServerCfg</a> -&gt; (<a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; IO a) -&gt; IO a <a href="src/Futhark.Script.html#withScriptServer" class="link">Source</a> <a href="#v:withScriptServer" class="selflink">#</a></p><div class="doc"><p>Start a server, execute an action, then shut down the server.
 Similar to <code><a href="../futhark-server-1.1.2.0/Futhark-Server.html#v:withServer" title="Futhark.Server">withServer</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:withScriptServer-39-" class="def">withScriptServer'</a> :: MonadIO m =&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a> -&gt; (<a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; m a) -&gt; m a <a href="src/Futhark.Script.html#withScriptServer%27" class="link">Source</a> <a href="#v:withScriptServer-39-" class="selflink">#</a></p><div class="doc"><p>Run an action with a <code><a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a></code> produced by an existing
 <code><a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a></code>, without shutting it down at the end.</p></div></div><a href="#g:2" id="g:2"><h1>Expressions, values, and types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Func" class="def">Func</a> <a href="src/Futhark.Script.html#Func" class="link">Source</a> <a href="#t:Func" class="selflink">#</a></p><div class="doc"><p>A function called in a <code><a href="Futhark-Script.html#v:Call" title="Futhark.Script">Call</a></code> expression can be either a Futhark
 function or a builtin function.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FuncFut" class="def">FuncFut</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:EntryName" title="Futhark.Server">EntryName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:FuncBuiltin" class="def">FuncBuiltin</a> Text</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Func">Instances</h4><details id="i:Func" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Func:Show:1"></span> Show <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a></span> <a href="src/Futhark.Script.html#line-78" class="link">Source</a> <a href="#t:Func" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Func:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Func:Pretty:2"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a></span> <a href="src/Futhark.Script.html#line-96" class="link">Source</a> <a href="#t:Func" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Func:Pretty:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Exp" class="def">Exp</a> <a href="src/Futhark.Script.html#Exp" class="link">Source</a> <a href="#t:Exp" class="selflink">#</a></p><div class="doc"><p>A FutharkScript expression.  This is a simple AST that might not
 correspond exactly to what the user wrote (e.g. no parentheses or
 source locations).  This is fine for small expressions, which is
 all this is meant for.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Call" class="def">Call</a> <a href="Futhark-Script.html#t:Func" title="Futhark.Script">Func</a> [<a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Const" class="def">Const</a> <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Tuple" class="def">Tuple</a> [<a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Record" class="def">Record</a> [(Text, <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>)]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:StringLit" class="def">StringLit</a> Text</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Let" class="def">Let</a> [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a>] <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ServerVar" class="def">ServerVar</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a></td><td class="doc"><p>Server-side variable, *not* Futhark variable (these are
 handled in <code><a href="Futhark-Script.html#v:Call" title="Futhark.Script">Call</a></code>).</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Exp">Instances</h4><details id="i:Exp" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Exp:Show:1"></span> Show <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a></span> <a href="src/Futhark.Script.html#line-94" class="link">Source</a> <a href="#t:Exp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Exp:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Exp:Pretty:2"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a></span> <a href="src/Futhark.Script.html#line-100" class="link">Source</a> <a href="#t:Exp" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Exp:Pretty:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:parseExp" class="def">parseExp</a> :: Parser () -&gt; Parser <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> <a href="src/Futhark.Script.html#parseExp" class="link">Source</a> <a href="#v:parseExp" class="selflink">#</a></p><div class="doc"><p>Parse a FutharkScript expression, given a whitespace parser.</p></div></div><div class="top"><p class="src"><a id="v:parseExpFromText" class="def">parseExpFromText</a> :: FilePath -&gt; Text -&gt; Either Text <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> <a href="src/Futhark.Script.html#parseExpFromText" class="link">Source</a> <a href="#v:parseExpFromText" class="selflink">#</a></p><div class="doc"><p>Parse a FutharkScript expression with normal whitespace handling.</p></div></div><div class="top"><p class="src"><a id="v:varsInExp" class="def">varsInExp</a> :: <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; Set <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:EntryName" title="Futhark.Server">EntryName</a> <a href="src/Futhark.Script.html#varsInExp" class="link">Source</a> <a href="#v:varsInExp" class="selflink">#</a></p><div class="doc"><p>The set of Futhark variables that are referenced by the
 expression - these will have to be entry points in the Futhark
 program.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ScriptValueType" class="def">ScriptValueType</a> <a href="src/Futhark.Script.html#ScriptValueType" class="link">Source</a> <a href="#t:ScriptValueType" class="selflink">#</a></p><div class="doc"><p>The type of a <code><a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a></code> - either a value type or a function type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:STValue" class="def">STValue</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:STFun" class="def">STFun</a> [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>] [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>]</td><td class="doc"><p>Ins, then outs.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ScriptValueType">Instances</h4><details id="i:ScriptValueType" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScriptValueType:Eq:1"></span> Eq <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a></span> <a href="src/Futhark.Script.html#line-220" class="link">Source</a> <a href="#t:ScriptValueType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScriptValueType:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScriptValueType:Show:2"></span> Show <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a></span> <a href="src/Futhark.Script.html#line-220" class="link">Source</a> <a href="#t:ScriptValueType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScriptValueType:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScriptValueType:Pretty:3"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a></span> <a href="src/Futhark.Script.html#line-222" class="link">Source</a> <a href="#t:ScriptValueType" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScriptValueType:Pretty:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ScriptValue" class="def">ScriptValue</a> v <a href="src/Futhark.Script.html#ScriptValue" class="link">Source</a> <a href="#t:ScriptValue" class="selflink">#</a></p><div class="doc"><p>A ScriptValue is either a base value or a partially applied
 function.  We don't have real first-class functions in
 FutharkScript, but we sort of have closures.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SValue" class="def">SValue</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a> v</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SFun" class="def">SFun</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:EntryName" title="Futhark.Server">EntryName</a> [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>] [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>] [<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v]</td><td class="doc"><p>Ins, then outs.  Yes, this is the opposite of more or less
 everywhere else.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ScriptValue">Instances</h4><details id="i:ScriptValue" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScriptValue:Functor:1"></span> <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Functor" title="Control.Monad.Compat">Functor</a> <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a></span> <a href="src/Futhark.Script.html#line-204" class="link">Source</a> <a href="#t:ScriptValue" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScriptValue:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> b -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScriptValue:Foldable:2"></span> Foldable <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a></span> <a href="src/Futhark.Script.html#line-207" class="link">Source</a> <a href="#t:ScriptValue" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScriptValue:Foldable:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fold">fold</a> :: <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> m =&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> m -&gt; m</p><p class="src"><a href="#v:foldMap">foldMap</a> :: <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; m</p><p class="src"><a href="#v:foldMap-39-">foldMap'</a> :: <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> m =&gt; (a -&gt; m) -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; m</p><p class="src"><a href="#v:foldr">foldr</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; b</p><p class="src"><a href="#v:foldr-39-">foldr'</a> :: (a -&gt; b -&gt; b) -&gt; b -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; b</p><p class="src"><a href="#v:foldl">foldl</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; b</p><p class="src"><a href="#v:foldl-39-">foldl'</a> :: (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; b</p><p class="src"><a href="#v:foldr1">foldr1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; a</p><p class="src"><a href="#v:foldl1">foldl1</a> :: (a -&gt; a -&gt; a) -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; a</p><p class="src"><a href="#v:toList">toList</a> :: <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; [a] <a href="#v:toList" class="selflink">#</a></p><p class="src"><a href="#v:null">null</a> :: <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; Bool</p><p class="src"><a href="#v:length">length</a> :: <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; Int</p><p class="src"><a href="#v:elem">elem</a> :: Eq a =&gt; a -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; Bool</p><p class="src"><a href="#v:maximum">maximum</a> :: Ord a =&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; a</p><p class="src"><a href="#v:minimum">minimum</a> :: Ord a =&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; a</p><p class="src"><a href="#v:sum">sum</a> :: Num a =&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; a</p><p class="src"><a href="#v:product">product</a> :: Num a =&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; a</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScriptValue:Traversable:3"></span> Traversable <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a></span> <a href="src/Futhark.Script.html#line-210" class="link">Source</a> <a href="#t:ScriptValue" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScriptValue:Traversable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:traverse">traverse</a> :: Applicative f =&gt; (a -&gt; f b) -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; f (<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> b)</p><p class="src"><a href="#v:sequenceA">sequenceA</a> :: Applicative f =&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> (f a) -&gt; f (<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a)</p><p class="src"><a href="#v:mapM">mapM</a> :: <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a -&gt; m (<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> b) <a href="#v:mapM" class="selflink">#</a></p><p class="src"><a href="#v:sequence">sequence</a> :: <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> m =&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> (m a) -&gt; m (<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> a) <a href="#v:sequence" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ScriptValue:Show:4"></span> Show v =&gt; Show (<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v)</span> <a href="src/Futhark.Script.html#line-202" class="link">Source</a> <a href="#t:ScriptValue" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ScriptValue:Show:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:scriptValueType" class="def">scriptValueType</a> :: <a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> v -&gt; <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a> <a href="src/Futhark.Script.html#scriptValueType" class="link">Source</a> <a href="#v:scriptValueType" class="selflink">#</a></p><div class="doc"><p>The type of a <code><a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:serverVarsInValue" class="def">serverVarsInValue</a> :: <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; Set <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a> <a href="src/Futhark.Script.html#serverVarsInValue" class="link">Source</a> <a href="#v:serverVarsInValue" class="selflink">#</a></p><div class="doc"><p>The set of server-side variables in the value.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ValOrVar" class="def">ValOrVar</a> <a href="src/Futhark.Script.html#ValOrVar" class="link">Source</a> <a href="#t:ValOrVar" class="selflink">#</a></p><div class="doc"><p>A Haskell-level value or a variable on the server.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:VVal" class="def">VVal</a> <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:VVar" class="def">VVar</a> <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ValOrVar">Instances</h4><details id="i:ValOrVar" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ValOrVar:Show:1"></span> Show <a href="Futhark-Script.html#t:ValOrVar" title="Futhark.Script">ValOrVar</a></span> <a href="src/Futhark.Script.html#line-233" class="link">Source</a> <a href="#t:ValOrVar" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ValOrVar:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Script.html">Futhark.Script</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Script.html#t:ValOrVar" title="Futhark.Script">ValOrVar</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Script.html#t:ValOrVar" title="Futhark.Script">ValOrVar</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Script.html#t:ValOrVar" title="Futhark.Script">ValOrVar</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ExpValue" class="def">ExpValue</a> = <a href="Futhark-Test-Values.html#t:Compound" title="Futhark.Test.Values">Compound</a> (<a href="Futhark-Script.html#t:ScriptValue" title="Futhark.Script">ScriptValue</a> <a href="Futhark-Script.html#t:ValOrVar" title="Futhark.Script">ValOrVar</a>) <a href="src/Futhark.Script.html#ExpValue" class="link">Source</a> <a href="#t:ExpValue" class="selflink">#</a></p><div class="doc"><p>The intermediate values produced by an expression - in
 particular, these may not be on the server.</p></div></div><a href="#g:3" id="g:3"><h1>Evaluation</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:EvalBuiltin" class="def">EvalBuiltin</a> m = Text -&gt; [<a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a>] -&gt; m <a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a> <a href="src/Futhark.Script.html#EvalBuiltin" class="link">Source</a> <a href="#t:EvalBuiltin" class="selflink">#</a></p><div class="doc"><p>How to evaluate a builtin function.</p></div></div><div class="top"><p class="src"><a id="v:evalExp" class="def">evalExp</a> :: <span class="keyword">forall</span> m. (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:EvalBuiltin" title="Futhark.Script">EvalBuiltin</a> m -&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; m <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> <a href="src/Futhark.Script.html#evalExp" class="link">Source</a> <a href="#v:evalExp" class="selflink">#</a></p><div class="doc"><p>Evaluate a FutharkScript expression relative to some running server.</p></div></div><div class="top"><p class="src"><a id="v:getExpValue" class="def">getExpValue</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; m <a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a> <a href="src/Futhark.Script.html#getExpValue" class="link">Source</a> <a href="#v:getExpValue" class="selflink">#</a></p><div class="doc"><p>Read actual values from the server.  Fails for values that have
 no well-defined external representation.</p></div></div><div class="top"><p class="src"><a id="v:evalExpToGround" class="def">evalExpToGround</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:EvalBuiltin" title="Futhark.Script">EvalBuiltin</a> m -&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> -&gt; m (Either (<a href="Futhark-Test-Values.html#t:Compound" title="Futhark.Test.Values">Compound</a> <a href="Futhark-Script.html#t:ScriptValueType" title="Futhark.Script">ScriptValueType</a>) <a href="Futhark-Test-Values.html#t:CompoundValue" title="Futhark.Test.Values">CompoundValue</a>) <a href="src/Futhark.Script.html#evalExpToGround" class="link">Source</a> <a href="#v:evalExpToGround" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Futhark-Script.html#v:evalExp" title="Futhark.Script">evalExp</a></code>, but requires all values to be non-functional.  If
 the value has a bad type, return that type instead.  Other
 evaluation problems (e.g. type failures) raise errors.</p></div></div><div class="top"><p class="src"><a id="v:valueToExp" class="def">valueToExp</a> :: <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; <a href="Futhark-Script.html#t:Exp" title="Futhark.Script">Exp</a> <a href="src/Futhark.Script.html#valueToExp" class="link">Source</a> <a href="#v:valueToExp" class="selflink">#</a></p><div class="doc"><p>Convert a value into a corresponding expression.</p></div></div><div class="top"><p class="src"><a id="v:freeValue" class="def">freeValue</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="Futhark-Script.html#t:ScriptServer" title="Futhark.Script">ScriptServer</a> -&gt; <a href="Futhark-Script.html#t:ExpValue" title="Futhark.Script">ExpValue</a> -&gt; m () <a href="src/Futhark.Script.html#freeValue" class="link">Source</a> <a href="#v:freeValue" class="selflink">#</a></p><div class="doc"><p>Release all the server-side variables in the value.  Yes,
 FutharkScript has manual memory management...</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>