<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Futhark.Test</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">futhark-0.22.0: An optimising compiler for a functional, array-oriented language.</span><ul class="links" id="page-menu"><li><a href="src/Futhark.Test.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Futhark.Test</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Facilities for reading Futhark test programs.  A Futhark test
 program is an ordinary Futhark program where an initial comment
 block specifies input- and output-sets.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short">module <a href="Futhark-Test-Spec.html">Futhark.Test.Spec</a></li><li class="src short"><a href="#v:valuesFromByteString">valuesFromByteString</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="../utf8-string-1.0.2/Data-ByteString-Lazy-UTF8.html#t:ByteString" title="Data.ByteString.Lazy.UTF8">ByteString</a> -&gt; Either <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>]</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:FutharkExe">FutharkExe</a> = <a href="#v:FutharkExe">FutharkExe</a> FilePath</li><li class="src short"><a href="#v:getValues">getValues</a> :: (<a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:MonadFail" title="Control.Monad.Compat">MonadFail</a> m, MonadIO m) =&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; m [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>]</li><li class="src short"><a href="#v:getValuesBS">getValuesBS</a> :: (<a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:MonadFail" title="Control.Monad.Compat">MonadFail</a> m, MonadIO m) =&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; m <a href="../utf8-string-1.0.2/Data-ByteString-Lazy-UTF8.html#t:ByteString" title="Data.ByteString.Lazy.UTF8">ByteString</a></li><li class="src short"><a href="#v:valuesAsVars">valuesAsVars</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a> -&gt; [(<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a>, <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>)] -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; m ()</li><li class="src short"><a href="#v:compareValues">compareValues</a> :: <a href="../futhark-data-1.0.3.0/Futhark-Data-Compare.html#t:Tolerance" title="Futhark.Data.Compare">Tolerance</a> -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; [<a href="Futhark-Test.html#t:Mismatch" title="Futhark.Test">Mismatch</a>]</li><li class="src short"><a href="#v:checkResult">checkResult</a> :: (MonadError Text m, MonadIO m) =&gt; FilePath -&gt; [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; m ()</li><li class="src short"><a href="#v:testRunReferenceOutput">testRunReferenceOutput</a> :: FilePath -&gt; Text -&gt; <a href="Futhark-Test-Spec.html#t:TestRun" title="Futhark.Test.Spec">TestRun</a> -&gt; FilePath</li><li class="src short"><a href="#v:getExpectedResult">getExpectedResult</a> :: (<a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:MonadFail" title="Control.Monad.Compat">MonadFail</a> m, MonadIO m) =&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; Text -&gt; <a href="Futhark-Test-Spec.html#t:TestRun" title="Futhark.Test.Spec">TestRun</a> -&gt; m (<a href="Futhark-Test-Spec.html#t:ExpectedResult" title="Futhark.Test.Spec">ExpectedResult</a> [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>])</li><li class="src short"><a href="#v:compileProgram">compileProgram</a> :: (MonadIO m, MonadError [Text] m) =&gt; [<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>] -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; FilePath -&gt; m (<a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>, <a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>)</li><li class="src short"><a href="#v:runProgram">runProgram</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; [<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>] -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; Text -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; IO (ExitCode, <a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>, <a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>)</li><li class="src short"><a href="#v:readResults">readResults</a> :: (MonadIO m, MonadError Text m) =&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a> -&gt; [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a>] -&gt; m [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>]</li><li class="src short"><a href="#v:ensureReferenceOutput">ensureReferenceOutput</a> :: (MonadIO m, MonadError [Text] m) =&gt; Maybe Int -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; FilePath -&gt; [<a href="Futhark-Test-Spec.html#t:InputOutputs" title="Futhark.Test.Spec">InputOutputs</a>] -&gt; m ()</li><li class="src short"><a href="#v:determineTuning">determineTuning</a> :: MonadIO m =&gt; Maybe FilePath -&gt; FilePath -&gt; m ([<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>], <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>)</li><li class="src short"><a href="#v:binaryName">binaryName</a> :: FilePath -&gt; FilePath</li><li class="src short"><a href="#v:futharkServerCfg">futharkServerCfg</a> :: FilePath -&gt; [<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>] -&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:ServerCfg" title="Futhark.Server">ServerCfg</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Mismatch">Mismatch</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Value">Value</a></li><li class="src short"><a href="#v:valueText">valueText</a> :: <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; Text</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="Futhark-Test-Spec.html">Futhark.Test.Spec</a></p></div><div class="top"><p class="src"><a id="v:valuesFromByteString" class="def">valuesFromByteString</a> :: <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="../utf8-string-1.0.2/Data-ByteString-Lazy-UTF8.html#t:ByteString" title="Data.ByteString.Lazy.UTF8">ByteString</a> -&gt; Either <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] <a href="src/Futhark.Test.html#valuesFromByteString" class="link">Source</a> <a href="#v:valuesFromByteString" class="selflink">#</a></p><div class="doc"><p>Try to parse a several values from a byte string.  The <code><a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></code>
 parameter is used for error messages.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:FutharkExe" class="def">FutharkExe</a> <a href="src/Futhark.Test.html#FutharkExe" class="link">Source</a> <a href="#t:FutharkExe" class="selflink">#</a></p><div class="doc"><p>The <code>futhark</code> executable we are using.  This is merely a wrapper
 around the underlying file path, because we will be using a lot of
 different file paths here, and it is easy to mix them up.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FutharkExe" class="def">FutharkExe</a> FilePath</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:FutharkExe">Instances</h4><details id="i:FutharkExe" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FutharkExe:Eq:1"></span> Eq <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a></span> <a href="src/Futhark.Test.html#line-74" class="link">Source</a> <a href="#t:FutharkExe" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FutharkExe:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Test.html">Futhark.Test</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FutharkExe:Ord:2"></span> Ord <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a></span> <a href="src/Futhark.Test.html#line-74" class="link">Source</a> <a href="#t:FutharkExe" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FutharkExe:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Test.html">Futhark.Test</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; Ordering</p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; Bool</p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; Bool</p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; Bool</p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; Bool</p><p class="src"><a href="#v:max">max</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:FutharkExe:Show:3"></span> Show <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a></span> <a href="src/Futhark.Test.html#line-74" class="link">Source</a> <a href="#t:FutharkExe" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:FutharkExe:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Test.html">Futhark.Test</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getValues" class="def">getValues</a> :: (<a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:MonadFail" title="Control.Monad.Compat">MonadFail</a> m, MonadIO m) =&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; m [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] <a href="src/Futhark.Test.html#getValues" class="link">Source</a> <a href="#v:getValues" class="selflink">#</a></p><div class="doc"><p>Get the actual core Futhark values corresponding to a <code><a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a></code>
 specification.  The first <code>FilePath</code> is the path of the <code>futhark</code>
 executable, and the second is the directory which file paths are
 read relative to.</p></div></div><div class="top"><p class="src"><a id="v:getValuesBS" class="def">getValuesBS</a> :: (<a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:MonadFail" title="Control.Monad.Compat">MonadFail</a> m, MonadIO m) =&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; m <a href="../utf8-string-1.0.2/Data-ByteString-Lazy-UTF8.html#t:ByteString" title="Data.ByteString.Lazy.UTF8">ByteString</a> <a href="src/Futhark.Test.html#getValuesBS" class="link">Source</a> <a href="#v:getValuesBS" class="selflink">#</a></p><div class="doc"><p>Extract a pretty representation of some <code><a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a></code>.  In the IO
 monad because this might involve reading from a file.  There is no
 guarantee that the resulting byte string yields a readable value.</p></div></div><div class="top"><p class="src"><a id="v:valuesAsVars" class="def">valuesAsVars</a> :: (MonadError Text m, MonadIO m) =&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a> -&gt; [(<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a>, <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:TypeName" title="Futhark.Server">TypeName</a>)] -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; m () <a href="src/Futhark.Test.html#valuesAsVars" class="link">Source</a> <a href="#v:valuesAsVars" class="selflink">#</a></p><div class="doc"><p>Make the provided <code><a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a></code> available as server-side variables.
 This may involve arbitrary server-side computation.  Error
 detection... dubious.</p></div></div><div class="top"><p class="src"><a id="v:compareValues" class="def">compareValues</a> :: <a href="../futhark-data-1.0.3.0/Futhark-Data-Compare.html#t:Tolerance" title="Futhark.Data.Compare">Tolerance</a> -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; [<a href="Futhark-Test.html#t:Mismatch" title="Futhark.Test">Mismatch</a>] <a href="#v:compareValues" class="selflink">#</a></p><div class="doc"><p>Compare two Futhark values for equality.</p></div></div><div class="top"><p class="src"><a id="v:checkResult" class="def">checkResult</a> :: (MonadError Text m, MonadIO m) =&gt; FilePath -&gt; [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; m () <a href="src/Futhark.Test.html#checkResult" class="link">Source</a> <a href="#v:checkResult" class="selflink">#</a></p><div class="doc"><p>Check that the result is as expected, and write files and throw
 an error if not.</p></div></div><div class="top"><p class="src"><a id="v:testRunReferenceOutput" class="def">testRunReferenceOutput</a> :: FilePath -&gt; Text -&gt; <a href="Futhark-Test-Spec.html#t:TestRun" title="Futhark.Test.Spec">TestRun</a> -&gt; FilePath <a href="src/Futhark.Test.html#testRunReferenceOutput" class="link">Source</a> <a href="#v:testRunReferenceOutput" class="selflink">#</a></p><div class="doc"><p>When/if generating a reference output file for this run, what
 should it be called?  Includes the &quot;data/&quot; folder.</p></div></div><div class="top"><p class="src"><a id="v:getExpectedResult" class="def">getExpectedResult</a> :: (<a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:MonadFail" title="Control.Monad.Compat">MonadFail</a> m, MonadIO m) =&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; Text -&gt; <a href="Futhark-Test-Spec.html#t:TestRun" title="Futhark.Test.Spec">TestRun</a> -&gt; m (<a href="Futhark-Test-Spec.html#t:ExpectedResult" title="Futhark.Test.Spec">ExpectedResult</a> [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>]) <a href="src/Futhark.Test.html#getExpectedResult" class="link">Source</a> <a href="#v:getExpectedResult" class="selflink">#</a></p><div class="doc"><p>Get the values corresponding to an expected result, if any.</p></div></div><div class="top"><p class="src"><a id="v:compileProgram" class="def">compileProgram</a> :: (MonadIO m, MonadError [Text] m) =&gt; [<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>] -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; FilePath -&gt; m (<a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>, <a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>) <a href="src/Futhark.Test.html#compileProgram" class="link">Source</a> <a href="#v:compileProgram" class="selflink">#</a></p><div class="doc"><p><code>compileProgram extra_options futhark backend program</code> compiles
 <code>program</code> with the command <code>futhark backend extra-options...</code>, and
 returns stdout and stderr of the compiler.  Throws an IO exception
 containing stderr if compilation fails.</p></div></div><div class="top"><p class="src"><a id="v:runProgram" class="def">runProgram</a> :: <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; FilePath -&gt; [<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>] -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; Text -&gt; <a href="Futhark-Test-Spec.html#t:Values" title="Futhark.Test.Spec">Values</a> -&gt; IO (ExitCode, <a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>, <a href="../utf8-string-1.0.2/Data-ByteString-UTF8.html#t:ByteString" title="Data.ByteString.UTF8">ByteString</a>) <a href="src/Futhark.Test.html#runProgram" class="link">Source</a> <a href="#v:runProgram" class="selflink">#</a></p><div class="doc"><p><code>runProgram futhark runner extra_options prog entry input</code> runs the
 Futhark program <code>prog</code> (which must have the <code>.fut</code> suffix),
 executing the <code>entry</code> entry point and providing <code>input</code> on stdin.
 The program must have been compiled in advance with
 <code><a href="Futhark-Test.html#v:compileProgram" title="Futhark.Test">compileProgram</a></code>.  If <code>runner</code> is non-null, then it is used as
 &quot;interpreter&quot; for the compiled program (e.g. <code>python</code> when using
 the Python backends).  The <code>extra_options</code> are passed to the
 program.</p></div></div><div class="top"><p class="src"><a id="v:readResults" class="def">readResults</a> :: (MonadIO m, MonadError Text m) =&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:Server" title="Futhark.Server">Server</a> -&gt; [<a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:VarName" title="Futhark.Server">VarName</a>] -&gt; m [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] <a href="src/Futhark.Test.html#readResults" class="link">Source</a> <a href="#v:readResults" class="selflink">#</a></p><div class="doc"><p>Read the given variables from a running server.</p></div></div><div class="top"><p class="src"><a id="v:ensureReferenceOutput" class="def">ensureReferenceOutput</a> :: (MonadIO m, MonadError [Text] m) =&gt; Maybe Int -&gt; <a href="Futhark-Test.html#t:FutharkExe" title="Futhark.Test">FutharkExe</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; FilePath -&gt; [<a href="Futhark-Test-Spec.html#t:InputOutputs" title="Futhark.Test.Spec">InputOutputs</a>] -&gt; m () <a href="src/Futhark.Test.html#ensureReferenceOutput" class="link">Source</a> <a href="#v:ensureReferenceOutput" class="selflink">#</a></p><div class="doc"><p>Ensure that any reference output files exist, or create them (by
 compiling the program with the reference compiler and running it on
 the input) if necessary.</p></div></div><div class="top"><p class="src"><a id="v:determineTuning" class="def">determineTuning</a> :: MonadIO m =&gt; Maybe FilePath -&gt; FilePath -&gt; m ([<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>], <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>) <a href="src/Futhark.Test.html#determineTuning" class="link">Source</a> <a href="#v:determineTuning" class="selflink">#</a></p><div class="doc"><p>Determine the --tuning options to pass to the program.  The first
 argument is the extension of the tuning file, or <code>Nothing</code> if none
 should be used.</p></div></div><div class="top"><p class="src"><a id="v:binaryName" class="def">binaryName</a> :: FilePath -&gt; FilePath <a href="src/Futhark.Test.html#binaryName" class="link">Source</a> <a href="#v:binaryName" class="selflink">#</a></p><div class="doc"><p>The name we use for compiled programs.</p></div></div><div class="top"><p class="src"><a id="v:futharkServerCfg" class="def">futharkServerCfg</a> :: FilePath -&gt; [<a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a>] -&gt; <a href="../futhark-server-1.1.2.0/Futhark-Server.html#t:ServerCfg" title="Futhark.Server">ServerCfg</a> <a href="src/Futhark.Test.html#futharkServerCfg" class="link">Source</a> <a href="#v:futharkServerCfg" class="selflink">#</a></p><div class="doc"><p>Create a Futhark server configuration suitable for use when
 testing/benchmarking Futhark programs.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Mismatch" class="def">Mismatch</a> <a href="#t:Mismatch" class="selflink">#</a></p><div class="doc"><p>Two values differ in some way.  The <code>Show</code> instance produces a
 human-readable explanation.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Mismatch">Instances</h4><details id="i:Mismatch" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Mismatch:Show:1"></span> Show <a href="Futhark-Test.html#t:Mismatch" title="Futhark.Test">Mismatch</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Mismatch:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../futhark-data-1.0.3.0/Futhark-Data-Compare.html">Futhark.Data.Compare</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Test.html#t:Mismatch" title="Futhark.Test">Mismatch</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Test.html#t:Mismatch" title="Futhark.Test">Mismatch</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Test.html#t:Mismatch" title="Futhark.Test">Mismatch</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Value" class="def">Value</a> <a href="#t:Value" class="selflink">#</a></p><div class="doc"><p>An efficiently represented Futhark value, represented as a shape
 vector and a value vector, which contains elements in row-major
 order.  The size of the value vector must be equal to the product
 of the shape vector.  This is not enforced by the representation,
 but consuming functions may give unexpected results if this
 invariant is broken.  Scalars are represented with an empty shape
 vector.</p><p>Use <code><a href="Futhark-Test.html#v:valueText" title="Futhark.Test">valueText</a></code> to get a human-readable representation, and <code>put</code>
 to obtain binary a representation.</p><p>The <code>Eq</code> instance is the naive one, meaning that no values
 containing NaNs will be considered equal.  Use the functions from
 <a href="../futhark-data-1.0.3.0/Futhark-Data-Compare.html">Futhark.Data.Compare</a> if this is not what you want.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Value">Instances</h4><details id="i:Value" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:Eq:1"></span> Eq <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Value:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../futhark-data-1.0.3.0/Futhark-Data.html">Futhark.Data</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:Show:2"></span> Show <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Value:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../futhark-data-1.0.3.0/Futhark-Data.html">Futhark.Data</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:Pretty:3"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></span> <a href="src/Futhark.Test.Values.html#line-27" class="link">Source</a> <a href="#t:Pretty" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Value:Pretty:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Futhark-Test-Values.html">Futhark.Test.Values</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:Binary:4"></span> Binary <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Value:Binary:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../futhark-data-1.0.3.0/Futhark-Data.html">Futhark.Data</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put">put</a> :: <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; Put</p><p class="src"><a href="#v:get">get</a> :: Get <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a></p><p class="src"><a href="#v:putList">putList</a> :: [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; Put</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Value:PutValue:5"></span> <a href="../futhark-data-1.0.3.0/Futhark-Data.html#t:PutValue" title="Futhark.Data">PutValue</a> [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>]</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Value:PutValue:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../futhark-data-1.0.3.0/Futhark-Data.html">Futhark.Data</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:putValue">putValue</a> :: [<a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a>] -&gt; Maybe <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> <a href="#v:putValue" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:valueText" class="def">valueText</a> :: <a href="Futhark-Test.html#t:Value" title="Futhark.Test">Value</a> -&gt; Text <a href="#v:valueText" class="selflink">#</a></p><div class="doc"><p>Construct a textual representation of the value as a strict text.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>