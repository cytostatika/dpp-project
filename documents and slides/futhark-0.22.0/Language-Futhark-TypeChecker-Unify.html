<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Language.Futhark.TypeChecker.Unify</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">futhark-0.22.0: An optimising compiler for a functional, array-oriented language.</span><ul class="links" id="page-menu"><li><a href="src/Language.Futhark.TypeChecker.Unify.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Language.Futhark.TypeChecker.Unify</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of unification and other core type system building
 blocks.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Constraint">Constraint</a><ul class="subs"><li>= <a href="#v:NoConstraint">NoConstraint</a> <a href="Language-Futhark-Syntax.html#t:Liftedness" title="Language.Futhark.Syntax">Liftedness</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li>| <a href="#v:ParamType">ParamType</a> <a href="Language-Futhark-Syntax.html#t:Liftedness" title="Language.Futhark.Syntax">Liftedness</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></li><li>| <a href="#v:Constraint">Constraint</a> <a href="Language-Futhark-Syntax.html#t:StructRetType" title="Language.Futhark.Syntax">StructRetType</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li>| <a href="#v:Overloaded">Overloaded</a> [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li>| <a href="#v:HasFields">HasFields</a> (Map <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>) <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li>| <a href="#v:Equality">Equality</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li>| <a href="#v:HasConstrs">HasConstrs</a> (Map <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>]) <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li>| <a href="#v:ParamSize">ParamSize</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></li><li>| <a href="#v:Size">Size</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li>| <a href="#v:UnknowableSize">UnknowableSize</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Usage">Usage</a></li><li class="src short"><a href="#v:mkUsage">mkUsage</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li class="src short"><a href="#v:mkUsage-39-">mkUsage'</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:Level">Level</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:Constraints">Constraints</a> = Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> (<a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a>, <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a>)</li><li class="src short"><span class="keyword">class</span> <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> m =&gt; <a href="#t:MonadUnify">MonadUnify</a> m <span class="keyword">where</span><ul class="subs"><li><a href="#v:getConstraints">getConstraints</a> :: m <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a></li><li><a href="#v:putConstraints">putConstraints</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; m ()</li><li><a href="#v:modifyConstraints">modifyConstraints</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a>) -&gt; m ()</li><li><a href="#v:newTypeVar">newTypeVar</a> :: <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> als =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; m (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim als)</li><li><a href="#v:newDimVar">newDimVar</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; m <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li><a href="#v:curLevel">curLevel</a> :: m <a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a></li><li><a href="#v:matchError">matchError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m a</li><li><a href="#v:unifyError">unifyError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; m a</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Rigidity">Rigidity</a><ul class="subs"><li>= <a href="#v:Rigid">Rigid</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></li><li>| <a href="#v:Nonrigid">Nonrigid</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:RigidSource">RigidSource</a><ul class="subs"><li>= <a href="#v:RigidArg">RigidArg</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></li><li>| <a href="#v:RigidRet">RigidRet</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>))</li><li>| <a href="#v:RigidLoop">RigidLoop</a></li><li>| <a href="#v:RigidSlice">RigidSlice</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></li><li>| <a href="#v:RigidRange">RigidRange</a></li><li>| <a href="#v:RigidBound">RigidBound</a> <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></li><li>| <a href="#v:RigidCond">RigidCond</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li><li>| <a href="#v:RigidUnify">RigidUnify</a></li><li>| <a href="#v:RigidOutOfScope">RigidOutOfScope</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></li><li>| <a href="#v:RigidCoerce">RigidCoerce</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:BreadCrumbs">BreadCrumbs</a></li><li class="src short"><a href="#v:noBreadCrumbs">noBreadCrumbs</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a></li><li class="src short"><a href="#v:hasNoBreadCrumbs">hasNoBreadCrumbs</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; Bool</li><li class="src short"><a href="#v:dimNotes">dimNotes</a> :: (<a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> a, <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m) =&gt; a -&gt; <a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; m <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a></li><li class="src short"><a href="#v:zeroOrderType">zeroOrderType</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> (<a href="Language-Futhark-Syntax.html#t:ShapeDecl" title="Language.Futhark.Syntax">ShapeDecl</a> dim), <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> as) =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim as -&gt; m ()</li><li class="src short"><a href="#v:arrayElemType">arrayElemType</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> (<a href="Language-Futhark-Syntax.html#t:ShapeDecl" title="Language.Futhark.Syntax">ShapeDecl</a> dim), <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> as) =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim as -&gt; m ()</li><li class="src short"><a href="#v:mustHaveConstr">mustHaveConstr</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>] -&gt; m ()</li><li class="src short"><a href="#v:mustHaveField">mustHaveField</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; m <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></li><li class="src short"><a href="#v:mustBeOneOf">mustBeOneOf</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m ()</li><li class="src short"><a href="#v:equalityType">equalityType</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> (<a href="Language-Futhark-Syntax.html#t:ShapeDecl" title="Language.Futhark.Syntax">ShapeDecl</a> dim), <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> as) =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim as -&gt; m ()</li><li class="src short"><a href="#v:normPatType">normPatType</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; m <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a></li><li class="src short"><a href="#v:normTypeFully">normTypeFully</a> :: (<a href="Language-Futhark-TypeChecker-Types.html#t:Substitutable" title="Language.Futhark.TypeChecker.Types">Substitutable</a> a, <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m) =&gt; a -&gt; m a</li><li class="src short"><a href="#v:instantiateEmptyArrayDims">instantiateEmptyArrayDims</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Syntax.html#t:RetTypeBase" title="Language.Futhark.Syntax">RetTypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als -&gt; m (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>])</li><li class="src short"><a href="#v:unify">unify</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m ()</li><li class="src short"><a href="#v:expect">expect</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m ()</li><li class="src short"><a href="#v:unifyMostCommon">unifyMostCommon</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; m (<a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>])</li><li class="src short"><a href="#v:doUnification">doUnification</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; [<a href="Language-Futhark.html#t:TypeParam" title="Language.Futhark">TypeParam</a>] -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; Either <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeError" title="Language.Futhark.TypeChecker.Monad">TypeError</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Constraint" class="def">Constraint</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#Constraint" class="link">Source</a> <a href="#t:Constraint" class="selflink">#</a></p><div class="doc"><p>A constraint on a yet-ambiguous type variable.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NoConstraint" class="def">NoConstraint</a> <a href="Language-Futhark-Syntax.html#t:Liftedness" title="Language.Futhark.Syntax">Liftedness</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ParamType" class="def">ParamType</a> <a href="Language-Futhark-Syntax.html#t:Liftedness" title="Language.Futhark.Syntax">Liftedness</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Constraint" class="def">Constraint</a> <a href="Language-Futhark-Syntax.html#t:StructRetType" title="Language.Futhark.Syntax">StructRetType</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Overloaded" class="def">Overloaded</a> [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HasFields" class="def">HasFields</a> (Map <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>) <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Equality" class="def">Equality</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:HasConstrs" class="def">HasConstrs</a> (Map <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>]) <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:ParamSize" class="def">ParamSize</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Size" class="def">Size</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></td><td class="doc"><p>Is not actually a type, but a term-level size,
 possibly already set to something specific.</p></td></tr><tr><td class="src"><a id="v:UnknowableSize" class="def">UnknowableSize</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></td><td class="doc"><p>A size that does not unify with anything -
 created from the result of applying a function
 whose return size is existential, or otherwise
 hiding a size.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Constraint">Instances</h4><details id="i:Constraint" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Constraint:Show:1"></span> Show <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-141" class="link">Source</a> <a href="#t:Constraint" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Constraint:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Constraint:Located:2"></span> <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-143" class="link">Source</a> <a href="#t:Constraint" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Constraint:Located:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:locOf">locOf</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a> -&gt; <a href="Language-Futhark-Core.html#t:Loc" title="Language.Futhark.Core">Loc</a> <a href="#v:locOf" class="selflink">#</a></p><p class="src"><a href="#v:locOfList">locOfList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a>] -&gt; <a href="Language-Futhark-Core.html#t:Loc" title="Language.Futhark.Core">Loc</a> <a href="#v:locOfList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Usage" class="def">Usage</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#Usage" class="link">Source</a> <a href="#t:Usage" class="selflink">#</a></p><div class="doc"><p>A usage that caused a type constraint.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Usage">Instances</h4><details id="i:Usage" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Usage:Show:1"></span> Show <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-100" class="link">Source</a> <a href="#t:Usage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Usage:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a>] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Usage:Pretty:2"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-111" class="link">Source</a> <a href="#t:Usage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Usage:Pretty:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Usage:Located:3"></span> <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-115" class="link">Source</a> <a href="#t:Usage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Usage:Located:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:locOf">locOf</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Core.html#t:Loc" title="Language.Futhark.Core">Loc</a> <a href="#v:locOf" class="selflink">#</a></p><p class="src"><a href="#v:locOfList">locOfList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a>] -&gt; <a href="Language-Futhark-Core.html#t:Loc" title="Language.Futhark.Core">Loc</a> <a href="#v:locOfList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:mkUsage" class="def">mkUsage</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#mkUsage" class="link">Source</a> <a href="#v:mkUsage" class="selflink">#</a></p><div class="doc"><p>Construct a <code><a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></code> from a location and a description.</p></div></div><div class="top"><p class="src"><a id="v:mkUsage-39-" class="def">mkUsage'</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#mkUsage%27" class="link">Source</a> <a href="#v:mkUsage-39-" class="selflink">#</a></p><div class="doc"><p>Construct a <code><a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a></code> that has just a location, but no particular
 description.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Level" class="def">Level</a> = Int <a href="src/Language.Futhark.TypeChecker.Unify.html#Level" class="link">Source</a> <a href="#t:Level" class="selflink">#</a></p><div class="doc"><p>The level at which a type variable is bound.  Higher means
 deeper.  We can only unify a type variable at level <code>i</code> with a type
 <code>t</code> if all type names that occur in <code>t</code> are at most at level <code>i</code>.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Constraints" class="def">Constraints</a> = Map <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> (<a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a>, <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraint" title="Language.Futhark.TypeChecker.Unify">Constraint</a>) <a href="src/Language.Futhark.TypeChecker.Unify.html#Constraints" class="link">Source</a> <a href="#t:Constraints" class="selflink">#</a></p><div class="doc"><p>Mapping from fresh type variables, instantiated from the type
 schemes of polymorphic functions, to (possibly) specific types as
 determined on application and the location of that application, or
 a partial constraint on their type.</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="../base-compat-0.11.2/Control-Monad-Compat.html#t:Monad" title="Control.Monad.Compat">Monad</a> m =&gt; <a id="t:MonadUnify" class="def">MonadUnify</a> m <span class="keyword">where</span> <a href="src/Language.Futhark.TypeChecker.Unify.html#MonadUnify" class="link">Source</a> <a href="#t:MonadUnify" class="selflink">#</a></p><div class="doc"><p>Monads that which to perform unification must implement this type
 class.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Language-Futhark-TypeChecker-Unify.html#v:getConstraints" title="Language.Futhark.TypeChecker.Unify">getConstraints</a>, <a href="Language-Futhark-TypeChecker-Unify.html#v:putConstraints" title="Language.Futhark.TypeChecker.Unify">putConstraints</a>, <a href="Language-Futhark-TypeChecker-Unify.html#v:newTypeVar" title="Language.Futhark.TypeChecker.Unify">newTypeVar</a>, <a href="Language-Futhark-TypeChecker-Unify.html#v:newDimVar" title="Language.Futhark.TypeChecker.Unify">newDimVar</a>, <a href="Language-Futhark-TypeChecker-Unify.html#v:curLevel" title="Language.Futhark.TypeChecker.Unify">curLevel</a>, <a href="Language-Futhark-TypeChecker-Unify.html#v:matchError" title="Language.Futhark.TypeChecker.Unify">matchError</a>, <a href="Language-Futhark-TypeChecker-Unify.html#v:unifyError" title="Language.Futhark.TypeChecker.Unify">unifyError</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:getConstraints" class="def">getConstraints</a> :: m <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#getConstraints" class="link">Source</a> <a href="#v:getConstraints" class="selflink">#</a></p><p class="src"><a id="v:putConstraints" class="def">putConstraints</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#putConstraints" class="link">Source</a> <a href="#v:putConstraints" class="selflink">#</a></p><p class="src"><a id="v:modifyConstraints" class="def">modifyConstraints</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a>) -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#modifyConstraints" class="link">Source</a> <a href="#v:modifyConstraints" class="selflink">#</a></p><p class="src"><a id="v:newTypeVar" class="def">newTypeVar</a> :: <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> als =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; m (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim als) <a href="src/Language.Futhark.TypeChecker.Unify.html#newTypeVar" class="link">Source</a> <a href="#v:newTypeVar" class="selflink">#</a></p><p class="src"><a id="v:newDimVar" class="def">newDimVar</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; m <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#newDimVar" class="link">Source</a> <a href="#v:newDimVar" class="selflink">#</a></p><p class="src"><a id="v:curLevel" class="def">curLevel</a> :: m <a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#curLevel" class="link">Source</a> <a href="#v:curLevel" class="selflink">#</a></p><p class="src"><a id="v:matchError" class="def">matchError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m a <a href="src/Language.Futhark.TypeChecker.Unify.html#matchError" class="link">Source</a> <a href="#v:matchError" class="selflink">#</a></p><p class="src"><a id="v:unifyError" class="def">unifyError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; m a <a href="src/Language.Futhark.TypeChecker.Unify.html#unifyError" class="link">Source</a> <a href="#v:unifyError" class="selflink">#</a></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MonadUnify">Instances</h4><details id="i:MonadUnify" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:MonadUnify:MonadUnify:1"></span> <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a></span> <a href="src/Language.Futhark.TypeChecker.Terms.Monad.html#line-479" class="link">Source</a> <a href="#t:MonadUnify" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:MonadUnify:MonadUnify:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Terms-Monad.html">Language.Futhark.TypeChecker.Terms.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getConstraints">getConstraints</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#getConstraints" class="link">Source</a> <a href="#v:getConstraints" class="selflink">#</a></p><p class="src"><a href="#v:putConstraints">putConstraints</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Unify.html#putConstraints" class="link">Source</a> <a href="#v:putConstraints" class="selflink">#</a></p><p class="src"><a href="#v:modifyConstraints">modifyConstraints</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Constraints" title="Language.Futhark.TypeChecker.Unify">Constraints</a>) -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> () <a href="src/Language.Futhark.TypeChecker.Unify.html#modifyConstraints" class="link">Source</a> <a href="#v:modifyConstraints" class="selflink">#</a></p><p class="src"><a href="#v:newTypeVar">newTypeVar</a> :: <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> als =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim als) <a href="src/Language.Futhark.TypeChecker.Unify.html#newTypeVar" class="link">Source</a> <a href="#v:newTypeVar" class="selflink">#</a></p><p class="src"><a href="#v:newDimVar">newDimVar</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#newDimVar" class="link">Source</a> <a href="#v:newDimVar" class="selflink">#</a></p><p class="src"><a href="#v:curLevel">curLevel</a> :: <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:Level" title="Language.Futhark.TypeChecker.Unify">Level</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#curLevel" class="link">Source</a> <a href="#v:curLevel" class="selflink">#</a></p><p class="src"><a href="#v:matchError">matchError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Unify.html#matchError" class="link">Source</a> <a href="#v:matchError" class="selflink">#</a></p><p class="src"><a href="#v:unifyError">unifyError</a> :: <a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> loc =&gt; loc -&gt; <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> -&gt; <a href="Language-Futhark-TypeChecker-Terms-Monad.html#t:TermTypeM" title="Language.Futhark.TypeChecker.Terms.Monad">TermTypeM</a> a <a href="src/Language.Futhark.TypeChecker.Unify.html#unifyError" class="link">Source</a> <a href="#v:unifyError" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Rigidity" class="def">Rigidity</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#Rigidity" class="link">Source</a> <a href="#t:Rigidity" class="selflink">#</a></p><div class="doc"><p>The ridigity of a size variable.  All rigid sizes are tagged with
 information about how they were generated.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Rigid" class="def">Rigid</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Nonrigid" class="def">Nonrigid</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Rigidity">Instances</h4><details id="i:Rigidity" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Rigidity:Eq:1"></span> Eq <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-194" class="link">Source</a> <a href="#t:Rigidity" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Rigidity:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Rigidity:Ord:2"></span> Ord <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-194" class="link">Source</a> <a href="#t:Rigidity" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Rigidity:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; Ordering</p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; Bool</p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; Bool</p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; Bool</p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; Bool</p><p class="src"><a href="#v:max">max</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Rigidity:Show:3"></span> Show <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-194" class="link">Source</a> <a href="#t:Rigidity" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Rigidity:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RigidSource" class="def">RigidSource</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#RigidSource" class="link">Source</a> <a href="#t:RigidSource" class="selflink">#</a></p><div class="doc"><p>The source of a rigid size.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RigidArg" class="def">RigidArg</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></td><td class="doc"><p>A function argument that is not a constant or variable name.</p></td></tr><tr><td class="src"><a id="v:RigidRet" class="def">RigidRet</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:QualName" title="Language.Futhark.Syntax">QualName</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>))</td><td class="doc"><p>An existential return size.</p></td></tr><tr><td class="src"><a id="v:RigidLoop" class="def">RigidLoop</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:RigidSlice" class="def">RigidSlice</a> (Maybe (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>)) <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></td><td class="doc"><p>Produced by a complicated slice expression.</p></td></tr><tr><td class="src"><a id="v:RigidRange" class="def">RigidRange</a></td><td class="doc"><p>Produced by a complicated range expression.</p></td></tr><tr><td class="src"><a id="v:RigidBound" class="def">RigidBound</a> <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></td><td class="doc"><p>Produced by a range expression with this bound.</p></td></tr><tr><td class="src"><a id="v:RigidCond" class="def">RigidCond</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a></td><td class="doc"><p>Mismatch in branches.</p></td></tr><tr><td class="src"><a id="v:RigidUnify" class="def">RigidUnify</a></td><td class="doc"><p>Invented during unification.</p></td></tr><tr><td class="src"><a id="v:RigidOutOfScope" class="def">RigidOutOfScope</a> <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:RigidCoerce" class="def">RigidCoerce</a></td><td class="doc"><p>Blank dimension in coercion.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:RigidSource">Instances</h4><details id="i:RigidSource" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RigidSource:Eq:1"></span> Eq <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-189" class="link">Source</a> <a href="#t:RigidSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RigidSource:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RigidSource:Ord:2"></span> Ord <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-189" class="link">Source</a> <a href="#t:RigidSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RigidSource:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; Ordering</p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; Bool</p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; Bool</p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; Bool</p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; Bool</p><p class="src"><a href="#v:max">max</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:RigidSource:Show:3"></span> Show <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-189" class="link">Source</a> <a href="#t:RigidSource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:RigidSource:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:RigidSource" title="Language.Futhark.TypeChecker.Unify">RigidSource</a>] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:BreadCrumbs" class="def">BreadCrumbs</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#BreadCrumbs" class="link">Source</a> <a href="#t:BreadCrumbs" class="selflink">#</a></p><div class="doc"><p>Unification failures can occur deep down inside complicated types
 (consider nested records).  We leave breadcrumbs behind us so we
 can report the path we took to find the mismatch.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:BreadCrumbs">Instances</h4><details id="i:BreadCrumbs" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:BreadCrumbs:Pretty:1"></span> <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a></span> <a href="src/Language.Futhark.TypeChecker.Unify.html#line-94" class="link">Source</a> <a href="#t:BreadCrumbs" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:BreadCrumbs:Pretty:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Language-Futhark-TypeChecker-Unify.html">Language.Futhark.TypeChecker.Unify</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:ppr" class="selflink">#</a></p><p class="src"><a href="#v:pprPrec">pprPrec</a> :: Int -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprPrec" class="selflink">#</a></p><p class="src"><a href="#v:pprList">pprList</a> :: [<a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a>] -&gt; <a href="Futhark-Util-Pretty.html#t:Doc" title="Futhark.Util.Pretty">Doc</a> <a href="#v:pprList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:noBreadCrumbs" class="def">noBreadCrumbs</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#noBreadCrumbs" class="link">Source</a> <a href="#v:noBreadCrumbs" class="selflink">#</a></p><div class="doc"><p>An empty path.</p></div></div><div class="top"><p class="src"><a id="v:hasNoBreadCrumbs" class="def">hasNoBreadCrumbs</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:BreadCrumbs" title="Language.Futhark.TypeChecker.Unify">BreadCrumbs</a> -&gt; Bool <a href="src/Language.Futhark.TypeChecker.Unify.html#hasNoBreadCrumbs" class="link">Source</a> <a href="#v:hasNoBreadCrumbs" class="selflink">#</a></p><div class="doc"><p>Is the path empty?</p></div></div><div class="top"><p class="src"><a id="v:dimNotes" class="def">dimNotes</a> :: (<a href="Language-Futhark-Core.html#t:Located" title="Language.Futhark.Core">Located</a> a, <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m) =&gt; a -&gt; <a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a> -&gt; m <a href="Language-Futhark-TypeChecker-Monad.html#t:Notes" title="Language.Futhark.TypeChecker.Monad">Notes</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#dimNotes" class="link">Source</a> <a href="#v:dimNotes" class="selflink">#</a></p><div class="doc"><p>Retrieve notes describing the purpose or origin of the given
 <code><a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a></code>.  The location is used as the *current* location, for the
 purpose of reporting relative locations.</p></div></div><div class="top"><p class="src"><a id="v:zeroOrderType" class="def">zeroOrderType</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> (<a href="Language-Futhark-Syntax.html#t:ShapeDecl" title="Language.Futhark.Syntax">ShapeDecl</a> dim), <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> as) =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim as -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#zeroOrderType" class="link">Source</a> <a href="#v:zeroOrderType" class="selflink">#</a></p><div class="doc"><p>Assert that this type must be zero-order.</p></div></div><div class="top"><p class="src"><a id="v:arrayElemType" class="def">arrayElemType</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> (<a href="Language-Futhark-Syntax.html#t:ShapeDecl" title="Language.Futhark.Syntax">ShapeDecl</a> dim), <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> as) =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="../base-compat-0.11.2/Data-String-Compat.html#t:String" title="Data.String.Compat">String</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim as -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#arrayElemType" class="link">Source</a> <a href="#v:arrayElemType" class="selflink">#</a></p><div class="doc"><p>Assert that this type must be valid as an array element.</p></div></div><div class="top"><p class="src"><a id="v:mustHaveConstr" class="def">mustHaveConstr</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; [<a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a>] -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#mustHaveConstr" class="link">Source</a> <a href="#v:mustHaveConstr" class="selflink">#</a></p><div class="doc"><p>In <code>mustHaveConstr usage c t fs</code>, the type <code>t</code> must have a
 constructor named <code>c</code> that takes arguments of types <code>ts</code>.</p></div></div><div class="top"><p class="src"><a id="v:mustHaveField" class="def">mustHaveField</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Core.html#t:Name" title="Language.Futhark.Core">Name</a> -&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; m <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#mustHaveField" class="link">Source</a> <a href="#v:mustHaveField" class="selflink">#</a></p><div class="doc"><p>Assert that some type must have a field with this name and type.</p></div></div><div class="top"><p class="src"><a id="v:mustBeOneOf" class="def">mustBeOneOf</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; [<a href="Language-Futhark-Syntax.html#t:PrimType" title="Language.Futhark.Syntax">PrimType</a>] -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#mustBeOneOf" class="link">Source</a> <a href="#v:mustBeOneOf" class="selflink">#</a></p><div class="doc"><p>Assert that this type must be one of the given primitive types.</p></div></div><div class="top"><p class="src"><a id="v:equalityType" class="def">equalityType</a> :: (<a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m, <a href="../mainland-pretty-0.7.1/Text-PrettyPrint-Mainland-Class.html#t:Pretty" title="Text.PrettyPrint.Mainland.Class">Pretty</a> (<a href="Language-Futhark-Syntax.html#t:ShapeDecl" title="Language.Futhark.Syntax">ShapeDecl</a> dim), <a href="../base-compat-0.11.2/Data-Monoid-Compat.html#t:Monoid" title="Data.Monoid.Compat">Monoid</a> as) =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> dim as -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#equalityType" class="link">Source</a> <a href="#v:equalityType" class="selflink">#</a></p><div class="doc"><p>Assert that this type must support equality.</p></div></div><div class="top"><p class="src"><a id="v:normPatType" class="def">normPatType</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; m <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#normPatType" class="link">Source</a> <a href="#v:normPatType" class="selflink">#</a></p><div class="doc"><p>Replace any top-level type variable with its substitution.</p></div></div><div class="top"><p class="src"><a id="v:normTypeFully" class="def">normTypeFully</a> :: (<a href="Language-Futhark-TypeChecker-Types.html#t:Substitutable" title="Language.Futhark.TypeChecker.Types">Substitutable</a> a, <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m) =&gt; a -&gt; m a <a href="src/Language.Futhark.TypeChecker.Unify.html#normTypeFully" class="link">Source</a> <a href="#v:normTypeFully" class="selflink">#</a></p><div class="doc"><p>Replace all type variables with their substitution.</p></div></div><div class="top"><p class="src"><a id="v:instantiateEmptyArrayDims" class="def">instantiateEmptyArrayDims</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Rigidity" title="Language.Futhark.TypeChecker.Unify">Rigidity</a> -&gt; <a href="Language-Futhark-Syntax.html#t:RetTypeBase" title="Language.Futhark.Syntax">RetTypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als -&gt; m (<a href="Language-Futhark-Syntax.html#t:TypeBase" title="Language.Futhark.Syntax">TypeBase</a> (<a href="Language-Futhark-Syntax.html#t:DimDecl" title="Language.Futhark.Syntax">DimDecl</a> <a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>) als, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>]) <a href="src/Language.Futhark.TypeChecker.Unify.html#instantiateEmptyArrayDims" class="link">Source</a> <a href="#v:instantiateEmptyArrayDims" class="selflink">#</a></p><div class="doc"><p>Instantiate existential context in return type.</p></div></div><div class="top"><p class="src"><a id="v:unify" class="def">unify</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#unify" class="link">Source</a> <a href="#v:unify" class="selflink">#</a></p><div class="doc"><p>Unifies two types.</p></div></div><div class="top"><p class="src"><a id="v:expect" class="def">expect</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; m () <a href="src/Language.Futhark.TypeChecker.Unify.html#expect" class="link">Source</a> <a href="#v:expect" class="selflink">#</a></p><div class="doc"><p><code>expect super sub</code> checks that <code>sub</code> is a subtype of <code>super</code>.</p></div></div><div class="top"><p class="src"><a id="v:unifyMostCommon" class="def">unifyMostCommon</a> :: <a href="Language-Futhark-TypeChecker-Unify.html#t:MonadUnify" title="Language.Futhark.TypeChecker.Unify">MonadUnify</a> m =&gt; <a href="Language-Futhark-TypeChecker-Unify.html#t:Usage" title="Language.Futhark.TypeChecker.Unify">Usage</a> -&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a> -&gt; m (<a href="Language-Futhark-Syntax.html#t:PatType" title="Language.Futhark.Syntax">PatType</a>, [<a href="Language-Futhark-Core.html#t:VName" title="Language.Futhark.Core">VName</a>]) <a href="src/Language.Futhark.TypeChecker.Unify.html#unifyMostCommon" class="link">Source</a> <a href="#v:unifyMostCommon" class="selflink">#</a></p><div class="doc"><p>Like unification, but creates new size variables where mismatches
 occur.  Returns the new dimensions thus created.</p></div></div><div class="top"><p class="src"><a id="v:doUnification" class="def">doUnification</a> :: <a href="Language-Futhark-Core.html#t:SrcLoc" title="Language.Futhark.Core">SrcLoc</a> -&gt; [<a href="Language-Futhark.html#t:TypeParam" title="Language.Futhark">TypeParam</a>] -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> -&gt; Either <a href="Language-Futhark-TypeChecker-Monad.html#t:TypeError" title="Language.Futhark.TypeChecker.Monad">TypeError</a> <a href="Language-Futhark-Syntax.html#t:StructType" title="Language.Futhark.Syntax">StructType</a> <a href="src/Language.Futhark.TypeChecker.Unify.html#doUnification" class="link">Source</a> <a href="#v:doUnification" class="selflink">#</a></p><div class="doc"><p>Perform a unification of two types outside a monadic context.
 The type parameters are allowed to be instantiated; all other types
 are considered rigid.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>